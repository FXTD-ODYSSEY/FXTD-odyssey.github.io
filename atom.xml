<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ™ºä¼¤å¸çš„ä¸ªäººåšå®¢</title>
  
  <subtitle>å²æœˆä¸é¥¶äººï¼Œæˆ‘äº¦æœªæ›¾é¥¶è¿‡å²æœˆã€‚</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.l0v0.com/"/>
  <updated>2022-11-09T02:37:04.639Z</updated>
  <id>https://blog.l0v0.com/</id>
  
  <author>
    <name>æ™ºä¼¤å¸</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>FBX äºŒè¿›åˆ¶æ•°æ®è§£æ</title>
    <link href="https://blog.l0v0.com/posts/8207ba23.html"/>
    <id>https://blog.l0v0.com/posts/8207ba23.html</id>
    <published>2022-11-06T08:38:37.000Z</published>
    <updated>2022-11-09T02:37:04.639Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;æœ€è¿‘é‡åˆ°äº†ä¸€ä¸ªæ¯”è¾ƒéš¾æçš„éœ€æ±‚ï¼Œå¥½ä¸å®¹æ˜“è§£å†³äº†ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚<br>&emsp;&emsp;éœ€æ±‚æ˜¯è¿™æ ·çš„ï¼Œå…¬å¸æœ‰å¤§ä½¬åœ¨ motionbuilder å†™äº†æ’ä»¶ï¼Œåˆ©ç”¨ mobu API åšäº†ä¸€ä¸ªè‡ªå®šä¹‰çš„èŠ‚ç‚¹å¹¶åœ¨é‡Œé¢é€šè¿‡ <a href="https://help.autodesk.com/view/MOBPRO/2020/ENU/?guid=MotionBuilder_SDK_cpp_ref_class_f_b_model_html#a338af922f322871b1001d527851ec995">FBXStore</a> API å­˜å…¥äº†è‡ªå®šä¹‰æ•°æ®ã€‚<br>&emsp;&emsp;æˆ‘éœ€è¦å°†è¿™äº›æ“ä½œé€šè¿‡ Python FBXSDK æ¥å®Œæˆè¿™äº›æ•°æ®çš„å†™å…¥ã€‚<br>&emsp;&emsp;ä¸»è¦åŸå› æ˜¯ motionbuilder çš„ç¨³å®šæ€§ä¸å¯é ï¼Œå¦‚æœå¯ä»¥åˆ©ç”¨çº¯å¤–éƒ¨è°ƒç”¨ FBXSDK çš„å½¢å¼è§£å†³é—®é¢˜ï¼Œå°±ä¸éœ€è¦ä¾èµ– mobu äº†ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ç”¨ FBXSDK æ¥è¿˜åŸè‡ªå®šä¹‰èŠ‚ç‚¹æ“ä½œéƒ½å¥½è¯´ã€‚<br>&emsp;&emsp;ä¸»è¦è›‹ç–¼çš„åœ°æ–¹åœ¨äºéœ€è¦è§£å†³ FBXStore API è°ƒç”¨èƒŒåæ€ä¹ˆè½¬æ¢æˆäºŒè¿›åˆ¶çš„é—®é¢˜ã€‚</p></blockquote><h2 id="motion-builder-C-æ’ä»¶ç¼–è¯‘"><a href="#motion-builder-C-æ’ä»¶ç¼–è¯‘" class="headerlink" title="motion builder C++ æ’ä»¶ç¼–è¯‘"></a>motion builder C++ æ’ä»¶ç¼–è¯‘</h2><blockquote><p>&emsp;&emsp;åœ¨ motion builder çš„å®‰è£…è·¯å¾„æœ‰ <code>OpenRealitySDK</code> æ–‡ä»¶å¤¹ï¼Œé‡Œé¢çš„ samples æœ‰å¾ˆå¤šå¼€å‘ mobu çš„å‚è€ƒä»£ç ã€‚<br>&emsp;&emsp;å…¶ä¸­æ¯”è¾ƒå…·æœ‰ä»£è¡¨æ€§çš„è„šæœ¬å°±æ˜¯ <code>OpenRealitySDK\samples\devices\devicecamera\ordevicecamera_device.cxx</code><br>&emsp;&emsp;è¿™ä¸ªè„šæœ¬å°±å®šä¹‰æ€ä¹ˆå°†è‡ªå®šä¹‰æ•°æ®å­˜å…¥ FBX å½“ä¸­ï¼Œå¹¶ä¸”åˆ©ç”¨ <code>FbxRetrieve</code> æ–¹æ³•å°†åŠŸèƒ½è¯»å–å›æ¥ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªä¸œè¥¿ç¼–è¯‘å‡ºæ¥ä½œä¸ºæˆ‘ä»¬è¿™æ¬¡æµ‹è¯•çš„å†…å®¹ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;é»˜è®¤ motionbuilder çš„ samples é‡Œé¢æä¾›äº† sln å·¥ç¨‹ï¼Œå¯ä»¥ç›´æ¥ç”¨ VS æ‰“å¼€ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/8207ba23/n_v2086b51bf6afa43e8952472613069d6e3.png" alt="image"></p><blockquote><p>&emsp;&emsp;æ‰“å¼€ä¹‹åéœ€è¦å°†å¹³å°å·¥å…·é›†å‡çº§åˆ°æœ€æ–°çš„ VS ç‰ˆæ”¯æŒçš„å·¥å…·é›†ï¼Œé»˜è®¤æ˜¯ 2012 å·¥å…·é›†å¤ªè¿‡å¤è€äº†ã€‚<br>&emsp;&emsp;æ”¹å®Œä¹‹åæœ¬æƒ³ç€æ„‰å¿«åœ°ç¼–è¯‘ï¼Œç„¶è€Œè¿™æ ·ä¼šæŠ¥é”™ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/8207ba23/n_v2a6310a64d7e4473aa71f51f191d1c9ab.png" alt="image"></p><blockquote><p>&emsp;&emsp;è¿™ä¸ªé—®é¢˜åªèƒ½å½’ç»“ä¸ºæ–°çš„å¹³å°å·¥å…·é›†å·²ç»å»æ‰äº†æ”¯æŒï¼Œä½†æ˜¯å¤´æ–‡ä»¶ä¾æ—§å¼•å…¥ç›¸åº”çš„æ–‡ä»¶ï¼Œè§£å†³ä¹Ÿå¾ˆç®€å•ï¼Œå°†æŠ¥é”™çš„é‚£ä¸€è¡Œæ³¨é‡Šå³å¯ã€‚</p></blockquote><h2 id=""><a href="#" class="headerlink" title=""></a><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/8207ba23/n_v2c8da73f2b30b44ffa1a28b120ce44a47.png" alt="image"></h2><blockquote><p>&emsp;&emsp;ç¼–è¯‘å®Œæˆä¼šé»˜è®¤å»åˆ° <code>bin\x64\plugins</code> çš„ç›®å½•ï¼Œè¿™æ ·åªè¦é‡å¯ motion builder å°±èƒ½åŠ è½½åˆ°è¿™ä¸ª dll äº†ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/8207ba23/n_v25ed2de89967144a2818f413f2ace29eb.png" alt="image"></p><blockquote><p>&emsp;&emsp;è¿™æ ·å°†è¿™ä¸ªå›¾æ ‡æ‹–æ‹½åˆ°åœºæ™¯å°±å¯ä»¥åˆ›å»ºä¸€ä¸ª device.<br>&emsp;&emsp;å°†è¿™åœºæ™¯ä»¥ ascii çš„æ ¼å¼ä¿å­˜ã€‚<br>&emsp;&emsp;æ£€æŸ¥ä¿å­˜çš„ FBX æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ° FBXStore çš„å†™å…¥é€»è¾‘ï¼Œä¼šå°†ä¿¡æ¯å†™å…¥åˆ°èŠ‚ç‚¹çš„ <code>MoBuAttrBlindData</code> å±æ€§ä¸Š</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/8207ba23/n_v237187ca650284706973961105736d6fb.png" alt="image"></p><blockquote><p>&emsp;&emsp;å­˜å‚¨å‡ºæ¥å¯ä»¥çœ‹åˆ°ç›¸åº”çš„ä¿¡æ¯ã€‚<br>&emsp;&emsp;è¿™é‡Œå®˜æ–¹çš„æ’ä»¶å°†ä¿¡æ¯è½¬æˆäº† KString æ‰€ä»¥é‡Œé¢çš„ä¿¡æ¯ä¹Ÿæ˜¯ä»¥ FBX ASCII çš„å½¢å¼å­˜åœ¨ã€‚<br>&emsp;&emsp;ä½†å¦‚æœå°† FBX å­˜æˆ Binary æ¨¡å¼ï¼Œç„¶åå†ç”¨ Python FBXSDK æ¥è½¬å­˜æˆ ASCII çš„è¯ï¼Œè¿™äº› FBXStore çš„æ•°æ®ä¼šè½¬æˆ base64 çš„äºŒè¿›åˆ¶æ•°æ®ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/8207ba23/n_v288775b70604e49f2a3c93659049bdd50.png" alt="image"></p><blockquote><p>&emsp;&emsp;å¦‚æœç”¨ base64 è§£ç ï¼Œå¯ä»¥çœ‹åˆ°é‡Œé¢å­˜å‚¨çš„äºŒè¿›åˆ¶æ•°æ®ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line">in_data = <span class="string">r&quot;cBsAAAABAAAABQAAAAhDb21tVHlwZUkQAAAANAAAAAEAAAAFAAAAB1ZlcnNpb25JUQMAAGIAAAADAAAAGwAAAAZTZXJpYWxJAQAAAEkAlgAAUwwAAABTY2VuZQABTW9kZWycAAAABAAAACQAAAAJU2ltdWxhdG9yRAAAAAAAAPA/RAAAAAAAAPA/RAAAAAAAAAAARAAAAAAAAAAAwwAAAAIAAAATAAAAB05ldHdvcmtTCQAAADEyNy4wLjAuMUm5CwAA9gAAAAIAAAAaAAAADFNoYXJlZE1lbW9yeVMKAAAASE1DX1NITV9WMVMGAAAAMDAwMDAwFAEAAAEAAAAJAAAACFNldHRpbmdzRAAAAAAAAAAAMgEAAAEAAAAFAAAADFNhbXBsaW5nTW9kZUkAAAAAVAEAAAEAAAAFAAAAEEluc3RydW1lbnRBY3RpdmVJAQAAAG0BAAABAAAABQAAAAdWZXJzaW9uSVEDAACOAQAAAQAAAAUAAAAPTGVuc1RhYmxlTG9hZGVkSQAAAADbAQAABgAAAC4AAAASTWFudWFsTW9kZVNldHRpbmdzSQAAAABEBzDzdETpTEBEAAAAAACARkBJAAAAAEQAAAAAAAAAAEQAAAAAAAAAAP4BAAACAAAACgAAAAxJbnZlcnRWYWx1ZXNJAAAAAEkAAAAAHwIAAAEAAAAJAAAAC0FzcGVjdFJhdGlvRFVVVVVVVfU/QwIAAAEAAAAJAAAADlpvb21NdWx0aXBsaWVyRAAAAAAAAPA/aAIAAAEAAAAJAAAAD05vZGFsTXVsdGlwbGllckQAAAAAAABZQIgCAAABAAAABQAAAA5BbmdsZUluRGVncmVlc0kAAAAAywIAAAQAAAAkAAAAEkVuY29kZXJDYWxpYnJhdGlvbkQAAADgzxJjQUQAAADgzxJjwUQAAADgzxJjQUQAAADgzxJjwRsDAAAGAAAANgAAAA1TdHVkaW9PZmZzZXRzRAAAAAAAAAAARAAAAAAAAAAARAAAAAAAAAAARAAAAAAAAAAARAAAAAAAAAAARAAAAAAAAAAANAMAAAEAAAAFAAAAB1ZlcnNpb25JUQMAAE8DAAABAAAABQAAAAlTeW5jRGVsYXlJBAAAAAAAAAAAAAAAAAAAAAA=&quot;</span></span><br><span class="line"></span><br><span class="line">output_path = <span class="string">r&quot;G:\_TEMP\2022-11-1\test_device.bin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(output_path,<span class="string">&#x27;wb&#x27;</span>)<span class="keyword">as</span> wf:</span><br><span class="line">    wf.write(base64.b64decode(in_data))</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/8207ba23/n_v2c9af2c88fe7d412b8a9f65a2da99ebf0.png" alt="image"></p><blockquote><p>&emsp;&emsp;VScode å®‰è£… Hex Editor å¯ä»¥æŸ¥çœ‹äºŒè¿›åˆ¶æ•°æ®ã€‚<br>&emsp;&emsp;è€Œæˆ‘è¿™è¾¹éœ€è¦æƒ³åŠæ³•ç”¨ Python å†™å…¥äºŒè¿›åˆ¶æ•°æ®ï¼Œä»è€Œæ‘†è„± motion builder çš„ä¾èµ–ã€‚</p></blockquote><h2 id="FBX-äºŒè¿›åˆ¶"><a href="#FBX-äºŒè¿›åˆ¶" class="headerlink" title="FBX äºŒè¿›åˆ¶"></a>FBX äºŒè¿›åˆ¶</h2><p>FBX æ•°æ®æ ¼å¼<br><a href="./c12b915c.html">RenderDoc Python å¼€å‘ FBX å¯¼å‡ºå·¥å…·</a></p><blockquote><p>&emsp;&emsp;ä¹‹å‰å†™ renderdoc å¯¼å‡º FBX æ’ä»¶çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ—¶ FBX ASCII æ ¼å¼ï¼Œé€šè¿‡å°†æ•°æ®å†™å…¥åˆ° FBX ASCII å¯¹åº”çš„ä½ç½®ã€‚FBX å°±å¯ä»¥è¢«è¯»å–åˆ°ã€‚<br>&emsp;&emsp;å½“æ—¶è¸©äº†çš„å‘ä¹Ÿå¯ä»¥ä»ä¸­çª¥æ¢åˆ° FBX å­˜å‚¨çš„ç»“æ„ã€‚</p></blockquote><p>Python äºŒè¿›åˆ¶å¤„ç†<br><a href="./5c00f85e.html">Maya è¾“å‡ºé¡¶ç‚¹åŠ¨ç”»åˆ°å¼•æ“</a></p><blockquote><p>&emsp;&emsp;é€šè¿‡ä¸Šé¢çš„æ–‡ç« ï¼Œå¯ä»¥äº†è§£åˆ° Python å†™å…¥äºŒè¿›åˆ¶æ•°æ®å¯ä»¥ä¾èµ–å†…ç½®çš„ <a href="https://docs.python.org/3/library/struct.html">struct</a> åŒ…ã€‚<br>&emsp;&emsp;å†™å…¥æ•°æ®éœ€è¦äº†è§£ C++ çš„æ•°æ®ç±»å‹çš„é•¿åº¦ï¼ŒæŒ‰ç…§é•¿åº¦å’Œæ•°æ®çš„å†™å…¥é¡ºåºå°±å¯ä»¥ç”¨ Python è¿˜åŸäºŒè¿›åˆ¶æ•°æ®ã€‚</p></blockquote><hr><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/8207ba23/n_v2260d987c1c924d8e92baf610813d12c2.png" alt="image"></p><blockquote><p>&emsp;&emsp;é€šè¿‡ C++ æºç å¯ä»¥çŸ¥é“å†™å…¥äº†è¿™äº›æ•°æ®</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/8207ba23/n_v2c9af2c88fe7d412b8a9f65a2da99ebf0.png" alt="image"></p><blockquote><p>&emsp;&emsp;é€šè¿‡æºç å’ŒäºŒè¿›åˆ¶çš„å¯¹æ¯”ï¼Œå¯ä»¥çª¥æ¢åˆ°å…¶ä¸­æ„æ€è§„åˆ™<br>&emsp;&emsp;æ¯”å¦‚åˆ©ç”¨ C++ å¯ä»¥çŸ¥é“ Version æ•°æ®å†™å…¥çš„æ—¶ <code>0x0351</code> çš„æ•°æ®</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> struct</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>struct.pack(<span class="string">&quot;i&quot;</span>,<span class="number">0x0351</span>) </span><br><span class="line"><span class="string">b&#x27;Q\x03\x00\x00&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä½¿ç”¨ python å°† <code>0x0351</code> è½¬æ¢ä¸ºæ•´å½¢ä¼šè¿”å› <code>Q\x03\x00\x00</code></p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/8207ba23/n_v23dbc5f16d9bb480697e9f37bba7b3802.png" alt="image"></p><blockquote><p>&emsp;&emsp;æ­£å¥½å’Œ äºŒè¿›åˆ¶ æ•°æ®æ˜¯å¯¹åº”çš„ï¼Œä¸­é—´çš„ I åˆ™è¡¨ç¤ºæ˜¯ Int æ•´å½¢æ•°æ®ã€‚<br>&emsp;&emsp;è¿™ä¸ªè§„å¾‹æˆ‘ç»è¿‡æˆ‘å¯¹äºŒè¿›åˆ¶ä¸å°‘æ•°æ®çš„è§£è¯»æ€»ç»“å‡ºæ¥çš„ã€‚ä½†è¿˜æœ‰ä¸€äº›æ•°æ®çš„å«ä¹‰æ˜¯æœªçŸ¥çš„ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;åæ¥åœ¨ç½‘ä¸Šæœç´¢äº†ä¸€ä¸‹è¿™ä¸ªäºŒè¿›åˆ¶è§„åˆ™ï¼Œå‘ç° Blender å®˜æ–¹æä¾›äº† FBX äºŒè¿›åˆ¶çš„è§£è¯»ã€‚ <a href="https://code.blender.org/2013/08/fbx-binary-file-format-specification/">é“¾æ¥</a><br>&emsp;&emsp;è¿™ä¸ªæ–‡ç« æœ‰éå¸¸å®Œæ•´çš„ FBX äºŒè¿›åˆ¶è§„åˆ™ã€‚<br>&emsp;&emsp;é€šè¿‡è¿™ä¸ªè§„åˆ™å¯ä»¥è§£è¯»å‡ºæ•´ä¸ª FBX äºŒè¿›åˆ¶æ•°æ®çš„å­˜å‚¨æ–¹å¼ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;æ¯”å¦‚å¼€å¤´çš„ <code>CommmType</code> å‰é¢æœ‰14ä½æ•°æ®ï¼Œé™¤å»å¼€å¤´ç¬¬ä¸€ä¸ª <code>0x70</code> æ•°æ®ï¼Œåé¢çš„æ•°æ®åˆ†åˆ«å¯¹åº” <code>EndOffset</code> <code>NumProperties</code> <code>PropertyListLen</code> <code>NameLen</code><br>&emsp;&emsp;å®Œå…¨å’Œ Node Record Format å¯¹åº”ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ç†è§£äº†æ•°æ®çš„å­˜å‚¨æ–¹å¼ä¹‹åï¼Œå°±å¯ä»¥å¾ˆé¡ºåˆ©ç”¨ Python å†™å…¥åŒæ ·çš„äºŒè¿›åˆ¶æ•°æ®ã€‚</p></blockquote><h2 id="FBXSDK-å†™å…¥é—®é¢˜"><a href="#FBXSDK-å†™å…¥é—®é¢˜" class="headerlink" title="FBXSDK å†™å…¥é—®é¢˜"></a>FBXSDK å†™å…¥é—®é¢˜</h2><blockquote><p>&emsp;&emsp;åªæ˜¯æˆ‘å¤„ç†çš„æ—¶å€™å‘ç° Python FBXSDK æ— æ³•ç›´æ¥å†™å…¥ blob äºŒè¿›åˆ¶æ•°æ®ã€‚<br>&emsp;&emsp;åŸå› æ˜¯ <code>FbxProperty.Set</code> ä¸æ¥å— bytes æ•°æ®ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/8207ba23/n_v2e4128595ef4f4b49b00c9f6ff7577ded.png" alt="image"></p><blockquote><p>&emsp;&emsp;è¿™ä¸ªéƒ¨åˆ†æ˜¯ç”¨ C++ æ¨¡æ¿å®ç°çš„ï¼Œå¯èƒ½è¿™ä¸ªåŠŸèƒ½å¹¶æ²¡æœ‰æ˜ å°„ç»™ Python FBXSDKï¼Œå¯¼è‡´åŠŸèƒ½ç¼ºå¤±ã€‚(ä¹Ÿåªèƒ½è¯´è¿™ä¸ªåŠŸèƒ½å°‘ç”¨å¾—å¾ˆ)<br>&emsp;&emsp;ä¸ºäº†ä¿è¯æ•°æ®çš„é•¿åº¦ï¼Œæˆ‘çš„å¤„ç†æ–¹å¼æ˜¯ç”¨ FbxString å†™å…¥ç›¸åŒé•¿åº¦çš„ å­—ç¬¦ä¸²æ¡© ï¼Œæ¯”å¦‚ä¸€å † <code>*</code> çš„å­—ç¬¦ä¸²ã€‚<br>&emsp;&emsp;ä¿å­˜å‡ºå»çš„ FBX äºŒè¿›åˆ¶æ–‡ä»¶å†åº¦ç”¨ Python è¯»å–ï¼Œç„¶åå°† å­—ç¬¦ä¸²æ¡© æ›¿æ¢ä¸ºçœŸå®çš„ äºŒè¿›åˆ¶ æ•°æ®ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;è¿™æ¬¡æ·±åº¦æŒ–æ˜äº† FBX äºŒè¿›åˆ¶æ ¼å¼ï¼Œå¯¹ FBX çš„æ–‡ä»¶å¤„ç†æ›´åŠ å¾—å¿ƒåº”æ‰‹ğŸ˜„~</p></blockquote>]]></content>
    
    <summary type="html">
    
      FBXSDK å¦‚ä½•å†™å…¥äºŒè¿›åˆ¶
    
    </summary>
    
      <category term="CG" scheme="https://blog.l0v0.com/categories/CG/"/>
    
      <category term="FBX" scheme="https://blog.l0v0.com/categories/CG/FBX/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>MetaHuman è¯¦è§£</title>
    <link href="https://blog.l0v0.com/posts/ce876a0f.html"/>
    <id>https://blog.l0v0.com/posts/ce876a0f.html</id>
    <published>2022-09-13T02:43:43.000Z</published>
    <updated>2022-11-09T02:37:04.685Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .æç¤º(ç¥ç§˜å·ç  + å…‰å­)</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="551c9e8642c9e42d958ef485e9eec19d5546a1084dcc1ed6445a8eff2c322705">ffccc43fa392a55ed6920a09e7c06620a04bb49e6c5b39e25ca054e87d8892d92ba5ab273f347aa811c7cace5adec7d5eb81a888b29ce2ded9973765e51328df4ba42fc62d443e36ead3bdb1a819fbd3a3d83b361ea905669582b5c13d7ade3c95d1c5c88c8546ef11150cdd9e248cd632da96784017f6bdd3fe5126458c890d96868266dcb7749a1b0157f69d7164edd837493a307f409f68af6de0b05f5980c2229d8ef71354d7de32535227439f1ea8f7f21d22c48c7ca8e94047c0ec52290ba98b176a2793fbac8a54a1612589656b8964c072772617c9723f86d662c99fc2bc7ebedba6d7e4d3cd506d23c8e45ede39e9bf76c34397bd114a3c7e71e7c2862c6e90ad25ee0f92b6715c41a0d29810dfa9f3e05b81a295b50a99f3844721c8123ec2abeac6cbd3c8528078ecf3022f2332b63b362b78998de4cf4b902a0fc73991ebc5e609aa41f6b77fca00c940db7c3a182d58e076c16b9e7d994d1f24124f13c0c95ad55bcb02d9e83509f5a190c94723e1335143b8a9cc4174719b4809a4fbb5259ea76035425d147492bc97e9e77b6322c202efeea25363d019b5f2e84406eee17c07a3e99147c21b772e9edd72c4d44df8526ad816af741cccd1c8fc976b3fc54f2cf246b6a0d7f111696bc2b5c910df2574719b26e3e558b8710598ac221fe05de1f2d35b5ef256848a2cb2866bc569119f017c4899dea945ba8feb71b2332df05ce7e8f84ce9b137af5f749a95baa3e3593e262b5b3bcd0de150b4bdceed4ccbfcad44ae15565eb98ad8efe02d3209b048449493a0710e815496abac6d50155419a1b3ac498ec83347d5b204e075fdca3245d0ed19cf6b3a5cb0a1ca28f4c8f85cacd81a5fb1b32c8f25f8ebb9a20ffda18c4ad9bea5480a204c8b2a7ed377ff000d1ada895f1fcfe8fe226f28f9fa6be25f425d3dc57ae2f066ffb1206f17d962beff85d22dc6f87953021c8fe77cf0a33eca47bc2eb27b0608ac81e5ade0a38522432023a7574d5c0addda250e1fbccbfa084800b3fc407953fdcab1038b5c30361b06987c7cf42ca360747d8039ae42c2a30980d898ce36a0aa552471fac64ade359fd290cf61947a749586433d9efecf21a2df2788de90e5d48c80e72b3efd3f2369bafeaf8c8de423ec00926a86d117bb35dc8867ad8bf50c89d671a4f17456f715cf35b6e14328663560019f378872ae9cdb98ffcbfc45743ba675e229764ec055f46e305c0d78bc7fd571751dd95c3044fd694eaeae40287379b46204d0dfaa3769befd0bf92a21a231cbab09f6b542726c7bdee5f83399bc5b2a0c4d5213b5974f9506819a0b902fab256bc8962446d7b6ca1e65e6fc8a85c20cebd554b9043338b2042fb0265855e7b5d546af8509253bb67d06d5e5de30d261db6bb654e960d16daa12a6b36cbd9821e3e5ddaf4003a24a663df32b7614cc6c7b9711d3bc125c6229519ea8f3d4aff7c6fa32bfc1d4685f9846ce9265312263873ea55cbeb7da5d6e307605b3d61cad84975a2483bc0f864b9976553f9468b7625e5e203eb7c81cb331c5e13d6d29052cd4e687ffbf28977c332f82338099f9ee6209b6cd4f5cc838fac42a6a20176a2697241b3f01ad64f8f85352f760fb7bf1f44bc25e2f43cc418081e5abe931eccebcbeb1c9bfdc9f023fa115248bc817d58a2e04a691e008f45117eedfe7f90ac78bc5a28726534d7ebcc6cfbd458dc36382ec26f2f8fd8c3cafa47a57a47276d29137b36d1a73cdc45491157232607a82d7b01b5e91064a0c28a6f6a5498a995ce6183de6ce8620407c1860aee4a16065839fd4c8e9450f742693249b09e6c0a10d2619e93bf2cddda7438ac81380cd9b5890870bf404458c11b6dedba3c018f3525cc0cd853ed3c7b6b4c02540be4fabf92380c06ad96729a191bbaec6b61b74a8e0cca9810f756178843210cbb9e0e0c493e6fed59f3eaf3eb9b94f42648a62b5fc861d02f9d43c823162f654628af01ff919496e3228b85c4cff642992a53302d10e5cbce1f366e4ce7c43466de30ab144856a648b4004f097e33bf25490e67a382e70ae0a92bc99700ea4b826efbf9693a3415bdd780c1418d9671b90bcdd08d05b1371a45e29bc898225cf53ab88c8573f42cd88ef8919e31c3c32bd809481a8300b1ee1ebcced9850849a2d6125a1a3fa3981e117f3784bb0e8204d1f4c789e57f31a05796fd77b3707c6a2dc785d7fd6868d6ac58df8cf713d69da04ab3fe9786a0b33ec9bf51a57681a7faf0e2518339bdff1b43756a1add80dc8189fac5c151db8af1ef153169737564eae6ec2a06c74a02691125570ba5cc3413401b001eb05710fa576e90647c0c8acb3d42c5f2aa80bdd0a56fd4101d9ac623fee6d89728436a3807d36fd07826ea6ac6296083d710f6243ed6cd29b0320619c746b6de41394f5b60b832fea34c3679b6b831e0c7023609d52a1ae5a2c2c772d72be8d850be845b23c39ffb499efffd1af666634e1fa6a76ff726e1a72944310c17ee76ef6d3b472cd7b7946f7376270739dacf5ecf902a984222dce17392373ab4d8a0cabf87ae74f77265d109eeb5e4101cf2f91ddd6f31aca87e24881a1b0780a01d0d8e50be908552c06ba82d97b8706a5039f03cc9340f87ad434602944578cfe7880d96d050d81e09bac36192457438b34879a216dff0084d4e2b34ef191e2c2004aa79bbeca306671ca80a494c332d4a606e0dc311bad15dd52956904bc1a6460acf05fac05bb2154c2ca031e073cabf8a2df768d85e36e78c51173b85fbf6b9f32f1b96f9c1fee179ac2fab4c54d12ea43bc9b6e472476c0f33c6165ca932e2a30be461df11523e2160846ac3721d877da22fcfe67ec8dd568318d41419c3c23e6d79a9547cead1e749602b004827b1cc3437f36fe2c6a8eac6fc5443ced7518fef2ad4e8f0de9130485ebca91d44fc90bd1660951eeeab160a3bafe68fca75f35c15bfbeccfa5d97eb27c9b94762a40ee56466303a1ae43dfc3dbdb0a4c2100b3c190fa1f8dfab955e53dbcb78c53649dae3f2441184bb12a3351aed847c2bcb6a4395a2429b54808b22fb7238e00b7451d88ba1de42059397bc696f5fa20e0d159a23c4d6cedc4b96c0750df19474c4f0fb96575d98e78be402d27bf5ca7e23e1aaa250c0d55d70965d27c16a5cac7e2abbaef22c93de616812179110b3122c88a62cac1625a96a479ba97f489116a071a0059175fb0e5b7322ee7dd1e16326bf3e9ca463614884bf8daff10bf3284900883eaa157cbda1dbec0a01277905edaa017571cccc66ddc439ef08f3608abf9d9c5c3baf56e4cb982ac3b038b2f9ec8f0134f563500ec045afb36c79bd45daabb1d0808d5aa082109d4042652dab597843d3f78abb856374c645c9e0e513e92670919fc4b5ab11ebadb33efa132922e3580ddefcc7e07c385c90089f438275b771c454d9d79ff55c259f798469509d12e6d6037dc21dea39123b330e635f7de57e96c3de0d20f63d0f5725472b254ae63c68390b3f78488a316b340e679bda9f2ce3da64d48d3f0f66cc1b122f35b174454210df82faf4830e86708bcf5e14305dd7c72e8b051cf9312c43b99b05993058c5fd2fdb169b49041195529fb7fce14d5cb152444d5a50f760a2932c1c8fcadd1ddbb912a359e46e803bcc47ad4f93a4bd67441b5601c3c4fa8bb5cb12ea9691942466cab7ba3db89e021f18af2d05a8d3fa8223a7be8b1b6a212baab9471fc7e8bbe3157a92f1e6c61706a42a164e1e668a54a7d4a70079c97e72474bcc4a2d61be27b01c0b6a4170694ae4269b82cf4335042b68b8ceb9d4e2bc0bc04c50ea606e4a142b8cbc3a47953f7784c7029823e4f3bd6cc41a3a255bb7f47ea7ee4c4e4f1173f7541c97ad9c11d9e4aa7e753a3d0c6b3996ee506d598724c181d5086c77bb97f3760c8e7687d04de31439fe75576ea4d932ccbfa09195ed093f507b99d9f9984c6707ff4e86f4dc25ea786dd25980ff0d0a3263ed1a183a187b93b2b87f0d0dba86287038acb7c5479b7820b14f3b47f95c2052aa4b6c65d61d4ac8174376847834908a48454ef2d2676ecacda0c222eefb8144bd95f3a83f7a33cc6fd8145c25496f8d0a73df1bae3a9b64ee5e4c4ba19ee56bdc2bb2f6f6ae18c569dcc0230255c315d6a93c8f01171abd57e9ee5ce12f740702dd7884a2db907a3300834181cbcdba7cfee05178face7ca38eb6a01ade44bd16667589e0adc9f2b1dce7555562cd369525c5ae5e94a53848721617fa4eefee923fbc51f4c1e62f2ff8c547fadc0b5de12efd57a250d9aaef26b4b1edddd9d8949df845bdba9d27c98956b8b3d8a6067f7cffd11885387e011cafdd8a6f56849c7a68fc48e8d5cffeb7e381bcc4d3711aba75121443d2bbf57eb85c84fe4a2ee9de5584c7f9c260960625fcac44c0cd94e01bad10573f67ee4f39005f4ed28233a7e2b9a5f47aae0f995c7aa67b20cea36fc15edfc6fe74e8797f448513d1dd4e8c66c6f02121dff5b691b2ed017a5e1fc446140dba869e51157dfeb5b79acc7ca1c7de65fbf2aca2197f7568f8325eeec3346fda65834b9e80e045c0e86c701e5436514c0125600ff8af378a2c8dd669bdbfd1733bf70ee596b8d883b807dea894dc070b6630f7b73220cb6281ef83c795bcc0174e77b69e136e87e370fddf71f5ee52a37def5b16057a0956ba61aaa0490591c991e22f728f138ea44fcafeb623275628ea4d6a26e493a415126894aed268c68e9ca8327dd469171856b73d6d594c41218b1d4ddcf7f3af466036e4f77821725341e76722551c17b85326b721f3f25bfa3207d4e7923ed6e4c484efa38cf5f11319a0e1f03350d7b79b1d715be6732eda40e3c1293dc0d427d649b46b0a8168711fa6ce8c48a2eb52a28a7f905901818e8219ce477026e4c6027a469855a1327f8c938ce9054e425a00fd1c72871552f6fac591bed3a8c4bc65ff688e6ca9e39525188bf831c4dfafaf86459c1df8219ab00563802dab523d792e6b4f5d1f16f706489be0c9bf3deceec71c5490cea44448e7911a06ba96f071c41518775fc6d030df5490c9f0cbaf50721e256868314d64fec83b7f72210212e2d2ce69016017b7d544da7e683a5394f43a16091a031cdc1ad03df3338f226f1f85b4dadd70a963651887081d811b2dffa036f06c7dddfad432a14300281e603ed3f5a1da267fd29dd6ec818b76fed42a4c6762c00fabc1d9c38a1952053c92bf53a45421af54e4ef701c77d347427355e4df36cb7b6e6df6f038f9c055ad91d3916be3c61e03a59fcadf8523535a5db0de088e281d9674770995dab37616f65fc4e454feb1186d8a3e4bb3170490893e2a57bf5cc165eb063c5308bcfbf809b37178f81bf28215b5a749e99fd961cabe573ac7bbb6511723728b938f626c1692adfd0b7974aeea736623f4db804fc801bf34c1e7dce1f402cbfb0a658ef19b47953b1987794d0d6247ece416f1e15231ccbd7833ac85252b576cf7ab6ba1df8e29d4cfeb523e41060d2c726ddee54a6d2c37c1528958333d5aaf5188de84182fef7eeeef42d2aa663164364ba8d1a78ea40a5f21bf9df364f3d1c1efda99d377985426828d1ce9e2b219d72ae54f269d5ac3aae708958ea746d75fe9767e4c1325aab6670cdd927dc154a038dfad2d81dd812b40b22faaa21471b6ac2e180f78bcc24dfae3f5954e0cebdc2ea3739344d8088ef25d835363320959d7c21218915c08136f97bf0406055f9f8ed3940b539eb5622c914b1b95f68242054d8c6e70ed69c841387f569392e346678837a6a93cb774f230230581f6b2c507923ea208f233a1da8160172bd96e99f1fc00db16cb8413ba1d888f34206191fa81c0ee04414ec6d4ec4dbc5d6381b983b6eb7e68124e83ecbc3a9588a3406f8bd2c8710eb195a9fd8c7592eeadc9f0750dc81e44b25a104c924b5faa9c462badff26317b0ad5990a600958fd0d1e6dc92f321a3223fb2e12154ce79f77c8bbac9ff2084093d00f22cf5e4553d2774e7592d872fe218e80c9378faefe25ac9c795416583d2bdec94df575c297f78ae167d4a28fffcbe18caa1301867142e7e34167fb80ddfa096efa894fad75a5e4b887ee519dfae4cfbe3c3b335bf268512c9fca0d98d8ddddc8421759d657c72b9008dc37c50c3f5d6d9da4a3e5ca7e131b743e8a5e589d5bc00a00dee32d5186bb849e5a3380d18a4e13f78552ce9ce122e850024e518282ad630418e5b472288beb80ab3a4b79b917e9710c4cbe5c22235a444e6437be831edb7ac7c94deff487d9dc9b882aa6e391a07030a8a80689d1154c3b7163817c24144d972e97375a1be494a9b6a496f8aed8c0cf1fd8937851061c7a8aa2c0c79b04d9243faeef83c8b7d54b9a4ef11eeca12e14e03b9b8c8fc09eb437815112f4710adf5373bc37ec8dd7099c63f73b74ed2f280405c031b88234a1b5bed0f7e664196f9ed9adf585afc6ab2dc0fd54a4ddc875efb97c0b9bbdcba6babbb37efe0a51067452584f918c9a0cbbb59a130f32fc72e8c66158e4fc8e7144ff9316fd3639c6864561ef0888129ba968470ffd0c5fb6a3b0a4415a3d8c688f69f7f5d04201fc0a2371d4b70dc9ce5643ea6296bdf1734614f60166464ecac5a8eaafbca4d264e733aff379b247448baab0cb608c7742dbda9b0fc341fc23daee847b4b3045f4d273a70a80da9f0df77de71f59930dae3e918fb88c3aa848a53592a9ce12e207af9cbc70f8af85a7a8552f1b5bcce7eff52cbc6a8492981627260234e049862d334b20b60e378626ee157ea1faef4772c524d5aa7b2d8f465c4a3f29faecddd4728d3f0e1c2357cfb31859f915b2c191a2595a498d920a705de59c2408f31b04f09d448e57a43771198930be3e74512ea627c8a7c68e2bd6d9f25c47d9852c7f771cf296e84f8e2ebd0deb7d997b86e862d23701c1f23167607e033058a17ed948dda7a302095c23ae3029ffb00a2d7e6ea9c8aa15917468e815bd0c6de6dc534a0966be1b3a56ac5cfa89e00f808a457112758613b420b9f681c6da658ed4a2a297bb3d306cf6815e84552e95c9af8d58a25a6b267df79aea41bc6692dc0558b862b1eee576d930fef1a63f28f5cc8651d0a2632e8fae16fffa123c425cfd55fc4a6776d88df3ddeff3523b9582537c5b34b08988b977e155f68a042d482d5d6360b4ab683dba684ea4adafc62a61684ef6bb61e99d8ec203d61300597d8fbd9d031f70bc0d72090b15ed32f0988635cd93d335ca4df364852efdd8120df3ccf6a42116fcac68ec2b44e0f7288d91c2480f33ba2eb7dc9468e42fb39c51e6584c4e81b3deaf9c3dfa3c842eec562446cdca725bafc023c3d87e4a4e3b4eef6fc90130b214409434c85615509b95076351e6c964037681479e17e102877a6b8a3d69caaee8f207fd4542ae29aa307e39a36545394df388a9b35791200d11647844043a4b5fdd91f3606c7a38ed78af64e7489ae7e1efe185a9c9decd6115e6af33d778e45c5084efef6ce345d02dccd7ea095ae5d7a3746113496cae103c78b14bf75abfb03b85be31b1e125072f5b5db9d10a303c36816d58314449e5d20faa729031e36ec0e1ee8a355a7f0687ab180ea6ea6a7a30e64bd67b095c86ede1a4df59ed3efb92ad5dc3a9555a2e32b39371ac3c2b2f57287daa7a88747dc00d41fb51c168942e8f1c7ff92f7cd05721cea061b9fe4e55db9af48dfe00786a1eb0943888a2b07c8c0e4299e48c238b317d9ce0fdd49e9de27684691419855511ce53ed1e5c4cd3c58a2d6a04e514226130ce3166241cebe3da9080547ae8317efe438a22da3bf0bb176ce761fb52bf5bf43ae40a087ee1c9adf3d62c8bc9397f595c756ac674e4a30a5a91f9b3100559c865271676557a6eb14aab73ec662c8db276c695a0a827892c78448ec7f03bc783c770409410b461e7d26eb794c639710eb9c7cff268702814f660da138cb37eb3c60be7840a86cf9a16a8a9c52709e9e3ef3015eacc35e2ef7ae71373f8b69d49331aa1db9e2be1b7cfef8ad0aa93df478c0d47f528270ece4703a1b12e45098f72aa7d4faa14a42267bd49223685586e7db979dd3dc710c2756bec4fcb7ec4725452eafc54471a645f2134e687d4efa5b758a258566c1928b00c326f65f40efd75305412c6ead6129108886197fe8735ff451e5c8a62c9c83a983997520707747c32059dbc5876a347212495a30aed285ef124d5a143c7654577cb0ed2ec4610bb58349617ac97407d666da70cf9750832e414efe556a03c72b6be09e4d59c2e73b080ddfc11bda30896864598060ac26986bf32d2741b3275545cb09c9cdfdd56ad614e0da636c2af08af5cb553db8ee7ed135e54ba944307f2637b2c1e572283c9be08fe1fef9e4aeba99628b66a35d7043136113ed2fdd73c4c66c6750da91777cea64660bb05986f6fe5855a6741893a6f71ea3778a82a39c4c041f8fe3ff0ef77137958c8bd82053720645f47a02e401914caadf490d314c7c298624e939272c0269ef7a582f6f85f91f69386f3b0f07e166df598863a73f4c6b04be16c3faa063faef02c15abd3bfa9b6742db49b05a3674f2348b82e02d4c7220d64987ff1eca8ed8d4332868ff870b7da9f5cf166e1848635ea06ddddd12630ed5d4128c051c718ca5b24c897030330a8055c83d3336e5d40358f0bae16858336d81fd1c4baa60e9c8668b2613aa60a503efb408581b9faa27df86475c339cb73a6804a29e84362117e7f0bc730877af529c6e7c515ea77cf687d4abbb25d7ce419b3f5113393663227e31a3876c9b5da4e1f01ff29f34f35329e3b0329b52caf47bbe4b961bfa1d80cd158b47f17c5e17d294dde183d5f658e65d56ec92cbfe79c6837d51f15b78dd5eedcc5c9120b633bdba704ad5b2567dd37814554f2675d8a4bd315ae224a65debfb606d4d094a0a5532097e0a97e2a46007a27103696f987fcc81abd440f8f8110bbf379b19b59e387b02674aac4843c8c06b3e2f12dbef340b9821d82c86dc17be9956e9fb1e19d001ef957847a5595663a5898194f09dcd30753024c641805c194d10eda63534ed4f91e96afecddd0b4f644a5a896aa9413625d1466b03b44659ecde9e60ca1aa3137a87d81a46da30f9a810a93b037a6260ebcb2f364ab37aec5f7b2d93dc4e21aef7ed04363fd5fb31be4ee33dbf33aae665d7cd0820e65c49cb1085487de5b2da0ee7dd034b9409b70dfbc32e974d5b3d31206b41f010b328cb21f94ce995397fa47b461afa6fbf88f2cb5020408de79f639c456314199452fae7e73f479ced16039ae623c7f04d6803495a8af831cbc07bd9c796c6d71d624f8cf9d87fb1231c34aa6c2988a5fbe826f17190556361f4d303dc654cbc9807d8308d0af08b972c8b9f7cd5fe531e1c020b0eeea649d5f6be2750c14a8ba911c889cf864a3071a42494d42de4afb2d76889cb985bfd0280963eaec1d5e86d3f000d4ece23f86d176febec04ef54971398f37f0f78b2dcc7d6901c3230ab3c6a45c331b44a7bdde231b443b0281712b724b49b5da339b10cd8295d930f4544dc3ba67d0ec3f3470e045e0bc5b6442011a0e480e1bbddda5968fa1f0583484d3af16782ff3f22f8481cca96ae1d0edb510715deb59bd2c2ec86decc68684854eb3f3be3d18a2135f1a485b76e11feb272ccdbd43af5c206b3a7faddb9073a417c6e48af26ef6bf72d06f082632e1e209339a1d31a7a8316eca6b971785b8a482aafc18e865b81d298b12eada565128ee7eda559a4bc9925bdc7391c06c98c7abb49344e89ab51b71a81ab30e032f006ed9c3704db19e8b9c20f77083d76f3a93f7b7c536da9147dae78ad10ad64e791d5afbb854e0ae3cd99386fd0a859d0348d6c901c2a621acc99e919b9c78e3858d6032309bf8df9850ef7ec9aa77e02405f31da57c7d451fa21bca1f91e6aba040a61e6e60f5c7ac7deb26e235b962aab1c2694b1a76c6b0826c2aec21a4846c22c8011ce826fe911a341f34d4c7455f2abf643e6e0d6af63a4554e59b42a1b1746ef3f9f72c1f2385f5db43eecc44e6d64a8d0673a82a25edef972719d5cddf879b336b1d0ef37e8c3c2c60ee8f3fd4a04c583679055aa784229d7c7d1b38b71509f50410c0addc6ff89f3d638358a1bba61de4f3fbd3e37d9cda7431033f509104949ee9fa592a3f2fbe5288f3aa88b0c533080687fb7b035ea25f219fd0f8dcc9e9d0d43f7a2433eea6a6f361913131a3e60861cbbba396ef931eaf93e3bb32a4274244ab7b4269072a2e647b7ac7059e6481b7edb6520ba7ec14ff239adc739dcd07c55b8066c4af69ff8af4b288151fd27694dac0ec154ab1e12872599e9775de2a89a2a569098d3f1d7273cfd71d41954d07063134a20b28379fc1954d0bf32b4c001bf95f677bdf19fa117a8121e901b2620b01e343f7df112f6bfc034a33e87919e98630ea365e582a634ff6ef192eb01e437a6ca525515833eaca7468191a00eebe21585837f51481a5b54b95fcd901d7752460fc72ec13fa1e0ff18ed17a90c436259336f4fc1a6e9766747ffea9923b41dc8c419e90ebdb221a7dfa5f75c6dd61692dc82ddc62ee4485b6510b682352193d9735eec1d05299e1e78f97c6d3d2bedcf69ddc37dff4e2c859090f10e375addb4232de31d5244702dbf569eb4f55ea0ee24e7a9042392c9488f527325fbaff235976d2115c8061c7a0e3e6fb8a32122a1a62975824b9ee302e9f06c860e3a49beba1fc4eac101bd69d1bf657168c681c4474af5ce83d7517edbf62288db4d2ca3c9dd64398fb12bf308640de519caa7bdc6e83b800640d60e5d14429700da90e5ab09647287fb219a3deb35256ae12a4a46250983b5e797e492a490cbe0e831f7bfad3da6cba5b3feee8c29fa2c40327545a0090ad3a333978170947a188df5629df9c2b353d36a9eff334c8104d01dbffb304e4354d9fe40a761fdf29396eeee0552be6f364b5b97c31c7aea7337acab967e55bdf82d4c6998a69d8a3518528ef361270a7cb5f33d5c885c19aeae7d83c1903183205712a20a60b5d2872574b85b9069db5eb24b8b3f8f0eac6dc9ca59cef53faae66bec58923505b42068b88b6728e8ca02e88c1c00457b557afb3194efffbdd7ae80761be7cde059f0cd112e0a2fc500741419bd0918ff9e312a118a4bb68d8f8d5e9b7623dd1cd872c9a745c12c5935485693b79f873e8388eb98b07f6acef80bb2f8e52ca93916eb9aba6a458905ea515676ce68622ecd7d4ebcb6b945b1c418bb4e25517d78872936c39c30ebb1aa3ceac928553b75b1a8f1c47abc53aa9d8595bd3133c8402c6d7a8881db00451c097de3d99264b6c8b7d235cc1daa6349d5a2f425fa5a7399334cf61420effa59a807722b17fe543f025716cf8ae3fcfbb77132c2dcbff9c9ab637519f16dc8a1b3ebb77cca66f5b0d1e3bda583913587bc34148c38ea249635b65c5153f60f414d21e7252d36b099a68205cc7cf384343b6fa1d4a1a36e0c5e986b8aec500328f2814e59c2df940c264eb803edb65ac45604f07c7b1dc551be6316b229f97201c97e0a06684dae7dfd02655dd9ea29c75dbf4e50e5fab74d9e4b8141073d7dbaad3d8ee783c3017f8b84b50e45dd76abd74c6a5186ea5ace99a7aa4ff878a2c865fbef4fae1d0dddef227bf732fa4e6b655fbac7c729b5c6b3e837010bea0015621b20bf3380954c42082f187ac294f0a93216639defa143ddf8de47ec521e98f57bfd154a8d7d7a60a4e5112b945b89f619a4b2bc8f38b1cf10120cd82f5ec1eae98a182be101f5f0caa04095613b298f42103dc765ba54cd25626752a25a2304b86d46b450260632122326c286993f8dcec1444460b3adf78d19dd174aaee827abc71d326caa5981ba30600be53348cc55c178513c9e59ec35f943a504bd575627f3c16d87d57a06823e2dcdc37d8bf13d060a78e9828c41d20fed7e73c2b3f3a501bc5f92fa7640a78076ec370b5f3156adf5633b77b99a2be5d7024ed027418c02f81b433e63f1d1a0ef8fc7fa837f66c5a53eceea380410ee2419eefb9c32f68d1b3d691a324ec5d3e42a69ac675e60774a8743b170f385ffad84c0504ed9552d6fa294da4505cabcb0fbcdf811e948b993cc02c31b062116fd36ef2282409f7c5f1be8d0e687cfa8cb26afc778faf5c71e56c00599d2817b2314bf028c4f28fc5cedde77823d7cd29eac6edc8633e4a00d43e489ba115c9d5d04cf2fbc63b831e217e210e5aa7b185aa2963dde05384ba45ca33e3592e7b92f35546d8de40d4273f70f81f7e11ebec3060549988fa05d84e8d14a5ee1c9ea5015d4ee72b2ff17e01403a45b04b8cb624e75dba7680b1e889ab17319b52bd812f69a6cf2c79ad27b0014e88d1d8f255bfab82bdf1f09e7ede4fd4e17bd87d1e213cf497c3762cde8c1a9d8be9e65fef53f9be9773217d72387428919622b167b110c1ace88a0fabe4a780d0c43b6d437f88eeb95879667f16ac804884d78eb459e549ffcea9b2a4bc88b921281b70f06363a0293d1fa86267ec46d692c1588e9cd42e3b815765abd9a761a9e9b67dd7da83979b7f271b5732aee26a1964df12371ddb32d6032d840daf02e314a224ece2d519ed11a5400a9c8806533271cfcfb2f43c385b957a0b7c8664cf990c44afe2a8b829ba41ffcc210241a1776117d121f6cc47597cd9e1a9393087afa1d6d3624e1f5cd023ebec9c669356d514b2e4d07f19b4bbed93efd0d0307c94983accbcdbe3e63748781324b68e0d004bb730e396adb43b43ff3eae749098efc6e19137504495a216269c96d1613f1df4ef656c2c42e6ab8640aad5249e062a6db8f30808725ad12cfc1241e6d5c7775508cd3ded8adeb75b9354b0af4a1d8f2b09a1659e584d19d643cf70d9c3bfa66a2ed61a6cc26e8cbbd5cb89f20f80b4de14c8663dca3e4b9aa180c0868f69b25f8ee45736a084e1832aef603974ab4cd90f3524ff7928672469857c55996147b26defd0bfa4f76011625e649f83b05738710dcfe471f90b71619b0ed86e223f71876a61c07f4cdbd88e80342a0ba8e814921cc06d71262b9c742850cce4545472600d17a003a9e7f925946df95709a6bcc183f5bf494909cc0c20e28c65b92ee441386746d6300f5e6d56a7ef2eb87a52bea7277cd6d84143541025ddcc4f931b1ebc5932577ebbe2efc24723c10932c1b97fc3ab7b9a421dba70f04c9fb5b0c55a9f193cc9da30c92f098943967b696257fba446e11e3710d34cfbbc5de2247ebc4ec2d3ddbc7c892ca688a452a8bad353f5636a7a295119c55a3b354c7a588a627c7868e10f5f860c0c5f8f0a2354b98a97f2275b3b16a59e2b09cb44872ea6edb91dbe45cc70fffaf7bfe8fd7cbb133617a121fe131f3c04542c6df6527da75a4f24fd0799d9a4c6d93b339e1fdf26c6a8d5fc01f452995aa2ceb34ab6a3f87cf8b8a2194d46a044898977fa725e6cd94d4c6558b2713cb2e3b9d452266d1c39d436af863d0bca1073798d08979ace7cd3146578435e6e2b8a7ac45a637d1b9caada95a112e2ed850957e4eb5ebc7f93d6184e1536ee91090e3f20bf6ca6f9973fc921425ed4af8d19a25a383825b39e8c182b0c33e1a3dab8d6543970c5deaa4aa164434af70c80aba4011071686b5e0f657f48f374f6632ee3a73b23d561fb9adad13add6c52185a453d6b1248f9c3d13275374a001dcbe1e451f540024685742e4aab8513d651802a7942dd8b6c708fad795ca3121a3e49d7bfb6e6f7558d64cdf294b49afc45177df87eed4a44cc48edc0fc194587cdc7389e1b505c0fa7ab047161b0374eed6e06bf2feae3ed7ee122ae860d1ed8657ce25def36bd82393f0afd753ad9016e3e699c791615aec7b40c1781064f7fb1604b2b0f89f973c5c994118747368accbf4235345d69de06f0727120518cb7c875d0247df2b6208e3ac00aa436c65436362aa7d50b3830878ba7919c13d05c9c3afe78eca90c061e1184a287b820ddd5bce1773afb69a08fce89cdb3587d7a7daa46ac6a20d9f213dfee96a2414fba1907cf29f537840efdc3607bb41c97e33d315ef2716f3d6656fb026970767f12e1494512930c72bc5995773fa4cd1211c04bd0bf794c73fbeffa295215762f7f82c18f25912415bf9b35ee7a4ad726a83943f60b03ddb9f5882e8bfba1db484afd9a0c8cb2bec70ea3f9a3578ce06a27e88cc0b0b9e04a85b599b762b1fba0e76863012ad57f097b09896642e1016179e5fa0804e6cc670e1e3364d880b1274ebe4b952c08ebf5a980c41d729b0cc84d6cd9dfe047286b6b74ff8dd2cd455cc50a1535eb328c135eaec5a267256f1ee2c2aff4103dc537aad1ea768a403756b07d9c29bcde405c92f2e30546ec1111617fa180ce676a94adcf7f276ac63727d3c75fc7bcad883e391055bbb302a96af60e1f12b0db473737886370c9dc801cc46c5044270616eeb85eaa4f05c8afb049d5ead9db17b490b5fbfba4d5f2483f3f5547704ac2b8b43a3186bf56dd430e37ac36370bbdc9a6a5e89c8419767160ca979b872ae0be00ba043e2e3070d7e392fbd983be038c48484d7e966f2a5d00dddd1b7285ec51ee0a2995924c05fcd111fc15935aab54f48019f38de90fbc3bd107e6ca027e23034be4e49fff9c5a40ffb7ff0a5ccf19a48adee5eee24e9f0d78ac00fa1b1a28c14e4a2c64fabeb00c2a1de8d250072b46b1c3fd18a701d602cb400207f11a6f1652cc6b5f1911c1ee40b1851de70377284741ec077cde073abe978647d8366b6b8c2fcb0c2b296bf3f1a165261600ae13acb684250396ff09889a9c1d89242d5bcb0f3895b869210db619e715300e6eda477ac5633021929b03485e4a8dd7215a105c22cc7d98f1b94188481115203bd68f0e5a3cc9e82effd71ed9cfa7efc873fa4657c5570103da1479d4c576fff3eb770d11693bf7f75b4e6e2e4a6a303c6fd76f29082c5389d3796af97f5dee72f67cb1fec427cdd90f1d3359f902713119a396bf2891dda3ef0a0002d559df7acce56b49580175b9f1e285678849cbeed3e3be92c49d1f3cb49e7cdb250718a5d0b90a0388455719a0c2c0a615dc1c0d25d06d1b7bd3b401a68513ba3a06a48d9ee01c287dd3a838ec450b580ef721a9c126b60200d46b226aac0efdb1d72f55d1869e737b8f242552d7902e7d3e8933a0c9c9ff556258e6bf5ba3966adc7e5fc2628373376507a4a9193590d7b374b87065f58ada8ad518b9f25e88dac8bc8f55c4815f15f0a37287dfce4966824556027eb2c8c0fe89d109f171cb15bb042184ae42cee9649ee305116c212ab8f20cc427ea2d646bfb085f664ba994c44f97fd21170ffab1eb757d76918eb8356b13343f5dd9f6bb58938b253a448371b28df50e85d30cf6190c58b1399872dbae76afb382c9ec1531076ff73901579fad77a43e4a74eb34616e78a27b1903a98cf25db0ec8ec29f688591d4795e7e35b3b3e59835c081a7e8e1b07b474e01d91449ee982f022333ada95cdee8db0a4d1491b8bc5ac2734d494a61cc9afe407e29ac9ca5e429f25714bc17926dac61e24bcba987eb455af62e62f652106f2cf76b7dce2e6e389bde8041795d083493222c2dbd3d1b4d62fd7d49acec26bfac6589018b9e809b827265e5a1144f8715c0047e0780ac9d1f0e78125357d12141a029fa0840e181062e24d5c085f3a82581fd71fdcceafe6215edd188bc2ccf40b9f889d54dd682c1da49a35d2366ca843d06d52fdc4a936212a00db76429e97cc3a405320022d23a68a689f1c45e03f662fdb6f6ca062b2e06c336fe4dac9d5ed456d67ce0eb9de860c1a5b8bbd047478c985249a91c7ab8411efdafb109e864f18068d4c37766666d3583e26a95e55cd9ddcf19639f8b035d2cfb6e222962dc42bb516072e4c15d8ecb910942f106c9b2d09cec999b7e22b8086eae89ee3c75785677a4fdf5f5108faa763c6f988f77af76edfe901b92e7249c349bfab8e6303202e0d86726b3c45223b84140c6489c97664c7efc7a6f4a165514cf42283dec713a5f33d39a83b31f3ea92da1c09fc770a613f4ded84a13bdede1cbf96ebe205e35ba805c599b55eb6c75ab1570fbb6b995f977c1c4240128530137c8c8db1ba281c1c9f67a7067bb6bfb587acad494458a160fddb506e5354676933d8f7d49298e9811efdaa5033a96e3dd42bee136ed9cb69ffd97a799dadcfe2d241eb54eb5cf0710b4df732e9c151fd9e6f384dd61c6995eeb36b1d660cdc6188c8d67b4f421cbaaf5ff563a0da85bd894e86eac1c358a476376aec64e7c249186ec5ff9b87d4a90c1dc43efbcbcbe189a860ece8a7bd7344a4d3433dac9d1bcf4f350e090e1c0d3697cad715de5fc4bc8b9897459dec087ba5528708d823d693764202bcd525ca93519b5777380c7ac29050483822324a50787d1275da78e420e90a8a56915b3b837e55366e8577ce2b0a4b143f61e2063aea329318f750957de3c6a5b06cf705728d780ad0b3382c4780d21ce789a33fdd3b3231b8e6b5866e91ab6ff088097158ef6e773f30f183485d064bb7627fb5840b31e1de82b5437bd85151af384a947a831c219f721f19f0953c0a5593bd3be4643d01e60a72b1c8fc245790c06a68b6cf5d6f30c54b7d45345f30cd2a125d3f766b7c5541bbc306d6b7cde0eb5ff41a2e84826644b0076afbb7dbeead3003295e88907945eb2accb317d8497906ef7d17b44aa464ae1fce3ac4ce6a4fb08cb3765d7c591cf495a4bffb7d7d877e5464a8ee04000af1594e6bf22d7b74f6909a3fcaf996bc7ab3434a1ab38bc9b0516c9cf489f6d795632fe3c86544e3b0fc73964db8acda3247ed49b984fad040f7b4d1ec9e866bb385659090104a61426eb970b72db362baf9cfaf8f42e19e7faa4ad9adf93b6237ec2971f448f31e872b11d478b17ba692d1118ad066f5f9dc0b030a903eacce5060068de6edfd638e82c5a94ee0a16c2d6cc13c3c01da0328ed64a071cb2800ac58ed60f9cf779f3574830a2d37aa3e36bd01c2cb00054a52da7c045e9d3f484f195975ecc6fb0c249d379688fc05c66d842004c53001cffbde62abe846bd9b45dcf3f139fa3b925738d82e647e47e3966cb6e26ef884c43700f4a36a2a2f2c3e4ae8190a019f28aa6430b13507f0d4f89d09f27a590dd7b8c65dade475ad37cadef19eefe550b37106a6c4cffce9821c52b8bd8627c6afc641f93f239350ff1931a90715190149c0063da2b9d5f31c87747e90252f9806aefb77c3938e83cf9904cfffc74a3a8a3628f715139748eea8c9b16d4da8732fded0b26fbeaeffea3581c02e0e3fc99beab3b1d8148cc04cc4cc28f840ea300ecb87875836eda4c32e1d84eaad60ae5f480a836e578922a85be0cca0c819ed5315c1319ea2b982700c5267d1bd4a236551ff522f2194e437c3e0ec4a6cf1bc6794737a6210c161fc3eb62d8a82b1ca5ee6f7b0a3473e76705b1eb845eaf9fe25c71b7d9c00c8fe9248c9800c49b9ffe036456bab4534816dc86705b8d81d4992c8c5e33a9bf48c97340d3f788e20438f81bf75ec8aa49ac62ac67f52d59473e791e383b72a5026dabee53fa038b0c440b9626ff5a8e9de7136b74dba2bfba02a81e8f50d06707ca99b5fd9b06dd8f228f6b7dc148d5a6e256e41d485c10d03127c424df20f417ccf298cba8eefffdc9981ed726dceceabb7311c0a3a1f8158735fe6bdc904d590c1dfe7f33f8c87b22a8c5047411e64b111cac3bc0e7b2968575f6719af147337e3f8e05d28ab278bbe2a9306eb5d36e480257235734396960abeb65e072d84540e7b054b2dc4d827b089696e0ac41fc18082a38713e023b9f74217cbdff6c2c63828b1d272e4f8bb1b4402bf29e10f23656f82c0767e14d89c6b3cb97541b96b3187785c6544e70a896d7e84ea7b0672951f1b0bcfa2bb92efc085f05af481cb16027fe2731556ecaa1465aac3cb2f06fe1715af6559620aa66446330feba17c5e23ea08833c505be0b33fa5d5128289fc4260c24b38e77e0897fdde23fa152f7c2729edf335fa659fc6c007575590942cf01dd14ecaf2cbc73befa49cc3cfac9f74294fa4ffeeda0c2efdc50ac77c60fa14a54b31d60c13da86d31433228cbe79ac0de33a4c12013a80a8272f030b38d237bf98d6462b084cec2e4ca97bd818782fd791ce819f551d0ef1adf5f3adda8813a9c6a165ae2eb6ecbaa5dc90cdeaa92048790d02ddd463d0346d06bb4bd027d3daab94e054b0aba33b9411e3e6cf503cde4e48036196d5ac5e757141a787bc227105ec293cede6d470f01a4fa15919f466f057454aeae339ced69d7d7fff0dde102f36c36a15b29b9dc02cb859a69be5bc1df304c5a083f95caa99d5a9ecd4f480cd0bca9bd902c485bb6376ccc487d0264aa0cd5c767e50fc083e9b2ec4230d54a4ae50788559cd06513dd3dc333419aa75f1002d99933ee48c3d14119c9fd5b6a726c26ee65c2e88e2f9b878fcf5bfea6dfbe47ecec3e4d99162f70c216b9e1571b69a1de9136d5128c8bd875f7fbbf05771301dedec1d5c618edd570fa7c9d6315d37e6adbbd62efab67dd703ce36c6925ba0ff3a3b2a4710529d5a043191df6dfbc1a85cd0adc081b7d8fb2270034023d940e7e7b2c7f2c7a3c72aa4baf3df1bf93d0fb9d50b9e44dab082dd1d1dcc45119ca29e0c3cd8e8cd9ab79cec556a16480a48da316e291635789791961db1795f03b0a40f1f97c73dc60f6f7881ec734aeba7deab55648acb7e75f8d1d9598b255ce1342a183eeb080d0e896940ffcdd458b775b3836bde730a9d0328091e31d36e4e0fdcf76b0a5670b7537a6b5cf25bcc20774e6f67a15f32bdc9c5a576d05868467fd5a2f99e6012e61b1ca4bf3a0666991c9dc21bb453e85b3bb6e7a4d418ea7d57f81c25d1299e846b066240c4456fa1f02e20be093f70560fd4b470abf1280d8f38501b9b036847b96558a6d5857385fb657b2f57c43a047c25c2eb2e0d86b63934d99b7197441e9e07d10523938721036ee40e1fbe9bd81919ddf051687453e34f43587c52597eecc2f0d040db135b91bf5a62f17177ea6448efe7600316e6744860abae7ef4fb22f736606f6cc3b975680306a182a697d6591b3e07af10db7762206e658b5a2c6d0d126e33b40ea458c2402de5db61036d333080186410e47fe87f89ee9c6b72ea6d51945c6eca724646e8478582cc56aac5f7f3aefecb316be4775975eafaae88b50f30b88ec68a18767271c4cab2b594361fa95221c2165b11cddb530704e471a5e60ef800dcb29da062a925211492eda0e41dac5e14ee507cbf8b72b1000bd77f242556982e1ce71c842ba1a22d27da7eb1096796b0bdcddbe644f06e1fd7cd6e15360edc6dc30d3e6cb730c484f65d3cf2a396e235f9b691318e64608c80fa85e1874482705b34eaaf4d6a95c5e5bfa98e118ef5d17d783c49656968fb4c8d3d5df87fc90f0d547a9e267b945f72e0b9bed3b4c3ff227db3b8491c8ebaed02106e179c26b8086e497d55ae32953590db9d48d55de7034d0badecb173d2c74d367e4f986ebadeb42c2757910ffcceeaa5f4b0192e9a903a20cc4594b8e3819b4b056c9dc32c621251bafcb7e6d96e5202c9e7144b85e650f5b6fbda8e8994617b95a4c868bad8e9def65cd5dd9b90712876c35166c00be62f40bb8644076423494c34d00cd55a990771601a6b140196997de6d9042c7a20b1bdb7ff0c910356d45ecf898121fb485d3adb621168561c442535c4a03a33c4eae098577c7561bbaf42669513e4f632feb8cb3b6102d4c17d5c57984e1879d4b10bd0af0bd183e9b25a3eaa729f305232e1efbbcef34eb036bfbebfb1b8e71f2976945fad5f40fd7d271fb095c2cabd952bb0e3e58ae84adcafb6160751d3acf7364f58e9471e0afe158f358f09f4f1920974a4ce3c7a849e26445b8a821546e830f541ead6c061904347e5c60f5f876bfdac44c6babca62e7c4363f1daf7816024e051905da68befa8dfce77dd56e325ce5343e56be94eaacfbe8318e7a3cbb512884da25eef9dbb0b26da7541efcf63eebad8fff70be258993872d23b2a04d2b47e12387c8274fa589dcd03a45192f6f341b1b8868127d671eab8583015e2a84712247f54c038af63873ef061deabe5dcd8a2b9869f41b755968186b3068fd5f86564a2e9002f13635ea37df5ab140a2e36161282012b1434b99c1322f500b13766edf5c806b02e2c5f654d9da381a24d984d650d10264970043e7f1b7447f8ad7753681b4f7b2fe6f2c05b95fea0167c0f211ec116d2dbceb505ab9663e3bef92dbf64aed25289983b284ad8b9c39079377b1b356e215ad2d9d8e06142848c1e17ee5098350fde09ebc500b767fe64cd4d241a0a2374a24b4401a99c634e40e25ed3f62cd90f0742ba4de2766c5b441db821715a29f601733db0d24e11e392759e2ca3fe6f2b35961a94aecf41e67fa5074f871901f6818596b0ce4b2a5946c1497a62e50dec2fbcba12f1b300ee1357968135f8745c7bbb584ba1f797b7df93dd7910e729456c0d8e29fad13367ede0a063c6ac566581b13252624e0ce207974a59d02046c38c817aba2b10db4559cd0dd011d7806aef8defb2b42dae5f5ef0c265bb067746592dd25d66b621424becdbfda175b69de7549bf854e59abb1cfdb21067ace82bec1cc13aa5b69e5e6c9dbd2b1eb717a84fa6df53bd556c4993eb6d76fb1c90a8ec9953ca0d086e66c6a602fd5b8b6556a7c070cc9ba10a50b771649adb15bf8266d99030394c57ac65684a14123ac4979ba0d4e448de8ff86645e408d1a6f9efd8df0db88abb6b8342cb2cc641c9c2ebb6395bd97caa75dec13e67cdf169373f4233f4476782cf0a091f40229fa281e2d6b8295be2c8d0cdb29a501d5f28c770a363969d507dcc6ba753215f587977e288f79c6f9508d80492ae811b14364aed1dbe0a2f2af9c21fa6e346113c84d640c8827524db73a0e5618ba8d500fd3c28f1d218afb1976493783ad65ca0189b61e56bd8460f78bbded495866189b32c6fac590e3c78cd3a3e6b1e622e1565993ca958ce9ee18820e01e5a5a4df0eb0e24c674d6a510e9f8ed100a40bef0ab5e810e63abe743a4fc8313f34b6565c3d33b5e7e235118f4e671ebf778d7bc5605487ae4b69ad9afac76294f1fa912a5b743b6107207fe1ce3c957e8bcb0f62c4940b72964226507cbc65081ee55b72dbaa19fdb3767d51ad67970e7389972b8e2f69781116261266b49c4091fc91234a6aee2a073f24f7d3363ce51a4dba3e28256ea3c3d45d5e20d1a15466092f82cb9a84588bf4ef4453d2ecb42a51fe9dc6636cc08e44ed75f839cfcfff2f19a58f1ad9f6ab83cf91730383aed2531eb9b1d3ae42476b94404e59dd3b4474b62d7bf2b34df566c834af91e0252935fee9b50424fab2ba5a0a54a814c77a2d1e4a44a59736b6bcf827148975b6017d9de2c543f359565ad7eb2a4f6c2208352477ab6a34942df5f56c8bfe26d02b573a43f920e4313c91da4111ce944cf397f0fdf7d32a03c2b568bc980ee818585265337b05548e377a10918845d434f48f0261c296d5ca55b37dbd60e81ea1bfa58b316157e5ab72e69f495bc125a756ef4ef3a7008d11ad74b8317cc20dae9a18c82bd931194d99cc243b889e390c47df270cb941979f32c01829ebede8b72b54e91fbd7123fc15237cd16f13d2b24cff8abe7a8181a82234fef288b56d113a4d04207ca47811712164afbe690a3893d3b842f425492608cd5d554d97073aa4c317dc7df3143ac595195eadb629e0ca66af2de24b550d6e5dbd1793ee2e9c6bda2a1fef98b7279e11b65d485d575d99eff31c72e299b28aab707fbead0974d5dc9ef9a1562e011aceb0a572a9e18c103385516763c32c6343ae2d5c47020397f7b7fefa4a6889db26c158508d3d949d324b39f4cd2bda43dd3363926324deb9826fa3ac41cc5d9102953d14119948e7c98050e4b44157089a91ae97739ac71b367e732066928c7b2d1ea5f17546362a7fddec7f742431188ceb99b1f3418022b19ef6d0af65f1fe2f8205a96d9281b578b971a5f0bd9d310a6c5fb2bc07ff43a6274a5b0bdcf16d9ff152c6340876d4556af19ca3ee6a7d75b7c1018bd848f3f8069cb3424d3a8168f1e458deef3455458568ae24ad61970898cf0e0f1e49bdad95fe26b9ab34fc499ee650baab768bbe8987f9eb2f0986dc56a3fb1e831197ad8e3a68330bff0cd1ef273f137fb5909472f3b81c896332e5323d9963b39030c263f9857dfb43944c5c365b0097b3e54121864b78c51a411086eb70396dd801c2a6473c6dada9dbe544aee59ebc4ef862562c43afb7b0f5ec25911169237cfb07c032daeecd7fe1e504cdffcc91e03dd7b2e51ac71020c480ef286715aac500bfe3c48ca717afe7703ebc18bc8694ea484dd4cbc26ac2da112c235c7de65cd19c868d41afee1f4d357fa2108a327bac2a1388358147062d072a8878fb2454ba59a0490b733f532b224c790f4c1256f7f339d87254008cb50eb0f6f3feb3574b245935fa1c1b42b426675bbee4624e69530064d2bfec49b53ccee72fd37cee614bc8ec0dd07a9ee05c8437fa547f51a743ca8deb7373d05a44d7c7abe25e3a3b060a460a9da7304699564ac7644013561b127af05e2b0940e99264affa38560d305523b2289f20bbf93858108d331669582ec707062e082bdf3d3b161526bfae4de05a0116177bc6a1b0671be1ddab9eed55c476956040a9d41150b278038a52de1e075a0a962301434b16afdf41f458f2caf08c9965e2cf1bc108bf718bdd8ac7c30ae31cb6a7a7f0569aeb946237ce40cfc15fc9742bae8e43a6cc472a28a0feb1ee6de9129cc0c27477dfdc0a1e1d610dbf19664a1ad4af89b5ccfbb02fb504e761eb48f9a6ef9a0d950e0ed7b34869bb8699b82826fa744544349a6415d403e1b4c0b018b881ab5360a7f54f77c4b76685ab4814f08a8cd146d9b51c55671e00940d9fd87f3e495411d11c7c6453d6292ef79b1cfc6edfcfd5e0b26cbe7af13eabe9dac5dd5083cc0b5151f4c89fc542d38dedb01e59d5e0b11ed0f2c776e78b7250d72eace108032b0d41142e4db0d104f7eb9409c2518807cd76b7c229a98b05697db5c8f39583dbdcb98bc6f64d2b84b2b033bb74b84879f0835181c3925cf1494179e04ad5cedc3bf9058686bec196b99c8ae6e253995a18f95dc85685faa4cf14078fa66cb97f7dd66e03e9d0f6c04094e3601c5d21bd7808e8abd9b17739667185136552357f0910141c4bbbe20e09d761a79e596671a50d1f328fce60937678801368fea97927a9ca2e7473c48d77209047ee1121cd66c4662dcccc86d49636e0f9fe6a328c987d5cd41830b56e46df518d218ae6653d1b94f520abaccca387f11205f34c5d8d5cd44d5b8f4dfe8d7c516763ae39a5e5489575cdf705d3e3b0dbc63dff250fb47e55867974b76ef6cb8f3a8b81798ded49ccd7af9b449fdc1d1026fd544c3908d5db243af6d6a4fcf750b6eb753725e8e25c0be3d35590af102321e185dce5d7f2ab265bc2a4189a0ba2234ff3bfdbe3b4de5a9f9850421cacca91316653b0e962e748dd42939445bfd5019f0708d934c236f6dc84ea9874af17a261963c2834d34ec0acbb7283d7005a6b3520ad5e3b39de6a5cae50a85496793fc9e505bd54713aec7b19ef7547ddc7ce77cb37d4ca7a29eba32696523b3001e5962e1cde3940b708467613ea59256d03b279f99bdc4db455217d73bb49cb1840e675d50577c4177ae848fc19a680546dd884cf300ba1aad01d371d894cebd5a9ec356fe6f65c68d49f5d1520ba3cd600d2f388ec669a52f4d79c2a8019b453dab0f01f2ec24e99baf582ae54fbc6241ae132b23c9fb542e5d32bc718dfc7546c40288d59d795b0347543906738d8d4e158c49097408319792be6905458b8f3ffc324934fac4bd88911f013cc657ac176f53d6d1afe2675903173aea6a2456c00c161e24d44081dbbb8f6bc94f99a884a5e9ecef689f39ff206e1c7af3d46edd960ce51fce94089fdfcdf64e95093f065f9141966fba83b69a1a52f82ebe31b665becda1f4011c06802b5486610caa02a400edcc6c1c8dd3bd47f8f1dddb5b24090610c60940786344759f13825e552704d86071539e906da601671cad3ba92fe7f24e44aca9a281577b2eeb3fc629e8fe0869322690bfa58ce43ede527e13e89f6b53e1c1281a19368cfb8fa7f7acd77f50e8eb9b699a1d136609ace00a8f300e3c46dca18d3af3adf028f1518114fd859bcfe42a9e31d8e0f40d31d8c0df4fe9ac91e5d400a420d382b4b0b48ca28ba3b871bfff0fc2c6c62b97ef06fc526b32ff12ea811e6eb2ebfc275bc2fd4382a2c78541f79a7badb87b44d25375c10a0119e9922bafd369fe72d3beffedd5fb41e44736b41d00bf42b55e445d8104aeeba30d20924ee55d238dc20df7c8decc5dc641893af0c69787fcf6f8a30022bfe338b035c6aac1e3e3dae8272ea2bf687f92396e375f587088234ca82de99b6f6e3f7d377aaeb8ebec5a6e1b796a4986a4cf3f665f6cc65263c88ddb22cd9510be0e380c54fbbcb4ceb7bff38bcf2c178d55308aec67c21ad3451d6d31af48f5cb387c51a933d8692b7e3cd04ca672726f605602cb09ccaf5cba9f37cb28735559b93cd82e1c8b7dbf4bdcca9075ad2cb673810c6b12720dcee3602c5d29824aa3d7339faa1e3348cd76413c96f5967306fed0d570eacac32783c2892d26355b5630886348a7d8f2cf870e20e8552f01b4426072e0b67691b33a5fdaf26d15f2fa91c45ea75e5226642c8dedac3638dbc0b104e1788fddb81d03e0837456cf4d3e358fa6b7edf6ba0fd8382dc92a49eb853e9633231dfe9b94f9cadf5bf8deaba1bc7c730b6e30b79b93e3f431d3ab98591577a8bd7009d77fb795a2c722c9332869388ec2ab478e1e62fdb1984d60cc1163428dfa14cfccd9e5c88d37489c59b05e644c322297ac7181d2d9089b6fe984862cab6d7cbc2ff684c662885c7182d1e9f56121fde28354a6f27bf8d1310df45cb861b764f4e420316b476665a8cbc32f6d7db6cccec3c686d6173426ad6d467ba2382f5ac7170b8eabf6eef617fbe787bd8fc546ca87b76fff01fe5ee3ee17df05e84cc7f9385402eab15c80e28fb6a7b1eae9781aa90357c8742151e9217a68f8c29ae1190cf91aa8f7879397b0c7c4eccb2d058ef8c45866543d28e0fd07ca6d83cf876ed192b205a0878075dde0b584d76e0088243344db142342828882d60d1e692bdbabc541d96198e6b974de56ee86be5288cd1918fe0bffd28b116ee55117a48a8f22292b75c97ae61c1f17e337fa554c022f94d3e81e61be29876f67343ccc22d8efe7e76a0a8e5eaca01aaab1044d6ba2d6a1c76fd1ca97f3e6d957f3d9ea93d8ffc114be85c77a92407075654cad275faa17d71ec92fefe480b6b1becdcb85b7f2ad84fee23b2dc462d93b1fb670a896aa015c1f788c910d561e4ff33db67b7311a180b262510e07bb961801ee7d05e20b84b3b9d75c988e0d2c25eb70ecb8d033731c98fb403f8d7f0c60dc9122040eab3fd13dbda5c638b7f1f209359bb31cfa4e9ea354cadcced554717c2028574c5e3c71d22645f4747aa7ddd2f535b01ba04ad72f5a91dd5cce3955764c5be23b721c8e3fba2055406ea716a13086dec301185e3dc6f5233f158fb3efadc4a17c54036e87a61ab3b486b1f797d97c9072a819e392ce9166f4dd465ee385e1574050bbc9e1e40d881b1de95da663d414f75a73a5fd7ba4497ad9f5a08ce653d3e047a469506fd6c27cd2dfcb6b33b0d08ca6dad7483aa87bb3433fc6d362e12fcd8efb75f9b536ed47f30d0f19f25a4a37c26894eb5d4ac19dda71112b9f932c24166eefa4a3332dc14c9c293d3fdf0e1dbbde0c358822875203a2a7a6a18e34104d74297ebda80b7778df99b3281c452b23e57ce554a8470976ff1ce9c06749b247ec34139106383af341f0ed0dee7da8fcb257608fbdaf609aa675ce03c32df0e4f0ebe0d0990cfc4ccf3c4b1a6de3919beb47cf13aca519ff1f822a5849a2a5e4f79363e29ecd5aae1f5a91ee47a2a6bd3968cd7954b52a000d2f0e2bc0076adeab2f46b6375ce83bbbd6bc740a428e39350b806c71add7b8cb33057cbddfdae31b44c5f6ebee3478f9b03ed8b3f9a23fc8250322d067bb369b20c18ff794e89e981a5f4287dfce0205bdf99b90b63d498c12e3d404c1c53bac2379a75ff0c2157ce6f8ccf555fb1a5de3f9ac26257acafd3b28cd3fc0da629e9bd4694b718fa73299dfe7f0600eb7659d7f231b0f1517d9f909e8147c85700169edf5d9b9cb2666c7f2aca4470a03417c0a60d725a2dcb43b551cd609156f048e8eb6ad82ad5259606315feb0486bee4ecadbe4a73d019ef83918f26216d0a636a2ddebd6df2d5fbd68150d446dfd589e0a0c81f1cd0bc4ad748ed8aea150f83d2a271b1b61a6331a71f837296dc9dc8ef18c8cd8b9b8cb6694618e670891fd83d4dc50be61ff254b589d1fb63ca344ac05163b78fef0706fc815b655c8b30581e81737c98915ac88ab87b68a3d2714f52c57d45c471fd129ead592e19c1e2a6ecf434e07b5f2f18b1fd14889c7b4023e1ab5ad66e26e1725792050e8e3dd389008e035c6a65848120371d69b1d8792a9cafc3fc24288fdbe4738c58a142e0402e7db8147e272278fddf4b162a296896ab458636b50690c01a671209431094644a331b36482bf2767ec3b8e4470f3a5c139ca79237b3c34f65a9e28c6361283f6c9768de711bd4ba30eb778afdb0d15b62fd9ec939aead888c22e5a465022644a7b46d0186d016686b89585ce17593dd26aa76f40bbe2bcbf6114408b7c218d17e8c73e3f2f7404b00817a16b7dfdf61ca08d696442ba50ef2baf945b79a733e664969c6391f8</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      MetaHuman è®°å½•
    
    </summary>
    
      <category term="CG" scheme="https://blog.l0v0.com/categories/CG/"/>
    
      <category term="Maya" scheme="https://blog.l0v0.com/categories/CG/Maya/"/>
    
      <category term="Rigging" scheme="https://blog.l0v0.com/categories/CG/Maya/Rigging/"/>
    
    
      <category term="à €Maya" scheme="https://blog.l0v0.com/tags/%E0%A0%80Maya/"/>
    
  </entry>
  
  <entry>
    <title>Maya RBF ç®—æ³•åº”ç”¨</title>
    <link href="https://blog.l0v0.com/posts/1048128c.html"/>
    <id>https://blog.l0v0.com/posts/1048128c.html</id>
    <published>2022-08-25T07:46:44.000Z</published>
    <updated>2022-11-09T02:37:04.685Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .æç¤º(ç¥ç§˜å·ç  + å…‰å­)</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="ffbed5c3f03360d507f5c5e59067d1b561f71cef21376416139ae9a8634f569a">19a56cc198cba1affde8dbbee0cc4fdb5a7736152c78bb6a882495ffb27df7a130edb8662e032afb0a9361d6230be7911efe03c48bd8d11f852f8c00d71944d68351a395de3e48f1e797e263c10debcad286daa77dc2799440b331a6e8badf02926575cf51e0d3b85d59d3ef72152189045a3545c82137eca23553fbcae8310d62b1bee286764db486b0f4dc80bc3edc29b54f4d308655353abe23062c0a4a678e81998471115c7d8cace8da5a950e91ea008afbbad3ddc6309ba4a46bc6b7a1a072a514cb0a0fed405763651da66a305458104a8905806636b28130b4906d6fa6bc520b3af54fbee617e1a9ba2c67bbe6dcbde04ff56ab9ceac684a9263e2d27dfff908f5e8866dbb7e8da99f84adb38eacb1226588193264dc1800505269b633ab3d087532b82b2c4412c5bdd019bc9dee701ed35965cb51c814754e2c510523d6f5a7081b31c8237d8a64d896272f05f0fea3c3c6ab3f83fb6e86a9976cdec9db01a5e7019f76d795d63923c18254610fa61c60f5c8eeceadbe0135456556384a99d8c423450d5add1512a58cfcbe4b7b1d6b6e1c9ffd97915250a0b8f99fe0baba11a9a230639082bf12a010c0dcc3260141758cd1ac9d52131424f582c6f83bb3a692d3dbe4cf391643bc48ecbd64edd66d126f7203347f24924a97a66c72e53468dbb41de26825b63730599a8f40f501809b9a150da37ab602b6f840a74b9d161fdf1f03c6e31ae12fb1d98c89cf3d206bd35cffdf704b6c3e43292db3739b7cc5ff558fb2fe72347a43747abfe0a4f5081900e7010cf21acdd4b5988009f34d2b3263072264c9b613be4d07f7a73b74598b633afc673710e2d3d292681e680bc0d8466834184a139be7c3df764b0efa3f210b9fdf9cef19bef334121d685d68dd5f9bc6cc4867b0f6ca2a334e773d606ff40434dcba472fe3287af781dd7e77fdc8fdbbe609ffc634dc22a3d5afcae4e177a961dd3254ff015d316ac9bfceade6868969f6afe36aeeb3f3e18a63fbc8133b590c3df9c24ccf86052f701f74563b9737b223d707f6554fc9373656e65d74d5238af4e837769e21798f74d5958c9bdad1d09b8d586090999e3444a72c267afa686c641e163f8fc87fe339baeb20d82f664bb33879721f1bd27e69b827936bcc4da55c70245f16298afa1709c023a52c2a61b72c8e7e8105814560ab2906098736e226f07b9a283b17d7405ad6282f6ee8a1938f9d301a6d0455ba8ea6b3c79dc4304b8bd54d3bc30ce3fe828ac9b04d0824ae1879776e8f09895756b6df51b6cd632e8a071a3091c0157a1a566945756690e34a643ba98580509f711994bfa373bd5140e35a749353fc062c9e1f24e273a1ac37d0a58dda87d07d930b5e4ad4865984355b1b447a68b9f527a4c7a1c1617b3517891d39e30a6d3fbb4cc1f9072a02efce089172feb27b324dd5206d3c52c2f738466c2cac597ac1276513a0e32325d04c9691274d4ec935595791c93217b51adcd2bca9e955d019915cbf90ea3c148a652ded78a5245993609bdc9e002f914fc8a61846371b287cf396d03de793b24429d29c51b3654e10539779ce20ff084b071193b8b4f323d31ed3f31d3c836d645bbf5cbb6619e8c14ccb7ba75c9f245826f64a0c85af2f94d873031fea2ac35bc66139b8c0adca8889effd7773934faf040ca73a4fd4c8d96f5c8629e5ea7d271c6becd3bb5bc6c2f1b505ce362dd799c50c1b5c88adb52a57226feb54c67991508d5b4f560c9833da11f72d05f8c08e9fa71602f34bc0a1e6079d2e9012b81ed1f79abf809699428afcfc8e9a133d8a04218419fd8230160154dae2563db2aef3ddbc72daf338298a359aa3b18c33c26bd3431258334b979418c66ba586fb3c15fb768bac63885fbbf0f2f5f625e5bf346490cab3a40cd1650f6d295a0076828fc567c123f524d9f53b02d41fa21c7194b106eacb194d567048c0aeb795617377951fcd9e2e0c265f7582fdbd95d6893bd9066940b45b2c0eba9fa7661f899c38b4c4c9f78b69e4b16217f1fc246d3b5415addd44671e13790b42f0a47f5747a3ed2bd56d7e1893380c7dbb6a65afc297106d309265ebf6b5838c8970885032ab1a8cfe8d81caaa00ea1a7f0ac282d8cdd563a4077fe789d9ecb4b0a70c3ba6c5a30b0dba74289b70455e544e7435d500fb9a628c990b2f45ad770be46284b740a7acebbdcc3d210348c04a42e37ff527eec4640c4a4071a8b3817a8838db16c1c2f29d5b6f4375cd20338bb4d74577463ade7d907d7dc9012b9e1ff81feed2ef6ee6684fae3f1ca182858f037221ad5ec99f78be64a045f4a154a48d31f039c1ed4e9ee818e5470d16c118d930f92553651648c52d3ef08a05451e57b620be06fbdac4b6efc7d00d0647640b0adb9e37c214096a986d2f9ebaac6d743d91348468c6e0d2c862ed96d07a7dba39d5ddce86b76f17aa59bdffb3554c9ef7937157d102dfcc2f525e9094fe2c717bedcdad207a171ea50a33371c2ee7ed5adf307df3df3ba49053bcfbdaf09f3fc6d7cd74c252aa321dae08f2f50535de22a1964b1ea959e0e3e0a374de81ceb134dfdd1dfac7c26e8f7ef130ae811f986a9c427e487dd07f0201cdcf5ee04f682c62923d292b378b8de78239519c47b09fe1531277a3c790d83a2ed5d1c97e0fb9a6bb0b5c9626bf449a37a7f5620126ce3759647c87969b4fb63bc9c75bd77dfd67ef8b4e06d4d73a475b156718fdae30f38c7cff70f769a3cee4d95ba9e3c90d8d12958cfdfd77d93e105983fe22614cf9aa7c73b3c50bfbe3a2cd072de8b262ca0535661d12fb25d220065045ed0ba4ca85221fe26e8c403983b18b06946ac271c41c1b358bf31fe5ff95ec5f2c7576c57848d13bc25a507aa3961be2c7869132e1df521f6d003c47cb84c0243006c438e04ddc05cd124f5254a1bcb8cb87cf28fb1d7531ec94959b092c579a53851375e74e3831822dc3c58de32389f8cfd35a8bc1beaf362a06cb98a7ecd408fa03cc83270c589103e5c568af72919aeaf1ec4d5bd2d34bd05f29f62248eb9cb2e50979cc2e1859c38507a1b0948e4df3f8a8f93202551e3d296e3b8ca5ab4e71e26071b991010a88a3a7cf6dc21297f05aa5c9e75e68520f1caddb0b9e079c3f0b99d3c06e4431f22bcfa0715c49f4ad8cc9d505c28724ed7549ad6f58b82e7adae4f5757ae457dcffefdbbecd408fe8e3a1f9e31f535c971a829f32bc2df1f1ec1533d301ce6d421c7bb724d80607b94bcaad28aa7ae0bda082867bd0b8a0ff0218158e28b17dc2d7a04dcaed84664eab615a543cab2e9d42ecc1041de48f4e258014dbae3299277c19ac4e3f4779abc506cfbe559cd3a17f7a520906e3b7e1f29dde831db7b8e4c8cac4ba45b0560632565b635528a5eadb81b6a0f2e6c9407c55ccb58745c144200a42133d0c4a87c86a160cdb5cbc19e0851e4262fe1004e247c45952752a982d76ed0ec0c0d585f0b6dbf439a14243c3630b89193d8048d8916a775e425580f8b31698d6375412256dae8b745377608daeec0b30089a5cf8898f504dd4e7efbbe4f7487cd568c0f584f362bd4f2dfc2ce13850e31c84be17f37a763327c753bcda76cfeed013f4f31d602166968d1d04c5dcd96a8b2a25207c74f03ab9dc4f14530afd1a4a91ec2b1dc3b6fe47b2e0761af8d3610e6be3364b21620f658a971c386067fe89b8a580f29aa387ebe1470c3453559cf52eb428a011c2d3dfa77986a6486e1d04d7279d218e7a31e36ca12147f7b7bafeff4880644f590102e8859e89ce8e60b72120d15a862ec7822547481f1f1d7e57b5a06570fb6d6ea4539bcb0ebf5dd2c83fdaa159a2da5ac755d8340baac3d7363e0d5c14f32c2e753378602c5436fc44aa5ec83b30ac40d275de100030cbc9a639add8a9083df2298dbe2516a01fb6dd733c9f249bba2575ded893807a0a7be0f32a72d31d8bb2614ab7661bfd5fb84a86839f5b46949aea37e146a0af37b52e612335fa365c7be6eda50e858e606a39ef053942ed72b07967df21302c686fddd81de778b14476fc36bd7dcbd77849e3afa399f425bad2cdb5b456f9b8d2d8550844801ec46d7b9a5c7ff98a8255d6e3ecfae2f5a537452e4eb0f75b23ab6b1fe5581a82ad88ec28dfa4298e52cff830a07c82e29716339d753ad43331864ffccdb1eb5401861899802d397b12d3eb1b8b1266ceb44018c6c147de3caddd93285926926cd47e6b0428dd3c052a9bdaf435ae98ed77275f6ddc5bc7dd8127e7cf2187bbaa4d053fdcd30018722ab42bce291e5cd9c09d5b53c4716052662b8897f2b7adb23dab610a9000ea1cc5a10c503b37c929583d222a4518cfddc80e70ac44a117c02d0d2351cf88b9dac3f402b860dde5fc674a2f0fd634a74946a65530313a680fa6be29df23fce3c277b554bf72ecc58370748857f0dd79d9face84b141c93601fa1c2147de6969895b25b84759d55e5d5a663916a3b6d5d9e10bc0cffd6fd23451b03194ed324d3271a48c2e7e22ddfb01f36a1aed76c039faa1036bb4b2d6faf1ae8510142562378a49a40be1a75ec50cab30661796a8e1c1af6709376d920f5facd14975d8cd1e1259be0d9460fa9fb618993267fad16aa560bd3d2847060bc56eca2b301b5dae1fca5640bd32ed387d34fb7bb459728aaa2154b1301d9551c2692a8804995d6f64a104e480135a7132e120f2e1e562b6078714032237728b2cede70b7214bacc2afdc184b799d971a764cee01f8d33dac9a86f9897ec595999251733b2580d26f94c5009083448f97ded207a8c73b07464d5dfb21593dded63a1fb50fd340f31a4f1d76972b316e4666f677c857b2bb1cbc73dc29640f74661274d491b09f17165ff8d6184a6c126c8f54f52803225f830f8fc4b323d084415a554509cfa1cf2d186ab245db0a4815cf72a2d74ff1371b0baaff5519b3a0db645bf915d116fb89301e50b902b4abf66db75197b2483f31fbfea595a0022b400810edd62282e54981fc323ccd951b3e5295d0aedd46e3f83d98a5720725e77abe3bd4486035ce3c1153ebd1c8b5cb99b24f79b52c6710161615f25cc13b19427101e975e17eb1d765de77e323c637c8b63a56b862d27a04e600b1030ca6f1f97b0b292e56c8708a4c0ef19fa94834bd5203b4131a361c9c193c35840da221057a91dfcb183640aded4665caecfc9c324f75fb94e5eaf930f1d900c20cbcbe67dd56d22db007e684d73142fc0fcf2a0b631fd11c320cd07096e476ed674626356d61ac8a94196537122cb9d6748281a289c72263d5410bcfd6bc893f43efb869289679da5b8aa2b42835e1eb418b827d317a09b47feb031ff26e01ed0a4ff33194fa1c1d1a879568a53d9828a11c712bc485b0322fa951e765ef0fb64389945668fbf1097d1988dabcfd87bef86bc6cc60b8acf9745a9b86f617cde847d7b4518ae542ce377b87de1fbb86c6281829e665d443b56964e989fd71f63c1f90bd1e6743b7a890163c800fc1f5ae5a24f79763157b932d7c02334337e5216f86d254704cd78e9ca2104b08986b0ac06e3a00b52353427351b20736b3a248cac2308bf2ab2f3fdbaa9dbd91db2b57e6fe34a3d50707dd02ddb59b1650ccd36251a84f09919a35c733df4bcdc6c73d599bb9aa26371cb2a66fa475d9e4299d6e9e170cb0a00dd0cf1fb2cb55b386d04bce255cf27edf6263705c79de2eeedb7005660973998c7d596dde688f39f6f34b7b184397ccc8e4d956d04dd26737e15a2389788d18c2fca5855887f62163d6f37b04ef9c77cd215962774b59f8e48b5c31538687e8c8c5ed8c73b93498f618d65b770f7a9bfac4901cc7ae3baae46a44462dd9033e3838c82867d718a9cee96c973b03c4541428e5a56ed0421e98989b7e1b6ed125b12a489f982cdaf7b160104ffc7cd30fac29d9d563cdcf16dadcafbd091817ed6afaf5946b9fc56a2d6daf27254c8239e971b829e2f7d05691405e4f6fb7d224ec34cb69123f7ad50cc2a371fe98ce4c96e4597f25fdd29e5068cd12ae6d368a0e1be8958d55b53cfbe32289c71dddf8d5817c9af6386afc2d1aa8414a67f92c5db0fc11ba3204983282dcfef7a65d998b5ca4a66586fc7704f39786cd32fb9c79b62da6f5d945b76cdb7e581470ae02498e34f94d05cf06992ca6e28ab341511c308a8718019a1164ab23af8fcd2a02d850a9dcbf056bc9688b1aedbb232cd35739586a5b567db48b46011f9a69ba14805eda30a3f9b02296495f83664b8a9d927b541c388eef8eaa87f894a6cc93615769e1aa5ae0d2ac01757c6cc927b3245337707eb930f3aeb1d6dff8301458e35dc9d54864b7fb65bbd739b5a2f336ca48547141f0bace60a6ed9a1e45d32a75bd7703dadaff8db821ef93290d81138f02a54cabf5c1918071983afd4c0f518404ff0747c9bc6a2ed0859c87bace55c59d9cdbf1a9c334439f5637ebe0ea825e2ef37d7fa90a711cce8e5e5315881adb5fb5ff6533c0dab00781d41a483204be52cec6e88fa334aef87124ed674c5f2df8e6da61c8ed5e71fc7915379a45c34f2987cb786fc9232bd8b0f1b6b8104e93f91f1261847fac9fd6927864018c5561641b5217548e97cc0c7b825dd11c3234417e72858eeffd42def796f0d85f8921fd736819faf0ea0933bcac632e5f3a1d55efa5e7fde140f3527ec6be8d561116b68ccc316bbdef7dc9f4ef2aead7b7e2294c8b8bda703e80699e915b79b2146aacbdda9c7c640ab02e94484d71b9d4c1d69c1715f6dc2b7a4101f9e9bbd0b7c28daeedaa068563a0712aa5492b42247e6b34cfe952442c41a6b2182d16b08999f135e153edbcdde3ca802f179efab543cc71ee850ecc212e33422afbc23ccdaed9b47c662c0798528f4d000b5aa3a1ccb4e17699c92a93efebb97a8e4885cb13216767c65d85d90a5f4d8aa8b575e30377ff451acdb32d3f4896177b671957656020e541fc2945b04bfb2226fc95dbd1150d91054cb5c0acc29593f5f7901a2be112ed2eef688f4db2e5cf3674ecd585f645d7cbe5ce7710670063cfa0cb435e156da1305201ddbf55d47bab74f7eb18132bdf7cb81f137148ee9d723bab2146e7a11135f696dced7437b32dbb87052dffbecf16133ef4cf945c5e221cf8f9d92bec9f89ddfa6e4f6aeeed7fa74aed0f8ec6d258f69bb43e49b4e5b942f25043ae0b048ebf95421619ead63e8ecb7a0e493859b9df56257c96443177100c8b5c4bad68cc1ecb7c02be766da3382d019650a75898df27b473109c714a3b6317f7bd75accf39ad42e0f2a71ae0e0065c17b217724212baaecd683c13045d83b6c496db713484cd8304c0c0cdb0dda367708c6a45467f6f936d385dc5034d4050c1d92677a227aff339b2069f836c6e28e2a8a18a7d369f4db0d3abe9521bbc2e9c7c9e65ab3b5857eae00f7e2837268751a727ec85b43223fbf0c6062db73c400e9c8980041a4812f227d7f60009c81a92fe7652c5696cd1bce68e5772dc7030f22f0e40c683d2294b1cdea3037e5d30deabf055236f0d91f9671bc3e78bdbef146ba4620065603737d6c93a4e64f88bc11213d6650ee79d628412401f03397ad6afea1ab9338e44d0b5f17d38fc2e203280e26b633bd4cca591b1665622cb54f69be5bdef49370dfaa4fb0a571bfbd304ed44c557fb8505abc04142f0613670ff8ee5ecce3466a90526f44189f0ac362c88c7db44eba3dff2eba67bdbd56d34d5cdd6d420dc76a44ec4398bc1e062cca4f4221efad1918ac4da18c1afeb1c24c1e8f0abaf523b4d23a5e58c0955f3d289c9c514922fe7b0b49543b07a1deaaa18826c80841631e7e50beede735ae932cb1e029e2a6f1ca87614c9ffe35aa9040ca13284026be3321f10125f7fc62606e516bed68df52f55da8d49837c9b7cd9daf910b9197a36ee3d39395b6fdee6ea2e48e63b795551b217c70f3f5c2e263e2a6bc43126ef7d43f09e1edefd413bf15b2146660f68bd4205c6a64d3573ddeae133472c962e06bd62e57a4eb5565d130ab611aba6a27560988c08010066603dd4f94949fe00ceb9e92e7599f184444d739fb78b7456b79768d49cf890124bba22faad61177b0eff340222966a91b069966b0fedaf01ded680a099072ad04be0c8ce28143c7783197acf7739bc793613d4233eed61f1cba7ffcecb8fd3ed1efd42ae43769709cea778c690871a29713058b694f8b307cbff1d3b8c52a653baac9e461cc57f982b059eecd1009feaedd2ad76411661b9ba440a5fa4734fe2ce443fbe80df59ea4d3dd216257cc61f412593860ed1eac0d92dfddbe454fd2e59fb19b2bf0aebd8c434e96501dbba2945e1d66dc49eb079421152283d01451b18a3d489c351311ba4d27a608d825a38ce99299b99047f5ea87f39b05a60bd1f5e8dfa24e22e9cc111722805490aace4036b86122f50a3481abc7ed0d0a0100b5f6ad3b1113ddcfa34846fb5277e7092ec1568bad3061604dd434cb17b6445fb70fe889843576b869a9f3f3825f68116aa6dffab881abe72ffe38484c1dd07d32e64e1c8542b7adf0d5c254c6a045f2bcfe0bacb7c51c69dbf8e5a4915d2b9367b1c42db0bb55b4116439b3a1cabbd177086e451d5a319e37bc52b1587ad82f12af582927887fcd6b818f90235bc1dec24a375d08b0905798841b05857981f4293d5df0ab5806d5b4ed7339cb3a192a4bebff3eba6e01eaba68d704e9e556080c8dd36b611a7488d915b931493b258a890f993a7af169f8414731ccf1df3a46b1cc46e266330face62264748882d35b9b7fa6bcfacedc5a8d60ca5fef51025d4109c3aa6e04bb36fe3de1e4dca0c7f1cc9a181cb286f04e3f9110d683352f10e9005b30b07517cb9d5c0d74549a3b032467b72d67944f2496706f37afe05d5df89ad61d8bf78e73399ffba5006867ade15133c4b143a43c221d22ab79b2f6357a78407ec551f45a6e29d5a88fcef7e9c499502dfe1e05b1d62a6f9316f773ffeeeeb8f832641d193a54a6dd4e416fd139711ba042bfaa19e16a86d729bb3c8a71d7138ff6cc4efb87d21840b9646996946f4893575a467eb34e3416cb28d4660e7f83b14b88d536d1476f6c485c2053db05a7ea922c5e938304c84d61888ef89fe97d853379d8969886b11b7b890cf092ac15fd297e3af9664b94d236bb1f43b0d28608c85a8ea382cb75a1eaa118e482f00a79dd341874fd0c39cd884274ab2e2189f2f6d78f7a46acd4d4d9c7e51954e17ddde9b40edec1144105ee8838974166e0fa9286ad9a6fae5d2bc2efe2042fd0f5a532d7c084a1640335101da727ba1d8d34c244599af7e63a2e4582c02a3705166a385c16cfe57894dba8e3d8254a68a9c5c20a543631e7164693ad708d4496a8e4ecbaa82943f6e244162ac3b23e1fad2e787fc5b60a2d1064994634c12a8c43d8da0e2ba57e8c7c52332cf633c97b5e228d78d96b3cfb90d88e1c832d241663d74863bd1ffef2893cd3e5533b8b9d789a4c028db2657f4575fd96b5944e77860f1cf51a753e88a85c4ff47f1dcc0a53025365c5ddd27743367ab10d2c07666924a7b0d79142305a81e792cc98a371a76f77441b7583939fcdf2ec088e8fddd132fdcaf00d0f4b6c62ad89d764c9fe4c0d0288de6506c1673c35f16b4c31c1125aa447292f46ae29fc46e2c458396b6f4ee20bc8431aeef68aefe0abf0dd4b1622ec86f4ce9c8e1b3ec61e4ee2a3535c8d818dd89d8e727bc08c66f39f7fbd5ca302323bf5e4afc2b1a324834a442c45d2bdc01cad59a77159026b70975a9b883eac9a8d7a1f474d74b95af86b44572ac5143f3f3a20f6edb3690b997bcf2c33a2a3dbb614c20ca35fac7c06d444335f46e31897f0c7edd2bbeeab60e4c670f8d2662510caca1f5f78f1d34a75fdf262270a144214858c0989b8d04b0493d4d3db3549085c34948472e69b0766bf8a432519f7f6cb719576a9ac2b298a6f921604978add6921e7bdece76749a8c7c4b1096e296fb1c6734199b3f3ffd58923a353f31576909981b6bb6114173795317e37804cc2608e883448b31ad70238d8ca3931bc563a166ea8727a271693be52c70913df4db800a84298926ee12a937873e97ed951a42628c8985ab3e65f07f0df7496e90d2f65ad8db348bfcc0e5db9f5d6b49d56aac2ac96c7e2ebb318a5d2bfff882450762411793d92504651019adb5e816dc1eabaa16dfb21987ed631daa46cfe9ff8ed15f3b9d3bbe8ee08a7f66b37006fa2c3ebaf654ca0c6fc34f1f0363470f0b6bf06b383ed8c17822830b052ee75ad71278c4a257cf3258b3cc095cbe4b961ab42471e6afa88ad82d5d5914b92578d9274fb5fb8447fdaba4a915b83e4b4d1454f3a2690e4050e3e2c32b09a16bfdd98b9183949b4de8924aa9d64b39be456e88e19057111feb6482e990fd0a4093a85004f7b354f701d094b7aa8f493b4b562bb11da06bd5703c5649870ff16f594ae64f774a97bbfe9b59940fa9f6e55e09b938d072263547eb8c1189da0463c2c31fb17f3eae1d1fba0cacac0203bb80518eaee9375e1ab054e2bab010b136382a7d26cfedb42f1b03c4d830c3ea9ce3f8f4ef9726241f5827933cfb8ccbcda6dc4e593b095f28a6a94f6304b8eca59ddfd8496cb87e3b592f4f4341ace1a31d60eeff1ce54e04b893d2c29fc494d2da1745061ed5491b55fd42325f164f480e781968e6af87360426fbb0279216ee26a8a031c88b930f802560293d276cc1c7d93fea7603a497cf96942163bd40746b920827d078de1ea66704f891d1cc2978d9a3508b346656a7d7affdcd64333c2f25d93a90208280f5a55c6a5d8575b2d83c73313180c09a6b8524d105fb8301d3357b8e41f5f4d70235c6001dc3f3111c953cca6bdc80f7b3f2d95da8327f8b9207c92d3ea2cd286f0c6d23b325ae0eb22360256e49580483df7db738a36b1327cb6f35d6149d576efce245f39866ce0c7d61c4fc4d41fb6a334a7d2e043a1f741d4bcb8992ebb7f70d17fbc212212395488a3ff8bab3e7902cb14eaa851be96a26a6a0c53394b7aa6578a6695c4ebd8a2c15a6f313750a1df0cfe0c051ff50e241b1104f338a742893aaee084c25231f9e9ff3d1c943a91451f9ca545a9e3959439d6c3679576ffc7ea1c967b28a66faeadda307e196f7a5ba168a8d04d6728744ccb9b7eb90caa969ddef910b9a9455780f392a2da6e31cc1d34e7ba7f7e468e22217fe0fd23b4bbaca95d76506c09d520a0203ab1b3dd922e2f8f65e9742f236e5d9a3233f287a0db4c069d469748855a1542cc1aba528d7dcb0f21f7af41e53ddfe59ef41455bcb6da5dbd34439e868c6132751a7ad2d8627d53cc77bd75e3b5e1268afd189bc17129b8e9310d7892ae5719ccb584938cad711c38edd31ff7218775075d34bf4253f086f74ace6b3a6c6c12911362368b398049b35a789190b07836981d3e192bc3a4645ae8e3ab01f3a552994825bc58593bf650213baf17c758c31eea4372a8f93f22631178c61adf94d4f5dc65b2f89534b96cd08ecd5e907eefbbfa03034caa2e726a1b8230ac5ff1c30d653d747a8dd1095f04c075dccf543ffb17b51853cb567401a731adea4ba44a70fd6e2a8bc200ffe32d2adaad6bd55cf81ddc1c1cba3773e450376709d18c97d3c27895d219bf03ece55cb4bd40e28b83aa812af5c81fa5d275dd203ea39af1441238e36c6c32d33d742a09d779269aad07088a0e01025786022d91f2fe57ce3b14d04c1cb37550a24e1b01331740afb8b8b449b82e8985f79dbea2d9b75eac5f221bb22a6d0e734a79d118aafab6eae90869846a68cf46683a0bcec567caaa1b638c7dd82aa9184d09726fbeeb9de6069a54f3dd80f5e53f7568256c92f612d8c7c59a4580d11aff42fcc49dcdc5d67aa2202d045dadc8a1959dab2c6ab1b82ac4e8193ff99c1344c674bb3cae7c42724f7cda3e26af5b49af9af68a540181acd67a6b78039ff00e2e40f49c9db17092dc4d96faa2dd6cf6f1c4870e148954cad98e535726c3d19926f3c9fd90052ff8b0dae1d97d98a2b31922f84a364cc303791760f47287371f426d9c08fac48e3373980eaf0e55428a1664171186e94511f2be2c4dc1f822e30e634219b728725a946d206e25a94424f6c15db8de4a47f6adf5b0ea19544d1ae07f6e50de30ec9731535772a3f0037c823c46917775d83278a1d8fc378b4472e0e6b31e673c802c1e012747bd8082924d53188563be3fcdf9c47f3bdcce8d7f1537f4b667bde73120726d51dd6c04711ba14b13d9a8f8d64d90b8539d76064f2f2262642fe55ee50e1b32c9710a49f25e09bd7914bbb5bacff81137f2e4fb9bdabb7feb4326b9f79e69348d72fc6103959e7b5b798e2e3e3bfcebde66bbdb9da4e9ae80d999298bbe23b906b347189e58863c14072be68c3cb6eba1c877dfd22326e36926464f8afce06ec60d5143c2cd615adfa4020520ff45a321c16b584c639151e86196c3470aba490ae0984b0bedbe14616d80c6b1b787cab44eb34d5fc0ec33418d53a4795684304cbb66b9702d6fbc22c74cd2fe4b6ad0a9563bd1cb80b1b74d856dc80fb2825f01b26626767235b7fbe69e3285c5d4de5be5933ebce04c433c40b3bb6a61cbe73b2bf42fc244dbe8116833efbc0becbfa55f32bf7a94008a943e517854d1b83a76f18866b26a774ec152de4370e4b336d84a603a6452da15e0f290b8648c446348e5e314520b01c8aa1f8048f94708236aa924a9412308af19ff6417d07ece8bdec98dde014f4a8e45a56566e1e38150c411d5bc070b7a51a7b3cbde04e05416be4dc45ae7cb9a06bafda502f2992a457121168a44d5a26d73c12969d228b6ad6966b4e108331be4d1c9fe74178a21cb16461a972f06e9e12b3703707fbd1568515fb599a67056fca8ec15a5b208b7285d37b903bd9764996841c24de20457e7e1d99de9979496cca9d67ef737a0bc082272bd2d0ea343849fdabd65ac961f39faea8627d7154e816baaa477c602fe82d19206f7daabf47fc3d8e40974d707d4665da598780ed80fa5cf7810bf7220efe9545de0419edf2005d7ffc8a36bf0468274e5d96fc29bbd828c4703fcc3f597e1b607b724883a9466765e5e54bcd5fe0ee6efdd0050b75f84223759ed9159bd7880786e589fb2a134763b802776745da9c215433522f67dfce880a0e41f7e8d8a4d6a1d4056dfd5f075e5fbe3040a3ac15c7427d5e609022617b54e359a9c2ff78943086312f9d02db08b08de97f2069097f4810845709cd25621e868e747888d0a52b79592298c95377dca307f418dc12d8bf8bdde6c5e00d2f9f0c186ee377ebfbd7bfac1757740b20a3463ca6463dd9d836a00902b51973b72a121e4e4554a3006179831c0a1b5084a677861a81c244bb2f25d195ce1bde092f51564fc8bfa54ae16f76ece746fab6435929775d355b513139c04c15079d8255864f0bf96606f353483399812319d6834446ead0e1607402c8b220663ebf3788b6654824c935b894716a44495d0f70a8899b8b7c7cdce2ee199018fd135054ad4bf0eb8a051fd60d685cd43080f67623b2f31abd14757f417dd8403e878748f6ac56159b6931f2dcf8bd7f59896d019b93ab2c5a61b0e1be1a6821632cd40e786f5e0ceeb2ac027086a71b9aabd37351d5e21874a85229951dcc05836776ffabcd9af765081bc9510dbc422be449985c0c4e908c5850aba475e0c757b8beecd0133d9dda0e945e519d999da41d0263ffb20ab0d2de9ed9185b3115e43a6b9799ef35eb1793e37eeab3ed9d16f93eff8370b3d59eb57c21b907e3fdea73b724c1ef0e87003a26087bc374b8e4294988ff1fb03f186cc23a9a588b794d3421e55c5028b7db0c37c137056fbfcbf8e09a7d5c35e2966c449d75db5f6b594c2b783978de5b4911090acc3fd03fab0e18dc6d54f2e7c3f61e2f0d51f196ab4f7d0cbc54168709c9580fa6773903e52f2486162d4a6fb5e41f72ce18f1735ce3cea37bf020dc63d49a870746799b5b6e0324e05b2792cdd65ef7bf5b1e96cacc8f3ecd4b6f9745767b7d15c904e7a0da410a236fc1fd9b71708d0a40b1d75d8a39bfb17e05445f34495b4812df8d31e7f75508c28a68ba228d230918ff9eb0abf7c55318ea02bed28901a73c681a7d4ff262adb16bbfb2863daf990f93041567936396ca5c1974fae7f9d4ec8d18da22eb0e9c278e846ba177e5a3e374e878f8c3e07ceb441eaf7a758882467a2516e062f39a3316c65eed361af960accf1a906471263b4ca86bba9fecd81cd1674b1e49bbe613aae29f3a4b8422c325a2fafc4175a65f23c17d725e1d2a13b81230c2b1c95d8dec3d4180bfcc4254210b66468278ccd4b2a457f4179e06d69d13d9803a114595028434fd48667da4bce43ee085943bbdeaeb2c3db8a8775c6f557241483186ff061cfe437eebc246eb86c08f652c8e2a433eca7928583211650347c60806c824ceb992d9ce0026e6d7847eafb5f4d42697fb64ff1c253efeb1f87279fd27b8028dc94ef687434146c134ddccf4b85a5434557f9dac58a1a20290d0a91b798cd165f5e4bf5e514045640177974dfafde405873d7b2b01148c353124ca0a4447dfdd42c0f06789dac94991c4a5721ded1492e42d0dac903847895cf980959564d20c1634a419e3ae4cdb5720ca094d84c02eee9d8c0406ed92b2f7c8735c25beeddbf1e6ef717120c5ef293c7e28d76f0d01cbcfc705eebb9ffc9b617344b1a877a639732c20bd0f695381c2430ebd857c7a1c77d1dd466955d05380c72742fcd6ef93baf7a9a003d570f86a08cf0d500716bb1a88ae4047d2c4268bc192aaab9ad5d1a4f01d1ac11b18e88e87f2dfa134eb8f8a8f49449302122fecfdaeb3191b4d7c70feb5fa7a488f9ef74383659a28f231432c8ab182ed6dcd64b6dfa46f6bbae21521fd7fa9941836fbe79766d427eb2b2b9ea2cde6b4084bb3b7d026e047146b2a104a35703cddb474627fa814276fce79b84cbf1e6fd56816b9efa8eb419de2d50f0321985aed0b587678355d9a7324dadbdc1eededc87340da024144664f700863151941eae9709df379796176d0f77127f33d52d07a28eb108f51dca3802ddfb624ba9ddc8c71bf3e2ae3c19df5d66930e303e1566267b93f37540daaa57f09e2a927ac9ad1ce2c28a8b7135a32169ff422fb8863f060fdaef66eeb0c231dbe63a3704856c603bbd5ff541fd4375e39a03601b44f95b643f6e173bdb326dc57cfe02ce3ec74d0b58df546b169c2cd20389f5ac4e5fd9944f79eb8b0388ba7e0ee894b752b9dde4b5215f99735a10c8644f0e5c16349ec7d5a0439cb455c9982adcd94b1e8d8f119d0706cc7586fe6f8966ffffaa16fbeead7630e8bb377b82ceff55415bd71003780b179dc1de2b96f0cd68588f64085ebff13d379d46e247cdfbb953a7c1536f2451b1ab06152651c6dc21fb764ea6194f6158ac72aa94e479b7d1443835ed45bb21c2dd8a7fbeef9e7b68f72d0c653e1f944936c0ef7e633b53193a3123aef61129dc998779f0d910a8b46569b6f3ba5443768855a6667c8d4e63425a93fffe23f9e6dcb9f4a8c55005a3f57f87e3f5ff3b462312895b4496af2ac0cf8ddcc87cce136b7e9fbb6c345ce4902129b106103f1d7a011dfb6893571ac2478511fb1c570a357eae86365be9eeb7df795820e12c8b7a496da5aab9739b6148f387cde52ba664c68f4cf896d7292725ed6eb460d9700b1e941fd15539520f7590be13da1c4c1b43088202968d42cf2de7013bc80dfaa8ed53c81cc17edf84feddb098288cb02e465b9736ea6c56a88f7ba4f4c3c6a465ffc3c6e444b80778b7d843a4632a8ea988caab2789ec723ce44b0d8c36ba8cfe297d1025d0491159591e310eac185b45db84d79c13196541f071da08b7e1779caae67338f0a7fcd5160cd72f445b69aa407dbb7e840bb7f96228ddd41a00b7955358c954b02d777a6afbf2e5cb8d4e488a3ea8dfbf7f310453c3438a647d06206469837700d76b112363117fffe2836cc4658adbed215eb35793626b331e686f578e8683a5c4494610ddeba8cf1b0246d3f4f9e7f0f397d12d9f319a49c156c5914722b85a71a29e1d5cfed5d8e39ed1b7dadb13bf8c2d847795af9386862264d86905f1036b8800fde77ad130bbfb0ae5e73d93fcd683b5252b9848b6171e1555a72f792989a56cba5b292f5258d945760f69aac6deda3175098074f31173caa8fe6ac2dfb8d08dde6962d8698d5181188c0e7c0c86485ad5323567ca9dd6d3532024adee8cb2f602315a8172abc5f2ffb9edf2ea0f14abe5c373b2e1de57cc27e45bced6188d70248acbcabd725ff6c07d0a9deea84ef802846d57768b502b373ba9a844caca12db8ca711ec2936467842ba9a2f90aada424a17eabe117c84b3a2c82c28c3643319aad074ccce89566e15970d9a373059c6826a5117366963621198a95434549bbb669022217def6537e2967e6da8260e0cdfb5126d92c30d43aba3d301b6f8624f2583e079ecf5f70dbdd8c0eef6e28b551ef0077ccbdcf0693c523e969a0ba0f0682d2893605b2cceae95c76b722ef8638b8e6a34213af37f374b7a7cbd519982b0a392e4d76d316421386643823f122460c4212613939d87877199d6d6b58328a2747017580d1561b6b8b7cc6fe20a809ef900516410b1a048f6dabfb4cefc00440b67aae2c603e3b0a2725054c63a4fd8d0e2ba0eab564dcf07d7a3674115c381dcdc15b5794895d901662ca17b91b1abefdd0a8b37a9e185ffbbabdc2caeb4bac3756bc5822abb9ea6501ef305f4ff594b50674b27b9009756f72d62dbcda880c442dcdb43f8b6ff9e72de6512439194e3e82a15bea44944d45858b9cde4c40268af0a4ecc50bd15f9611490d54bf7f26997c6f2b06efcd0846a7c27b289da2b452b03ab2b26bfe1d3be51a113a9124bd00032a249a235b84de96b50a16ce87f4597e9b1ff694a6c49e3b4b429cbe89f51a0d253a363eea6c04fd7a39b7942ea667ba8db9d904344f32a84c4a0807816318c7800c8ff65f58aece9e04b6a93ca7646b5fe3ac3b9773d6a98e1d4f6ee6cee7cb912865ce5996df8a6729b294cc4a0b8c840bada4c441becc087d70fd8e7d1fe38fc295fb6f793328523ea09ee4a3c5e2a33a9a25d4a34e695b8e90bea8feb41ea6f1447593a337de3949bda801485ce18f3ab3dda46fe5233c856c7075298d80f8f7cde86d66418cf015f3cbec9c16356c9f3678843e5366d5efd7d412469fb09c3be6f7cde2a316595af6d34538b3b7cc8f76ddcd00ca09f22e6e310d9067ee96d7ab7867176d31919780d39aa3df69ec2890c56e44650cf949ba168d7b6c0a34edb1eb8dc8a216ad2a5ceb312fdca199878f00b33169d7950b98c52cf885059ba7d6a1eb40e14df74c4754075c98df6268ed427366991abc635e1ec37d2ba0cf9a1b0de801857f706e60516382b4c87f2a822fdb1bd6041e765bc21d58d2df68d61e816bbde1a26dc2e8f305ca768defa7a8f51f2816b932317cc922640e5a1858028c0636182cc9df0793c0354e7be8b535207c66e5078c085c3bdd3fef150aab4abf4f99be577f44f6dd939c0d994f6ba7f0598f4be95b8f93b195727aec3cc1e4753c348dab1ae9a5f78e4c2744428b14d1e34e63b183673b9cd3d238c25d2ce6875522c5d0194accdc2f446973d5aa1f73d68e21d4837cc73331a0adcc6d96fd757bdd85d21455c7ca1269eac56a52271ed487551fd8160618482376b046765a8c2dc6c6722eb3f257d199b921d0cf0adfd82f68d2270bba7504b945326d75a5b67ef471bde01710fa7067c896f2314ad7978deb7f0396535d7d4e3dd3037579290f3aa16b7cef834df82aeeb75cd624752ad21fda7ef1b1198105fba392b25a08ec2e218be174e1b46a52df0c02ddca6561498731da9cd430b95a937d1ba03c8d27553efaa27998ca78d80e2170e4c30707c00b8a2bead782458a1bb6da5d378f13f44aeff414d425293e3a937250b7eee6e538b93e4a5489ac16c9653ea985326f10a2fb34dfec624f41196f061de41477e9e5674455b5e8a04a1c94fe5442021d6297787235882c87fbd0abc33c36d9c22fa1554c8e20df31cfbf5ce0bc9b81d5ecdcd72879548c176a2f439951a1899f1056b3585fd798395c80070dc3e33dec62eb106d5a5993417efe2e93fd83edaeeb94eca5eca8bf799e77637b8ac062d43e4aa0ab88940488e04302d2e33f46bfbca73fad23105a64031e7ddedbccaf6baf142a078d562d11582fcf9d507023a64b7378d2002250d7fe95fb4e88b1303cf4fa8f9a4eea1d78ecff59742941942c706c96bd30cb9797fd82c5d38f70ef4b9b4fac2b0392e0599b0d4c95ec690d1368b2ed0841e72f17aefefb9edc5f0489e5467f8c33430bc19cb80951817eb6dee6c0a90571f78b8e526b848982b37b85a4e375c11308acee4f64073ee9e9c774d4f79242718fc94aa19ad3ac52f46aec95789659aba61a02b36f4ce40eaf3b58032f3cff9fe32adb5e969408d83288ac9bc854f1c8a6888634d31f941e5a4fe15d02205b6da9c572c398113e0fe3e25a72cd825d7334d812146e296d7c4ab486efb73956e28f94a6c34c2e1b2c5977d5289ed4264e35048a9cfb5103e44accf97177c677a7e871eee5d2a346369412720584e93304c77169a2c706355347e0159937e4bda5cdf1638ae25f7ba485a985738fc373c23af11c66523c67b155cea0a423280f8aff7627c103c254ab17086e1dea9395f79fc32cba0d0d409112ee7ac0ae0477e8508c7182c56b1a950b7e50e0424f924630d640e9a4e737ded9d2eda7419242736647b4cc3f167c04d135642c7531f1f6f492e392ee021c10b8dfa9836fc99b38f86f7f1b0a62cfe480d33e6d836ce032c0e4a4fd5f6cc68cf58ccc7c395369ed352000c3f2df406df771ca9b26e4488c8d38e50494977a1e9842d79ef52ea7ebfe3c7d17610c987648ce9931cfb20d40aac0e54f2386b7effe024d72163832c1ef6bcf3c3a80a1cc1e232657aa0b88680a2b299b04d5cb543697e600cfac5365ea55608bc5cddca61e25eaf186f5b60d5674e4a1aac06992ecedbaa3951f8cd3305f5d99569b29f2fa5e3260b17e9e017ac3072cab95f7438626c9753f4a446caed98615a99f280274195e089ca1791b0d5dac090ceecc897b8b8678dad7f6915315f5d6a32a62daeb5576c0d9d0c5d5766476c5d8945c3038d5ca4e9c087f16bac8de3ff225224ad13fd5f9645fc0802431e4125e97ad721962c55050abff366d5f6244248a678408187bfca3d84a150357d6a2c98263e5d6b603788fb2283fcaf02ed717f4697b53a938c6b15f870bff0fec9d289bd5f3bf648874e106fb95f138ed16b3fecb3256c97dc157838dc41a84b312ba85891fba5994ea7976b0a11bbb527fbf952c4fa2d9123dbe3a5411de4716e20c7bfd4fc2754adf1ad178096ef97b7807e91442e529874a84c194e749a28595845bf217562aeb416b226f8e7960ab0552776e0b2bfc612b3fdb950b7d27b92d0f0a34c250b971a6e80f487a6a2b823a68549eed7507e9fc439e0b4d8306d69a9da61f379c247d3ad858b8f33b08f610415d6a47f22dbf9f9658a82c29d4f7c065252e6c22d6d1cfae0c74fe1e7acdfb50c26f286d8496e38e69428ac0af129ba5756cd8ac41aa52d5c2daced30dc3a1b521d735c133b5f19036385bbd4da27dd4be554016cfc51610b829be006243248c40e763eb261b066583c1318fd977cb53b23eade911991a967268c319a88186e9633f39ef159fdfc77d61446866c1b93ad280bc76fef6389b9ec474b3fa1089174993c0504ba54bc39dd4c6bfa7deff817a20ff992798626f366e4d6692e202f8353caa91cb3e3171fa6c4a85f8aa4eb96cecb3bc5e6aed06856756ae3e34be7e3549803e75ae6514f8566af59d3b883301c40b9acf765a163b494eebfebcf0bfcf1e05596c4620bbd0d8a1537e782275fa29dc60d45324e7b231fb1dd1533e98a7c49646500b65bc3b9695a46dcbdbf6ff051b1fb2dd5f8a24dd736df6264976c09474ddc2862e2770ec72e65ae5171936c3d01ae655da4462f05f1957181ac371db24625f4a98428c92119c263905a70d09aae67609b3c356b606df55ed3cf042fa221606f634916550e4bebbba7b935a766cc567c4872a52136c0164a71ba5d7885e18e99a244e73318f5d728f58969ad3ff02e154fc1baaef1cf4583293204089cc1146c4ee305ff2dfdffcedcc0db2091192f7d2342cea25c2c185403647eae943e9dd6b6913e36082a9bad88ba8a519af1319d7ba8423901967cfae2f0dc46a5cd66c57a91158ae9567485974a99c7f6548532851400bcae32d228f31da6b6001a40e8c6f9e6ee57ab2c3c71f5fd5c719a7fd1487099a122e97c6f2c151e6c104d2e131af80a4b56a558e3ff589b0eec89feb9f5c07593303ed881243efed3a9cbe4323e43696252dd02fdac2798ec09f10139aae615ea9a1e8d757e03b4c010e84d56270e84c079e6c57c76687fa4b3d00ae98cf09064db59c230100e41da97e6e030f37241daae08bf28fa82d4f36ecdd8b22bdbc5cd0ca48a5ec5a28cb31209c033319a7f4d662405dce94c84a8402f5a89dc7778f20f013b8cf3a2428027c9c8724040fd14f6369ece86081a0c55279b534d1b67f5cd27cb38a6033a2d1008c97f64e427463dbcbca31f69cd07f6e797bfce4d201d2456077e21e50ba7b6354709283a3fb348b73e28ef30a39e66a1e45fb53af8b019627328711f80e495c05bcbeddca727bf8dff6dd42cb0f39a0ee0c70d904f42249ac5875519f3349921649d6a9c178674908ff835551bb99c8e5b360b474797d910490587ef7495f76083bc316c467133a488e4d4e4a5f98a3ea97c9cdd550711ea04fbace1ff8a2ffc32740dc18fec5522410cd584c037ef317113c6db5541d039d4f6b486591f3ab0722e4d15702da4d84b98cb80c9dd05b32e7dbc8aa07911cfef702b083ece938e93c40b9a86136f572273598b745f135902cbb5b20341cf7037ce03931795ef9c5db6fcebef24291d48bd3e1de7c0a776d6fd22c795ddbc6c4ed46836c9e750d5df097f09d8cb35617e707cd551bdf8fcecb895ee537f647b2e5dfc53e1e69c7d7c922d4ed0e58b953ae709985591471a03dd04e2c7a5c60d3aa315ec95a1ff82e69bdb44e993bec517e910e431415c1c7fea04405b5207ed4125f6440da277f3d4ddbaaf972f53017861464c87da08ac8a017e1aca582ffee10f1196616de585cc6ef66c952abe4f1d05ccc9bab79f9fe8b65624ca001880f54f7079d793f66dc430260d83247038c3f719335aa3229e66bacac285205810f31665bac609f28cda90d821b8e495267350f00517174819111192ee1aabce8183d87828a7dc70a40c995adba5550f88a0b8998c74f3143e98772d58b9f092329853231692fb2de3589da4535017437fbd426ab2788a33f009f7ab122e5f88d80cc41772bdef910c652ffc373d74034db31d33c81958fae03b911b0de44b02b6cdd3eecd6952d4ea16570ecc3eb7d06878cf9f2757a572f13b7b76beaf8b74c549dbd18bc3da0a245adb7c3af134c5ae92ece1f871afaab3a8c45a2ebf23b92fafe3c63c08c697cd1b8c597e97b18e616fa06ab9ac4b90dc5d2775157ec25c42654ab399cd7fecc3d6df8ebfeeaa402edf9cfd38cf855ac74fcedb21906c63a4196930a450249cf0ad4d52fb88ac5de5d56d31aac05c39d26a0590a890799646cad225263ae4402ace5b9d7fcba6dcdbed36025391c2e12a9fd04c4fca0126b2dea757d2fe5f9106456eb8c4e350ed3a5950449c9c05fda7944637366edcbb067107b18d55b447d5ebc63e96b8fe5a4170f4f1e1fe92b0317b4cae7d6ae8d867c766c9a63910b3222d25b06ef3efd696c0f1a946dcb3792844304da22c60f124dc5438424ef7afced05bf3409c9e0b660320a66a5ddf27bb300df6ba2d9095900d641ba287b7a86a2d2838da70e11723d99ac99e16ca51060fbe3730bd488e15a0f60cf8be2b4cceb2cec2fd242ebc154e00419c8112ef2da97f9fa591ab7ca515ff501da952d4b14100ec0c67f42e11f21a0772733532f473e18a86a799e67292e6c451f5be6f78ca1a40a010ebf56ad4f6074305e8fc5863a728aba229148e1ee5f4b02573fe8f054a78b144f9f4339269e138e57e529c51c371d329e7ddf61376753d519e716c50ed99a2e585d783a164c4a8d30df7d80b99ec3e38628471a27d0f280095a0eae6c70f9d827c8fb4015ba7f2d6fc478aab09e158e104008d904f504c94d4f72e37d186de2f9b926337cd007286697900a8816057e73e31d5ef04f4279bd5ec2e4f22e6125194c592bf39f640fcc23d1c1191c468aa933c368b67cc5ba05d1839d1dcdc284fd68cb4ef356f24504366a8358b4ac42791ab88b5ec8cbbee47cd7ee97f223916e2377ef6cab55c2689a46b93dd83ee8dc805f4aa1f19bfde47c98dfd2090d39d50b5b821f7edd634a9b32664d97c71838250757c347319478bb08de272d9e2a630695535f9bc611de5512c0a031342f481ae4f311ed106412ce1dc105e10046c72dc9708d2db71b6cdc99841d624f21ed8d27d8de35cbc10f6f86f43a75aeeddf7c753a5d2758f0404b4db86689995ba470fa9c2d4e69723958b1a39f9e10b3a496f546c2b4966b6a31c918b2e36d4e0abf5b600ad28029787c89663ff0d1f58733c1f2f57346d4a6d03fbde10f930ca7d5a6a927ac47afd4d04a8ceb20cfec0364fd4fdc126af2732f7a4cedb1d8a2ed400b4b40ab387b552ea32629595604397eaf46d914d1ed8d4de019cbc5c7bded8f101c77a57ef442fe5d2398adef697ec08eeeb594327bc2bd2beec4c97917756f8236ac34385e44a40eb269c5e736be946ed1f0bba1723f3e00630285d1cc06dbd82810287fda76cc358c8fb1a8bd85b8131bf9804cb0221a903412b150348d80fd0e7711868127eaba79d811cb54ce8012404828d43191ac8238e1ca67676adc9e518252281294a504ce3606a9cd01d78c561a9c221807ca641dd59df9ce685f00d74f0f57d778817f6ef4f7cff47c273b472471e32b60e20a5ca46f2047ed06502918867473f86116d96c0a28f485bb3486ac634892deaaeba57330a7701b731ad94fffaad2f92dd0b362d311cd8bc4479edd862293188e06edb05aff0e2703358266ab07baea40cce2a6b57fda8a40ee659bfb16b4c8025caf406a30a0ac6efa6a7c70214c0bbf52f73ad2cc5cbc4b2f48b41cf26e3d33d2b9d989e113f005b6978bfa2923953f50c10329eff35e284c5ac7f51c63c56866980dbed653ec78199ed5293ce425573653c563d1c24c4b78572684998cffe8ba2ef133f307c58383c850ad060898a36505e35da012fc688a495b2be37d87da1834ab51415a756e3305ec228f5adbbdc8d4fdd1e970229c6636851af4469a0b92e4cb6e34e5fdb76257302c8730bb6a8add9c6f7b71081ad1868a5f42fca1aa22f01b55b78311e43e2bbd479ce617462c19a33581555c666518360796c6f13b6241316c426c3d9e29892c1d2bcb2b27c81d98bd14c25f2a9433fe9e711d02d82bb506f7e1550613a1343fee0c9abf86aee362b9602c95b41d76866593a26326cbbea16b670312830cedf6d4c58205b7f849a43ab21d870d38a5a639aa638ef73c0379520ff11c0bb7c8686f560995741f8429d55a6c6a9e7b46cabfc6bfc7ebbb6ea0855ae080c65d297c2beb953d4905c4c94b01c0421b47b541271ee2e86f3cd679f101b828d5518f20d66ad11931ff8d838fbac922c5cc4f1babc020c11acb7c135c2a4afe7333dd6e830cb07f1d79aa2bd26cf5d5ebb3a1aec5f7e9d3045fb79601f0cd5e8decf5f4fcccf19818e95b8e40d6a2b2a321844f41c813accf56262e47d1d740913f532673b5c780b1ac3c6e432c92f6e4381c3e1ac95bf288c2af45fef3256bc6b2fad12a4f438c3f679ca2fc59a3be481def124d02b7124318db4670e9a8aba26d64174de1aec9c15c06a55b4db5396bdb6ff7b6ba2f1fde13900b7b2d5d52d0ed0542f8608e2614d20ef3cfadeb9a2d9596d4497e44f90b1dd2210d5f7fdc12184c7b6b07d4fb672762745ff0f9aab03151024aeb2ecca40442208394305d8b1da36eccfb8585111d0a9d4d74ef2c36262f79d85f7da3eddc5c05f09dd614d345210e5c67aa5eac71915c74d9610440e891942490f9dee36fa98d884c12a4dcb9f2863230e458edd904b52c45810f512085b3621f40eda9588c9ca683fa925271b12e80be829f10420a4a2c725c03b43dba01654fafd0cc951c6adbd99a1332163aef3561284059a0b6e7716ea92df29756dbe56a224beaaebb7e7fff1ea33a4434c16ed1bc1beb7342ef8888df6df595382f3358c9a0183625fc9b5bef1831189aab16690288f1db328ff4437f23aa9077950fe5f4394c180c57b91655781650c1d7fc400f86afec4c2ec14c8777a8ea7108d181d3e0a8cd96a159877a1331ad34027b6a9f49ed734404c7f19534a2b193075cd13f538337b9a6516729ab60d9d0f993e35b72a375ca7fe91f9071d0b3fccd060446c79a10cdf29668e6219ca69b3f5e38b2d77b71ef8f44aef2d07ca67de83e86df5525f3116b28f961d3cacd5779484d52d45d1a31ad3a0f2706835e1d93d7c10333d22386ee9fe9bee1300a28e9187f8e26e0165e50066f1c19f665fc5c6f9ab8a47b9299c143adb7e2879a1a7a740a388cad993e7a197332c22d546502889bb90566af26b7e6e1799bca849aa7ab8dea844c7c0059593226242c58a62e4591d8e5faf5d5f0d4d85fa265ade3a932314f7a801279a71a0f16d218b684ed023b6958bea4668cf9f5a7a9a27c98862d1c101a3bbf3355910fd1b70ec94d522a4e1d2fbf35678dcc282ca2dc33c74c3a124959939d9c4d3796056a48b78f238b21ae33c6f8db9a3a0edd9b3194b590acd8c2ea36a3cdba34df70ff56cf3af01ab31654fd8d8a6777da7ec4f8a2679feb46df9cb662b141f38208bf40ad97c17c707a84664b45a18875e1aec3bc62394582236e642a2825c0a1945f1129d214646611a4218c39136c039a89ca4d7219590bbfe10de0baa155651a009280fec3ac0545382310503b864b1eb719c24a2100de0e170772ab0eaab99d4f774f5ef477cff28f5ab7d06b8c949a3e2579000d506d7d23b7f6428f56c802c2408b40ee1a8c65da0788fef8b2aa0cf9c88e321f951b628d684e2c5bbab19bbd44e83840af2e9ff6e8bc28e9c257ee8471103523f0080e53adbd2b2e5adf60d7f66953ff18dbc3af1d15ec02f38cad92bfe2270d155a6dee59aa16e88715a479909acaba21489af8c9db119d76094d6da8965e9d41968f95ff99cec7d75f0d0cea7cc99e309d79b3b36410bb76e47b799ff8e5867da095b62d0a9f2966fd0255946de3d311405f8f421b77ac611303935115c92323151f5003ea7626b5407085ffd0b0cdf00cbf8b3b4043800828f2826f34859c2414435b0f463915e523f908f64f8426e870c21eb2dfbd458560eb3e9e66c229bb6da88ab3e3e7678363a7c463e66bca0857c567462da9735c19b11006ae7a67b69d81f2a64a5ad00efad3f0072b3a68b8803a7290bf8d56b2eb660fb75cecd80616b794ec69219b0b0f5887f49f8318adfbbe5a9619246991726188731db5bd50f3a1d4e47737fae3604d68e3ea30e49a7d3554f98ab69c01b352e408ade9eee6475fc7ebd3fae2c6be4ae9da12f983497356aa3418b342e82c4bfce7080b8139af0bb5ebf573181eccccd7617b4acdd84982597ac0803a26fb34213e5da4beee644ba3aa2917e545482ed019188825c706262448d9ba7000b577ed8500b9df94bf1d28b1ecfa27dc456988694aaae784932a2b63fa53e95cb06916ea574c2bebb9f64f630e5a1120016a6cfbb99d5f0fd67eeca7cc6ad596dc9aca78bc1c05b436df1af49d44dd168f654b24ce8880d774a5bc25ba9509c21a1cb71a58aa661721315409a2b1fcc87e143e1165449d7fba0bf20da89f0a5ac003ef484a707a49be7338603a597d728beb0f4856fff36627fd2566b4f39f3488540dd9dd7bc3629dd42eec8c0c5df8e84b355ea7362b768877277fa6ead1cd45a81f4dd227c223920f42ca09d37032c09831cf68660a45208882bd7d2dd97b0a375fd1357e7b979a390312f83697a68939a6a4c92e1ccf9617962322803fdc11fd460431b776f172d270ba5784db1b45eda5158d4759fd95e1c6df9f8e313060dadfef9a0b5cde1e98c545132f447dd0f4d6cfa835d276aa698ac863b6b11995e46f747d7a0ebe82a35f0bc09acbaf38f26afade105f7fbc3f9c3411ecc82c149c3528dd27f8c2a3faa65051eee67df051244a0c6b8dabda0916158fc0cf35cbaed01b12f78f2963789962c1391523b4b9e4b2d49bc90a983782c7dc87b94ed9d69c65ebad2c479028701d34b7d506a8fa85c2bfe978aeec02d41d18f79c51c92b4fe34e185986728a70bcf30283b42b0a3e784a1131aea4bcabb2c72a6836c2b9e246352bbd844a8da5c171761259f5fa4920b24ac6eb178e545e7b885c52e6dfd2447f0ead19b30f1df82e98428c7f5b80ae1477ea8e6138a66bf92accb7e9c8f4f14e859b34dc0734ac3fbe4ba8917c993e41cd741654770995fae2ebceb1136060e445a07fe15ecb0537e3d5fcc0f87d3bce7c8925c08b058733efbcd2e87ef65113aab807c87c7b42e18d85eae40279959b3169c8a7ff3ca1da8468347240e3b5774635e8fad689e81269ecc2e2f8106f6fc06d6c238cbb3ff103670486f9b58634c0b9185e88a4f7c6f042256a68f8041f6d27a5d8d8642448a401c96dec384b64660da98f6933d9231cff28b</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      ç»‘å®šä¸­éå¸¸å®ç”¨çš„ç®—æ³•åº”ç”¨
    
    </summary>
    
      <category term="CG" scheme="https://blog.l0v0.com/categories/CG/"/>
    
      <category term="Maya" scheme="https://blog.l0v0.com/categories/CG/Maya/"/>
    
      <category term="Rigging" scheme="https://blog.l0v0.com/categories/CG/Maya/Rigging/"/>
    
    
      <category term="à €Maya" scheme="https://blog.l0v0.com/tags/%E0%A0%80Maya/"/>
    
  </entry>
  
  <entry>
    <title>Maya é¡¶ç‚¹è‰²å•é€šé“ç¬”åˆ·</title>
    <link href="https://blog.l0v0.com/posts/1cdbfd5e.html"/>
    <id>https://blog.l0v0.com/posts/1cdbfd5e.html</id>
    <published>2022-08-16T08:11:28.000Z</published>
    <updated>2022-11-09T02:37:04.663Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;ä¸Šæ¬¡æˆ‘ä»¬è®¨è®ºäº†æ€ä¹ˆåœ¨ Maya å®ç°å„ç§ç¬”åˆ·çš„å§¿åŠ¿ <a href="./cacaf61d.html">Maya CurveBrush ç¬”åˆ·å¼€å‘</a><br>&emsp;&emsp;è¶ç€æœ€è¿‘æ¯”è¾ƒæœ‰ç©ºï¼Œæˆ‘åˆæ¡èµ·äº†ä¹‹å‰æƒ³è¦å¼€å‘é¡¶ç‚¹é¢œè‰²å•é€šé“ç¬”åˆ·ï¼Œ<br>&emsp;&emsp;ä»“åº“æ—©åœ¨ 1 å¹´å‰å°±åˆ›å»ºäº†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å¥½å¥½å¼€å‘å‡ºæ¥ã€‚</p></blockquote><p><a href="https://github.com/FXTD-ODYSSEY/Maya-VertexColorPainter">https://github.com/FXTD-ODYSSEY/Maya-VertexColorPainter</a></p><blockquote><p>&emsp;&emsp;å…³äºå•é€šé“é¡¶ç‚¹è‰²ç¬”åˆ·ï¼Œå…¶å®æ˜¯ä¹‹å‰é¡¹ç›®ç»„ç»™æˆ‘æçš„éœ€æ±‚ï¼ŒMaya å®˜æ–¹æä¾›çš„ <code>Paint Vertex Color Tool</code> æŒºå¥½çš„</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cdbfd5e/2b1586377c548119cf7f0ad1e2bb1e1e.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;å°±æ˜¯ç»˜åˆ¶çš„æ—¶å€™é¡¶ç‚¹è‰²æ˜¯æ··åˆåœ¨ä¸€èµ·çš„ã€‚æ— æ³•å®ç°åˆ†é€šé“ç»˜åˆ¶ã€‚<br>&emsp;&emsp;ç½‘ä¸Šä¹Ÿå¯ä»¥æ‰¾åˆ°æœ‰ä¸å°‘å¸–å­æŠ±æ€¨ Maya ç«Ÿç„¶æ²¡æœ‰å®ç°è¿™ä¸ªåŠŸèƒ½çš„ã€‚</p></blockquote><p><a href="https://polycount.com/discussion/191918/single-channel-vertex-painting-in-maya-2018">https://polycount.com/discussion/191918/single-channel-vertex-painting-in-maya-2018</a><br><a href="https://www.reddit.com/r/Maya/comments/87znt2/paint_on_separate_channels_in_vertex_painting/">https://www.reddit.com/r/Maya/comments/87znt2/paint_on_separate_channels_in_vertex_painting/</a></p><blockquote><p>&emsp;&emsp;æˆ‘å½“æ—¶åšäº†ä¸€äº›ç ”ç©¶ï¼Œåæ¥å› ä¸ºå¤ªå¿™äº†ï¼Œå°±å°†éœ€æ±‚è½¬äº¤ç»™å…¶ä»–åŒäº‹è´Ÿè´£äº†ã€‚<br>&emsp;&emsp;é‚£ä¸ªåŒäº‹è§£å†³äº†éœ€æ±‚ï¼Œåªæ˜¯è§£å†³æ–¹æ¡ˆæ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦ç”¨ OpenMaya å†™ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå†åŠ è‡ªå®šä¹‰ç¬”åˆ·å®ç°ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ç»è¿‡æˆ‘ä¸Šæ¬¡ç¬”åˆ·çš„æŠ˜è…¾ï¼Œæˆ‘åœ¨æƒ³èƒ½å¦æ‰©å±•åŸæœ¬ Maya <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=GUID-3DB9DB65-78B6-407B-8CB0-5212217B645F">Paint Vertex Color Tool</a> çš„åŠŸèƒ½</p></blockquote><video src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cdbfd5e/demo.mp4" autoplay="autoplay" loop="loop" style="width: 100%; height:100%;"></video><blockquote><p>&emsp;&emsp;ä¸Šé¢å°±æ˜¯æˆ‘æœ€ç»ˆå®ç°çš„æ•ˆæœï¼Œåœ¨ Maya çš„åŸç”Ÿ UI ä¸Šè¿›è¡Œä¿®æ”¹ï¼Œæä¾›äº†é¢å¤–çš„ UI é…ç½®æ¥è¿›è¡Œå•é€šé“ç»˜åˆ¶ã€‚</p></blockquote><h2 id="ç¬”åˆ·é€‰å‹"><a href="#ç¬”åˆ·é€‰å‹" class="headerlink" title="ç¬”åˆ·é€‰å‹"></a>ç¬”åˆ·é€‰å‹</h2><blockquote><p>&emsp;&emsp;<a href="./cacaf61d.html">Maya CurveBrush ç¬”åˆ·å¼€å‘</a> æˆ‘è¿™ç¯‡æ–‡ç« å·²ç»è¦†ç›–äº†å†™ç¬”åˆ·çš„å„ç§å§¿åŠ¿ã€‚<br>&emsp;&emsp;ç”¨ Maya å¼€æ”¾çš„ <code>MPxContext</code> å†™ç¬”åˆ·å®æœ€ä¸ºè‡ªç”±çš„ï¼Œä½†æ˜¯å¾ˆå¤šåŠŸèƒ½éƒ½æ²¡æœ‰ã€‚<br>&emsp;&emsp;ä½¿ç”¨ Maya å†…ç½®çš„ <code>artisan</code> ç¬”åˆ·ï¼Œåˆ™å·²ç»å®ç°äº†å¥½å¤šåŠŸèƒ½ã€‚</p></blockquote><ol><li>è‡ªå¸¦é•œåƒ</li><li>ç¬”åˆ·å¯ä»¥è‡ªå®šä¹‰ç¬”åˆ·å›¾ç« å®ç°æ¸å˜</li><li>å†…ç½®åºåˆ—åŒ–åŠŸèƒ½</li></ol><p><a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=GUID-72D60883-07A4-4536-AE72-226A2AD0845E">artisan painting æ‰©å±•å®˜æ–¹æ–‡æ¡£</a></p><blockquote><p>&emsp;&emsp;æ‰€ä»¥å¦‚æœä¸æ˜¯å¤æ‚çš„ç¬”åˆ·ï¼Œèƒ½ç”¨ artisan å°±ç”¨ artisan å»å®ç°ã€‚<br>&emsp;&emsp;åªå¯æƒœ Maya æ²¡æœ‰æš´éœ² artisan ç¬”åˆ·çš„ C++ æ¥å£ï¼Œæ‰€ä»¥å¦‚æœç”¨ C++ å¼€å‘å°±åªèƒ½é‡æ–°å®ç°ä¸€é <code>artisan</code> çš„åŠŸèƒ½ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚<br>&emsp;&emsp;å½“ç„¶ç»˜åˆ¶é¡¶ç‚¹è‰²æˆ‘ç›´æ¥ä½¿ç”¨ <code>artAttrPaintVertexCtx</code> å³å¯ã€‚</p></blockquote><h2 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h2><h3 id="å•é€šé“-color-set-æ‹†åˆ†"><a href="#å•é€šé“-color-set-æ‹†åˆ†" class="headerlink" title="å•é€šé“ color set æ‹†åˆ†"></a>å•é€šé“ color set æ‹†åˆ†</h3><blockquote><p>&emsp;&emsp;åˆ©ç”¨ Maya æä¾›çš„ <code>ColorSet</code> åŠŸèƒ½ï¼Œå°†æ¨¡å‹çš„ä¸»é¡¶ç‚¹è‰²åˆ†æ‹†æˆå››ä¸ªé€šé“çš„ <code>ColorSet</code> ï¼Œ<br>&emsp;&emsp;æˆ‘è¿™é‡Œå°±åˆ†åˆ«å‘½åä¸º <code>VertexColorR</code> <code>VertexColorG</code> <code>VertexColorB</code> <code>VertexColorA</code><br>&emsp;&emsp;ç»˜åˆ¶çš„æ—¶å€™æ ¹æ®é€‰æ‹© UI çš„é€‰æ‹©æ¿€æ´»ç›¸åº”çš„ <code>ColorSet</code> ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;è¿™ä¸€æ­¥å¯ä»¥ç”¨ <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/artAttrPaintVertexCtx.html">artAttrPaintVertexCtx</a> çš„ <code>toolOnProc</code> å’Œ <code>toolOffProc</code> å®šä¹‰æ¿€æ´»å’Œå…³é—­çš„å›è°ƒã€‚<br>&emsp;&emsp;æ¿€æ´» context çš„æ—¶å€™åˆ›å»º <code>ColorSet</code> æ‹†åˆ†ï¼Œé€€å‡º Context çš„æ—¶å€™åˆ é™¤å†—ä½™çš„ <code>ColorSet</code><br>&emsp;&emsp;è¿™ä¸ªåœ°æ–¹çš„ <code>toolOnProc</code> <code>toolOffProc</code> åŒæ ·åªæ¥å— mel å‡½æ•°ï¼Œç”¨ Python è§£å†³çš„æ–¹æ¡ˆå‚è€ƒ <a href="./cacaf61d.html">Maya CurveBrush ç¬”åˆ·å¼€å‘</a> è¿™ç¯‡æ–‡ç« ã€‚</p></blockquote><h3 id="é¢œè‰²åˆ†è§£"><a href="#é¢œè‰²åˆ†è§£" class="headerlink" title="é¢œè‰²åˆ†è§£"></a>é¢œè‰²åˆ†è§£</h3><blockquote><p>&emsp;&emsp;é‚£ä¹ˆä¸Šé¢æ‹†åˆ† <code>ColorSet</code> çš„æ—¶å€™å°±éœ€è¦å°†å¯¹åº”çš„ MainColorSet çš„é¢œè‰²æŒ‰é€šé“èµ‹å€¼ç»™å¯¹åº”å•é€šé“çš„ <code>ColorSet</code>.</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyeml.core <span class="keyword">as</span> pm</span><br><span class="line"><span class="keyword">from</span> maya <span class="keyword">import</span> OpenMaya</span><br><span class="line">PAINT_CTX = <span class="string">&quot;artAttrColorPerVertexContext&quot;</span></span><br><span class="line">color_set_representation = &#123;</span><br><span class="line">    <span class="string">&quot;R&quot;</span>: <span class="string">&quot;RGB&quot;</span>,</span><br><span class="line">    <span class="string">&quot;G&quot;</span>: <span class="string">&quot;RGB&quot;</span>,</span><br><span class="line">    <span class="string">&quot;B&quot;</span>: <span class="string">&quot;RGB&quot;</span>,</span><br><span class="line">    <span class="string">&quot;A&quot;</span>: <span class="string">&quot;A&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_color_sets</span>(<span class="params">node</span>):</span><br><span class="line">    color_sets = pm.polyColorSet(node, q=<span class="number">1</span>, allColorSets=<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> color_sets <span class="keyword">or</span> pm.polyColorSet(node, create=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">filter_color</span>(<span class="params">color, index, source_color=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">if</span> index &gt; <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">return</span> color</span><br><span class="line">    is_color = <span class="built_in">isinstance</span>(source_color, OpenMaya.MColor)</span><br><span class="line">    color_list = <span class="built_in">list</span>(source_color) <span class="keyword">if</span> is_color <span class="keyword">else</span> [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line">    color_list[index] = color[index]</span><br><span class="line">    <span class="keyword">return</span> OpenMaya.MColor(*color_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># NOTES(timmyliang): è·å–å½“å‰æ­£åœ¨ç»˜åˆ¶çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> <span class="built_in">set</span>(pm.artAttrPaintVertexCtx(PAINT_CTX, q=<span class="number">1</span>, pna=<span class="number">1</span>).split()):</span><br><span class="line">    node = pm.PyNode(node)</span><br><span class="line">    node.displayColors.<span class="built_in">set</span>(<span class="number">1</span>)</span><br><span class="line">    color_sets = get_color_sets(node)</span><br><span class="line">    main_color_set = color_sets[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    mesh = node.__apimfn__()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># NOTES(timmyliang): è·å–ä¸» color set é¡¶ç‚¹è‰²</span></span><br><span class="line">    color_array = OpenMaya.MColorArray()</span><br><span class="line">    mesh.getVertexColors(color_array, main_color_set)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># NOTES(timmyliang): è·å–é¡¶ç‚¹åºå·æ•°ç»„</span></span><br><span class="line">    vtx_array = OpenMaya.MIntArray()</span><br><span class="line">    <span class="keyword">for</span> array_index <span class="keyword">in</span> <span class="built_in">range</span>(color_array.length()):</span><br><span class="line">        vtx_array.append(array_index)</span><br><span class="line"></span><br><span class="line">    final_colors = OpenMaya.MColorArray()</span><br><span class="line">    <span class="keyword">for</span> channel_index, color_channel <span class="keyword">in</span> <span class="built_in">enumerate</span>(cls.CHANNELS):</span><br><span class="line">        <span class="comment"># NOTES(timmyliang): å¦‚æœé€šé“ color set ä¸å­˜åœ¨åˆ™åˆ›å»º</span></span><br><span class="line">        color_set = <span class="string">&quot;VertexColor&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(color_channel)</span><br><span class="line">        <span class="keyword">if</span> color_set <span class="keyword">not</span> <span class="keyword">in</span> color_sets:</span><br><span class="line">            rpt = color_set_representation.get(color_channel)</span><br><span class="line">            pm.polyColorSet(node, create=<span class="number">1</span>, rpt=rpt, colorSet=color_set)</span><br><span class="line"></span><br><span class="line">        mesh.setCurrentColorSetName(color_set)</span><br><span class="line">        final_colors.clear()</span><br><span class="line">        <span class="keyword">for</span> array_index <span class="keyword">in</span> <span class="built_in">range</span>(color_array.length()):</span><br><span class="line">            full_color = color_array[array_index]</span><br><span class="line">            color = filter_color(full_color, index=channel_index)</span><br><span class="line">            final_colors.append(color)</span><br><span class="line">        <span class="comment"># NOTES(timmyliang): æ‰¹é‡è®¾ç½®é¡¶ç‚¹è‰²</span></span><br><span class="line">        mesh.setVertexColors(final_colors, vtx_array)</span><br><span class="line">    mesh.setCurrentColorSetName(main_color_set)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è¿™é‡Œåˆ©ç”¨ pymel æä¾›çš„ <code>__apimfn__</code> ç›´æ¥è·å– <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_fn_mesh_html">MFnMesh</a> å¯¹è±¡<br>&emsp;&emsp;åˆ©ç”¨ <code>setVertexColors</code> API æ‰¹é‡è®¾ç½®é¡¶ç‚¹è‰²ï¼Œæ€§èƒ½æ¯”èµ·å•ç‚¹è®¾ç½®è¦å¥½å¾ˆå¤šã€‚</p></blockquote><h3 id="å•é€šé“-å•é¢œè‰²-ç»˜åˆ¶"><a href="#å•é€šé“-å•é¢œè‰²-ç»˜åˆ¶" class="headerlink" title="å•é€šé“ å•é¢œè‰² ç»˜åˆ¶"></a>å•é€šé“ å•é¢œè‰² ç»˜åˆ¶</h3><blockquote><p>&emsp;&emsp;ä¸‹ä¸€æ­¥å°±æ˜¯è¦å®ç°ç»˜åˆ¶å°†é¢œè‰²é”åœ¨å¯¹åº”é€šé“ä¸Šã€‚<br>&emsp;&emsp;æ¯”å¦‚æˆ‘åœ¨ UI ä¸Šè®¾ç½®ä¸ºå€¼ç»˜åˆ¶ R é€šé“çš„çŠ¶æ€ï¼Œç»˜åˆ¶é€‰æ‹©çš„é¢œè‰²æ˜¯ ç™½è‰² [255,255,255]ï¼Œç‚¹å‡» Viewport çš„æ—¶å€™ä¼šå°†é¢œè‰²è¿‡æ»¤æˆ çº¢è‰² [255,0,0] ï¼Œè¿™æ ·å‹¾é€‰ R çš„æ—¶å€™å°±åªä¼šåˆ·å‡º çº¢è‰² æ²¡æœ‰å…¶ä»–é¢œè‰²ã€‚<br>&emsp;&emsp;è¿™é‡Œå¯ä»¥ç›‘å¬ Viewport çš„ press å’Œ release è§¦å‘ï¼Œå½“ç‚¹å‡» viewport çš„æ—¶å€™æ ¹æ® UI å‹¾é€‰çš„é€šé“è¿‡æ»¤ Ctx é¢œè‰²é…ç½®ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># NOTES(timmyliang): è·å– UI çš„é¢œè‰²å’Œé€æ˜å€¼</span></span><br><span class="line">rgb = pm.colorSliderGrp(<span class="string">&quot;colorPerVertexColor&quot;</span>, q=<span class="number">1</span>, rgb=<span class="number">1</span>)</span><br><span class="line">alpha = pm.floatSliderGrp(<span class="string">&quot;colorPerVertexAlpha&quot;</span>, q=<span class="number">1</span>, value=<span class="number">1</span>)</span><br><span class="line">rgb.append(alpha)</span><br><span class="line"><span class="comment"># NOTES(timmyliang): ç»„è£…é¢œè‰²ï¼Œè¿‡æ»¤æ‰ç›¸åº”çš„é€šé“ã€‚</span></span><br><span class="line"><span class="comment"># è·å– ui çš„é€‰é¡¹</span></span><br><span class="line">sel = pm.radioButtonGrp(SINGLE_CONTROL, q=<span class="number">1</span>, sl=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># è¿‡æ»¤é¢œè‰²</span></span><br><span class="line">color = filter_color(rgb, index=sel)</span><br><span class="line">pm.artAttrPaintVertexCtx(PAINT_CTX, e=<span class="number">1</span>, cl4=<span class="built_in">tuple</span>(color))</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;release çš„æ—¶å€™æ¢å¤ä¹‹å‰çš„ é¡¶ç‚¹è‰² é¢œè‰²é…ç½®ã€‚</p></blockquote><h3 id="release-é€šé“é¢œè‰²åŒæ­¥"><a href="#release-é€šé“é¢œè‰²åŒæ­¥" class="headerlink" title="release é€šé“é¢œè‰²åŒæ­¥"></a>release é€šé“é¢œè‰²åŒæ­¥</h3><blockquote><p>&emsp;&emsp;æœ€åè¿˜éœ€è¦å®ç°å°†ç»˜åˆ¶å®Œçš„é€šé“åŒæ­¥åˆ°å…¶ä»–çš„ color set ä¸Šçš„åŠŸèƒ½ã€‚<br>&emsp;&emsp;å› æ­¤ release è§¦å‘çš„æ—¶å€™è¦åˆ¤æ–­å½“å‰ç»˜åˆ¶çš„æ¨¡å¼ï¼Œå¦‚æœç»˜åˆ¶ rgb å°±å°†é¢œè‰²åˆ†è§£åˆ°å¯¹åº”çš„å•é€šé“ä¸Šã€‚<br>&emsp;&emsp;ç›¸åå¦‚æœæ˜¯å•é€šé“ç»˜åˆ¶å°±è¦å°†é¢œè‰²åé¦ˆåˆ° rgb çš„ä¸» color set ä¸Šã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">apply_color_channel</span>(<span class="params">cls</span>):</span><br><span class="line">    index = pm.radioButtonGrp(cls.SINGLE_CONTROL, q=<span class="number">1</span>, sl=<span class="number">1</span>)</span><br><span class="line">    mode = cls.OPTION_ITEMS[index + <span class="number">1</span>]</span><br><span class="line">    is_rgb = mode == <span class="string">&quot;RGB&quot;</span></span><br><span class="line">    <span class="keyword">for</span> node <span class="keyword">in</span> cls.get_paint_nodes():</span><br><span class="line">        dag_path = node.__apimdagpath__()</span><br><span class="line">        mesh = OpenMaya.MFnMesh(dag_path)</span><br><span class="line">        color_sets = cls.get_color_sets(node)</span><br><span class="line">        main_color_set = color_sets[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        current_color_set = mesh.currentColorSetName()</span><br><span class="line"></span><br><span class="line">        main_colors = OpenMaya.MColorArray()</span><br><span class="line">        mesh.getVertexColors(main_colors, main_color_set)</span><br><span class="line">        vtx_array = cls.vertex_color_data[node.fullPathName()]</span><br><span class="line">        final_colors = OpenMaya.MColorArray()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># NOTES(timmyliang): å¦‚æœå½“å‰ç»˜åˆ¶ä¸ºéå•é€šé“</span></span><br><span class="line">        <span class="keyword">if</span> is_rgb:</span><br><span class="line">            <span class="comment"># NOTES(timmyliang): å°†å½“å‰çš„ä¸»é¢œè‰² æ‹†åˆ†åˆ°å„ä¸ªé€šé“ä¸Š</span></span><br><span class="line">            <span class="keyword">for</span> channel_index, color_channel <span class="keyword">in</span> <span class="built_in">enumerate</span>(cls.CHANNELS):</span><br><span class="line">                final_colors.clear()</span><br><span class="line">                color_set = <span class="string">&quot;VertexColor&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(color_channel)</span><br><span class="line">                mesh.setCurrentColorSetName(color_set)</span><br><span class="line">                <span class="keyword">for</span> vtx_index <span class="keyword">in</span> vtx_array:</span><br><span class="line">                    main_color = main_colors[vtx_index]</span><br><span class="line">                    color = cls.filter_color(main_color, channel_index)</span><br><span class="line">                    final_colors.append(color)</span><br><span class="line">                mesh.setVertexColors(final_colors, vtx_array)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            mode_index = cls.OPTION_ITEMS.index(mode) - <span class="number">2</span></span><br><span class="line">            channel_colors = OpenMaya.MColorArray()</span><br><span class="line">            fix_colors = OpenMaya.MColorArray()</span><br><span class="line">            color_set = <span class="string">&quot;VertexColor&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(mode)</span><br><span class="line">            mesh.getVertexColors(channel_colors, color_set)</span><br><span class="line">            <span class="comment"># NOTES(timmyliang): è·å–å•é€šé“çš„é¢œè‰² å›é¦ˆåˆ°ä¸»é¢œè‰²ä¸Š</span></span><br><span class="line">            <span class="keyword">for</span> vtx_index <span class="keyword">in</span> vtx_array:</span><br><span class="line">                channel_color = channel_colors[vtx_index]</span><br><span class="line">                main_color = main_colors[vtx_index]</span><br><span class="line">                color = cls.filter_color(channel_color, mode_index, main_color)</span><br><span class="line">                final_colors.append(color)</span><br><span class="line">                fix_color = cls.filter_color(channel_color, mode_index)</span><br><span class="line">                fix_colors.append(fix_color)</span><br><span class="line"></span><br><span class="line">            mesh.setVertexColors(fix_colors, vtx_array)</span><br><span class="line">            mesh.setCurrentColorSetName(main_color_set)</span><br><span class="line">            mesh.setVertexColors(final_colors, vtx_array)</span><br><span class="line"></span><br><span class="line">        mesh.setCurrentColorSetName(current_color_set)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡ä¸Šé¢çš„æ–¹å¼å°±å¯ä»¥æ¯æ¬¡ç»˜åˆ¶å®Œä¹‹ååŒæ­¥é¡¶ç‚¹è‰²åˆ°å¯¹åº”çš„ color set ä¸Šã€‚</p></blockquote><h2 id="Maya-UI-ä¿®æ”¹-amp-æ‰©å±•"><a href="#Maya-UI-ä¿®æ”¹-amp-æ‰©å±•" class="headerlink" title="Maya UI ä¿®æ”¹ &amp; æ‰©å±•"></a>Maya UI ä¿®æ”¹ &amp; æ‰©å±•</h2><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cdbfd5e/dfb9ca62bbf7b8121c65dfb559630a1c.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;Maya æœ‰ä¸ªéå¸¸å¥½çš„è®¾è®¡æ˜¯ UI ä½¿ç”¨è¿‡ mel è„šæœ¬ç»„è£…çš„ï¼Œè¿™æ ·ä¸éœ€è¦ç¼–è¯‘å°±å¯ä»¥æ”¹åŠ¨ UIï¼Œè€Œä¸”è¿™éƒ¨åˆ†çš„ mel è„šæœ¬éƒ½æ˜¯å¼€æºçš„ã€‚<br>&emsp;&emsp;å¯ä»¥å¾ˆæ¸…æ¥šåœ°çŸ¥é“ Maya æ˜¯å¦‚ä½•ç»„è£…å‡ºç›¸åº”å·¥å…·çš„ç•Œé¢ã€‚</p></blockquote><p><code>C:\Program Files\Autodesk\Maya2018\scripts\others\artAttrColorPerVertexProperties.mel</code></p><blockquote><p>&emsp;&emsp;Maya çš„é¢œè‰²ç¬”åˆ·æ˜¯é€šè¿‡ä¸Šé¢è·¯å¾„çš„ mel è„šæœ¬å®ç°çš„ã€‚<br>&emsp;&emsp;è¿™æ ·å¯ä»¥æ‰¾åˆ°å¯¹åº” UI çš„åå­—</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cdbfd5e/e00422a70b50bbc821d9f6f33f5c448c.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¯ä»¥æ‰¾åˆ° <code>artAttrColorChannelChoices</code> çš„åå­—ã€‚<br>&emsp;&emsp;ç„¶åç”¨ cmds å‘½ä»¤å¯ä»¥å¯¹è¿™äº› UI è¿›è¡ŒäºŒæ¬¡ä¿®æ”¹ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> maya <span class="keyword">import</span> cmds</span><br><span class="line">cmds.radioButtonGrp(<span class="string">&#x27;artAttrColorChannelChoices&#x27;</span>,e=<span class="number">1</span>,gbc=[<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>])</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cdbfd5e/dfb16fc909c3bb878347cf03adda2bf5.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;æ¯”å¦‚æ‰§è¡Œä¸Šé¢çš„ä»£ç å¯ä»¥ä¿®æ”¹ç›¸åº” UI çš„èƒŒæ™¯é¢œè‰²ã€‚</p></blockquote><hr><blockquote><p>&emsp;&emsp;ä¸Šé¢å·²ç»å±•ç¤ºäº†å¦‚ä½•ä¿®æ”¹åŸç”Ÿçš„ UI<br>&emsp;&emsp;è¿™äº›æ“ä½œéœ€è¦å­¦ä¹  Mel çš„ UI æ„å»ºæ–¹å¼ï¼Œä¼šæœ‰ç‚¹å¤æ‚ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ä¸è¿‡ Mel çš„ example éƒ½æœ‰æ¡ˆä¾‹ï¼Œæ¯”å¦‚è¿™é‡Œçš„UI ä½¿ç”¨äº† <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/columnLayout.html">columnLayout</a><br>&emsp;&emsp;é‚£æˆ‘å¯ä»¥å»åˆ° <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/columnLayout.html">columnLayout</a> çš„æ–‡æ¡£è¿è¡Œæ¡ˆä¾‹ä»£ç è¿›è¡Œå­¦ä¹ ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cdbfd5e/8d91b5c6f91a3098c1bdddfb4dadba3a.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;å°†ä»£ç æ”¾åˆ°ä»£ç ç¼–è¾‘å™¨æ‰§è¡Œã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cdbfd5e/38cb3e0d0968119fbcab02762fd3dea9.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;æŸ¥äº†ä¸€ä¸‹ <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/columnLayout.html">columnLayout</a> çš„ API ï¼Œå‘ç°å®ƒç«Ÿç„¶æ²¡æœ‰ insert åŠŸèƒ½ã€‚<br>&emsp;&emsp;äºæ˜¯æˆ‘æ‰¾äº†ä¸€ä¸‹ Mel Tipså¤§å…¨çš„ç½‘ç«™ <a href="http://ewertb.mayasound.com/mel/mel.php"><strong>MEL How-To</strong></a> (ä¸Šå¤ç½‘ç«™ï¼Œä½†å¯¹å­¦ä¹ Melå¾ˆæœ‰å¸®åŠ©)</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cdbfd5e/a8b9a2bf48400f9676c23ccfba27949f.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;å¯ä»¥æ‰¾åˆ°ä¸€ä¸ª <a href="http://ewertb.mayasound.com/mel/mel.022.php">é“¾æ¥</a> å¦‚ä½•å®ç°UIçš„ç½®é¡¶æ’å…¥ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cdbfd5e/d3657cce79e9589239f71eeb29f6bd58.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;æ–¹æ¡ˆä¸€ä½¿ç”¨ <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/frameLayout.html">frameLayout</a> æ¯”è¾ƒç¹ç<br>&emsp;&emsp;æ–¹æ¡ˆäºŒåˆ™æ˜¯ä½¿ç”¨ä¸€ä¸ªæ–°çš„ Layout ç„¶åå°†æ—§ Layout çš„ UI åˆ é™¤æ‰ã€‚<br>&emsp;&emsp;è¿™ä¸ªæ–¹æ³•åˆ é™¤ UI å¯¹æˆ‘æƒ³è¦çš„æ•ˆæœå¹¶ä¸é€‚ç”¨ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ä¸è¿‡å€’æ˜¯å¯å‘äº†æˆ‘ï¼Œæˆ‘æƒ³åˆ°äº†å¯ä»¥åˆ©ç”¨ <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/columnLayout.html#flagchildArray">childArray</a> å¯ä»¥æ‹¿åˆ° Layout ä¸‹æ‰€æœ‰çš„ Control åå­—ã€‚<br>&emsp;&emsp;ç„¶åå¯¹æ¯ä¸ª Control ä¿®æ”¹ <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/control.html#flagparent">parent</a> åˆ°æ–°çš„ Layout ä¸Šã€‚</p></blockquote><h3 id="ä½¿ç”¨-cmds-åµŒå…¥-UI"><a href="#ä½¿ç”¨-cmds-åµŒå…¥-UI" class="headerlink" title="ä½¿ç”¨ cmds åµŒå…¥ UI"></a>ä½¿ç”¨ cmds åµŒå…¥ UI</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> maya <span class="keyword">import</span> cmds</span><br><span class="line">parent = cmds.radioButtonGrp(<span class="string">&#x27;artAttrColorChannelChoices&#x27;</span>,q=<span class="number">1</span>,parent=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(parent)</span><br><span class="line"><span class="comment"># ToolSettings|MainToolSettingsLayout|tabLayout1|artAttrColorPerVertex|artCommonOperationFrame|columnLayout1061|columnLayout1065</span></span><br><span class="line">window = cmds.window()</span><br><span class="line">column_layout = cmds.columnLayout()</span><br><span class="line"><span class="keyword">for</span> control <span class="keyword">in</span> cmds.layout(parent,q=<span class="number">1</span>,childArray=<span class="number">1</span>):</span><br><span class="line">    cmds.control(control, e=<span class="number">1</span>, p=column_layout)</span><br><span class="line">    </span><br><span class="line">cmds.showWindow(window)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¸Šé¢çš„æƒ³æ³•å†™æˆä»£ç å¦‚ä¸Šæ‰€ç¤º</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cdbfd5e/c6d720eec66764ff4d8db70e56721174.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;ç›´æ¥å®ç°äº† UI çš„ä¹¾å¤å¤§æŒªç§»<br>&emsp;&emsp;åªæ˜¯æ˜¾ç¤ºä¸Šæœ‰äº›ä¸ä¸€æ ·ï¼Œä¸»è¦åŸå› æ˜¯ mel æ„å»º UI çš„æ—¶å€™ä½¿ç”¨ <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/setUITemplate.html">setUITemplate</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> maya <span class="keyword">import</span> cmds</span><br><span class="line">window = cmds.window()</span><br><span class="line">cmds.setUITemplate(<span class="string">&quot;OptionsTemplate&quot;</span>, pushTemplate=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">column_layout = cmds.columnLayout()</span><br><span class="line">parent = cmds.radioButtonGrp(<span class="string">&#x27;artAttrColorChannelChoices&#x27;</span>,q=<span class="number">1</span>,parent=<span class="number">1</span>)</span><br><span class="line"><span class="keyword">for</span> control <span class="keyword">in</span> cmds.layout(parent,q=<span class="number">1</span>,childArray=<span class="number">1</span>):</span><br><span class="line">    cmds.control(control, e=<span class="number">1</span>, p=column_layout)</span><br><span class="line">    </span><br><span class="line">cmds.setUITemplate(popTemplate=<span class="number">1</span>)</span><br><span class="line">cmds.showWindow(window)</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cdbfd5e/b84161550157b6f4ff918fa439166f22.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;åŠ ä¸Šäº† <code>OptionsTemplate</code> ä¹‹å UI çš„æ˜¾ç¤ºå°±ä¿æŒä¸€è‡´äº†<br>&emsp;&emsp;æ‰€ä»¥åœ¨ parent control çš„è¿‡ç¨‹ä¸­åŠ å…¥è‡ªå·±çš„ UI ï¼Œå°±å¯ä»¥å®ç°å¯¹åº”ä½ç½®çš„åµŒå…¥æ•ˆæœã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> maya <span class="keyword">import</span> cmds</span><br><span class="line">window = cmds.window()</span><br><span class="line">cmds.setUITemplate(<span class="string">&quot;OptionsTemplate&quot;</span>, pushTemplate=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">column_layout = cmds.columnLayout()</span><br><span class="line">parent = cmds.radioButtonGrp(<span class="string">&#x27;artAttrColorChannelChoices&#x27;</span>,q=<span class="number">1</span>,parent=<span class="number">1</span>)</span><br><span class="line"><span class="keyword">for</span> control <span class="keyword">in</span> cmds.layout(parent,q=<span class="number">1</span>,childArray=<span class="number">1</span>):</span><br><span class="line">    cmds.control(control, e=<span class="number">1</span>, p=column_layout)</span><br><span class="line">    <span class="keyword">if</span> control == <span class="string">&quot;artAttrColorChannelChoices&quot;</span>:</span><br><span class="line">        cmds.button(label=<span class="string">&quot;click me&quot;</span>)</span><br><span class="line">    </span><br><span class="line">cmds.setUITemplate(popTemplate=<span class="number">1</span>)</span><br><span class="line">cmds.showWindow(window)</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cdbfd5e/dce4c6b736b41b3a08ad3f20de378342.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;æ¯”å¦‚ä¸Šé¢çš„æ•ˆæœï¼Œå¦‚æ­¤å°±å¯ä»¥åœ¨ç›¸åº”çš„ä½ç½®åµŒå…¥ä»»æ„çš„ UI</p></blockquote><blockquote><p>&emsp;&emsp;æœ€åæ˜¯æ€ä¹ˆå°† UI åµŒå…¥åˆ°åŸæœ¬çš„ä½ç½®ï¼Œå…³é”®å°±æ˜¯ä½¿ç”¨ <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/setParent.html">setParent</a> å‘½ä»¤</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> maya <span class="keyword">import</span> cmds</span><br><span class="line">parent = cmds.radioButtonGrp(<span class="string">&#x27;artAttrColorChannelChoices&#x27;</span>,q=<span class="number">1</span>,parent=<span class="number">1</span>)</span><br><span class="line">cmds.setParent(parent)</span><br><span class="line">cmds.setUITemplate(<span class="string">&quot;OptionsTemplate&quot;</span>, pushTemplate=<span class="number">1</span>)</span><br><span class="line">column_layout = cmds.columnLayout()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> control <span class="keyword">in</span> cmds.layout(parent,q=<span class="number">1</span>,childArray=<span class="number">1</span>):</span><br><span class="line">    cmds.control(control, e=<span class="number">1</span>, p=column_layout)</span><br><span class="line">    <span class="keyword">if</span> control == <span class="string">&quot;artAttrColorChannelChoices&quot;</span>:</span><br><span class="line">        cmds.button(label=<span class="string">&quot;click me&quot;</span>)</span><br><span class="line">    </span><br><span class="line">cmds.setUITemplate(popTemplate=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cdbfd5e/d20d3533d76f1a8f35b804f7f6ba043b.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;å¦‚æ­¤å°±å¯ä»¥äº†ï¼Œ <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/setParent.html">setParent</a> ä¼šå°†å½“å‰ UI åˆ›å»ºè®¾ç½®åˆ°ä¹‹å‰çš„ Layout ä¸‹ã€‚</p></blockquote><h3 id="ä½¿ç”¨-Qt-åµŒå…¥-UI"><a href="#ä½¿ç”¨-Qt-åµŒå…¥-UI" class="headerlink" title="ä½¿ç”¨ Qt åµŒå…¥ UI"></a>ä½¿ç”¨ Qt åµŒå…¥ UI</h3><blockquote><p>&emsp;&emsp;æ—¢ç„¶ cmds å¯ä»¥å®ç° UI åµŒå…¥ï¼Œé‚£èƒ½å¦åˆ©ç”¨ Qt API æ¥å®ç°è¿™ä¸ªæ•ˆæœå‘¢ï¼Ÿ</p></blockquote><blockquote><p>&emsp;&emsp;æˆ‘ä¹Ÿæƒ³è¿‡å°† Layout è½¬æˆ Qt Object çš„æ–¹å¼è¿›è¡Œè°ƒç”¨ã€‚<br>&emsp;&emsp;ä½†è¿™ä¸ªæ–¹å¼è·å–åˆ°çš„æ˜¯ QLayout æ— æ³•ä½¿ç”¨ <code>insertWidget</code> æ’å…¥ï¼Œå€’æ˜¯å¯ä»¥ä½¿ç”¨ <a href="https://doc.qt.io/qtforpython-5/PySide2/QtWidgets/QLayout.html?highlight=indexof#PySide2.QtWidgets.PySide2.QtWidgets.QLayout.addWidget">addWidget</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymel.core <span class="keyword">as</span> pm</span><br><span class="line"><span class="keyword">from</span> Qt <span class="keyword">import</span> QtWidgets</span><br><span class="line">widget = pm.uitypes.toQtObject(<span class="string">&quot;artAttrColorChannelChoices&quot;</span>)</span><br><span class="line">parent = widget.parent()</span><br><span class="line"><span class="built_in">print</span>(parent.objectName())</span><br><span class="line"><span class="comment"># columnLayout1065 objectName å’Œ mel çš„ controlName æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">layout = parent.layout()</span><br><span class="line"><span class="built_in">print</span>(layout)</span><br><span class="line"><span class="comment"># &lt;PySide2.QtWidgets.QLayout object at 0x0000014DB0917648&gt;</span></span><br><span class="line">layout.addWidget(QtWidgets.QPushButton(<span class="string">&quot;asd&quot;</span>))</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cdbfd5e/2114ac0e4b10f70c2127952a6bd92b0b.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;åˆ©ç”¨ä¸Šé¢çš„æ–¹å¼å°±å¯ä»¥åœ¨ Layout çš„æœ€æœ«ç«¯æ·»åŠ ä¸€ä¸ªæŒ‰é’®ã€‚<br>&emsp;&emsp;ä¸Šé¢ä½¿ç”¨äº† <a href="https://help.autodesk.com/cloudhelp/2019/ENU/Maya-Tech-Docs/PyMel/generated/functions/pymel.core.uitypes/pymel.core.uitypes.toQtObject.html?highlight=toqtobject">toQtObject</a> çš„ pymel API<br>&emsp;&emsp;èƒŒåè°ƒç”¨ OpenMayaUI åº“é€šè¿‡ objectName æŸ¥æ‰¾åˆ°å¯¹åº”çš„ Qt ç»„ä»¶ï¼Œç„¶å wrapInstance å°†ç»„ä»¶è½¬æ¢ä¸º QObject ç±»å‹ã€‚<br>&emsp;&emsp;ç”¨ pymel çš„æ–¹å¼æ¯”è¾ƒæ–¹ä¾¿ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;è¦å®ç° insert çš„æ•ˆæœå¯ä»¥åˆ©ç”¨ <code>takeAt</code> API å°† widget æå–å‡ºæ¥å†æ”¾å›å»ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymel.core <span class="keyword">as</span> pm</span><br><span class="line"><span class="keyword">from</span> Qt <span class="keyword">import</span> QtWidgets</span><br><span class="line">widget = pm.uitypes.toQtObject(<span class="string">&quot;artAttrColorChannelChoices&quot;</span>)</span><br><span class="line">parent = widget.parent()</span><br><span class="line">layout = parent.layout()</span><br><span class="line">index = layout.indexOf(widget)</span><br><span class="line">widget_list = [layout.takeAt(<span class="number">0</span>).widget() <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(layout.count())]</span><br><span class="line">widget_list.insert(index,QtWidgets.QPushButton(<span class="string">&quot;click me&quot;</span>))</span><br><span class="line"><span class="keyword">for</span> widget <span class="keyword">in</span> widget_list:</span><br><span class="line">    layout.addWidget(widget)</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cdbfd5e/ffd79713320585a38c6f070133ef54c5.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;å¦‚ä¸Šæ‰€ç¤ºï¼Œä¹Ÿå®Œå…¨å®ç°äº† cmds åº“ä¸€æ ·çš„æ•ˆæœï¼Œä½¿ç”¨ Qt API å°±æ¯” cmds è¦çµæ´»å¾ˆå¤šã€‚<br>&emsp;&emsp;å¯ä»¥åµŒå…¥ Designer ç”Ÿæˆçš„ Widget ç­‰ç­‰ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;è¿™é‡Œåªæ˜¯å±•æœ›äº†ä¸€ä¸‹ï¼Œæˆ‘çš„å®ç°è¿˜æ˜¯åŸºäº cmds çš„æ–¹å¼ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;æˆ‘çš„å·¥å…·å·²ç»åšæˆäº† Maya æ’ä»¶ï¼Œå¯ç”¨æŒ‰ç…§æ’ä»¶çš„æ–¹å¼åŠ è½½å³å¯ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      Paint Vertex Color Tool å¢å¼º
    
    </summary>
    
      <category term="CG" scheme="https://blog.l0v0.com/categories/CG/"/>
    
      <category term="Maya" scheme="https://blog.l0v0.com/categories/CG/Maya/"/>
    
      <category term="Maya å·¥å…·å¼€å‘" scheme="https://blog.l0v0.com/categories/CG/Maya/Maya-%E5%B7%A5%E5%85%B7%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="à €Maya" scheme="https://blog.l0v0.com/tags/%E0%A0%80Maya/"/>
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Maya CurveBrush ç¬”åˆ·å¼€å‘</title>
    <link href="https://blog.l0v0.com/posts/cacaf61d.html"/>
    <id>https://blog.l0v0.com/posts/cacaf61d.html</id>
    <published>2022-08-09T07:01:17.000Z</published>
    <updated>2022-11-09T02:37:04.653Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;æœ€è¿‘å› ä¸ºæ¯”è¾ƒç‰¹æ®Šçš„åŸå› ï¼Œå·¥ä½œä¸Šçªç„¶é—²ä¸‹æ¥äº†ï¼Œäºæ˜¯æˆ‘å°±å»ç ”ç©¶äº†æˆ‘ä»¬ç»„åšçš„ Maya æ¯›å‘å·¥å…·ã€‚<br>&emsp;&emsp;å­¦ä¹ ä¸€ä¸‹ Maya åšç¬”åˆ·æœ‰å“ªäº›å‘ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;è¿™æ¬¡æˆ‘çš„ä¸»è¦ç›®çš„æ˜¯æ¨¡ä»¿ <code>XGen</code> çš„æ¯›å‘ç¬”åˆ·æ•ˆæœï¼Œé€šè¿‡æœ€å°æ¡ˆä¾‹çš„å®ç°ï¼Œæ¢è®¨ä¸åŒçš„å®ç°æ–¹æ¡ˆã€‚</p></blockquote><video src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/xgen_brush.mp4" autoplay="autoplay" loop="loop" style="width: 100%; height:100%;"></video><p>å®˜æ–¹æ–‡æ¡£: <a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=GUID-496603B0-F929-45CD-B607-1CFCD3283DBE">XGen Interactive Grooming</a></p><blockquote><p>&emsp;&emsp;ä¸Šé¢çš„è§†é¢‘å°±æ˜¯ XGen å®ç°çš„ç¬”åˆ·æ•ˆæœï¼Œå¯¹äºæ¯›å‘åˆ¶ä½œéå¸¸ä¸æ»‘å¥½ç”¨ã€‚<br>&emsp;&emsp;åªå¯æƒœè¿™ä¸ªç¬”åˆ·ä¸èƒ½å¯¹æ›²çº¿ç›´æ¥ç”Ÿæ•ˆã€‚</p></blockquote><video src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/curve_brush.mp4" autoplay="autoplay" loop="loop" style="width: 100%; height:100%;"></video><blockquote><p>&emsp;&emsp;ä¸Šé¢æ˜¯æˆ‘ç”¨ C++ å†™çš„æ›²çº¿ç¬”åˆ·ï¼Œä¸‹é¢æˆ‘ä¹Ÿä¼šæ¥æ¢è®¨å¦‚ä½•ç”¨ Python OpenMaya ç»“åˆ Qt å¼€å‘ç¬”åˆ·çš„æµç¨‹ã€‚<br>&emsp;&emsp;å…·ä½“ä»£ç å·²ç»å¼€æºåˆ° <a href="https://github.com/FXTD-ODYSSEY/Maya-CurveBrush">https://github.com/FXTD-ODYSSEY/Maya-CurveBrush</a><br>&emsp;&emsp;C++ æ’ä»¶æä¾›äº† 2020 - 2023 æ”¯æŒ<br>&emsp;&emsp;Python æ’ä»¶æœ‰ <code>om1_curve_brush.py</code> å’Œ <code>om2_curve_brush.py</code></p></blockquote><h2 id="Maya-C-ç¬”åˆ·å¼€å‘æµç¨‹"><a href="#Maya-C-ç¬”åˆ·å¼€å‘æµç¨‹" class="headerlink" title="Maya C++ ç¬”åˆ·å¼€å‘æµç¨‹"></a>Maya C++ ç¬”åˆ·å¼€å‘æµç¨‹</h2><h3 id="Maya-C-MPxContext"><a href="#Maya-C-MPxContext" class="headerlink" title="Maya C++ MPxContext"></a>Maya C++ MPxContext</h3><blockquote><p>&emsp;&emsp;ä»€ä¹ˆæ˜¯ Maya Context ï¼Ÿ <a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__developer_Maya_SDK_MERGED_Command_plug_ins_Contexts_html">å®˜æ–¹æ–‡æ¡£è¯´æ˜</a><br>&emsp;&emsp;Maya Context å°±æ˜¯ä¸€ä¸ªå¼€æ”¾çš„æ¥å£ï¼Œå¯ä»¥ç”¨äºè‡ªå®šä¹‰ é¼ æ ‡ åœ¨ Viewport ä¸Šæ‰§è¡Œçš„é€»è¾‘ï¼Œå®ç° ç»˜åˆ¶ ä¿®æ”¹é€‰æ‹©ç‰©ä½“ ç­‰æ“ä½œã€‚</p></blockquote><p><a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__developer_Maya_SDK_MERGED_Command_plug_ins_MPxContext_html">MPxContext å®˜æ–¹æ–‡æ¡£</a></p><blockquote><p>&emsp;&emsp;ä¸Šé¢çš„é“¾æ¥æ˜¯ä¸€ä¸ª Maya Devkit é‡Œé¢çš„æ¡ˆä¾‹ <code>devkit\plug-ins\marqueeTool\marqueeTool.cpp</code><br>&emsp;&emsp;<a href="./5875a169.html">Maya CMake æ„å»º C++ æ’ä»¶ç¼–è¯‘ç¯å¢ƒ</a> æˆ‘çš„è¿™ç¯‡æ–‡ç« æœ‰æåˆ°å¦‚ä½•å°† devkit çš„æºç ç¼–è¯‘ç”Ÿæˆ mll </p></blockquote><p><a href="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/marqueeTool.mll">maya2020 - marqueeTool.mll</a></p><blockquote><p>&emsp;&emsp;è¿™é‡Œæä¾› Maya2020 windows ç‰ˆæœ¬çš„ mll æ’ä»¶<br>&emsp;&emsp;Maya åŠ è½½ mll æ’ä»¶</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> maya.cmds <span class="keyword">as</span> cmds</span><br><span class="line">ctx = cmds.marqueeToolContext()</span><br><span class="line">cmds.setToolTo(ctx)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;åŠ è½½mll æ’ä»¶åï¼Œå¯ä»¥ä½¿ç”¨ä¸Šé¢çš„ä»£ç æ¿€æ´» Context</p></blockquote><video src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/marqueeTool.mp4" autoplay="autoplay" loop="loop" style="width: 100%; height:100%;"></video><blockquote><p>&emsp;&emsp;ä¸Šé¢å®ç°çš„æ•ˆæœå’Œé»˜è®¤çš„ æ¡†é€‰ç‰©ä½“æ˜¯ä¸€æ ·çš„ã€‚<br>&emsp;&emsp;åªæ˜¯æ¡†çš„é¢œè‰²å˜æˆäº†è‡ªå®šä¹‰çš„ é»„è‰²ã€‚</p></blockquote><hr><blockquote><p>&emsp;&emsp;å®ç°è¿™ä¸ª context éœ€è¦ç»§æ‰¿å®ç°ä¸¤ä¸ªç±»ï¼Œä¸€ä¸ªæ˜¯ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_px_context_html">MPxContext</a> å¦ä¸€ä¸ªæ˜¯ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_px_context_command_html">MPxContextCommand</a><br>&emsp;&emsp;<a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_px_context_html">MPxContext</a> ç±»å®šä¹‰äº†é¼ æ ‡æ‹–æ‹½ ç§»åŠ¨ ç­‰é€»è¾‘çš„è™šå‡½æ•°ï¼Œ<a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_px_context_command_html">MPxContextCommand</a> åˆ™æ˜¯ç”¨æ¥è¯»å– <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_px_context_html">MPxContext</a> æ•°æ®çš„ Mel å‘½ä»¤ã€‚<br>&emsp;&emsp;é€šè¿‡ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_px_context_command_html">MPxContextCommand</a> å°±å¯ä»¥ç”¨ Mel å‘½ä»¤æ¥ä¿®æ”¹ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_px_context_html">MPxContext</a> çš„å˜é‡(æ¯”å¦‚ç¬”åˆ·å¤§å°ä¹‹ç±»çš„)</p></blockquote><p><a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__developer_Maya_SDK_MERGED_Command_plug_ins_MPxContextCommand_html">MPxContextCommand å®˜æ–¹æ–‡æ¡£</a></p><h3 id="Maya-C-MPxToolCommand"><a href="#Maya-C-MPxToolCommand" class="headerlink" title="Maya C++ MPxToolCommand"></a>Maya C++ MPxToolCommand</h3><p><a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__developer_Maya_SDK_MERGED_Command_plug_ins_MPxToolCommand_html">MPxToolCommand å®˜æ–¹æ–‡æ¡£</a></p><blockquote><p>&emsp;&emsp;ä¸Šé¢æåˆ°çš„æ–¹æ¡ˆ Context è¿›è¡Œå¤„ç†çš„æ—¶å€™æ˜¯æ²¡æœ‰ Undo åŠŸèƒ½çš„ã€‚<br>&emsp;&emsp;å› æ­¤ Maya C++ æä¾›äº† <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_px_tool_command_html">MPxToolCommand</a> è¿™æ ·å°†éœ€è¦ undo çš„é€»è¾‘æ”¾åˆ° Command å½“ä¸­å®ç°ï¼Œå°±å¯ä»¥ undo redo æ“ä½œäº†ã€‚<br>&emsp;&emsp;ä¸Šé¢æ–‡æ¡£çš„æ¡ˆä¾‹æ¥è‡ªäº <code>devkit\plug-ins\helixTool\helixTool.cpp</code></p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/29da80e2a9a4b9a1513eb82a93e5ec30.jpeg" alt="image"><br><a href="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/helixTool.mll">maya2020 - helixTool.mll</a></p><blockquote><p>&emsp;&emsp;è¿™é‡Œç…§æ ·æä¾› Maya2020 windows ç‰ˆæœ¬çš„ mll æ’ä»¶<br>&emsp;&emsp;Maya åŠ è½½ mll æ’ä»¶</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> maya.cmds <span class="keyword">as</span> cmds</span><br><span class="line">ctx = cmds.helixToolContext()</span><br><span class="line">cmds.setToolTo(ctx)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;åŠ è½½mll æ’ä»¶åï¼Œå¯ä»¥ä½¿ç”¨ä¸Šé¢çš„ä»£ç æ¿€æ´» Context</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/4bb07f53fb16d1d0b3afe0449630340c.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;<strong>éœ€è¦æ³¨æ„è¿™ä¸ªæ’ä»¶åªèƒ½åœ¨æ—§çš„ Viewport ç”Ÿæ•ˆ</strong> (æˆ‘æµ‹äº†å¥½ä¹…æ‰æ˜ç™½è¿‡æ¥)</p></blockquote><video src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/helixTool.mp4" autoplay="autoplay" loop="loop" style="width: 100%; height:100%;"></video><blockquote><p>&emsp;&emsp;è¿™ä¸ªå·¥å…·å¯ä»¥åœ¨ Maya Viewport æ‹–æ‹½ä¸€ä¸ª åœ†æŸ±é¢„è§ˆ ï¼Œè¿™ä¸ªåœ†æŸ±æœ€åç”Ÿæˆ èºæ—‹çº¿ã€‚<br>&emsp;&emsp;é€šè¿‡ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_px_tool_command_html">MPxToolCommand</a> çš„æ–¹å¼å°±å¯ä»¥è®©ç”Ÿæˆçš„ èºæ—‹çº¿ æ”¯æŒundoã€‚</p></blockquote><hr><blockquote><p>&emsp;&emsp;ä¸ºä½•è¿™ä¸ªå·¥å…·ä¸èƒ½åœ¨ viewport2.0 ä¸‹ä½¿ç”¨</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/581b6161891458d2098e7e062cd62bf2.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;ä»ä¸Šé¢çš„ API åˆ—è¡¨å¯ä»¥çœ‹åˆ° <code>doDrag</code> <code>doPress</code> å¥½å‡ ä¸ª API éƒ½æœ‰ä¸¤ä¸ªå®ç°ã€‚<br>&emsp;&emsp;ä¸€ä¸ªæ˜¯åªä¼ å…¥ event çš„ï¼Œè¿™ä¸ªæ–¹æ³•åªåœ¨ è€ Viewport ä¸‹è°ƒç”¨ã€‚<br>&emsp;&emsp;Viewport2.0 è°ƒç”¨çš„æ˜¯ä¼ å…¥ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_h_w_render_1_1_m_u_i_draw_manager_html">MUIDrawManager</a> çš„æ–¹æ³•ã€‚<br>&emsp;&emsp;<a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_helix_tool_2helix_tool_8cpp_example_html">helixTool</a> æ²¡æœ‰å®ç° <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_h_w_render_1_1_m_u_i_draw_manager_html">MUIDrawManager</a> çš„æ–¹æ³•ï¼Œæ‰€ä»¥ Viewport2.0 ä¸‹ä¸èµ·ä½œç”¨ã€‚</p></blockquote><p><a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__developer_Maya_SDK_MERGED_Viewport_2_0_API_Maya_Viewport_2_0_API_Guide_Plug_in_Entry_Points_Tool_Contexts_html">Tool Contexts å®˜æ–¹æ–‡æ¡£</a></p><blockquote><p>&emsp;&emsp;å®˜æ–¹æ–‡æ¡£è¢«æ‰“æ•£åˆ° Viewport2.0 çš„ç›®å½•ä¸‹äº†ï¼Œå…·ä½“çš„è¯´æ³•å¯ä»¥å‚ç…§ä¸Šé¢</p></blockquote><h3 id="ç¬”åˆ·å·¥å…·çš„-UI"><a href="#ç¬”åˆ·å·¥å…·çš„-UI" class="headerlink" title="ç¬”åˆ·å·¥å…·çš„ UI"></a>ç¬”åˆ·å·¥å…·çš„ UI</h3><p><a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__developer_Maya_SDK_MERGED_Command_plug_ins_Tool_property_sheets_html">Tool property sheets å®˜æ–¹æ–‡æ¡£</a></p><p><code>&lt;&gt;Properties.mel</code> å®ç°å·¦ä¾§çš„å¯ä¿®æ”¹ç•Œé¢<br><code>&lt;&gt;Values.mel</code> è·å–ç¬”åˆ·æ•°å€¼ (æ›´æ–°åˆ°ç•Œé¢ä¸Š)</p><blockquote><p>&emsp;&emsp;Context æ¿€æ´»ä¹‹åï¼ŒåŒå‡»å¯ä»¥çœ‹åˆ°å·¥å…·ç•Œé¢</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/5839bf8a5a103ef28fd5ee770f6b67cc.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;è¿™ä¸ªç•Œé¢å°±æ˜¯éµå¾ªä¸Šé¢ä¸¤ä¸ª mel çš„æ–¹æ³•æ¥å®ç°çš„ã€‚</p></blockquote><hr><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/29da80e2a9a4b9a1513eb82a93e5ec30.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;å¯ä»¥ç»§ç»­å‚è€ƒ helixTool çš„æºç ç›®å½•ï¼Œå®ƒæä¾›äº† <code>helixProperties.mel</code> å’Œ <code>helixValues.mel</code> è„šæœ¬<br>&emsp;&emsp;é‚£ä¹ˆä¸Šé¢çš„å‘½å <code>&lt;&gt;</code> æ˜¯æ€ä¹ˆå†³å®šçš„ï¼Œä¸ºå•¥ç”¨ <code>helixProperties</code> è€Œä¸æ˜¯ <code>helixToolProperties</code></p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/d9ae6102b9d5478f9956c83a03beb640.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;å…¶å®è¿™æ˜¯ <code>getClassName</code> å†³å®šçš„ã€‚<br>&emsp;&emsp;melè„šæœ¬å¹¶ä¸æ˜¯é‡ç‚¹ï¼ŒåŒå‡» Context è°ƒç”¨çš„æ˜¯ <code>helixProperties</code> <code>helixValues</code> ä¸¤ä¸ª mel æ–¹æ³•ï¼Œå¦‚æœæ‰¾ä¸åˆ°æ‰ä¼šæ‰¾åŒåè„šæœ¬ã€‚</p></blockquote><h3 id="ç”¨-Python-ç”Ÿæˆ-Mel-Proc"><a href="#ç”¨-Python-ç”Ÿæˆ-Mel-Proc" class="headerlink" title="ç”¨ Python ç”Ÿæˆ Mel Proc"></a>ç”¨ Python ç”Ÿæˆ Mel Proc</h3><blockquote><p>&emsp;&emsp;å¦‚æœè¦ç¼–å†™è‡ªå®šä¹‰çš„ UIï¼Œä¸€å®šè¦ç”¨ mel æ‰èƒ½ç¼–å†™å—ï¼Ÿ<br>&emsp;&emsp;èƒ½å¦ç”¨ Python è§£å†³é—®é¢˜å‘¢ï¼Ÿ</p></blockquote><p><a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=GUID-8A96A8DB-FD6F-434F-A878-288DD84E99C7#GUID-8A96A8DB-FD6F-434F-A878-288DD84E99C7__WS73099CC142F48755F2FC9DF120970276F7-BBF">Python function as a MEL procedure å®˜æ–¹æ–‡æ¡£</a> </p><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/a3e91c75f34ee059bed5905ccd505edb.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;å¦‚æœå«Œå¼ƒä½¿ç”¨ mel ç¡®å®å¯ä»¥å‚è€ƒä¸Šé¢çš„é“¾æ¥ç”¨ Python åˆ›å»ºçš„ Mel Proc</p></blockquote><p><code>C:\Program Files\Autodesk\Maya2020\Python\Lib\site-packages\maya\mel\melutils.py</code><br>å…·ä½“çš„ä»£ç å®ç°å¯ä»¥é€šè¿‡ä¸Šé¢çš„è·¯å¾„æ‰¾åˆ°ã€‚</p><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/bef869fe72657a593b289fd018356fb2.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;æˆ‘å°è¯•äº†ä¸€ä¸‹ï¼Œé»˜è®¤ <code>returnCmd</code> æ˜¯ False ä¼šæ‰“å¼€æ–‡ä»¶çª—å£ç”Ÿæˆå‡º mel è„šæœ¬ã€‚<br>&emsp;&emsp;å¯ä»¥è®¾ç½® <code>returnCmd=True</code> è¿™æ ·å°±è¿”å› mel ä»£ç äº†ã€‚<br>&emsp;&emsp;åé¢å¯ä»¥ç”¨ <code>mel.eval</code> æ¥æ‰§è¡Œè¿”å›çš„ä»£ç </p></blockquote><blockquote><p>&emsp;&emsp;å°±æ˜¯ä¼ å…¥çš„Python <code>function</code> å¦‚æœä¸åœ¨ Python æ¨¡å—ä¹‹ä¸‹ä¼šå¼¹å‡ºè­¦å‘Š</p></blockquote><hr><p><a href="https://help.autodesk.com/cloudhelp/2020/JPN/Maya-Tech-Docs/PyMel/generated/functions/pymel.tools.py2mel/pymel.tools.py2mel.py2melProc.html">py2melProc æ–‡æ¡£</a> </p><blockquote><p>&emsp;&emsp;pymel åº“ä¹Ÿæä¾›äº† py2mel çš„æ–¹æ³•<br>&emsp;&emsp;ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä¼šæ¯” Maya å†…ç½®çš„å¤„ç†å¥½ä¸€äº›<br>&emsp;&emsp;å®ç°çš„åŸç†åŸºæœ¬ä¸€è‡´ï¼Œéƒ½æ˜¯é€šè¿‡ Python æ„å»ºå‡º Mel ä»£ç ï¼Œ<br>&emsp;&emsp;Mel ä»£ç æœ¬è´¨å°±æ˜¯ç”¨ <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/Commands/python.html">python</a> å…³é”®å­—æ‰§è¡Œ Python ä»£ç  (ä¸€ä¼š Python ä¸€ä¼š Mel çš„ä¼¼ä¹æŒºç»•çš„<em>(:Ğ·ã€âˆ )</em>)</p></blockquote><blockquote><p>&emsp;&emsp;pymel è¿˜æä¾›äº† <code>mel2pyStr</code> çš„æ–¹æ³•å¯ä»¥ç›´æ¥å°† mel ä»£ç è½¬æˆ Python çš„ç‰ˆæœ¬ã€‚<br>&emsp;&emsp;è¿™æ ·å°±å¯ä»¥é¿å… python å’Œ mel æ··å†™ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pymel.tools <span class="keyword">import</span> mel2py</span><br><span class="line">path = <span class="string">r&quot;C:\Program Files\Autodesk\Maya2018\scripts\others\customtoolPaint.mel&quot;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(path,<span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> rf:</span><br><span class="line">    content = rf.read()</span><br><span class="line">py_str = mel2py.mel2pyStr(content, pymelNamespace=<span class="string">&quot;pm&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(py_str)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ¯”å¦‚ä¸Šé¢å°±å¯ä»¥å°†ä¸€äº›å†…ç½®çš„ mel æ¡ˆä¾‹è½¬æ¢æˆ python ç‰ˆæœ¬ã€‚<br>&emsp;&emsp;<code>pymelNamespace</code> å¯ä»¥ç»™æ‰€æœ‰çš„è°ƒç”¨åŠ ä¸Šç›¸åº”çš„å‰ç¼€ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;åˆ©ç”¨ä¸Šé¢çš„æ–¹æ³•å°±å¯ä»¥å°† helixTool çš„ mel è„šæœ¬è½¬ä¸º Python å®ç°</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/b4775fae8fea92958f3eee9ab6d8ef0d.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;è½¬æ¢å®Œæˆä¹‹åéœ€è¦æ³¨æ„ function è°ƒç”¨ï¼Œè¦å°† <code>pm.mel</code> å»æ‰<br>&emsp;&emsp;å› ä¸ºä¹‹å‰ proc ç¼–ç¨‹ Python function ç”¨ <code>pm.mel.helixSetCallbacks</code> æ˜¯è°ƒç”¨ä¸äº†çš„ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/09520a8d62d92800c1bd8e8f7dd8b97d.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;å¦å¤–ä¸€äº›å˜é‡å mel é‡Œé¢å¯èƒ½å‘½åä¸ºäº† <code>set</code> ï¼Œå¦‚æœè¿™äº›æ˜¯ Python çš„å…³é”®å­—æˆ–è€…å†…ç½®å‘½åéœ€è¦æ³¨æ„ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymel.core <span class="keyword">as</span> pm</span><br><span class="line"><span class="keyword">from</span> pymel.tools <span class="keyword">import</span> py2mel</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">helixProperties</span>():</span><br><span class="line">    pm.setUITemplate(<span class="string">&quot;DefaultTemplate&quot;</span>, pushTemplate=<span class="number">1</span>)</span><br><span class="line">    parent = <span class="built_in">str</span>(pm.toolPropertyWindow(q=<span class="number">1</span>, location=<span class="number">1</span>))</span><br><span class="line">    pm.setParent(parent)</span><br><span class="line">    pm.columnLayout(<span class="string">&quot;helix&quot;</span>)</span><br><span class="line">    pm.tabLayout(<span class="string">&quot;helixTabs&quot;</span>, childResizable=<span class="literal">True</span>)</span><br><span class="line">    pm.columnLayout(<span class="string">&quot;helixTab&quot;</span>)</span><br><span class="line">    pm.frameLayout(<span class="string">&quot;helixFrame&quot;</span>, cll=<span class="literal">True</span>, l=<span class="string">&quot;Helix Options&quot;</span>, cl=<span class="literal">False</span>)</span><br><span class="line">    pm.columnLayout(<span class="string">&quot;helixOptions&quot;</span>)</span><br><span class="line">    pm.separator(style=<span class="string">&quot;none&quot;</span>)</span><br><span class="line">    pm.intSliderGrp(</span><br><span class="line">        <span class="string">&quot;numCVs&quot;</span>, field=<span class="number">1</span>, minValue=<span class="number">20</span>, maxValue=<span class="number">100</span>, value=<span class="number">1</span>, label=<span class="string">&quot;Number of CVs&quot;</span></span><br><span class="line">    )</span><br><span class="line">    pm.checkBoxGrp(<span class="string">&quot;upsideDownGrp&quot;</span>, numberOfCheckBoxes=<span class="number">1</span>, l1=<span class="string">&quot; &quot;</span>, label=<span class="string">&quot;Upside Down&quot;</span>)</span><br><span class="line">    pm.setParent(<span class="string">&quot;..&quot;</span>)</span><br><span class="line">    <span class="comment"># helixOptions</span></span><br><span class="line">    pm.setParent(<span class="string">&quot;..&quot;</span>)</span><br><span class="line">    <span class="comment"># helixFrame</span></span><br><span class="line">    pm.setParent(<span class="string">&quot;..&quot;</span>)</span><br><span class="line">    <span class="comment"># helixTab</span></span><br><span class="line">    pm.setParent(<span class="string">&quot;..&quot;</span>)</span><br><span class="line">    <span class="comment"># helixTabs</span></span><br><span class="line">    pm.setParent(<span class="string">&quot;..&quot;</span>)</span><br><span class="line">    <span class="comment"># helix</span></span><br><span class="line">    <span class="comment"># Name the tabs; -tl does not allow tab labelling upon creation</span></span><br><span class="line">    pm.tabLayout(<span class="string">&quot;helixTabs&quot;</span>, tl=(<span class="string">&quot;helixTab&quot;</span>, <span class="string">&quot;Tool Defaults&quot;</span>), e=<span class="number">1</span>)</span><br><span class="line">    pm.setUITemplate(popTemplate=<span class="number">1</span>)</span><br><span class="line">    helixSetCallbacks(parent)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">helixSetCallbacks</span>(<span class="params">parent</span>):</span><br><span class="line">    pm.setParent(parent)</span><br><span class="line">    pm.checkBoxGrp(</span><br><span class="line">        <span class="string">&quot;upsideDownGrp&quot;</span>,</span><br><span class="line">        e=<span class="number">1</span>,</span><br><span class="line">        on1=<span class="keyword">lambda</span> *args: pm.helixToolContext(pm.currentCtx(), upsideDown=<span class="literal">True</span>, e=<span class="number">1</span>),</span><br><span class="line">        of1=<span class="keyword">lambda</span> *args: pm.helixToolContext(pm.currentCtx(), upsideDown=<span class="literal">False</span>, e=<span class="number">1</span>),</span><br><span class="line">    )</span><br><span class="line">    pm.intSliderGrp(</span><br><span class="line">        <span class="string">&quot;numCVs&quot;</span>,</span><br><span class="line">        e=<span class="number">1</span>,</span><br><span class="line">        cc=<span class="keyword">lambda</span> *args: pm.helixToolContext(pm.currentCtx(), numCVs=args[<span class="number">0</span>], e=<span class="number">1</span>),</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">helixValues</span>(<span class="params">toolName</span>):</span><br><span class="line">    parent=(<span class="built_in">str</span>(pm.toolPropertyWindow(q=<span class="number">1</span>, location=<span class="number">1</span>)) + <span class="string">&quot;|helix|helixTabs|helixTab&quot;</span>)</span><br><span class="line">    pm.setParent(parent)</span><br><span class="line">    icon=<span class="string">&quot;helixTool.xpm&quot;</span></span><br><span class="line">    <span class="built_in">help</span>=<span class="string">&quot;&quot;</span></span><br><span class="line">    pm.mel.toolPropertySetCommon(toolName, icon, <span class="built_in">help</span>)</span><br><span class="line">    pm.frameLayout(<span class="string">&#x27;helixFrame&#x27;</span>, en=<span class="literal">True</span>, e=<span class="number">1</span>, cl=<span class="literal">False</span>)</span><br><span class="line">    helixOptionValues(toolName)</span><br><span class="line">    pm.mel.toolPropertySelect(<span class="string">&#x27;helix&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">helixOptionValues</span>(<span class="params">toolName</span>):</span><br><span class="line">    </span><br><span class="line">    cv_num = <span class="number">0</span></span><br><span class="line">    cv_num=<span class="built_in">int</span>(pm.mel.<span class="built_in">eval</span>(<span class="string">&quot;helixToolContext -q -numCVs &quot;</span> + toolName))</span><br><span class="line">    pm.intSliderGrp(<span class="string">&#x27;numCVs&#x27;</span>, e=<span class="number">1</span>, value=cv_num)</span><br><span class="line">    cv_num=<span class="built_in">int</span>(pm.mel.<span class="built_in">eval</span>(<span class="string">&quot;helixToolContext -q -upsideDown &quot;</span> + toolName))</span><br><span class="line">    <span class="keyword">if</span> cv_num:</span><br><span class="line">        pm.checkBoxGrp(<span class="string">&#x27;upsideDownGrp&#x27;</span>, e=<span class="number">1</span>, value1=<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        pm.checkBoxGrp(<span class="string">&#x27;upsideDownGrp&#x27;</span>, e=<span class="number">1</span>, value1=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">py2mel.py2melProc(helixProperties, procName=<span class="string">&quot;helixProperties&quot;</span>)</span><br><span class="line">py2mel.py2melProc(helixValues, procName=<span class="string">&quot;helixValues&quot;</span>)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ç»è¿‡ä¸€äº›ä¿®æ”¹ä¹‹åï¼Œå¯ä»¥å®ç°ç”¨ Python çš„æ–¹å¼æ¥ç¼–å†™ Mel Procã€‚<br>&emsp;&emsp;åªæ˜¯è¿˜æ˜¯éœ€è¦ç†Ÿæ‚‰ä¸€ä¸‹ mel UI æ„å»ºçš„è¯­æ³•ã€‚</p></blockquote><h2 id="Maya-C-CurveBrush"><a href="#Maya-C-CurveBrush" class="headerlink" title="Maya C++ CurveBrush"></a>Maya C++ CurveBrush</h2><blockquote><p>&emsp;&emsp;é€šè¿‡ä¸Šé¢ä¸€ç•ªæ¢è®¨ä¹‹åï¼Œæˆ‘ä»¬ç†æ¸…æ¥šäº†åšä¸€ä¸ªç¬”åˆ·éœ€è¦ä»€ä¹ˆã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/31a73f4c83ccff69f92bc03bde499e99.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;æ‰€ä»¥æˆ‘åœ¨ C++ ä»£ç å±‚é¢æ‹†åˆ†ä¸‰ä¸ªå¤´æ–‡ä»¶ï¼Œåˆ†åˆ«å¯¹åº” <code>MPxContext</code> <code>MPxContextCommand</code> <code>MPxContextToolCommand</code> çš„å®ç°ã€‚<br>&emsp;&emsp;å¦‚ä½•å¼€å‘ä¹Ÿå¯ä»¥å‚è€ƒ helixTool çš„ä»£ç ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/9fff8010770bff57783e3e1fdd93120a.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;æ³¨å†Œæ’ä»¶çš„æ—¶å€™éœ€è¦åŒæ—¶æ³¨å†Œ <code>MPxContextCommand</code> å’Œ <code>MPxContextToolCommand</code><br>&emsp;&emsp;è¿™æ · Maya å°±çŸ¥é“è¿™ä¸¤ä¸ªå‘½ä»¤æ˜¯å…³è”åœ¨ä¸€èµ·çš„ï¼Œ <code>MPxContext</code> é‡Œé¢è°ƒç”¨ <a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__py_ref_class_open_maya_u_i_1_1_m_px_context_html#a8e65ca6ff1d97d4b49ac94897462dc72">newToolCommand</a> æ–¹æ³•å°±å¯ä»¥è·å–åˆ° <code>MPxContextToolCommand</code></p></blockquote><h3 id="ç¬”åˆ·å±æ€§è°ƒæ•´"><a href="#ç¬”åˆ·å±æ€§è°ƒæ•´" class="headerlink" title="ç¬”åˆ·å±æ€§è°ƒæ•´"></a>ç¬”åˆ·å±æ€§è°ƒæ•´</h3><blockquote><p>&emsp;&emsp;æˆ‘å…ˆè¦è®©ç¬”åˆ·æŒ‰ä½ B é”®çš„æ—¶å€™å¯ä»¥å®ç° å¤§å° è°ƒæ•´ã€‚<br>&emsp;&emsp;é»˜è®¤ Maya API æ²¡æœ‰æä¾›é”®ç›˜äº‹ä»¶çš„ç›‘å¬ã€‚<br>&emsp;&emsp;äºæ˜¯æŸ¥æ‰¾å®˜æ–¹çš„æ¡ˆä¾‹ï¼Œæ‰¾åˆ°äº† <code>devkit\plug-ins\grabUVMain.cpp</code>   </p></blockquote><p><a href="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/grabUV.mll">maya2020 - grabUV.mll</a></p><blockquote><p>&emsp;&emsp;è¿™é‡Œæä¾› Maya2020 windows ç‰ˆæœ¬çš„ mll æ’ä»¶<br>&emsp;&emsp;Maya åŠ è½½ mll æ’ä»¶</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> maya.cmds <span class="keyword">as</span> cmds</span><br><span class="line">ctx = cmds.grabUVContext()</span><br><span class="line">cmds.setToolTo(ctx)</span><br></pre></td></tr></table></figure><video src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/grabUV.mp4" autoplay="autoplay" loop="loop" style="width: 100%; height:100%;"></video><blockquote><p>&emsp;&emsp;è¿™ä¸ªæ’ä»¶å¯ä»¥æŒ‰ä½ B é”®è°ƒæ•´ç¬”åˆ·çš„å¤§å°ã€‚<br>&emsp;&emsp;åŸç†æ˜¯åˆ©ç”¨ Qt çš„ eventFilter ç›‘å¬å…¨å±€çš„é”®ç›˜å“åº”ï¼Œæ‰€ä»¥ç¼–è¯‘çš„ include è·¯å¾„éœ€è¦æœ‰ Qt çš„å¤´æ–‡ä»¶ï¼Œé»˜è®¤çš„ include è·¯å¾„åªæœ‰ Qt å¤´æ–‡ä»¶å‹ç¼©åŒ…ï¼Œéœ€è¦è§£å‹ç¼©æ¥ç´¢å¼•ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;æ‰€ä»¥æˆ‘ä¹Ÿæ˜¯ç”¨åŒæ ·çš„æ–¹å¼ç›‘å¬æ˜¯å¦æœ‰æŒ‰ B é”®ã€‚<br>&emsp;&emsp;å·¦é”®æ‹–æ‹½è°ƒæ•´ç¬”åˆ·å¤§å°ï¼Œä¸­é”®æ‹–æ‹½è°ƒæ•´ç¬”åˆ·å¼ºåº¦ã€‚</p></blockquote><h3 id="æ›²çº¿è¡°å˜é¢œè‰²"><a href="#æ›²çº¿è¡°å˜é¢œè‰²" class="headerlink" title="æ›²çº¿è¡°å˜é¢œè‰²"></a>æ›²çº¿è¡°å˜é¢œè‰²</h3><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/63b2f06b1f337413c94aee582df735de.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;ç¬”åˆ·è¦†ç›–çš„èŒƒå›´å‘ˆç°é¢œè‰²ï¼Œè¿™ä¸ªæ˜¯ç”¨ <code>Viewport2.0</code> çš„ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_h_w_render_1_1_m_u_i_draw_manager_html">MUIDrawManager</a> å®ç°çš„ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/8917c29ae2838d566878dd7f92c712a3.jpeg" alt="image"><br><a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_h_w_render_1_1_m_u_i_draw_manager_html">MUIDrawManager</a></p><blockquote><p>&emsp;&emsp;<a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_h_w_render_1_1_m_u_i_draw_manager_html">MUIDrawManager</a> æä¾›äº† <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_h_w_render_1_1_m_u_i_draw_manager_html#ab7479336abc018548fe68277932d848a">mesh</a> çš„ API è¿›è¡Œæ›²çº¿æ¨¡å‹ç­‰çš„ç»˜åˆ¶ã€‚<br>&emsp;&emsp;æœ€é‡è¦çš„ç¬¬ä¸€ç‚¹æ˜¯å¯ä»¥ä¼ å…¥é¢œè‰²æ•°ç»„ï¼Œæ ¹æ®æ¯ä¸ªç‚¹è‡ªå®šä¹‰é¢œè‰²ï¼Œå…¶ä»–çš„ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_h_w_render_1_1_m_u_i_draw_manager_html#abe48ac82aa2ede6d0efd3c9cfadb068c">line</a> API æ— æ³•å®ç°è¿™ä¸ªåŠŸèƒ½</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">MStatus <span class="title">curveBrushContext::doPtrMoved</span><span class="params">(MEvent &amp;event, MHWRender::MUIDrawManager &amp;drawMgr, <span class="type">const</span> MHWRender::MFrameContext &amp;context)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">short</span> x, y;</span><br><span class="line">    event.<span class="built_in">getPosition</span>(x, y);</span><br><span class="line">    mBrushCenterScreenPoint = <span class="built_in">MPoint</span>(x, y);</span><br><span class="line">    <span class="keyword">auto</span> radius = mBrushConfig.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">    drawMgr.<span class="built_in">beginDrawable</span>();</span><br><span class="line">    <span class="keyword">if</span> (bFalloffMode)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">unsigned</span> <span class="type">int</span> index = <span class="number">0</span>; index &lt; objDagPathArray.<span class="built_in">length</span>(); ++index)</span><br><span class="line">        &#123;</span><br><span class="line">            MPointArray pointArray;</span><br><span class="line">            MColorArray colorArray;</span><br><span class="line">            <span class="function">MFnNurbsCurve <span class="title">curveFn</span><span class="params">(objDagPathArray[index])</span></span>;</span><br><span class="line">            <span class="type">unsigned</span> <span class="type">int</span> segmentCount = <span class="number">100</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">unsigned</span> <span class="type">int</span> pointIndex = <span class="number">0</span>; pointIndex &lt; segmentCount; ++pointIndex)</span><br><span class="line">            &#123;</span><br><span class="line">                MPoint point;</span><br><span class="line">                <span class="keyword">auto</span> param = curveFn.<span class="built_in">findParamFromLength</span>(curveFn.<span class="built_in">length</span>() * pointIndex / segmentCount);</span><br><span class="line">                curveFn.<span class="built_in">getPointAtParam</span>(param, point, MSpace::kWorld);</span><br><span class="line">                pointArray.<span class="built_in">append</span>(point);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// NOTE(timmyliang): draw falloff</span></span><br><span class="line">                <span class="type">short</span> x_pos, y_pos;</span><br><span class="line">                view.<span class="built_in">worldToView</span>(point, x_pos, y_pos);</span><br><span class="line">                <span class="function">MPoint <span class="title">screenPoint</span><span class="params">(x_pos, y_pos)</span></span>;</span><br><span class="line">                <span class="keyword">auto</span> distance = (mBrushCenterScreenPoint - screenPoint).<span class="built_in">length</span>();</span><br><span class="line">                <span class="keyword">auto</span> field = <span class="number">1</span> - distance / radius;</span><br><span class="line">                <span class="comment">// NOTE(timmyliang): transparent</span></span><br><span class="line">                colorArray.<span class="built_in">append</span>(distance &gt; radius ? <span class="built_in">MColor</span>(<span class="number">0.f</span>) : <span class="built_in">MColor</span>(field, field, field));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            drawMgr.<span class="built_in">setLineWidth</span>(<span class="number">12.0f</span>);</span><br><span class="line">            drawMgr.<span class="built_in">mesh</span>(MHWRender::MUIDrawManager::kLineStrip, pointArray, <span class="literal">NULL</span>, &amp;colorArray);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    drawMgr.<span class="built_in">setColor</span>(<span class="built_in">MColor</span>(<span class="number">1.f</span>, <span class="number">1.f</span>, <span class="number">1.f</span>));</span><br><span class="line">    drawMgr.<span class="built_in">setLineWidth</span>(<span class="number">2.0f</span>);</span><br><span class="line">    drawMgr.<span class="built_in">circle2d</span>(mBrushCenterScreenPoint, radius);</span><br><span class="line"></span><br><span class="line">    drawMgr.<span class="built_in">endDrawable</span>();</span><br><span class="line">    <span class="keyword">return</span> MS::kSuccess;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é‚£ä¹ˆé—®é¢˜å°±å˜æˆæ€ä¹ˆè·å–é¡¶ç‚¹ä¸Šè‰²äº†ï¼Œå¦‚æœæ›²çº¿çš„é¡¶ç‚¹æ•°é‡å¾ˆå°‘å°±å¾ˆéš¾æœ‰å¥½çš„æ˜¾ç¤ºæ•ˆæœã€‚</p></blockquote><blockquote><p>&emsp;&emsp;å› æ­¤è¿™é‡Œä½¿ç”¨ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_fn_nurbs_curve_html#a6fc77e351e95b453079bbad771940d9f">findParamFromLength</a> <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_fn_nurbs_curve_html#ab2f1acb5a0653b12d7430d5786ef2e3e">getPointAtParam</a>  çš„æ–¹å¼é‡æ–°é‡‡æ ·æ›²çº¿çš„é¡¶ç‚¹ã€‚<br>&emsp;&emsp;å¯¹é‡‡æ ·çš„é¡¶ç‚¹å†åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦åœ¨ç¬”åˆ·çš„åœ†åœˆèŒƒå›´å†…ï¼ŒèŒƒå›´å¤–çš„é™„ä¸Šé€æ˜çš„é¢œè‰²ï¼ŒèŒƒå›´å†…çš„æ ¹æ®è·ç¦»é™„ä¸Šé»‘ç™½è‰²ã€‚</p></blockquote><h3 id="æ›²çº¿-CV-ç§»åŠ¨"><a href="#æ›²çº¿-CV-ç§»åŠ¨" class="headerlink" title="æ›²çº¿ CV ç§»åŠ¨"></a>æ›²çº¿ CV ç§»åŠ¨</h3><blockquote><p>&emsp;&emsp;é¦–å…ˆè¦è·å– drag åç§»çš„å‘é‡ã€‚<br>&emsp;&emsp;é€šè¿‡ <code>doPress</code> æ–¹æ³•å¯ä»¥è·å–åˆ°ç‚¹å‡»çš„æ—¶å€™çš„å‘é‡åç§»ã€‚<br>&emsp;&emsp;å†é€šè¿‡ <code>doDrag</code> è·å–æ‹–æ‹½çš„æ—¶å€™é¼ æ ‡çš„ä½ç½®ã€‚<br>&emsp;&emsp;ä¸¤ä¸ªä½ç½®åæ ‡å°±å¯ä»¥å¾—åˆ°åç§»çš„å‘é‡ã€‚</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">MStatus <span class="title">curveBrushContext::doPress</span><span class="params">(MEvent &amp;event, MHWRender::MUIDrawManager &amp;drawMgr, <span class="type">const</span> MHWRender::MFrameContext &amp;context)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    view = M3dView::<span class="built_in">active3dView</span>();</span><br><span class="line">    event.<span class="built_in">getPosition</span>(startPosX, startPosY);</span><br><span class="line">    fStartBrushSize = mBrushConfig.<span class="built_in">size</span>();</span><br><span class="line">    fStartBrushStrength = mBrushConfig.<span class="built_in">strength</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> MS::kSuccess;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">MStatus <span class="title">curveBrushContext::doDrag</span><span class="params">(MEvent &amp;event, MHWRender::MUIDrawManager &amp;drawMgr, <span class="type">const</span> MHWRender::MFrameContext &amp;context)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    view.<span class="built_in">refresh</span>(<span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">    <span class="type">short</span> currentPosX, currentPosY;</span><br><span class="line">    event.<span class="built_in">getPosition</span>(currentPosX, currentPosY);</span><br><span class="line">    <span class="keyword">auto</span> currentPos = <span class="built_in">MPoint</span>(currentPosX, currentPosY);</span><br><span class="line"></span><br><span class="line">    <span class="function">MPoint <span class="title">start</span><span class="params">(startPosX, startPosY)</span></span>;</span><br><span class="line">    MVector delta = <span class="built_in">MVector</span>(currentPos - start);</span><br><span class="line"></span><br><span class="line">    drawMgr.<span class="built_in">beginDrawable</span>();</span><br><span class="line">    drawMgr.<span class="built_in">setColor</span>(<span class="built_in">MColor</span>(<span class="number">1.f</span>, <span class="number">1.f</span>, <span class="number">1.f</span>));</span><br><span class="line">    drawMgr.<span class="built_in">setLineWidth</span>(<span class="number">2.0f</span>);</span><br><span class="line">    <span class="comment">// NOTE(timmyliang): hold down `B` key</span></span><br><span class="line">    <span class="keyword">if</span> (eDragMode == kBrushSize)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">float</span> deltaValue;</span><br><span class="line">        <span class="type">char</span> info[<span class="number">64</span>];</span><br><span class="line">        <span class="comment">// NOTES(timmyliang): left mouse for size</span></span><br><span class="line">        <span class="keyword">if</span> (event.<span class="built_in">mouseButton</span>() == MEvent::kLeftMouse)</span><br><span class="line">        &#123;</span><br><span class="line">            deltaValue = delta.x &gt; <span class="number">0</span> ? delta.<span class="built_in">length</span>() : -delta.<span class="built_in">length</span>();</span><br><span class="line">            mBrushConfig.<span class="built_in">setSize</span>(fStartBrushSize + deltaValue);</span><br><span class="line">            <span class="built_in">sprintf</span>(info, <span class="string">&quot;Brush Size: %.2f&quot;</span>, mBrushConfig.<span class="built_in">size</span>());</span><br><span class="line">            drawMgr.<span class="built_in">text2d</span>(currentPos, info);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// NOTES(timmyliang): middle mouse for strength</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (event.<span class="built_in">mouseButton</span>() == MEvent::kMiddleMouse)</span><br><span class="line">        &#123;</span><br><span class="line">            deltaValue = delta.y &gt; <span class="number">0</span> ? delta.<span class="built_in">length</span>() : -delta.<span class="built_in">length</span>();</span><br><span class="line">            mBrushConfig.<span class="built_in">setStrength</span>(fStartBrushStrength + deltaValue);</span><br><span class="line">            <span class="built_in">sprintf</span>(info, <span class="string">&quot;Brush Strength: %.2f&quot;</span>, mBrushConfig.<span class="built_in">strength</span>());</span><br><span class="line">            drawMgr.<span class="built_in">text2d</span>(currentPos, info);</span><br><span class="line">        &#125;</span><br><span class="line">        drawMgr.<span class="built_in">line2d</span>(start, <span class="built_in">MPoint</span>(startPosX, startPosY + mBrushConfig.<span class="built_in">strength</span>() * <span class="number">2</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        MPoint startNearPos, startFarPos, currNearPos, currFarPos;</span><br><span class="line">        view.<span class="built_in">viewToWorld</span>(currentPosX, currentPosY, currNearPos, currFarPos);</span><br><span class="line">        view.<span class="built_in">viewToWorld</span>(startPosX, startPosY, startFarPos, startFarPos);</span><br><span class="line">        <span class="comment">// NOTE(timmyliang): use tool command for undo</span></span><br><span class="line">        curveBrushTool *cmd = (curveBrushTool *)<span class="built_in">newToolCommand</span>();</span><br><span class="line">        cmd-&gt;<span class="built_in">setStrength</span>(mBrushConfig.<span class="built_in">strength</span>());</span><br><span class="line">        cmd-&gt;<span class="built_in">setRadius</span>(mBrushConfig.<span class="built_in">size</span>());</span><br><span class="line">        cmd-&gt;<span class="built_in">setMoveVector</span>((currFarPos - startFarPos).<span class="built_in">normal</span>());</span><br><span class="line">        cmd-&gt;<span class="built_in">setStartPoint</span>(start);</span><br><span class="line">        cmd-&gt;<span class="built_in">setDagPathArray</span>(objDagPathArray);</span><br><span class="line">        cmd-&gt;<span class="built_in">redoIt</span>();</span><br><span class="line">        cmd-&gt;<span class="built_in">finalize</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    drawMgr.<span class="built_in">circle2d</span>(start, mBrushConfig.<span class="built_in">size</span>());</span><br><span class="line">    drawMgr.<span class="built_in">endDrawable</span>();</span><br><span class="line">    <span class="keyword">return</span> MS::kSuccess;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;<code>doDrag</code> è¿˜ä¼šåˆ¤æ–­æ˜¯å¦æŒ‰ä½ <code>B</code> é”®ï¼ŒæŒ‰ä½çš„è¯å°±è°ƒæ•´ç¬”åˆ·çš„å¤§å°ã€‚<br>&emsp;&emsp;åä¹‹åˆ™è°ƒç”¨ <a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__py_ref_class_open_maya_u_i_1_1_m_px_context_html#a8e65ca6ff1d97d4b49ac94897462dc72">newToolCommand</a>  æ‰§è¡Œ CV ç§»åŠ¨çš„é€»è¾‘</p></blockquote><hr><blockquote><p>&emsp;&emsp;<code>ToolCommand</code> ä¼šè·å–æ›²çº¿ä¸Š CV ç‚¹çš„ä½ç½®ï¼Œå°†ç©ºé—´åæ ‡è½¬ä¸ºå±å¹•åæ ‡ã€‚<br>&emsp;&emsp;è¿™æ ·å¯ä»¥åˆ¤æ–­è¿™äº› CV ç‚¹æ˜¯å¦åœ¨ç¬”åˆ·èŒƒå›´å†…ã€‚<br>&emsp;&emsp;å¦‚æœåœ¨èŒƒå›´çš„ CV ç‚¹æ ¹æ®ç¬”åˆ·æä¾›çš„æ–¹å‘è¿›è¡Œåç§»ã€‚</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">MStatus <span class="title">curveBrushTool::redoIt</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    MVector offsetVector = moveVector * <span class="number">0.002</span> * strength;</span><br><span class="line">    M3dView view = M3dView::<span class="built_in">active3dView</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// NOTE(timmyliang): move curves cv in radius</span></span><br><span class="line">    <span class="type">short</span> x_pos, y_pos;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">unsigned</span> <span class="type">int</span> index = <span class="number">0</span>; index &lt; dagPathArray.<span class="built_in">length</span>(); ++index)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">MFnNurbsCurve <span class="title">curveFn</span><span class="params">(dagPathArray[index])</span></span>;</span><br><span class="line">        std::map&lt;<span class="type">int</span>, MVector&gt; offsetMap;</span><br><span class="line">        <span class="keyword">for</span> (MItCurveCV <span class="built_in">cvIter</span>(dagPathArray[index]); !cvIter.<span class="built_in">isDone</span>(); cvIter.<span class="built_in">next</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            MPoint pos = cvIter.<span class="built_in">position</span>(MSpace::kWorld);</span><br><span class="line">            <span class="type">int</span> cvIndex = cvIter.<span class="built_in">index</span>();</span><br><span class="line">            curvePointMap[index][cvIndex] = pos;</span><br><span class="line">            view.<span class="built_in">worldToView</span>(pos, x_pos, y_pos);</span><br><span class="line">            <span class="keyword">if</span> ((startPoint - <span class="built_in">MPoint</span>(x_pos, y_pos)).<span class="built_in">length</span>() &lt; radius)</span><br><span class="line">            &#123;</span><br><span class="line">                offsetMap[cvIndex] = pos + offsetVector;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span> &amp;it : offsetMap)</span><br><span class="line">        &#123;</span><br><span class="line">            curveFn.<span class="built_in">setCV</span>(it.first, it.second, MSpace::kWorld);</span><br><span class="line">        &#125;</span><br><span class="line">        curveFn.<span class="built_in">updateCurve</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> MStatus::kSuccess;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_it_curve_c_v_html">MItCurveCV</a> éå†æ›²çº¿ä¸Šæ‰€æœ‰çš„ CV ç‚¹ã€‚<br>&emsp;&emsp;åˆ©ç”¨ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_fn_nurbs_curve_html#a48b56f4698e7040883822351234c8c63">setCV</a> æ–¹æ³•å¯ä»¥å®ç°é¡¶ç‚¹çš„åç§»<br>&emsp;&emsp;C++ è¿™è¾¹æˆ‘å‘ç°ä¸èƒ½åœ¨ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_it_curve_c_v_html">MItCurveCV</a> çš„éå†è¿‡ç¨‹ä¸­è°ƒç”¨ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_fn_nurbs_curve_html#a48b56f4698e7040883822351234c8c63">setCV</a> ï¼Œå®ƒä¼šå¯¼è‡´éå†ä¸­æ–­ã€‚<br>&emsp;&emsp;ä½†æ˜¯ç”¨ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_it_curve_c_v_html">MItCurveCV</a> æä¾›çš„ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_it_curve_c_v_html#a0cb9d81962afa9947eb5aa0b4465f217">setCVPosition</a> æ— æ³•å®ç°ä½ç½®çš„åˆ·æ–°ã€‚<br>&emsp;&emsp;æœ€ååªå¥½å°† CVåºå· å’Œ ä½ç½®é€šè¿‡ Map ä¿å­˜èµ·æ¥ï¼Œé€šè¿‡ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_fn_nurbs_curve_html#a48b56f4698e7040883822351234c8c63">setCV</a> API å»åç§»ã€‚</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">MStatus <span class="title">curveBrushTool::undoIt</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// NOTE(timmyliang): reset point position</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span> &amp;kv : curvePointMap)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">MFnNurbsCurve <span class="title">curveFn</span><span class="params">(dagPathArray[kv.first])</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span> &amp;it : kv.second)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> cvIndex = it.first;</span><br><span class="line">            MPoint pos = it.second;</span><br><span class="line">            curveFn.<span class="built_in">setCV</span>(cvIndex, pos, MSpace::kWorld);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> MStatus::kSuccess;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡ <code>curvePointMap</code> å˜é‡ä¿å­˜äº†ä¸Šä¸€æ¬¡æ‰€æœ‰ CV ç‚¹çš„ä½ç½®ï¼Œundo åªè¦éå†è¿™ä¸ªå­—å…¸å»é‡ç½® CV ä½ç½®å³å¯ã€‚</p></blockquote><h2 id="OpenMaya-2-0-ç¬”åˆ·å¼€å‘"><a href="#OpenMaya-2-0-ç¬”åˆ·å¼€å‘" class="headerlink" title="OpenMaya 2.0 ç¬”åˆ·å¼€å‘"></a>OpenMaya 2.0 ç¬”åˆ·å¼€å‘</h2><blockquote><p>&emsp;&emsp;æ—¢ç„¶ C++ å¯ä»¥å¼€å‘å‡ºå¦‚ä¸Šçœ‹åˆ°çš„ç¬”åˆ·ï¼Œç†è®ºä¸Šä¹Ÿå¯ä»¥é€šè¿‡ Python OpenMaya åº“è¿›è¡Œç¬”åˆ·å¼€å‘ã€‚<br>&emsp;&emsp;ä½†æ˜¯æˆ‘å‘ç° OpenMaya 1.0 ä¸æ”¯æŒ Viewport 2.0 çš„ APIï¼Œæ¯”å¦‚ä¸Šé¢å…³é”®çš„ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_h_w_render_1_1_m_u_i_draw_manager_html">MUIDrawManager</a><br>&emsp;&emsp;åœ¨ OpenMaya1.0 ä¸‹æ˜¯ä¸ä¸å­˜åœ¨çš„ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> maya <span class="keyword">import</span> OpenMayaRender</span><br><span class="line">OpenMayaRender.MUIDrawManager </span><br><span class="line"><span class="comment"># Error: AttributeError: file &lt;maya console&gt; line 2: &#x27;module&#x27; object has no attribute &#x27;MUIDrawManager&#x27; # </span></span><br><span class="line"><span class="keyword">from</span> maya.api <span class="keyword">import</span> OpenMayaRender</span><br><span class="line">OpenMayaRender.MUIDrawManager</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¯ä»¥çœ‹åˆ° OpenMaya 2.0 æ‰æœ‰ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__py_ref_class_open_maya_render_1_1_m_u_i_draw_manager_html">MUIDrawManager</a></p></blockquote><p><a href="https://matiascodesal.com/blog/maya-python-api-20-it-ready-yet/">https://matiascodesal.com/blog/maya-python-api-20-it-ready-yet/</a></p><blockquote><p>&emsp;&emsp;ä»¥å‰ 18 å¹´çš„æ—¶å€™è¿˜çœ‹åˆ°æœ‰äººäº†æ–‡ç« ä»‹ç» OpenMaya 2.0 åˆ°åº•æ˜¯å¦å¯ä»¥å·²ç»å®Œå–„äº†ã€‚<br>&emsp;&emsp;OpenMaya 2.0 ä¸ OpenMaya 1.0 ç›¸æ¯”è¿˜ç¼ºäº†æŒºå¤šçš„ C++ ç±»çš„ã€‚<br>&emsp;&emsp;è€Œä¸” OpenMaya2.0 çš„æ¡ˆä¾‹éƒ½æœ‰ä¸€äº›ä»£ç é”™è¯¯ï¼Œæ¯”å¦‚ <code>plug-ins\python\api2\py2LassoTool.py</code> (å·²ç»æ˜¯ 2023 çš„æœ€æ–°ç‰ˆæœ¬äº†)<br>&emsp;&emsp;è¿™å®åœ¨æ˜¯ä»¤äººå¤±æœ›ï¼Œè„šæœ¬çš„ç¬¬ 224 è¡Œæœ‰æ˜æ˜¾ <code>true</code> ä½¿ç”¨ä¸å½“ï¼Œå¹¶ä¸” <code>MItCurveCV</code> è¿™ä¸ªç±» OpenMaya 2.0 ä¸æ”¯æŒçš„ã€‚<br>&emsp;&emsp;æˆ‘å¯ç”¨è¿™ä¸ªè„šæœ¬æ¡†é€‰ CV ç‚¹ç›´æ¥ç»™æˆ‘æŠ¥é”™<em>(:Ğ·ã€âˆ )</em><br>&emsp;&emsp;ä¹Ÿå› ä¸º OpenMaya 2.0 å„ç§ä¸å®Œå–„ï¼Œ <a href="http://tw.l0v0.com/#%F0%9F%91%A8%E2%80%8D%F0%9F%92%BBmottosso">ğŸ‘¨â€ğŸ’»mottosso</a> å¤§ä½¬æ‰ä¼šåšè‡ªå·±çš„ Pyd wrapper å°è£… C++ API <a href="https://github.com/mottosso/cmdc">cmdc</a> ï¼Œåªæ˜¯ç›®å‰çš„è¿›åº¦è¿˜éœ€è¦æ›´å¤šäººåŠ å…¥æ”¯æŒå¼€å‘ã€‚</p></blockquote><hr><blockquote><p>&emsp;&emsp;é‚£æ˜¯ç”¨ OpenMaya 2.0 èƒ½å¦å®Œæˆæˆ‘ä¸Šé¢çš„ C++ æ›²çº¿ç¬”åˆ·çš„å¤åˆ»å‘¢ï¼Ÿ<br>&emsp;&emsp;æˆ‘æŸ¥äº†ä¸€ä¸‹ï¼Œå‘ç° Maya 2020 ä¹‹åæ·»åŠ äº† <a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__py_ref_class_open_maya_u_i_1_1_m_px_tool_command_html">MPxToolCommand</a> å‘½ä»¤ï¼Œä¼¼ä¹å¯ä»¥å®ç°å’Œ C++ ä¸€æ ·çš„ undo å‘½ä»¤ã€‚<br>&emsp;&emsp;ç„¶è€Œæˆ‘çš„å®æµ‹å´è®©æˆ‘éå¸¸å¤±æœ›ã€‚</p></blockquote><p><a href="https://github.com/FXTD-ODYSSEY/Maya-CurveBrush/blob/main/plug-ins/om2_curve_brush.py">https://github.com/FXTD-ODYSSEY/Maya-CurveBrush/blob/main/plug-ins/om2_curve_brush.py</a></p><h3 id="MPxContextCommand-ç¼ºå¤±-syntax-parser-æ–¹æ³•"><a href="#MPxContextCommand-ç¼ºå¤±-syntax-parser-æ–¹æ³•" class="headerlink" title="MPxContextCommand ç¼ºå¤± syntax parser æ–¹æ³•"></a>MPxContextCommand ç¼ºå¤± syntax parser æ–¹æ³•</h3><blockquote><p>&emsp;&emsp;åŸºäº OpenMaya 2.0 ç‰ˆæœ¬çš„æ’ä»¶æˆ‘å·²ç»å†™å®Œäº†ï¼Œåªæ˜¯è¢«å®ƒçš„ä¸å®Œæ•´æ°”å¾—ä¸è½»ã€‚<br>&emsp;&emsp;é¦–å…ˆ <a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__py_ref_class_open_maya_u_i_1_1_m_px_context_command_html">MPxContextCommand</a> ç¼ºå¤±äº† <code>syntax</code> <code>parser</code> æ–¹æ³•<br>&emsp;&emsp;å³ä¾¿æä¾›äº† <code>doQueryFlags</code> <code>doEditFlags</code> çš„ API ä½†æ˜¯æ²¡æ³•å’Œ C++ ä¸€æ ·è¿›è¡Œè°ƒç”¨ï¼Œä½†æ˜¯ OpenMaya 1.0 æä¾›äº† <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_px_context_command_html#a7d98dc216bb8f7089f649230e06f6da9">_syntax</a> <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_px_context_command_html#aa367dd5b853c97af707d0fb44aa37971">_parser</a> æ–¹æ³•ç»™ Python è°ƒç”¨ã€‚</p></blockquote><h3 id="registerContextCommand-ä¸æ”¯æŒ-MPxToolCommand-æ³¨å†Œ"><a href="#registerContextCommand-ä¸æ”¯æŒ-MPxToolCommand-æ³¨å†Œ" class="headerlink" title="registerContextCommand ä¸æ”¯æŒ MPxToolCommand æ³¨å†Œ"></a>registerContextCommand ä¸æ”¯æŒ MPxToolCommand æ³¨å†Œ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">initializePlugin</span>(<span class="params">plugin</span>):</span><br><span class="line">    pluginFn = om.MFnPlugin(plugin)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        pluginFn.registerContextCommand(CONTEXT_NAME, CurveBrushContextCmd.creator)</span><br><span class="line">        <span class="comment"># TODO(timmyliang): not support MPxToolCommand registered</span></span><br><span class="line">        <span class="comment"># pluginFn.registerContextCommand(</span></span><br><span class="line">        <span class="comment">#     CONTEXT_NAME,</span></span><br><span class="line">        <span class="comment">#     CurveBrushContextCmd.creator,</span></span><br><span class="line">        <span class="comment">#     CONTEXT_TOOL_NAME,</span></span><br><span class="line">        <span class="comment">#     CurveBrushTool.creator,</span></span><br><span class="line">        <span class="comment">#     CurveBrushTool.newSyntax,</span></span><br><span class="line">        <span class="comment"># )</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        sys.stderr.write(<span class="string">&quot;Failed to register command: %s\n&quot;</span> % CONTEXT_NAME)</span><br><span class="line">        <span class="keyword">raise</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;OpenMaya 2.0 ç»ˆäºåœ¨ Maya 2020 æä¾›äº† <a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__py_ref_class_open_maya_u_i_1_1_m_px_tool_command_html">MPxToolCommand</a> çš„æ¥å£ã€‚<br>&emsp;&emsp;ä½†æ˜¯ <a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__py_ref_class_open_maya_u_i_1_1_m_px_tool_command_html">MPxToolCommand</a> éœ€è¦é€šè¿‡ <a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__py_ref_class_open_maya_1_1_m_fn_plugin_html#af866d7403152d0a96ab838a9dd16d460">registerContextCommand</a> æ¥æ³¨å†Œè¿›å»ã€‚<br>&emsp;&emsp;ä½†æ˜¯å®ƒç›®å‰ä¸æ”¯æŒ 5 ä¸ªå‚æ•°çš„è°ƒç”¨ï¼Œå¯¼è‡´ <a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__py_ref_class_open_maya_u_i_1_1_m_px_tool_command_html">MPxToolCommand</a> æ— æ³•æ³¨å†Œã€‚</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># Error: TypeError: file F:/repo/CMakeMaya/modules/Maya-CurveBrush/plug-ins/om2_curve_brush.py line 448: function takes exactly 2 arguments (5 given) # </span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ³¨å†Œçš„æ—¶å€™ä¼šæç¤º <a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__py_ref_class_open_maya_1_1_m_fn_plugin_html#af866d7403152d0a96ab838a9dd16d460">registerContextCommand</a> åªæ¥å—ä¸¤ä¸ªå‚æ•°ã€‚</p></blockquote><h3 id="MPxToolCommand-doFinalize-æ— æ³•ä¼ å…¥å‚æ•°"><a href="#MPxToolCommand-doFinalize-æ— æ³•ä¼ å…¥å‚æ•°" class="headerlink" title="MPxToolCommand doFinalize æ— æ³•ä¼ å…¥å‚æ•°"></a>MPxToolCommand doFinalize æ— æ³•ä¼ å…¥å‚æ•°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CurveBrushTool</span>(omui.MPxToolCommand):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">finalize</span>(<span class="params">self</span>):</span><br><span class="line">        command = om.MArgList()</span><br><span class="line">        command.addArg(self.commandString)</span><br><span class="line">        <span class="keyword">for</span> flag, config <span class="keyword">in</span> self.flags_data.items():</span><br><span class="line">            long_flag = config.get(<span class="string">&quot;long&quot;</span>)</span><br><span class="line">            command.addArg(flag)</span><br><span class="line">            command.addArg(<span class="built_in">getattr</span>(self, long_flag[<span class="number">1</span>:]))</span><br><span class="line">        <span class="comment"># TODO(timmyliang): not accept the command argument</span></span><br><span class="line">        <span class="comment"># return self.doFinalize(command)</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è™½ç„¶ <a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__py_ref_class_open_maya_1_1_m_fn_plugin_html#af866d7403152d0a96ab838a9dd16d460">registerContextCommand</a> æ— æ³•æ³¨å†Œ <a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__py_ref_class_open_maya_u_i_1_1_m_px_tool_command_html">MPxToolCommand</a> å¯¼è‡´ <a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__py_ref_class_open_maya_u_i_1_1_m_px_context_html#a8e65ca6ff1d97d4b49ac94897462dc72">newToolCommand</a> æ²¡æœ‰æ­£å¸¸çš„è¿”å›ã€‚<br>&emsp;&emsp;ä½†æˆ‘å¯ä»¥å•ç‹¬å®ä¾‹åŒ– <code>MPxToolCommand</code> ä»è€Œå®ç° undo<br>&emsp;&emsp;å¯æ˜¯è¿˜æ˜¯ä¸è¡Œï¼Œè€Œä¸”è¿™ä¸ªå‘çˆ¹çš„æƒ…å†µæ˜æ˜¾æ˜¯å®˜æ–¹çš„é—®é¢˜ã€‚<br>&emsp;&emsp;<a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__py_ref_class_open_maya_u_i_1_1_m_px_tool_command_html#adf6d293860cfea905a954f2931f7c3c5">doFinalize</a> æ˜æ˜å¯ä»¥æ¥å—ä¸€ä¸ª <code>MArgList</code> ç±»å‹çš„å‚æ•°ï¼Œä½†æ˜¯è¿™ä¸ª Python å‡½æ•°å´ä¸æ¥å—ä»»ä½•å‚æ•°<em>(:Ğ·ã€âˆ )</em></p></blockquote><h3 id="OpenMaya-2-0-å±•ç¤º"><a href="#OpenMaya-2-0-å±•ç¤º" class="headerlink" title="OpenMaya 2.0 å±•ç¤º"></a>OpenMaya 2.0 å±•ç¤º</h3><video src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/om2.mp4" autoplay="autoplay" loop="loop" style="width: 100%; height:100%;"></video><blockquote><p>&emsp;&emsp;è™½ç„¶ 2.0 æœ‰ä¸Šè¿°çš„è¯¸å¤šé—®é¢˜ï¼Œç¬”åˆ·çš„åŸºç¡€åŠŸèƒ½è¿˜æ˜¯å¯ä»¥å®ç°çš„ã€‚<br>&emsp;&emsp;åªæ˜¯ undo åŠŸèƒ½è§£å†³ä¸äº†ï¼Œå€’æ˜¯å¯ä»¥å°†æ›²çº¿çš„ tweak æ“ä½œè½¬ç§»åˆ°å¦ä¸€ä¸ª Command ä¸Šä»è€Œå®ç° undo çš„ã€‚<br>&emsp;&emsp;ä¸è¿‡æˆ‘è¿™é‡Œå°±ç‚¹åˆ°ä¸ºæ­¢ï¼Œä¸»è¦è¸©äº† OpenMaya 2.0 çš„å‘ï¼Œå¯¹å®ƒå¥½æ„Ÿåº¦é™ä½äº†ä¸å°‘<em>(:Ğ·ã€âˆ )</em></p></blockquote><h2 id="Python-Qt-Overlay-å®ç°è‡ªå®šä¹‰ç»˜åˆ¶"><a href="#Python-Qt-Overlay-å®ç°è‡ªå®šä¹‰ç»˜åˆ¶" class="headerlink" title="Python Qt Overlay å®ç°è‡ªå®šä¹‰ç»˜åˆ¶"></a>Python Qt Overlay å®ç°è‡ªå®šä¹‰ç»˜åˆ¶</h2><blockquote><p>&emsp;&emsp;ä¸Šé¢æåˆ°äº† OpenMaya 1.0 ç¼ºå¤±äº† <code>MUIDrawManager</code> æ‰€ä»¥æ— æ³•åœ¨ Viewport 2.0 ä¸‹è¿›è¡Œå›¾åƒç»˜åˆ¶ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/581b6161891458d2098e7e062cd62bf2.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;C++ æ–‡æ¡£ä¹Ÿæ³¨æ˜äº†å¸¦ <code>MUIDrawManager</code> æ˜¯æ— æ³•åœ¨ Python ä¸‹ä½¿ç”¨çš„ã€‚<br>&emsp;&emsp;æˆ‘ä¹Ÿæµ‹è¯•äº†ä¸ä¼ å…¥ <code>MUIDrawManager</code> çš„å‡ ä¸ªæ–¹æ³•ï¼Œä»–ä»¬åªèƒ½åœ¨ Legacy Viewport ä¸‹å“åº”è§¦å‘ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;é‚£è¿˜æœ‰ä»€ä¹ˆæ–¹æ³•ä¸ç”¨ C++ ä¹Ÿå¯ä»¥å®ç° Python çš„ç»˜åˆ¶å‘¢ï¼Ÿ<br>&emsp;&emsp;è¿™å°±å¯ä»¥å‚è€ƒä¸€ä¸ªéå¸¸æ£’çš„ Maya Python å·¥å…· <a href="https://github.com/wiremas/spore">spore</a></p></blockquote><blockquote><p>&emsp;&emsp;spore ä¹Ÿå®ç°äº†è‡ªå·±çš„ç¬”åˆ·å·¥å…·ï¼Œå¹¶ä¸”å¯¹ä½ç‰ˆæœ¬ Maya å…¼å®¹ã€‚<br>&emsp;&emsp;å®ƒçš„åšæ³•ä¸æ˜¯é€šè¿‡ Maya API å®ç°ï¼Œè€Œæ˜¯åˆ©ç”¨ Qt çš„ API è¿›è¡Œç»˜åˆ¶ã€‚<br>&emsp;&emsp;é¦–å…ˆå¯¹ Maya çš„ Viewport å åŠ ä¸€å±‚é€æ˜çš„ QWidget å±‚ï¼Œé€šè¿‡ <a href="https://doc.qt.io/qtforpython-5/PySide2/QtWidgets/QWidget.html?highlight=paintevent#PySide2.QtWidgets.PySide2.QtWidgets.QWidget.paintEvent">paintEvent</a> çš„å®ç°ï¼Œç»˜åˆ¶è‡ªå®šä¹‰å›¾å½¢å åŠ åˆ° Viewport ä¸Šã€‚</p></blockquote><video src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/om1.mp4" autoplay="autoplay" loop="loop" style="width: 100%; height:100%;"></video><blockquote><p>&emsp;&emsp;å®ç°æ•ˆæœå¦‚ä¸Šå›¾ï¼ŒåŸºæœ¬å’Œ Maya API çš„ç»˜åˆ¶æ•ˆæœå¾ˆæ¥è¿‘ã€‚</p></blockquote><h3 id="Overlay-ç»„ä»¶å®ç°"><a href="#Overlay-ç»„ä»¶å®ç°" class="headerlink" title="Overlay ç»„ä»¶å®ç°"></a>Overlay ç»„ä»¶å®ç°</h3><blockquote><p>&emsp;&emsp;ç»„ä»¶å åŠ çš„æ–¹æ¡ˆæˆ‘ä¹‹å‰çš„æ–‡ç« ä¹Ÿæœ‰è¿‡ <a href="./5905c2c9.html">Unreal Python è·¯å¾„å®šä½å¯åŠ¨å™¨</a><br>&emsp;&emsp;æ ¸å¿ƒæ€è·¯å°±æ˜¯å–æ¶ˆ Widget çš„è¾¹æ¡†ï¼Œå¿½ç•¥è¾“å…¥å½±å“ï¼Œé€æ˜åŒ–èƒŒæ™¯å¹¶ä¸”æ°¸è¿œä¿æŒåœ¨æœ€å‰é¢ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CanvasOverlay</span>(QtWidgets.QWidget):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, context</span>):</span><br><span class="line">        <span class="comment"># type: (CurveBrushContext) -&gt; <span class="literal">None</span></span></span><br><span class="line">        <span class="built_in">super</span>(CanvasOverlay, self).__init__()</span><br><span class="line">        self.setWindowFlags(</span><br><span class="line">            QtCore.Qt.FramelessWindowHint</span><br><span class="line">            | QtCore.Qt.SplashScreen</span><br><span class="line">            | QtCore.Qt.WindowStaysOnTopHint</span><br><span class="line">            | QtCore.Qt.WindowTransparentForInput</span><br><span class="line">        )</span><br><span class="line">        self.setAttribute(QtCore.Qt.WA_TranslucentBackground)</span><br><span class="line">        self.setAttribute(QtCore.Qt.WA_NoSystemBackground)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è¿™æ ·å°±æ˜¯ä¸€ä¸ªæ— è¾¹æ¡†é€æ˜çš„çª—å£ï¼Œå¦‚æœä¸åŠ ä¸Šé¢œè‰²ç”¨æˆ·æ˜¯æ— æ„ŸçŸ¥çš„ã€‚</p></blockquote><p><a href="https://github.com/wiremas/spore/blob/b1ec511017cc9ba05d9034321369e5e404550232/scripts/ui/canvas.py#L18">spore å‚è€ƒ</a></p><h3 id="å¤šä¸ª-Viewport-å åŠ æ”¯æŒ"><a href="#å¤šä¸ª-Viewport-å åŠ æ”¯æŒ" class="headerlink" title="å¤šä¸ª Viewport å åŠ æ”¯æŒ"></a>å¤šä¸ª Viewport å åŠ æ”¯æŒ</h3><video src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/overlay.mp4" autoplay="autoplay" loop="loop" style="width: 100%; height:100%;"></video><blockquote><p>&emsp;&emsp;æˆ‘æ·»åŠ äº†å¤šä¸ª Viewport çš„ Overlay æ”¯æŒï¼Œspore é»˜è®¤æ˜¯åªå¯¹ç¬”åˆ·æ¿€æ´»æ—¶çš„ Viewport è¿›è¡Œ Overlay æ“ä½œã€‚<br>&emsp;&emsp;å¦‚æœåˆ‡æ¢åˆ°å¤šè§†å›¾æˆ–è€…å•ç‹¬çš„ Viewport çª—å£å°±ä¼šè®© Overlay æ˜¾ç¤ºä¸æ­£å¸¸ã€‚<br>&emsp;&emsp;è¿™é‡Œçš„ Overlay åŠ ä¸Šäº†å¤§è‰²å—æ–¹ä¾¿è§‚å¯Ÿã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AppFilter</span>(QtCore.QObject):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, canvas</span>):</span><br><span class="line">        <span class="comment"># type: (CurveBrushContext) -&gt; <span class="literal">None</span></span></span><br><span class="line">        <span class="built_in">super</span>(AppFilter, self).__init__()</span><br><span class="line">        self.canvas = canvas</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eventFilter</span>(<span class="params">self, receiver, event</span>):</span><br><span class="line">        <span class="keyword">if</span> event.<span class="built_in">type</span>() == QtCore.QEvent.MouseButtonPress:</span><br><span class="line">            widget = QtWidgets.QApplication.widgetAt(QtGui.QCursor.pos())</span><br><span class="line">            panel = <span class="built_in">isinstance</span>(widget, QtCore.QObject) <span class="keyword">and</span> widget.parent()</span><br><span class="line">            name = panel <span class="keyword">and</span> panel.objectName()</span><br><span class="line">            <span class="keyword">if</span> name:</span><br><span class="line">                is_model_editor = cmds.objectTypeUI(name, i=<span class="string">&quot;modelEditor&quot;</span>)</span><br><span class="line">                self.canvas.setVisible(is_model_editor)</span><br><span class="line">                <span class="keyword">if</span> is_model_editor:</span><br><span class="line">                    QtCore.QTimer.singleShot(<span class="number">0</span>, self.canvas.setup_active_viewport)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>(AppFilter, self).eventFilter(receiver, event)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CurveBrushContext</span>(OpenMayaMPx.MPxContext):</span><br><span class="line">    <span class="comment"># çœç•¥ ...</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">toolOnSetup</span>(<span class="params">self</span>):</span><br><span class="line">        self.canvas = CanvasOverlay(self)</span><br><span class="line">        <span class="comment"># NOTES(timmyliang): è·å– QApplication è¿›è¡Œç›‘å¬</span></span><br><span class="line">        app = QtWidgets.QApplication.instance()</span><br><span class="line">        app_filter = AppFilter(self.canvas)</span><br><span class="line">        app.installEventFilter(app_filter)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æˆ‘è¿™é‡Œçš„åšæ³•æ˜¯åˆ©ç”¨ <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_px_context_html#a658f83d3a196c6c8e77e7ed2655eb6d7">toolOnSetup</a> API ï¼Œæ¿€æ´»ç¬”åˆ·çš„æ—¶å€™ç›‘å¬ Maya QApplication å…¨å±€çš„ç‚¹å‡»äº‹ä»¶<br>&emsp;&emsp;å¦‚æœç‚¹å‡»çš„ Widget æ˜¯ <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/modelEditor.html">modelEditor</a> å°±å°† overlay åŒæ­¥è¿‡å»ã€‚<br>&emsp;&emsp;Qt çš„ objectName å°±æ˜¯ Maya çš„ UI control Name ï¼Œæ‰€ä»¥ä» <code>objectName()</code> è·å–çš„ API å¯ä»¥ç›´æ¥ç”¨ <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/objectTypeUI.html">objectTypeUI</a> åˆ¤æ–­ç±»å‹<br>&emsp;&emsp;åˆ©ç”¨è¿™ä¸ªæ–¹æ³•ä»»ä½• Viewport ç‚¹å‡»éƒ½å¯ä»¥ç›´æ¥ resize Overlay ä¸Šå»</p></blockquote><h3 id="ç›‘å¬-Viewport-äº‹ä»¶"><a href="#ç›‘å¬-Viewport-äº‹ä»¶" class="headerlink" title="ç›‘å¬ Viewport äº‹ä»¶"></a>ç›‘å¬ Viewport äº‹ä»¶</h3><blockquote><p>&emsp;&emsp;æ­£å¦‚ä¸Šé¢æ‰€è¯´çš„ <code>doDrag</code> <code>doPress</code> ç­‰ä¸€ç³»åˆ— API åœ¨ Viewport 2.0 ä¸‹æ˜¯å¤±æ•ˆçš„ã€‚<br>&emsp;&emsp;é€šè¿‡ Qt çš„ <a href="https://doc.qt.io/qtforpython-5/PySide2/QtCore/QObject.html?highlight=installeventfilter#PySide2.QtCore.PySide2.QtCore.QObject.installEventFilter">installEventFilter</a> å¯ä»¥å®ç°å¯¹ Viewport çš„äº‹ä»¶ç›‘å¬ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shiboken2</span><br><span class="line"><span class="keyword">import</span> maya.OpenMaya <span class="keyword">as</span> om</span><br><span class="line"><span class="keyword">import</span> maya.OpenMayaUI <span class="keyword">as</span> omui</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> PySide2.QtWidgets <span class="keyword">import</span> QWidget</span><br><span class="line"><span class="keyword">from</span> PySide2.QtCore <span class="keyword">import</span> QObject</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">active_view</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot; return the active 3d view &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> omui.M3dView.active3dView()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">active_view_wdg</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot; return the active 3d view wrapped in a QWidget &quot;&quot;&quot;</span></span><br><span class="line">    view = active_view()</span><br><span class="line">    active_view_widget = shiboken2.wrapInstance(long(view.widget()), QWidget)</span><br><span class="line">    <span class="keyword">return</span> active_view_widget</span><br></pre></td></tr></table></figure><p><a href="https://github.com/wiremas/spore/blob/b1ec511017cc9ba05d9034321369e5e404550232/scripts/utils/window_utils.py#L15">spore å‚è€ƒ</a></p><blockquote><p>&emsp;&emsp;é€šè¿‡ OpenMaya 1.0 çš„ API å¯ä»¥è·å–å½“å‰æ¿€æ´»çš„ Viewport QWidget<br>&emsp;&emsp;æ‹¦æˆªè¿™ä¸ª Viewport QWidget çš„äº‹ä»¶å¯ä»¥å®ç°é¼ æ ‡ç‚¹å‡»æ‹–æ‹½ç­‰ç­‰çš„å“åº”ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MouseFilter</span>(QtCore.QObject):</span><br><span class="line">    wheel = QtCore.Signal(QtCore.QEvent)</span><br><span class="line">    moved = QtCore.Signal(QtCore.QEvent)</span><br><span class="line">    clicked = QtCore.Signal(QtCore.QEvent)</span><br><span class="line">    dragged = QtCore.Signal(QtCore.QEvent)</span><br><span class="line">    released = QtCore.Signal(QtCore.QEvent)</span><br><span class="line">    entered = QtCore.Signal()</span><br><span class="line">    leaved = QtCore.Signal()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">super</span>(MouseFilter, self).__init__(*args, **kwargs)</span><br><span class="line">        self.is_clicked = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eventFilter</span>(<span class="params">self, receiver, event</span>):</span><br><span class="line">        event_type = event.<span class="built_in">type</span>()</span><br><span class="line">        <span class="keyword">if</span> event_type == QtCore.QEvent.MouseMove:</span><br><span class="line">            self.moved.emit(event)</span><br><span class="line">            <span class="keyword">if</span> self.is_clicked:</span><br><span class="line">                self.dragged.emit(event)</span><br><span class="line">        <span class="keyword">elif</span> (</span><br><span class="line">            event_type == QtCore.QEvent.MouseButtonPress</span><br><span class="line">            <span class="keyword">or</span> event_type == QtCore.QEvent.MouseButtonDblClick</span><br><span class="line">        ):</span><br><span class="line">            self.is_clicked = <span class="literal">True</span></span><br><span class="line">            self.clicked.emit(event)</span><br><span class="line">        <span class="keyword">elif</span> event_type == QtCore.QEvent.MouseButtonRelease:</span><br><span class="line">            self.is_clicked = <span class="literal">False</span></span><br><span class="line">            self.released.emit(event)</span><br><span class="line">        <span class="keyword">elif</span> event_type == QtCore.QEvent.Enter:</span><br><span class="line">            self.entered.emit()</span><br><span class="line">        <span class="keyword">elif</span> event_type == QtCore.QEvent.Leave:</span><br><span class="line">            self.leaved.emit()</span><br><span class="line">        <span class="keyword">elif</span> event_type == QtCore.QEvent.Wheel:</span><br><span class="line">            self.wheel.emit(event)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>(MouseFilter, self).eventFilter(receiver, event)</span><br><span class="line"></span><br><span class="line">viewport = active_view_wdg()</span><br><span class="line">mouse_filter = MouseFilter()</span><br><span class="line">viewport.installEventFilter(mouse_filter)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡ä¸Šé¢çš„æ–¹å¼å°±å¯ä»¥æ‹¦æˆª viewport çš„ event é€šè¿‡ <code>MouseFilter</code> çš„ä¿¡å·æ§½åšç›¸åº”çš„è§¦å‘ã€‚</p></blockquote><h3 id="ç»˜åˆ¶å®ç°"><a href="#ç»˜åˆ¶å®ç°" class="headerlink" title="ç»˜åˆ¶å®ç°"></a>ç»˜åˆ¶å®ç°</h3><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/ca328c45d71ebda1041ee55d0eac4a97.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;å‚è€ƒä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼ŒQt API åŸºæœ¬ä¸Šå’Œ Maya API ç»˜åˆ¶çš„æ•ˆæœå·®ä¸å¤šã€‚<br>&emsp;&emsp;Maya API çš„ <code>MUIDrawManager</code> æä¾›äº† mesh API æ¥ç»˜åˆ¶å¤æ‚å›¾å½¢ã€‚<br>&emsp;&emsp;Qt API å¹¶æ²¡æœ‰ç±»ä¼¼çš„æ–¹æ³•ï¼Œä¸è¿‡ Qt ä¹Ÿæœ‰ <a href="https://doc.qt.io/qtforpython-5/PySide2/QtGui/QGradient.html">QGradient</a><br>&emsp;&emsp;é€šè¿‡ <a href="https://doc.qt.io/qtforpython-5/PySide2/QtGui/QLinearGradient.html#qlineargradient">QLinearGradient</a> å¯ä»¥å®ç°ä¸Šé¢çš„æ•ˆæœã€‚<br>&emsp;&emsp;åŒæ ·åœ°éœ€è¦å¯¹æ›²çº¿è¿›è¡ŒäºŒæ¬¡é‡‡æ ·ï¼Œæé«˜åˆ†æ®µæ•°ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">paintEvent</span>(<span class="params">self, event</span>):</span><br><span class="line">    self.draw_shape(self.create_brush_cricle(), QtCore.Qt.white, <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">if</span> self.is_press_B:</span><br><span class="line">        self.draw_shape(self.create_brush_line(), QtCore.Qt.white, <span class="number">2</span>)</span><br><span class="line">    self.draw_text(self._message_info)</span><br><span class="line">    <span class="keyword">for</span> curve, data <span class="keyword">in</span> self.color_data.items():</span><br><span class="line">        self.draw_shape(data.get(<span class="string">&quot;points&quot;</span>), data.get(<span class="string">&quot;colors&quot;</span>), <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">super</span>(CanvasOverlay, self).paintEvent(event)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_brush_cricle</span>(<span class="params">self, count=<span class="number">60</span></span>):</span><br><span class="line">    shape = []</span><br><span class="line">    radius = self.radius</span><br><span class="line">    pt = self.start_pos <span class="keyword">if</span> self.is_press_B <span class="keyword">else</span> self.current_pos</span><br><span class="line">    <span class="keyword">for</span> index <span class="keyword">in</span> <span class="built_in">range</span>(count + <span class="number">1</span>):</span><br><span class="line">        theta = math.radians(<span class="number">360</span> * index / count)</span><br><span class="line">        pos_x = pt.x() + radius * math.cos(theta)</span><br><span class="line">        pos_y = pt.y() + radius * math.sin(theta)</span><br><span class="line">        shape.append(QtCore.QPointF(pos_x, pos_y))</span><br><span class="line">    <span class="keyword">return</span> shape</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_brush_line</span>(<span class="params">self</span>):</span><br><span class="line">    shape = []</span><br><span class="line">    start_pt = self.start_pos <span class="keyword">if</span> self.is_press_B <span class="keyword">else</span> self.current_pos</span><br><span class="line">    shape.append(start_pt)</span><br><span class="line">    shape.append(QtCore.QPoint(start_pt.x(), start_pt.y() - self.strength))</span><br><span class="line">    <span class="keyword">return</span> shape</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_shape</span>(<span class="params">self, line_shapes, colors, width=<span class="number">1</span></span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(line_shapes) &lt; <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    colors = colors <span class="keyword">or</span> QtCore.Qt.white</span><br><span class="line">    painter = QtGui.QPainter(self)</span><br><span class="line"></span><br><span class="line">    painter.setRenderHint(painter.Antialiasing)</span><br><span class="line">    painter.begin(self)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">        <span class="built_in">isinstance</span>(colors, Iterable)</span><br><span class="line">        <span class="keyword">and</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(colors, six.string_types)</span><br><span class="line">        <span class="keyword">and</span> <span class="built_in">len</span>(colors) == <span class="built_in">len</span>(line_shapes)</span><br><span class="line">    ):</span><br><span class="line">        <span class="comment"># NOTES(timmyliang): paint falloff</span></span><br><span class="line">        <span class="keyword">for</span> index, point <span class="keyword">in</span> <span class="built_in">enumerate</span>(line_shapes[:-<span class="number">1</span>]):</span><br><span class="line">            start_point = point</span><br><span class="line">            end_point = line_shapes[index + <span class="number">1</span>]</span><br><span class="line">            grandient_color = QtGui.QLinearGradient(start_point, end_point)</span><br><span class="line">            start_color = colors[index]</span><br><span class="line">            end_color = colors[index + <span class="number">1</span>]</span><br><span class="line">            grandient_color.setColorAt(<span class="number">0</span>, start_color)</span><br><span class="line">            grandient_color.setColorAt(<span class="number">1</span>, end_color)</span><br><span class="line">            pen = QtGui.QPen(grandient_color, width)</span><br><span class="line">            pen.setCapStyle(QtCore.Qt.RoundCap)</span><br><span class="line">            pen.setJoinStyle(QtCore.Qt.RoundJoin)</span><br><span class="line">            painter.setPen(pen)</span><br><span class="line">            painter.drawLine(start_point, end_point)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        path = QtGui.QPainterPath()</span><br><span class="line">        path.moveTo(line_shapes[<span class="number">0</span>])</span><br><span class="line">        [path.lineTo(point) <span class="keyword">for</span> point <span class="keyword">in</span> line_shapes]</span><br><span class="line">        color = QtGui.QColor(colors)</span><br><span class="line">        pen = QtGui.QPen(color, width)</span><br><span class="line">        painter.setPen(pen)</span><br><span class="line">        painter.drawPath(path)</span><br><span class="line"></span><br><span class="line">    painter.end()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_text</span>(<span class="params">self, text, pos=<span class="literal">None</span>, color=QtCore.Qt.white, width=<span class="number">1</span></span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> text:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    painter = QtGui.QPainter(self)</span><br><span class="line">    pen = QtGui.QPen(color, width)</span><br><span class="line">    painter.setPen(pen)</span><br><span class="line">    pos = pos <span class="keyword">or</span> self.current_pos + QtCore.QPoint(<span class="number">10</span>, <span class="number">0</span>)</span><br><span class="line">    painter.drawText(pos, text)</span><br><span class="line">    painter.end()</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¸Šé¢æ˜¯ç»˜åˆ¶ç”¨åˆ°çš„ ä¸€äº› API<br>&emsp;&emsp;æ ¸å¿ƒå°±æ˜¯ <code>draw_shape</code> é‡Œé¢å¦‚æœä¼ å…¥äº†å¤šä¸ª color ï¼Œè·å–coloræ¯ä¸ªé¡¶ç‚¹ç”»ä¸€æ¡æ¸å˜çš„çº¿<br>&emsp;&emsp;å¤šæ¡çº¿ç»„åˆæˆåœ†å½¢ï¼Œç”±æ­¤æœ‰äº†è¡°å˜é¢œè‰²çš„åœ†å½¢æ›²çº¿ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;å…¶ä»–çš„ç»˜åˆ¶æ¯”å¦‚ ç»˜åˆ¶æ–‡å­—ï¼ŒQt æœ‰ <code>drawText</code> API<br>&emsp;&emsp;ç»˜åˆ¶åœ†åœˆå¯ä»¥åˆ©ç”¨ <code>sin</code> <code>cos</code> æ•°å­¦å‡½æ•°æ¥ç”Ÿæˆåœ†å½¢çš„é¡¶ç‚¹è¿›è¡Œç»˜åˆ¶ã€‚</p></blockquote><h3 id="è¸©å‘æ³¨æ„"><a href="#è¸©å‘æ³¨æ„" class="headerlink" title="è¸©å‘æ³¨æ„"></a>è¸©å‘æ³¨æ„</h3><blockquote><p>&emsp;&emsp;<code>QtCore.QPoint</code> å’Œ <code>OpenMaya.MPoint</code> ä¸¤è€…çš„ Y è½´åæ ‡èµ·å§‹ä¸ä¸€æ ·ï¼Œæ‰€ä»¥é€šè¿‡ M3dView å°†ä¸–ç•Œåæ ‡è½¬æ¢ä¸ºå±å¹•åæ ‡çš„æ—¶å€™éœ€è¦é¢å¤–çš„å¤„ç†ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">world_to_view</span>(<span class="params">position, invertY=<span class="literal">True</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    convert the given 3d position to  2d viewport coordinates</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    view = OpenMayaUI.M3dView.active3dView()</span><br><span class="line">    arg_x = OpenMaya.MScriptUtil(<span class="number">0</span>)</span><br><span class="line">    arg_y = OpenMaya.MScriptUtil(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    arg_x_ptr = arg_x.asShortPtr()</span><br><span class="line">    arg_y_ptr = arg_y.asShortPtr()</span><br><span class="line">    view.worldToView(position, arg_x_ptr, arg_y_ptr)</span><br><span class="line">    x_pos = arg_x.getShort(arg_x_ptr)</span><br><span class="line">    y_pos = arg_y.getShort(arg_y_ptr)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> invertY:</span><br><span class="line">        y_pos = view.portHeight() - y_pos</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (x_pos, y_pos)</span><br></pre></td></tr></table></figure><p><a href="https://github.com/wiremas/spore/blob/b1ec511017cc9ba05d9034321369e5e404550232/scripts/utils/window_utils.py#L30">spore å‚è€ƒ</a></p><h2 id="åŸºäº-draggerContext-ç¬”åˆ·"><a href="#åŸºäº-draggerContext-ç¬”åˆ·" class="headerlink" title="åŸºäº draggerContext ç¬”åˆ·"></a>åŸºäº draggerContext ç¬”åˆ·</h2><p><a href="https://www.highend3d.com/maya/script/curve-paint-and-tweak-tool-for-maya#google_vignette">Curve paint and tweak tool</a></p><video src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/ysv.mp4" autoplay="autoplay" loop="loop" style="width: 100%; height:100%;"></video><blockquote><p>&emsp;&emsp;æœ€ååœ¨ <a href="https://www.highend3d.com/maya/script/curve-paint-and-tweak-tool-for-maya#google_vignette">highend3d</a> é‡Œé¢ä¹Ÿæ‰¾åˆ°äº†ä¸€ä¸ªç›´æ¥ tweak CV ç‚¹çš„æ–¹æ¡ˆã€‚<br>&emsp;&emsp;è¿™ä¸ªæ–¹æ¡ˆé‡‡ç”¨ <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/draggerContext.html">draggerContext</a> å®ç°<br>&emsp;&emsp;<a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/draggerContext.html">draggerContext</a> çš„æ¡ˆä¾‹å°±å¯ä»¥å®ç°åœ¨ viewport æ‹–æ‹½çš„æ—¶å€™å®ç°å›è°ƒã€‚<br>&emsp;&emsp;<code>highend3d</code> çš„ ysd æ›²çº¿å·¥å…·é›†è¿˜ç»“åˆè½¯é€‰æ‹©çš„èŒƒå›´ä½œä¸ºç¬”åˆ·ç§»åŠ¨çš„èŒƒå›´å‚æ•°ï¼Œè¿™æ˜¯éå¸¸èªæ˜çš„åšæ³•ã€‚<br>&emsp;&emsp;ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹å¼å®ç°æ‹–æ‹½ç”Ÿæˆä¸€æ¡æ›²çº¿ã€‚<br>&emsp;&emsp;ç»“åˆ OpenMaya API å¯ä»¥åšæ›´å¤šçš„äº‹æƒ…ï¼Œæ¯”å¦‚æ•£å¸ƒç‰©ä½“ç­‰ç­‰ï¼Œç”¨è¿™ä¸ªçš„æ–¹æ¡ˆæ¯”èµ· ä»é›¶æ„å»ºä¸€ä¸ª <a href="https://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__cpp_ref_class_m_px_context_html">MPxContext</a> è¦ç®€å•è®¸å¤šã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ç»˜åˆ¶åŠŸèƒ½è¿˜æ˜¯æ— æ³•é€šè¿‡ <a href="https://help.autodesk.com/cloudhelp/2018/ENU/Maya-Tech-Docs/CommandsPython/draggerContext.html">draggerContext</a> è§£å†³ï¼Œä¸è¿‡å¯ä»¥ç”¨ä¸Šé¢ Qt Overlay æ–¹æ¡ˆæ¥è§£å†³ã€‚</p></blockquote><h3 id="ysv-å·¥å…·ä¼˜åŒ–"><a href="#ysv-å·¥å…·ä¼˜åŒ–" class="headerlink" title="ysv å·¥å…·ä¼˜åŒ–"></a>ysv å·¥å…·ä¼˜åŒ–</h3><blockquote><p>&emsp;&emsp;ä» <code>highend3d</code> ä¸‹è½½çš„ ysv æ›²çº¿å·¥å…·å¯ä»¥ç”¨ï¼Œä½†æ˜¯æœ‰å‡ ä¸ªé—®é¢˜</p><ol><li>ç›´æ¥è°ƒç”¨ PySide å¯¼è‡´ä¸å…¼å®¹</li><li>æ²¡æœ‰åš Python3 å…¼å®¹</li><li>éƒ¨åˆ†ä»£ç åœ¨æ–°ç‰ˆæœ¬ä»£ç ä¸‹è¿è¡Œæœ‰ BUG</li></ol></blockquote><h4 id="PySide-å…¼å®¹"><a href="#PySide-å…¼å®¹" class="headerlink" title="PySide å…¼å®¹"></a>PySide å…¼å®¹</h4><blockquote><p>&emsp;&emsp;å°† PySide çš„å¯¼å…¥è½¬æˆ Qt.py çš„å¯¼å…¥<br>&emsp;&emsp;Qt.py åº“çš„å¼•å…¥åˆ™æ˜¯é‡‡ç”¨ submodule çš„æ–¹å¼æ”¾åˆ° scripts ç›®å½•ä¸‹ã€‚</p></blockquote><h4 id="Python3-å…¼å®¹"><a href="#Python3-å…¼å®¹" class="headerlink" title="Python3 å…¼å®¹"></a>Python3 å…¼å®¹</h4><blockquote><p>&emsp;&emsp;Python3 å…¼å®¹ä½¿ç”¨ Pythonå†…ç½®çš„ lib2to3 åº“è¿›è¡Œè½¬æ¢ <a href="https://cainiaojiaocheng.com/Python/docs/3.8/library/2to3">å‚è€ƒé“¾æ¥</a></p></blockquote><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mayapy -m lib2to3 -w F:\repo\Maya-CurveBrush\scripts\ysv\ysvView.py</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡è¿™ä¸ªæ–¹å¼å°±å¯ä»¥è‡ªåŠ¨å°†æ‰€æœ‰çš„ print æ‹¬å·åŠ ä¸Šç­‰æ“ä½œã€‚çœå»ç¹ççš„äººå·¥æ“ä½œã€‚<br>&emsp;&emsp;æˆ‘å½“æ—¶æ˜¯å†™äº†ä¸€ä¸ªè„šæœ¬ï¼Œæ‰¹é‡æ‰§è¡Œï¼Œæ‰§è¡Œå®Œä¹‹åè°ƒç”¨ black å’Œ isort é£æ ¼åŒ–ä»£ç ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ç”Ÿæˆå®Œä¹‹åä¼šå°†ä¹‹å‰çš„æ–‡ä»¶åŠ ä¸Š <code>.bak</code> åç¼€ï¼Œå¦‚æœæ²¡æœ‰é—®é¢˜å°±å¯ä»¥æŠŠ bak åˆ é™¤ã€‚</p></blockquote><h4 id="BUG-ä¿®å¤"><a href="#BUG-ä¿®å¤" class="headerlink" title="BUG ä¿®å¤"></a>BUG ä¿®å¤</h4><blockquote><p>&emsp;&emsp;åŸä»£ç è·å–å½“å‰æ‘„åƒæœºæ˜¯é€šè¿‡ä¸‹é¢çš„æ–¹å¼</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pymel.core <span class="keyword">import</span> *</span><br><span class="line">modelEditor(getPanel(wf=<span class="number">1</span>), e=<span class="number">1</span>, nurbsCurves=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä½†æ˜¯å¦‚æœå½“å‰ focus çš„ panel ä¸æ˜¯ modelEditor å°±é­æ®ƒäº†ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pymel.core <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">for</span> mp <span class="keyword">in</span> getPanel(<span class="built_in">type</span>=<span class="string">&quot;modelPanel&quot;</span>):</span><br><span class="line">    <span class="keyword">if</span> modelEditor(mp, q=<span class="number">1</span>, av=<span class="number">1</span>):</span><br><span class="line">        modelEditor(mp, e=<span class="number">1</span>, nurbsCurves=<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ‰€ä»¥æˆ‘æŠŠä»£ç æ”¹æˆä¸Šé¢çš„æ•ˆæœã€‚</p></blockquote><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> crv <span class="keyword">in</span> self.inViewCurves:</span><br><span class="line">    <span class="keyword">for</span> cv <span class="keyword">in</span> [crv.cv[<span class="number">0</span>], crv.cv[-<span class="number">1</span>]]:</span><br><span class="line">        cv = <span class="built_in">str</span>(cv) <span class="comment"># fix add here</span></span><br><span class="line">        setAttr(cv + <span class="string">&quot;.xv&quot;</span>, lock=<span class="number">1</span>)</span><br><span class="line">        setAttr(cv + <span class="string">&quot;.yv&quot;</span>, lock=<span class="number">1</span>)</span><br><span class="line">        setAttr(cv + <span class="string">&quot;.zv&quot;</span>, lock=<span class="number">1</span>)</span><br><span class="line">        </span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ç”¨ pymel è·å– cv ç‚¹ä¹‹åï¼Œç›´æ¥å°† <code>NurbsCurveCV</code> ä¸å­—ç¬¦ä¸²ç›¸åŠ <br>&emsp;&emsp;ä½†æ˜¯ <code>NurbsCurveCV</code> æœ‰è‡ªå·±çš„ç›¸åŠ é€»è¾‘ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦åŠ ä¸Šå­—ç¬¦ä¸²è½¬æ¢å¯ä»¥ä¿®å¤ BUGã€‚</p></blockquote><h2 id="artisan-ç¬”åˆ·"><a href="#artisan-ç¬”åˆ·" class="headerlink" title="artisan ç¬”åˆ·"></a>artisan ç¬”åˆ·</h2><blockquote><p>&emsp;&emsp;<a href="./77ed9d8.html">Maya æ ¹æ®è´´å›¾åœ¨æ¨¡å‹è¡¨é¢æ•£åˆ—ç‰©ä½“</a> ä»¥å‰ä¹Ÿå†™è¿‡æ•£åˆ—ç‰©ä½“çš„æ–‡ç« ï¼Œä¸è¿‡å®ç°æ–¹å¼æ˜¯éç¬”åˆ·çš„ã€‚<br>&emsp;&emsp;åˆ©ç”¨ artisan å°±å¯ä»¥å®ç°ç¬”åˆ·çš„æ–¹å¼æ•£å¸ƒç‰©ä½“äº†ã€‚</p></blockquote><p>å®˜æ–¹æ–‡æ¡£: <a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=GUID-72D60883-07A4-4536-AE72-226A2AD0845E">Overview of MEL script painting</a></p><blockquote><p>&emsp;&emsp;å®˜æ–¹æåˆ°æœ‰ <code>spherePaint</code> <code>geometryPaint</code> <code>emitterPaint</code> å‡ ä¸ªæ¡ˆä¾‹ã€‚<br>&emsp;&emsp;å…·ä½“çš„ä»£ç å¯ä»¥åœ¨ mel è„šæœ¬åº“é‡Œé¢æ‰¾åˆ° eg: <code>C:\Program Files\Autodesk\Maya2018\scripts\others\spherePaint.mel</code><br>&emsp;&emsp;ä»æœ€ç®€å•çš„ <code>spherePaint</code> ä»‹ç»</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/d0c515791bd2c9e96e5347e4cb3865dc.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;åœ¨ <code>Modify</code> é¡µé¢ä¸‹æ‰¾åˆ° <code>Paint Scripts Tool</code> å·¥å…·<br>&emsp;&emsp;æ‰“å¼€å·¥å…·å±æ€§é¢æ¿ï¼Œåœ¨ <code>Setup</code> æ ‡ç­¾é¡µçš„ <code>Tool setup cmd</code> è¾“å…¥ <code>spherePaint</code> å°±å¯ä»¥æ¿€æ´»ç¬”åˆ·</p></blockquote><video src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/cacaf61d/spherePaint.mp4" autoplay="autoplay" loop="loop" style="width: 100%; height:100%;"></video><blockquote><p>&emsp;&emsp;æ¿€æ´»å·¥å…·ä¹‹åå°±å¯ä»¥æ¨¡å‹ä¸Šåˆ· Sphere</p></blockquote><hr><blockquote><p>&emsp;&emsp;åªå¯æƒœ artisan ç¬”åˆ·å®ƒä¸å“åº” <code>NurbsCurve</code> ï¼Œåªæ”¯æŒ meshã€‚<br>&emsp;&emsp;æ‰€ä»¥æ— æ³•å®ç°ä¸Šé¢æ¢è®¨çš„ æ›²çº¿ç¬”åˆ· çš„åŠŸèƒ½ã€‚<br>&emsp;&emsp;artisan æ–¹æ¡ˆæ›´é€‚åˆé¢œè‰²ç»˜åˆ¶æˆ–è€…æ˜¯ç‰©ä½“æ•£å¸ƒã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;ä»¥ä¸Šå°±æ˜¯æˆ‘å‘ç°çš„ Maya ç¬”åˆ·çš„å¤šç§ä½¿ç”¨å§¿åŠ¿ã€‚<br>&emsp;&emsp;åé¢æœ‰æœºä¼šå¯ä»¥å†æ¢è®¨ä¸€ä¸‹ artisan ç¬”åˆ·çš„å…³äºé¡¶ç‚¹è‰²ç¼–è¾‘ç›¸å…³çš„å†…å®¹ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      Maya ç¬”åˆ·å¼€å‘çš„å„ç§å§¿åŠ¿æ±‡æ€»
    
    </summary>
    
      <category term="CG" scheme="https://blog.l0v0.com/categories/CG/"/>
    
      <category term="Maya" scheme="https://blog.l0v0.com/categories/CG/Maya/"/>
    
      <category term="C++" scheme="https://blog.l0v0.com/categories/CG/Maya/C/"/>
    
    
      <category term="à €Maya" scheme="https://blog.l0v0.com/tags/%E0%A0%80Maya/"/>
    
      <category term="à ‡Cpp" scheme="https://blog.l0v0.com/tags/%E0%A0%87Cpp/"/>
    
  </entry>
  
  <entry>
    <title>Unreal C++ å·¥å…·å¼€å‘æœ€å°å®è·µ</title>
    <link href="https://blog.l0v0.com/posts/cab0d099.html"/>
    <id>https://blog.l0v0.com/posts/cab0d099.html</id>
    <published>2022-07-15T08:00:58.000Z</published>
    <updated>2022-11-09T02:37:04.728Z</updated>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;Unreal çš„å­¦ä¹ æµ©ç€šä¸”åšæ‚ï¼Œæœ‰æ—¶å€™ä¸€ä¸ªæœ€å° Demo å°±æ˜¯å¾ˆå¥½çš„å­¦ä¹ èµ·ç‚¹ã€‚<br>&emsp;&emsp;æƒ³èµ·æˆ‘ä»¥å‰ç¿»é˜… UE çš„æºç ä¸€å¤§å †çš„æ–‡ä»¶ï¼Œçœ‹å¾—æˆ‘æ˜¯æ— æ¯”å¤´ç–¼ã€‚<br>&emsp;&emsp;å¶ç„¶é—´å‘ç° CSDN YakSue å†™äº†å¥½å¤šç¯‡ Unreal å·¥å…·å¼€å‘çš„ ä»‹ç»ã€‚<br>&emsp;&emsp;è™½ç„¶æ²¡æœ‰é…ä¸Š Github é“¾æ¥ï¼Œä½†æ˜¯æºç éƒ½åœ¨æ–‡ç« é‡Œé¢ä½“ç°äº†ã€‚<br>&emsp;&emsp;å¯¹äºå·¥å…·å¼€å‘çš„ä¸åŒæ¨¡å—éƒ½å¤§æœ‰è£¨ç›Šã€‚<br>&emsp;&emsp;äºæ˜¯æˆ‘å°†è¿™äº›å†…å®¹æ•´åˆåˆ°ä¸€èµ·ï¼Œå¹¶ä¸”è¯¦ç»†è®²è§£å…¶ä¸­å®ç°çš„æ ¸å¿ƒç‚¹ã€‚</p></blockquote><h2 id="Custom-Asset"><a href="#Custom-Asset" class="headerlink" title="Custom Asset"></a>Custom Asset</h2><p><a href="https://yaksue.blog.csdn.net/article/details/107646900">https://yaksue.blog.csdn.net/article/details/107646900</a><br><a href="https://github.com/FXTD-ODYSSEY/Unreal-Playground/tree/main/Plugins/Yaksue/TestAssetEditorPlg">https://github.com/FXTD-ODYSSEY/Unreal-Playground/tree/main/Plugins/Yaksue/TestAssetEditorPlg</a></p><blockquote><p>&emsp;&emsp;åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ Asset éœ€è¦æœ‰ä¸‰ä¸ªç±»</p><ol><li>Asset (UObject)</li><li>AssetFactory (UFactory)</li><li>AssetTypeActions (FAssetTypeActions_Base)</li></ol></blockquote><blockquote><p>&emsp;&emsp;Asset æè¿°å¯¹è±¡æœ¬èº«çš„æ•°æ®<br>&emsp;&emsp;AssetFactory æè¿°å¦‚ä½•åˆ›å»ºå¯¹è±¡<br>&emsp;&emsp;AssetTypeActions è¿”å›å¯¹è±¡æ˜¾ç¤ºçš„ä¿¡æ¯</p></blockquote><blockquote><p>&emsp;&emsp;<code>AssetTypeActions</code> åŒ…å«æ–¹æ³• <code>GetName</code> <code>GetTypeColor</code> <code>GetSupportedClass</code> <code>GetCategories</code> ç”¨æ¥æè¿°å¯¹åº”çš„ä¿¡æ¯ã€‚<br>&emsp;&emsp;<code>GetCategories</code> ä¼šåˆ†é… Asset æ‰€å±çš„ä½ç½®ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;è¿™ä¸ªæ–¹å¼é»˜è®¤æ‰“å¼€çš„çª—å£æ˜¯ Details Panel.<br>&emsp;&emsp;å¦‚æœæƒ³è¦è‡ªå®šä¹‰æ‰“å¼€çš„çª—å£éœ€è¦æ·»åŠ  <code>FAssetEditorToolkit</code> ç±»<br>&emsp;&emsp;<code>AssetTypeActions</code> æ·»åŠ  <code>OpenAssetEditor</code> æ–¹æ³•å°† Toolkit ç”Ÿæˆå¹¶åˆå§‹åŒ–ã€‚</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">FAssetEditorToolkit</span><br><span class="line">  GetToolkitFName</span><br><span class="line">  GetBaseToolkitName</span><br><span class="line">  GetWorldCentricTabPrefix</span><br><span class="line">  GetWorldCentricTabColorScale</span><br><span class="line">  Initialize</span><br><span class="line">  RegisterTabSpawners</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;<code>RegisterTabSpawners</code> é€šè¿‡è¿™ä¸ªæ–¹æ³•æ³¨å†Œç”Ÿäº§ Tab çš„ ID<br>&emsp;&emsp;åç»­é€šè¿‡ <code>Initialize</code> æ–¹æ³•è°ƒç”¨ AddTab å°† Register çš„ Tab ç”Ÿæˆã€‚<br>&emsp;&emsp;æœ€åé€šè¿‡ <code>FAssetEditorToolkit::InitAssetEditor</code> å®Œæˆ Toolkit çš„åˆå§‹åŒ–</p></blockquote><hr><blockquote><p>&emsp;&emsp;å¦‚æœä¸æƒ³å°† Asset æ”¾åˆ° <code>EAssetTypeCategories::Misc</code> çš„åˆ†ç±»ä¸­ã€‚<br>&emsp;&emsp;ä¹Ÿå¯ä»¥æ„å»ºä¸€ä¸ªæ–°çš„æ ‡ç­¾é™„ä¸Šå»ã€‚<br>&emsp;&emsp;åªæ˜¯éœ€è¦å°† factory ç›¸å…³çš„ <code>GetMenuCategories</code> æ”¾å…¥å»æ‰ã€‚<br>&emsp;&emsp;æˆ‘ä¹‹å‰æ²¡æœ‰å»æ‰ï¼Œä¸€ç›´å¾ˆç–‘æƒ‘ä¸ºå•¥è‡ªå®šä¹‰èœå•æ²¡æœ‰ç”Ÿæ•ˆã€‚</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">FYaksueTestAssetTypeActions::<span class="built_in">FYaksueTestAssetTypeActions</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// <span class="doctag">NOTE:</span> æ³¨å†Œæ–°çš„åˆ†ç±»</span></span><br><span class="line">IAssetTools &amp;AssetTools = FModuleManager::<span class="built_in">LoadModuleChecked</span>&lt;FAssetToolsModule&gt;(<span class="string">&quot;AssetTools&quot;</span>).<span class="built_in">Get</span>();</span><br><span class="line">    AssetCategory = AssetTools.<span class="built_in">RegisterAdvancedAssetCategory</span>(<span class="built_in">FName</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;Custom Assets&quot;</span>)), <span class="built_in">LOCTEXT</span>(<span class="string">&quot;CustomAssetCategory&quot;</span>, <span class="string">&quot;Custom Assets&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">uint32 <span class="title">FYaksueTestAssetTypeActions::GetCategories</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> AssetCategory;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ„é€ å‡½æ•°æ³¨å†Œæ–°çš„åˆ†ç±»ï¼Œå¤´æ–‡ä»¶éœ€è¦æ·»åŠ ä¸Šå®šä¹‰ <code>FYaksueTestAssetTypeActions();</code> <code>EAssetTypeCategories::Type AssetCategory;</code></p></blockquote><h2 id="Custom-Filter"><a href="#Custom-Filter" class="headerlink" title="Custom Filter"></a>Custom Filter</h2><p><a href="https://yaksue.blog.csdn.net/article/details/120929455">https://yaksue.blog.csdn.net/article/details/120929455</a><br><a href="https://github.com/FXTD-ODYSSEY/Unreal-Playground/tree/main/Plugins/Yaksue/TestCustomFilter">https://github.com/FXTD-ODYSSEY/Unreal-Playground/tree/main/Plugins/Yaksue/TestCustomFilter</a></p><blockquote><p>&emsp;&emsp;ç»§æ‰¿ <code>UContentBrowserFrontEndFilterExtension</code> å¯ä»¥é€šè¿‡ override <code>AddFrontEndFilterExtensions</code> æ–¹æ³•æ‰©å±• filterã€‚<br>&emsp;&emsp;ç”Ÿæˆä¸€ä¸ª <code>FFrontendFilter</code> å­ç±»ï¼Œç„¶åé€šè¿‡ <code>AddFrontEndFilterExtensions</code> å°†è¿‡æ»¤å¯¹è±¡æ·»åŠ åˆ°è¿‡æ»¤åˆ—è¡¨é‡Œé¢ã€‚<br>&emsp;&emsp;<code>FFrontendFilter</code> æœ€æ ¸å¿ƒçš„æ–¹æ³•å°±æ˜¯ <code>PassesFilter</code> å®ƒä¼šå°†æ¯ä¸ª item ä¼ åˆ°è¿™ä¸ªå‡½æ•°è¿”å› bool æ¥å†³å®šæ˜¯å¦æ˜¾ç¤ºã€‚</p></blockquote><!-- TODO PassesFilter item wrong --><h2 id="Slate"><a href="#Slate" class="headerlink" title="Slate"></a>Slate</h2><p><a href="https://yaksue.blog.csdn.net/article/details/110084013">https://yaksue.blog.csdn.net/article/details/110084013</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Put your tab content here!</span></span><br><span class="line"><span class="built_in">SNew</span>(SOverlay)</span><br><span class="line">+ SOverlay::<span class="built_in">Slot</span>()<span class="comment">//åº•å±‚</span></span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SHorizontalBox)</span><br><span class="line">+ SHorizontalBox::<span class="built_in">Slot</span>().<span class="built_in">FillWidth</span>(<span class="number">0.3f</span>)<span class="comment">//å 30%</span></span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SButton)<span class="number">1</span></span><br><span class="line">]</span><br><span class="line">+ SHorizontalBox::<span class="built_in">Slot</span>().<span class="built_in">FillWidth</span>(<span class="number">0.7f</span>)<span class="comment">//å 70%</span></span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SVerticalBox)</span><br><span class="line">+ SVerticalBox::<span class="built_in">Slot</span>().<span class="built_in">FillHeight</span>(<span class="number">0.5f</span>)<span class="comment">//å 50%</span></span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SButton)</span><br><span class="line">]</span><br><span class="line">+ SVerticalBox::<span class="built_in">Slot</span>().<span class="built_in">FillHeight</span>(<span class="number">0.5f</span>)<span class="comment">//å 50%</span></span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SButton)</span><br><span class="line">]</span><br><span class="line">]</span><br><span class="line">]</span><br><span class="line">+ SOverlay::<span class="built_in">Slot</span>()<span class="comment">//é¡¶å±‚</span></span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SHorizontalBox)</span><br><span class="line">+ SHorizontalBox::<span class="built_in">Slot</span>().<span class="built_in">FillWidth</span>(<span class="number">1.0f</span>)<span class="comment">//å æ»¡å‰©ä½™ç©ºé—´</span></span><br><span class="line">+ SHorizontalBox::<span class="built_in">Slot</span>().<span class="built_in">AutoWidth</span>()</span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SVerticalBox)</span><br><span class="line">+ SVerticalBox::<span class="built_in">Slot</span>().<span class="built_in">FillHeight</span>(<span class="number">1.0f</span>)<span class="comment">//å æ»¡å‰©ä½™ç©ºé—´</span></span><br><span class="line">+ SVerticalBox::<span class="built_in">Slot</span>().<span class="built_in">AutoHeight</span>()</span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SBox)</span><br><span class="line">.<span class="built_in">HeightOverride</span>(<span class="number">128</span>)</span><br><span class="line">.<span class="built_in">WidthOverride</span>(<span class="number">128</span>)</span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SButton)</span><br><span class="line">]</span><br><span class="line">]</span><br><span class="line">+ SVerticalBox::<span class="built_in">Slot</span>().<span class="built_in">FillHeight</span>(<span class="number">1.0f</span>)<span class="comment">//å æ»¡å‰©ä½™ç©ºé—´</span></span><br><span class="line">]</span><br><span class="line">+ SHorizontalBox::<span class="built_in">Slot</span>().<span class="built_in">FillWidth</span>(<span class="number">1.0f</span>)<span class="comment">//å æ»¡å‰©ä½™ç©ºé—´</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä½¿ç”¨ Unreal Slate æ„å»ºçª—å£ï¼Œé€šè¿‡ä»£ç çš„å±æ€§ç»“æ„æ¥æè¿° UI çš„æ„æˆå’Œé…ç½®ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20201124215104568.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM0MTIzOTE=,size_16,color_FFFFFF,t_70#pic_center" alt="alt"></p><h2 id="DockTab-Layout"><a href="#DockTab-Layout" class="headerlink" title="DockTab Layout"></a>DockTab Layout</h2><p><a href="https://yaksue.blog.csdn.net/article/details/109321869">https://yaksue.blog.csdn.net/article/details/109321869</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">FTestLayoutWindowModule::StartupModule</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// This code will execute after your module is loaded into memory; the exact timing is specified in the .uplugin file per-module</span></span><br><span class="line"></span><br><span class="line">FTestLayoutWindowStyle::<span class="built_in">Initialize</span>();</span><br><span class="line">FTestLayoutWindowStyle::<span class="built_in">ReloadTextures</span>();</span><br><span class="line"></span><br><span class="line">FTestLayoutWindowCommands::<span class="built_in">Register</span>();</span><br><span class="line"></span><br><span class="line">PluginCommands = <span class="built_in">MakeShareable</span>(<span class="keyword">new</span> FUICommandList);</span><br><span class="line"></span><br><span class="line">PluginCommands-&gt;<span class="built_in">MapAction</span>(</span><br><span class="line">FTestLayoutWindowCommands::<span class="built_in">Get</span>().OpenLayoutWindow,</span><br><span class="line">FExecuteAction::<span class="built_in">CreateRaw</span>(<span class="keyword">this</span>, &amp;FTestLayoutWindowModule::PluginButtonClicked),</span><br><span class="line"><span class="built_in">FCanExecuteAction</span>());</span><br><span class="line"></span><br><span class="line">FLevelEditorModule&amp; LevelEditorModule = FModuleManager::<span class="built_in">LoadModuleChecked</span>&lt;FLevelEditorModule&gt;(<span class="string">&quot;LevelEditor&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">TSharedPtr&lt;FExtender&gt; MenuExtender = <span class="built_in">MakeShareable</span>(<span class="keyword">new</span> <span class="built_in">FExtender</span>());</span><br><span class="line">MenuExtender-&gt;<span class="built_in">AddMenuExtension</span>(<span class="string">&quot;WindowLayout&quot;</span>, EExtensionHook::After, PluginCommands, FMenuExtensionDelegate::<span class="built_in">CreateRaw</span>(<span class="keyword">this</span>, &amp;FTestLayoutWindowModule::AddMenuExtension));</span><br><span class="line"></span><br><span class="line">LevelEditorModule.<span class="built_in">GetMenuExtensibilityManager</span>()-&gt;<span class="built_in">AddExtender</span>(MenuExtender);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">TSharedPtr&lt;FExtender&gt; ToolbarExtender = <span class="built_in">MakeShareable</span>(<span class="keyword">new</span> FExtender);</span><br><span class="line">ToolbarExtender-&gt;<span class="built_in">AddToolBarExtension</span>(<span class="string">&quot;Settings&quot;</span>, EExtensionHook::After, PluginCommands, FToolBarExtensionDelegate::<span class="built_in">CreateRaw</span>(<span class="keyword">this</span>, &amp;FTestLayoutWindowModule::AddToolbarExtension));</span><br><span class="line"></span><br><span class="line">LevelEditorModule.<span class="built_in">GetToolBarExtensibilityManager</span>()-&gt;<span class="built_in">AddExtender</span>(ToolbarExtender);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">FGlobalTabmanager::<span class="built_in">Get</span>()-&gt;<span class="built_in">RegisterNomadTabSpawner</span>(TestLayoutWindowTabName, FOnSpawnTab::<span class="built_in">CreateRaw</span>(<span class="keyword">this</span>, &amp;FTestLayoutWindowModule::OnSpawnPluginTab))</span><br><span class="line">.<span class="built_in">SetDisplayName</span>(<span class="built_in">LOCTEXT</span>(<span class="string">&quot;FTestLayoutWindowTabTitle&quot;</span>, <span class="string">&quot;TestLayoutWindow&quot;</span>))</span><br><span class="line">.<span class="built_in">SetMenuType</span>(ETabSpawnerMenuType::Hidden);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ! InnerTabçš„å†…å®¹ï¼š</span></span><br><span class="line">FGlobalTabmanager::<span class="built_in">Get</span>()-&gt;<span class="built_in">RegisterNomadTabSpawner</span>(InnerTabName, FOnSpawnTab::<span class="built_in">CreateLambda</span>([](<span class="type">const</span> FSpawnTabArgs&amp; SpawnTabArgs)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line"><span class="built_in">SNew</span>(SDockTab)</span><br><span class="line">.<span class="built_in">TabRole</span>(ETabRole::NomadTab)</span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(STextBlock)</span><br><span class="line">.<span class="built_in">Text</span>(FText::<span class="built_in">FromString</span>(<span class="string">&quot;InnerTab&quot;</span>))</span><br><span class="line">];</span><br><span class="line">&#125;))</span><br><span class="line">.<span class="built_in">SetDisplayName</span>(<span class="built_in">LOCTEXT</span>(<span class="string">&quot;InnerTab&quot;</span>, <span class="string">&quot;InnerTab&quot;</span>))</span><br><span class="line">.<span class="built_in">SetMenuType</span>(ETabSpawnerMenuType::Hidden);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ! InnerTab2çš„å†…å®¹ï¼š</span></span><br><span class="line">FGlobalTabmanager::<span class="built_in">Get</span>()-&gt;<span class="built_in">RegisterNomadTabSpawner</span>(InnerTabName2, FOnSpawnTab::<span class="built_in">CreateLambda</span>([](<span class="type">const</span> FSpawnTabArgs&amp; SpawnTabArgs)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line"><span class="built_in">SNew</span>(SDockTab)</span><br><span class="line">.<span class="built_in">TabRole</span>(ETabRole::NomadTab)</span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(STextBlock)</span><br><span class="line">.<span class="built_in">Text</span>(FText::<span class="built_in">FromString</span>(<span class="string">&quot;InnerTab2&quot;</span>))</span><br><span class="line">];</span><br><span class="line">&#125;))</span><br><span class="line">.<span class="built_in">SetDisplayName</span>(<span class="built_in">LOCTEXT</span>(<span class="string">&quot;InnerTab2&quot;</span>, <span class="string">&quot;InnerTab2&quot;</span>))</span><br><span class="line">.<span class="built_in">SetMenuType</span>(ETabSpawnerMenuType::Hidden);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ ¸å¿ƒå¤„ç†æ˜¯åœ¨æ’ä»¶åŠ è½½çš„æ—¶å€™ <code>StartupModule</code> è°ƒç”¨ <code>RegisterNomadTabSpawner</code> æ³¨å†Œ Tab</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">FTestLayoutWindowModule::PluginButtonClicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">FGlobalTabmanager::<span class="built_in">Get</span>()-&gt;<span class="built_in">InvokeTab</span>(TestLayoutWindowTabName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ç‚¹å‡» GUI ä¼šè§¦å‘ Tab ç”Ÿæˆï¼Œè°ƒç”¨ <code>OnSpawnPluginTab</code> æ–¹æ³•</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">TSharedRef&lt;SDockTab&gt; <span class="title">FTestLayoutWindowModule::OnSpawnPluginTab</span><span class="params">(<span class="type">const</span> FSpawnTabArgs&amp; SpawnTabArgs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//åŸæ¥çš„åˆ†é¡µï¼š</span></span><br><span class="line"><span class="type">const</span> TSharedRef&lt;SDockTab&gt; NomadTab = <span class="built_in">SNew</span>(SDockTab)</span><br><span class="line">.<span class="built_in">TabRole</span>(ETabRole::NomadTab);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºTabManager</span></span><br><span class="line"><span class="keyword">if</span> (!TabManager.<span class="built_in">IsValid</span>())</span><br><span class="line">&#123;</span><br><span class="line">TabManager = FGlobalTabmanager::<span class="built_in">Get</span>()-&gt;<span class="built_in">NewTabManager</span>(NomadTab);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºå¸ƒå±€ï¼š</span></span><br><span class="line"><span class="keyword">if</span> (!TabManagerLayout.<span class="built_in">IsValid</span>())</span><br><span class="line">&#123;</span><br><span class="line">TabManagerLayout = FTabManager::<span class="built_in">NewLayout</span>(<span class="string">&quot;TestLayoutWindow&quot;</span>)</span><br><span class="line">-&gt;<span class="built_in">AddArea</span></span><br><span class="line">(</span><br><span class="line">FTabManager::<span class="built_in">NewPrimaryArea</span>()</span><br><span class="line">-&gt;<span class="built_in">SetOrientation</span>(Orient_Vertical)</span><br><span class="line">-&gt;<span class="built_in">Split</span></span><br><span class="line">(</span><br><span class="line">FTabManager::<span class="built_in">NewStack</span>()</span><br><span class="line">-&gt;<span class="built_in">SetSizeCoefficient</span>(<span class="number">.4</span>f)</span><br><span class="line">-&gt;<span class="built_in">AddTab</span>(InnerTabName, ETabState::OpenedTab)</span><br><span class="line">)</span><br><span class="line">-&gt;<span class="built_in">Split</span></span><br><span class="line">(</span><br><span class="line">FTabManager::<span class="built_in">NewStack</span>()</span><br><span class="line">-&gt;<span class="built_in">SetSizeCoefficient</span>(<span class="number">.4</span>f)</span><br><span class="line">-&gt;<span class="built_in">AddTab</span>(InnerTabName2, ETabState::OpenedTab)</span><br><span class="line">)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»å¸ƒå±€ä¸­æ¢å¤å¾—åˆ°æ§ä»¶</span></span><br><span class="line">TSharedRef&lt;SWidget&gt; TabContents = TabManager-&gt;<span class="built_in">RestoreFrom</span>(TabManagerLayout.<span class="built_in">ToSharedRef</span>(), <span class="built_in">TSharedPtr</span>&lt;SWindow&gt;()).<span class="built_in">ToSharedRef</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®å†…å®¹æ§ä»¶</span></span><br><span class="line">NomadTab-&gt;<span class="built_in">SetContent</span>(</span><br><span class="line">TabContents</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> NomadTab;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è¿™é‡Œå°†ä¹‹å‰æ³¨å†Œçš„ Tab å”¤èµ·ã€‚</p></blockquote><h2 id="Viewport"><a href="#Viewport" class="headerlink" title="Viewport"></a>Viewport</h2><p><a href="https://yaksue.blog.csdn.net/article/details/109258860">https://yaksue.blog.csdn.net/article/details/109258860</a></p><blockquote><p>&emsp;&emsp;å¼•å…¥é»˜è®¤çš„ <code>SEditorViewport</code> ç±»<br>&emsp;&emsp;ç„¶å override æ–¹æ³• <code>MakeEditorViewportClient</code></p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">TSharedRef&lt;FEditorViewportClient&gt; <span class="title">STestLevelEditorViewport::MakeEditorViewportClient</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">TSharedPtr&lt;FEditorViewportClient&gt; EditorViewportClient = <span class="built_in">MakeShareable</span>(<span class="keyword">new</span> <span class="built_in">FEditorViewportClient</span>(<span class="literal">nullptr</span>));</span><br><span class="line"><span class="keyword">return</span> EditorViewportClient.<span class="built_in">ToSharedRef</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ç„¶åSlate ä»£ç ç›´æ¥ä½¿ç”¨ <code>SNew(STestLevelEditorViewport)</code> åˆå§‹åŒ–ç•Œé¢å³å¯ã€‚<br>&emsp;&emsp;ä¸è¿‡è¿™ä¸ªæ–¹å¼æ²¿ç”¨äº† Viewport ï¼Œå¦‚ä½•æ„å»ºä¸€ä¸ªè‡ªå®šä¹‰ Viewport å‘¢ï¼Ÿ</p></blockquote><hr><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">TSharedRef&lt;FEditorViewportClient&gt; <span class="title">STestEditorViewport::MakeEditorViewportClient</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">PreviewScene = <span class="built_in">MakeShareable</span>(<span class="keyword">new</span> <span class="built_in">FPreviewScene</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘é¢„è§ˆåœºæ™¯ä¸­åŠ ä¸€ä¸ªæµ‹è¯•æ¨¡å‹</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//è¯»å–æ¨¡å‹</span></span><br><span class="line">UStaticMesh* SM = <span class="built_in">LoadObject</span>&lt;UStaticMesh&gt;(<span class="literal">NULL</span>, <span class="built_in">TEXT</span>(<span class="string">&quot;StaticMesh&#x27;/Engine/EngineMeshes/Cube.Cube&#x27;&quot;</span>), <span class="literal">NULL</span>, LOAD_None, <span class="literal">NULL</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºç»„ä»¶</span></span><br><span class="line">UStaticMeshComponent* SMC = <span class="built_in">NewObject</span>&lt;UStaticMeshComponent&gt;();</span><br><span class="line">SMC-&gt;<span class="built_in">SetStaticMesh</span>(SM);</span><br><span class="line"><span class="comment">//å‘é¢„è§ˆåœºæ™¯ä¸­å¢åŠ ç»„ä»¶</span></span><br><span class="line">PreviewScene-&gt;<span class="built_in">AddComponent</span>(SMC, FTransform::Identity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">TSharedPtr&lt;FEditorViewportClient&gt; EditorViewportClient = <span class="built_in">MakeShareable</span>(<span class="keyword">new</span> <span class="built_in">FEditorViewportClient</span>(<span class="literal">nullptr</span>, PreviewScene.<span class="built_in">Get</span>()));</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> EditorViewportClient.<span class="built_in">ToSharedRef</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ–°å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ <code>FPreviewScene</code> ï¼Œå¯ä»¥å°†ç‰©ä½“å®ä¾‹åŒ–æ·»åŠ åˆ°åœºæ™¯å½“ä¸­ã€‚<br>&emsp;&emsp;å°† <code>PreviewScene</code> ä¼ å…¥åˆ°  <code>FEditorViewportClient</code> ä¸­ï¼Œè¿™æ · Viewport å°±æ˜¾ç¤ºç‹¬ç«‹çš„åœºæ™¯ã€‚</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">TSharedPtr&lt;SWidget&gt; <span class="title">STestEditorViewport::MakeViewportToolbar</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">SNew</span>(SCommonEditorViewportToolbarBase, <span class="built_in">SharedThis</span>(<span class="keyword">this</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä½¿ç”¨ä¸Šé¢çš„ä»£ç å¯ä»¥æ„å»ºå‡ºé»˜è®¤ Viewport çš„ Toolbarã€‚</p></blockquote><h2 id="GraphEditor"><a href="#GraphEditor" class="headerlink" title="GraphEditor"></a>GraphEditor</h2><p><a href="https://yaksue.blog.csdn.net/article/details/107945507">https://yaksue.blog.csdn.net/article/details/107945507</a><br><a href="https://yaksue.blog.csdn.net/article/details/108020797">https://yaksue.blog.csdn.net/article/details/108020797</a><br><a href="https://yaksue.blog.csdn.net/article/details/108227439">https://yaksue.blog.csdn.net/article/details/108227439</a><br><a href="https://yaksue.blog.csdn.net/article/details/109347063">https://yaksue.blog.csdn.net/article/details/109347063</a></p><h2 id="EditorMode"><a href="#EditorMode" class="headerlink" title="EditorMode"></a>EditorMode</h2><!-- TODO -->]]></content>
    
    <summary type="html">
    
      YakSue å·¥å…·å¼€å‘æ–‡ç« å­¦ä¹ 
    
    </summary>
    
      <category term="æ¸¸æˆå¼€å‘" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/"/>
    
      <category term="Unreal" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unreal/"/>
    
      <category term="C++" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unreal/C/"/>
    
    
      <category term="à ‡Cpp" scheme="https://blog.l0v0.com/tags/%E0%A0%87Cpp/"/>
    
      <category term="à ƒUnreal" scheme="https://blog.l0v0.com/tags/%E0%A0%83Unreal/"/>
    
  </entry>
  
  <entry>
    <title>Maya C++ pyd æ¨¡å—å¼€å‘</title>
    <link href="https://blog.l0v0.com/posts/ce449c32.html"/>
    <id>https://blog.l0v0.com/posts/ce449c32.html</id>
    <published>2022-07-14T02:52:30.000Z</published>
    <updated>2022-11-09T02:37:04.652Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä½œè€…: <a href="http://tw.l0v0.com/#%F0%9F%91%A8%E2%80%8D%F0%9F%92%BBsonictk">ğŸ‘¨â€ğŸ’»sonictk</a></p><p><a href="https://github.com/sonictk/maya_python_c_extension">https://github.com/sonictk/maya_python_c_extension</a></p><blockquote><p>&emsp;&emsp;è¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯å‚è€ƒ sonictk å¤§ä½¬çš„æä¾›çš„ pyd å¼€å‘æ–‡ç« ã€‚<br>&emsp;&emsp;æ–‡ç« ä¹Ÿæåˆ°ä¹‹å‰çš„ hot reload æ–¹æ¡ˆå·²ç»è§£å†³äº†å¾ˆå¤š C++ å¼€å‘å›°éš¾çš„é—®é¢˜ã€‚<br>&emsp;&emsp;ç„¶è€Œè¿˜æ˜¯æœ‰å¾ˆå¤šæƒ…å†µéœ€è¦å¼€å‘ä¸€ä¸ª python çš„ C++ æ¨¡å—å®ç° Maya C++ API çš„ è°ƒç”¨ã€‚<br>&emsp;&emsp;è¿™ä¸ªæƒ…å†µæœ‰ç‚¹åƒæ˜¯ Unreal æš´éœ² C++ API åˆ° Python ä¸€æ ·ã€‚</p></blockquote><p><a href="./1a24f2d2.html">Maya ç¼–è¯‘ c ç›¸å…³ Python åº“ &amp; pyd ç¼–è¯‘</a></p><blockquote><p>&emsp;&emsp;ä¹‹å‰æˆ‘ä¹Ÿå†™è¿‡å…³äº Maya pyd ç¼–è¯‘çš„æ–‡ç« ï¼Œä½†æ˜¯è¿™ä¸ªæ–‡ç« æ˜¯ç”¨ Cython è‡ªåŠ¨ç”Ÿæˆ C ä»£ç ç¼–è¯‘å®ç°çš„ï¼Œè¿™æ¬¡æ˜¯æ‰‹å†™ pydã€‚</p></blockquote><h2 id="ä»€ä¹ˆæ˜¯-pyd"><a href="#ä»€ä¹ˆæ˜¯-pyd" class="headerlink" title="ä»€ä¹ˆæ˜¯ pyd"></a>ä»€ä¹ˆæ˜¯ pyd</h2><blockquote><p>&emsp;&emsp;pyd æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ª dll æ–‡ä»¶ï¼Œå°±åƒ Maya æ’ä»¶çš„ mll ä¸€æ ·ã€‚<br>&emsp;&emsp;åªæ˜¯ pyd è§„å®šäº†ä¸€äº›æš´éœ²è§„åˆ™ï¼Œä»è€Œè®© python è§£é‡Šå™¨å¯ä»¥è¯»å–ã€‚<br>&emsp;&emsp;è¿™ä¹Ÿæ˜¯ Python ç§°ä¹‹ä¸ºèƒ¶æ°´è¯­è¨€çš„ä¸€å¤§ç‰¹ç‚¹ï¼Œå®ƒå¯ä»¥æ— ç¼å’Œ C++ ç¼–è¯‘çš„æ¨¡å—è¿›è¡Œäº¤äº’ã€‚<br>&emsp;&emsp;å› æ­¤å¾ˆå¤š C++ çš„åŒ… æ¯”å¦‚ Qt ç­‰å¯ä»¥æš´éœ²æ¥å£åˆ° Python å®ç°è°ƒç”¨ã€‚</p></blockquote><h2 id="pyd-hello-world-æ¡ˆä¾‹"><a href="#pyd-hello-world-æ¡ˆä¾‹" class="headerlink" title="pyd hello world æ¡ˆä¾‹"></a>pyd hello world æ¡ˆä¾‹</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Python.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;maya/MGlobal.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">char</span> MAYA_PYTHON_C_EXT_DOCSTRING[] = <span class="string">&quot;An example Python C extension that makes use of Maya functionality.&quot;</span>;</span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">char</span> HELLO_WORLD_MAYA_DOCSTRING[] = <span class="string">&quot;Says hello world!&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NOTE(timmyliang): è°ƒç”¨ MGlobal API æ‰“å° Python ä¼ é€’çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function"><span class="type">static</span> PyObject *<span class="title">pyHelloWorldMaya</span><span class="params">(PyObject *<span class="keyword">module</span>, PyObject *args)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *inputString;</span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">PyArg_ParseTuple</span>(args, <span class="string">&quot;s&quot;</span>, &amp;inputString))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PyGILState_STATE pyGILState = <span class="built_in">PyGILState_Ensure</span>();</span><br><span class="line"></span><br><span class="line">MGlobal::<span class="built_in">displayInfo</span>(inputString);</span><br><span class="line"></span><br><span class="line">PyObject *result = <span class="built_in">Py_BuildValue</span>(<span class="string">&quot;s&quot;</span>, inputString);</span><br><span class="line"></span><br><span class="line"><span class="built_in">PyGILState_Release</span>(pyGILState);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NOTE(timmyliang): å®šä¹‰æ¨¡å—çš„å‡½æ•°åˆ—è¡¨</span></span><br><span class="line"><span class="type">static</span> PyMethodDef mayaPythonCExtMethods[] = &#123;</span><br><span class="line">&#123;<span class="string">&quot;hello_world_maya&quot;</span>, pyHelloWorldMaya, METH_VARARGS, HELLO_WORLD_MAYA_DOCSTRING&#125;,</span><br><span class="line">&#123;<span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="number">0</span>, <span class="literal">NULL</span>&#125; <span class="comment">// <span class="doctag">NOTE:</span> (sonictk) Sentinel value for Python</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// NOTE(timmyliang): python2 åˆå§‹åŒ–å‡½æ•°è§„èŒƒ init&lt;module_name&gt; </span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> PY_MAJOR_VERSION == 2</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> <span class="function">PyMODINIT_FUNC <span class="title">initpy_hello</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">Py_InitModule3</span>(<span class="string">&quot;py_hello&quot;</span>,</span><br><span class="line">  mayaPythonCExtMethods,</span><br><span class="line">  MAYA_PYTHON_C_EXT_DOCSTRING);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// NOTE(timmyliang): python3 åˆå§‹åŒ–å‡½æ•°è§„èŒƒ PyInit_&lt;module_name&gt; </span></span><br><span class="line"><span class="meta">#<span class="keyword">elif</span> PY_MAJOR_VERSION == 3</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> <span class="function">PyMODINIT_FUNC <span class="title">PyInit_py_hello</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">static</span> PyModuleDef hello_module = &#123;</span><br><span class="line">PyModuleDef_HEAD_INIT,</span><br><span class="line"><span class="string">&quot;py_hello&quot;</span>, <span class="comment">// Module name to use with Python import statements</span></span><br><span class="line">MAYA_PYTHON_C_EXT_DOCSTRING, <span class="comment">// Module description</span></span><br><span class="line"><span class="number">0</span>,</span><br><span class="line">mayaPythonCExtMethods <span class="comment">// Structure that defines the methods of the module</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">PyModule_Create</span>(&amp;hello_module);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¸Šé¢çš„ä»£ç å°±æ˜¯ä¸€ä¸ªå°æ¡ˆä¾‹ï¼Œå°† C++ ç¼–è¯‘æˆ pyd ç»™ python è°ƒç”¨ã€‚<br>&emsp;&emsp;å¹¶ä¸”è¿™é‡Œå¼•ç”¨äº† Maya çš„ API ï¼Œå› æ­¤åªèƒ½ä½¿ç”¨ Maya çš„ Python Interpreter (mayapy.exe) è¿›è¡ŒåŠ è½½ã€‚<br>&emsp;&emsp;å¦‚æœä½¿ç”¨å…¶ä»– Python å¯¼å…¥è¿™ä¸ªæ¨¡å—ä¼šå‡ºç°å¦‚ä¸‹çš„é”™è¯¯</p></blockquote><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent <span class="keyword">call</span> last):</span><br><span class="line">  File &quot;d:/Obsidian/Personal/<span class="number">2</span>_Area/ğŸ“Blog/CG/Maya/C++/test_load.py&quot;, line <span class="number">5</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    import py_hello</span><br><span class="line"><span class="function">ImportError: <span class="title">DLL</span> <span class="title">load</span> <span class="title">failed</span> <span class="title">while</span> <span class="title">importing</span> <span class="title">py_hello</span>: æ‰¾ä¸åˆ°æŒ‡å®šçš„ç¨‹åºã€‚</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;pyd çš„ C++ ä»£ç åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†</p><ol><li>python å®šä¹‰çš„å‡½æ•°</li><li>å‡½æ•°åˆ—è¡¨å®šä¹‰ (éœ€è¦ä¼ å…¥ä¸Šé¢çš„ C++ ç¼–å†™çš„ Python å‡½æ•°)</li><li>æ¨¡å—å®šä¹‰ (ä¼ å…¥ä¸Šé¢çš„ å‡½æ•°åˆ—è¡¨)</li></ol></blockquote><blockquote><p>&emsp;&emsp;æœ€åç”Ÿæˆæ¨¡å—éƒ¨åˆ†ï¼ŒPython2 å’Œ Python3 æš´éœ²çš„ API ä¸ä¸€è‡´ï¼Œå¯ä»¥ç”¨å®æ¥åŒºåˆ†ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ç¼–è¯‘è¿™ä¸ª cpp éœ€è¦åŠ ä¸Š Maya include ç›®å½•çš„å¤´æ–‡ä»¶ï¼Œä»¥åŠé“¾æ¥ Maya lib çš„é™æ€åº“æ–‡ä»¶ã€‚<br>&emsp;&emsp;å¦å¤–ç¼–è¯‘ pyd éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œå®ƒä¹Ÿéœ€è¦æƒ³ mll ä¸€æ ·æš´éœ²å‡ºåˆå§‹åŒ–çš„å‡½æ•°ã€‚<br>&emsp;&emsp;åœ¨ python2 ä¸‹æ˜¯ <code>init&lt;module_name&gt;</code> å¼€å¤´ï¼Œåœ¨ python3 ä¸‹æ˜¯ <code>PyInit_&lt;module_name&gt;</code> å¼€å¤´ã€‚<br>&emsp;&emsp;åœ¨ cpp é‡Œé¢é…ç½®ç¼–è¯‘ç¯å¢ƒæ˜¯ä¸ªç›¸å½“è®©äººå¤´ç–¼çš„é—®é¢˜ã€‚<br>&emsp;&emsp;æˆ‘åœ¨è‡ªå·±çš„ <a href="https://github.com/FXTD-ODYSSEY/CMakeMaya">CMakeMaya</a> åº“é‡Œé¢å·²ç»é…ç½®å¥½äº†ç¼–è¯‘ç”¨çš„ç¯å¢ƒï¼Œ<br>&emsp;&emsp;å…·ä½“çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥çœ‹ readme æˆ–è€…å‚è€ƒæˆ‘çš„æ–‡ç«  <a href="./5875a169.html">Maya CMake æ„å»º C++ æ’ä»¶ç¼–è¯‘ç¯å¢ƒ</a> </p></blockquote><blockquote><p>&emsp;&emsp;åœ¨æˆ‘æä¾›çš„ç¯å¢ƒä¸‹æ‰§è¡Œ <code>doit c -p pyd -v 2020</code> å³å¯ç¼–è¯‘å‡º pyd åˆ° <code>plug-ins\Release\maya2022\pyd\py_hello.pyd</code><br>&emsp;&emsp;éœ€è¦æ³¨æ„ pyd åœ¨ä¸åŒçš„å¹³å°ä¸åŒMayaç‰ˆæœ¬éƒ½éœ€è¦å•ç‹¬ç¼–è¯‘ã€‚è¿™é‡Œæˆ‘æä¾›äº†ç¼–è¯‘å¥½ç»™ Windows64 Maya2020 çš„ <a href="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/ce449c32/py_hello.pyd">pyd</a> </p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/ce449c32/ea63da79573f07279f606f9b77b16f21.jpeg" alt="image"></p><h3 id="å¯¼å…¥-pyd-å¼•å…¥-Maya-C-èŠ‚ç‚¹"><a href="#å¯¼å…¥-pyd-å¼•å…¥-Maya-C-èŠ‚ç‚¹" class="headerlink" title="å¯¼å…¥ pyd å¼•å…¥ Maya C++ èŠ‚ç‚¹"></a>å¯¼å…¥ pyd å¼•å…¥ Maya C++ èŠ‚ç‚¹</h3><blockquote><p>&emsp;&emsp;åœ¨ç›¸åº”çš„ç‰ˆæœ¬æ‰§è¡Œå°±å¯ä»¥çœ‹åˆ°å¦‚æœŸè§¦å‘äº† maya API çš„æ–¹æ³•ã€‚<br>&emsp;&emsp;ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªæ–¹å¼æ³¨å†Œ Maya çš„èŠ‚ç‚¹å’Œ Mel å‘½ä»¤ï¼Œå…·ä½“å¯ä»¥çœ‹ <a href="https://github.com/FXTD-ODYSSEY/CMakeMaya/tree/master/projects/sonictk/pyd/pyDeformer">pyDeformer</a> çš„ä»£ç ã€‚<br>&emsp;&emsp;åªæ˜¯ç”±äºæ²¡æœ‰ <code>initializePlugin</code> æ‹¿ä¸åˆ°ä¼ è¿›æ¥çš„ <code>MObject</code> å®ä¾‹åŒ– <code>MFnPlugin</code>ã€‚<br>&emsp;&emsp;æˆ‘æµ‹è¯•çš„ py_deformer ç”¨äº† <code>MFnPlugin::findPlug</code> æ‹¿åˆ°å†…ç½®æ’ä»¶ <code>matrixNodes</code> æä¾›çš„ MObject æ¥æ³¨å†ŒèŠ‚ç‚¹ã€‚<br>&emsp;&emsp;ç­”æ¡ˆæ˜¯å¯ä»¥å®ç°çš„ï¼Œè€Œä¸”æ–°åŠ å…¥çš„èŠ‚ç‚¹ä¹Ÿä¼šæ˜¾ç¤ºåœ¨ <code>matrixNodes</code> ä¸Šã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/ce449c32/877d402bb3650b6b9d965467d2811829.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;è¿™ç§éªšæ“ä½œä¸å»ºè®®ä½¿ç”¨ï¼Œè€Œä¸”ä¹Ÿä¸çŸ¥é“ä¼šä¸ä¼šæœ‰ä»€ä¹ˆ BUG å¯¼è‡´ Maya å´©æºƒã€‚<br>&emsp;&emsp;å¦å¤–æ²¡æœ‰åŠæ³•è§¦å‘ <code>uninitializePlugin</code> æ¥æ³¨é”€è¿™ä¸ªèŠ‚ç‚¹çš„æ³¨å†Œã€‚</p></blockquote><h3 id="pyd-mll-ç¼åˆæ€ª"><a href="#pyd-mll-ç¼åˆæ€ª" class="headerlink" title="pyd mll ç¼åˆæ€ª"></a>pyd mll ç¼åˆæ€ª</h3><blockquote><p>&emsp;&emsp;åŸºäºä¸Šé¢çš„æµ‹è¯•æˆ‘å‘ç°è¿˜å¯ä»¥ç”Ÿæˆå‡ºæ—¢æ˜¯ Maya æ’ä»¶åˆæ˜¯ Python æ¨¡å—çš„ ç¼åˆæ€ªæ–‡ä»¶ã€‚<br>&emsp;&emsp;å› ä¸º C++ åªè¦ç¼–è¯‘çš„æ—¶å€™ export å‡ºå¯¹åº”çš„æ–¹æ³•å°±å¯ä»¥åŠ è½½ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;åªæ˜¯ Python åŠ è½½äºŒè¿›åˆ¶åŒ…è¦æ±‚æ–‡ä»¶åç¼€ä¸º pyd ï¼ŒMaya åŠ è½½äºŒè¿›åˆ¶æ’ä»¶è¦æ±‚æ–‡ä»¶å‘½åä¸º mll æ‰å¯ä»¥ã€‚<br>&emsp;&emsp;è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ç”¨è½¯è¿æ¥æˆ–è€…æ‹†åˆ†æˆä¸¤ä¸ªæ–‡ä»¶æ¥å®ç°ï¼Œç»è¿‡æµ‹è¯•æ˜¯å¯ä»¥çš„ï¼Œå…·ä½“å¯ä»¥çœ‹ <a href="https://github.com/FXTD-ODYSSEY/CMakeMaya/tree/master/projects/sonictk/pyd/pyCommand">pyCommand</a> çš„ <a href="https://github.com/FXTD-ODYSSEY/CMakeMaya/tree/master/projects/sonictk/pyd/scripts/test_py_deformer.py">æµ‹è¯•ä»£ç </a> ã€‚</p></blockquote><h2 id="ä½¿ç”¨-mll-åµŒå…¥-python-æ¨¡å—"><a href="#ä½¿ç”¨-mll-åµŒå…¥-python-æ¨¡å—" class="headerlink" title="ä½¿ç”¨ mll åµŒå…¥ python æ¨¡å—"></a>ä½¿ç”¨ mll åµŒå…¥ python æ¨¡å—</h2><blockquote><p>&emsp;&emsp;ä¸Šé¢ä¸»è¦å®ç°æŒ‰ç…§ python çš„è§„èŒƒåŠ è½½åŒ…çš„æ“ä½œï¼Œ<code>sonitck</code> çš„æ–‡ç« è¿˜æä¾›äº†ä¸€ä¸ªæ–¹æ¡ˆï¼ŒåŠ è½½ mll è·å–åˆ° python åŒ…çš„æ–¹å¼ã€‚<br>&emsp;&emsp;åšæ³•ä¹Ÿä¸å¤æ‚ï¼Œå°±æ˜¯åœ¨ <code>initializePlugin</code> çš„æ—¶å€™åŠ ä¸ŠåŠ ä¸Š C++ çš„æ¨¡å—ã€‚</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Python.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;maya/MFnPlugin.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;maya/MGlobal.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *kAUTHOR = <span class="string">&quot;TimmyLiang&quot;</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *kVERSION = <span class="string">&quot;1.0.0&quot;</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *kREQUIRED_API_VERSION = <span class="string">&quot;Any&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">char</span> HELLO_WORLD_MAYA_DOCSTRING[] = <span class="string">&quot;Says hello world!&quot;</span>;</span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">char</span> MAYA_PYTHON_C_EXT_DOCSTRING[] = <span class="string">&quot;An example Python C extension that makes use of Maya functionality.&quot;</span>;</span><br><span class="line"></span><br><span class="line">PyObject *<span class="keyword">module</span> = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">static</span> PyObject *<span class="title">pyHelloWorldMaya</span><span class="params">(PyObject *<span class="keyword">module</span>, PyObject *args)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *inputString;</span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">PyArg_ParseTuple</span>(args, <span class="string">&quot;s&quot;</span>, &amp;inputString)) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">PyGILState_STATE pyGILState = <span class="built_in">PyGILState_Ensure</span>();</span><br><span class="line">MGlobal::<span class="built_in">displayInfo</span>(inputString);</span><br><span class="line">PyObject *result = <span class="built_in">Py_BuildValue</span>(<span class="string">&quot;s&quot;</span>, inputString);</span><br><span class="line"><span class="built_in">PyGILState_Release</span>(pyGILState);</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> PyMethodDef mayaPythonCExtMethods[] = &#123;</span><br><span class="line">&#123;<span class="string">&quot;hello_world_maya&quot;</span>, pyHelloWorldMaya, METH_VARARGS, HELLO_WORLD_MAYA_DOCSTRING&#125;,</span><br><span class="line">&#123;<span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="number">0</span>, <span class="literal">NULL</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">MStatus <span class="title">initializePlugin</span><span class="params">(MObject obj)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">MFnPlugin <span class="title">plugin</span><span class="params">(obj, kAUTHOR, kVERSION, kREQUIRED_API_VERSION)</span></span>;</span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">Py_IsInitialized</span>())</span><br><span class="line"><span class="built_in">Py_Initialize</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">Py_IsInitialized</span>())</span><br><span class="line">&#123;</span><br><span class="line">PyGILState_STATE pyGILState = <span class="built_in">PyGILState_Ensure</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// NOTE(TimmyLiang): python2 ç›´æ¥åˆå§‹åŒ–æ¨¡å—å°±ä¸ä¼šå˜æˆ built-in æ¨¡å—</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> PY_MAJOR_VERSION == 2</span></span><br><span class="line"><span class="keyword">module</span> = <span class="built_in">Py_InitModule3</span>(<span class="string">&quot;mll_py&quot;</span>,</span><br><span class="line">mayaPythonCExtMethods,</span><br><span class="line">MAYA_PYTHON_C_EXT_DOCSTRING);</span><br><span class="line"><span class="comment">// NOTE(TimmyLiang): python3 ç”¨å®˜æ–¹çš„æ–¹å¼æ·»åŠ æ¨¡å—ä¸è¡Œï¼Œå¯èƒ½æ˜¯å› ä¸º Py_Initialize å·²ç»æ‰§è¡Œäº†</span></span><br><span class="line"><span class="meta">#<span class="keyword">elif</span> PY_MAJOR_VERSION == 3</span></span><br><span class="line"><span class="comment">// NOTE(TimmyLiang): å‚è€ƒ https://github.com/LinuxCNC/linuxcnc/issues/825 å°†æ¨¡å—åŠ åˆ° sys.modules é‡Œé¢</span></span><br><span class="line"><span class="type">static</span> PyModuleDef hello_module = &#123;</span><br><span class="line">PyModuleDef_HEAD_INIT,</span><br><span class="line"><span class="string">&quot;mll_py&quot;</span>, <span class="comment">// Module name to use with Python import statements</span></span><br><span class="line">MAYA_PYTHON_C_EXT_DOCSTRING, <span class="comment">// Module description</span></span><br><span class="line"><span class="number">0</span>,</span><br><span class="line">mayaPythonCExtMethods <span class="comment">// Structure that defines the methods of the module</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">module</span> = <span class="built_in">PyModule_Create</span>(&amp;hello_module);</span><br><span class="line">PyObject *sys_modules = <span class="built_in">PyImport_GetModuleDict</span>();</span><br><span class="line"><span class="built_in">PyDict_SetItemString</span>(sys_modules, <span class="string">&quot;mll_py&quot;</span>, <span class="keyword">module</span>);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">MGlobal::<span class="built_in">displayInfo</span>(<span class="string">&quot;Registered Python bindings!&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">module</span> == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> MStatus::kFailure;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">// NOTE(timmyliang): å¢åŠ å¼•ç”¨è®¡æ•°(ç¡®ä¿ä¸ä¼š gc)</span></span><br><span class="line"><span class="built_in">Py_INCREF</span>(<span class="keyword">module</span>);</span><br><span class="line"><span class="built_in">PyGILState_Release</span>(pyGILState);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> MStatus::kSuccess;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">MStatus <span class="title">uninitializePlugin</span><span class="params">(MObject obj)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MStatus status;</span><br><span class="line">  <span class="comment">// NOTE(timmyliang): å‡å°‘å¼•ç”¨è®¡æ•°</span></span><br><span class="line"><span class="built_in">Py_DECREF</span>(<span class="keyword">module</span>);</span><br><span class="line"><span class="keyword">return</span> status;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¸Šé¢çš„ä»£ç å…¼å®¹ python2 python3 ç‰ˆæœ¬ã€‚<br>&emsp;&emsp;python2 ç›´æ¥ç”¨é»˜è®¤çš„ <code>Py_InitModule</code> æ–¹æ³•å°±å¯ä»¥æ·»åŠ ï¼Œå¦‚æœåœ¨ Python æ‰“å°æ¨¡å—ä¼šæç¤º <code>&lt;module &#39;mll_py&#39; (built-in)&gt;</code><br>&emsp;&emsp;ä½†æ˜¯ python3 ä¸‹é¢ä¸è¡Œï¼Œåæ¥æŸ¥æ‰¾äº† Github çš„ <a href="https://github.com/LinuxCNC/linuxcnc/issues/825">issue</a> é€šè¿‡å°†æ¨¡å—æ·»åŠ åˆ° <code>sys.modules</code> ä¸‹é¢è§£å†³é—®é¢˜ã€‚<br>&emsp;&emsp;åªæ˜¯æ¨¡å—æ‰“å°å°±æ˜¯æ™®é€šçš„æ¨¡å—ã€‚<br>&emsp;&emsp;é‚£ä¸ºä»€ä¹ˆå°†æ¨¡å—æ”¾åˆ° sys.modules å°±å¯ä»¥äº†ï¼Œè¿™ Python çš„ import æœºåˆ¶æœ‰å…³ã€‚ <a href="./5e6e2bc7.html">Python - Import æœºåˆ¶</a></p></blockquote><blockquote><p>&emsp;&emsp;è¿™ä¸ªæ–¹å¼å¯ä»¥å°†ä¸€äº› C++ çš„ API æš´éœ²ç»™ Pythonï¼Œåªæ˜¯è¿™ä¸ªæ“ä½œéœ€è¦æ›´å¤šçš„è¯´æ˜ã€‚<br>&emsp;&emsp;å¦åˆ™æ²¡äººçŸ¥é“è¿™ä¸ª mll å±…ç„¶æ·»åŠ ä¸€ä¸ª Python æ¨¡å—ã€‚</p></blockquote><h2 id="pybind11-è‡ªåŠ¨ç»‘å®š"><a href="#pybind11-è‡ªåŠ¨ç»‘å®š" class="headerlink" title="pybind11 è‡ªåŠ¨ç»‘å®š"></a>pybind11 è‡ªåŠ¨ç»‘å®š</h2><blockquote><p>&emsp;&emsp;é€šè¿‡ä¸Šé¢ä¸€é¡¿æ“ä½œï¼Œä¹Ÿå¯ä»¥æ·±åˆ»ä½“ä¼šåˆ°å¦‚æœè·¨ç‰ˆæœ¬å…¼å®¹ C++ éœ€è¦åšå¾ˆå¤šå®çš„åˆ¤æ–­ï¼Œç›¸å½“ç¹çã€‚<br>&emsp;&emsp;åŒ…æ‹¬ Python2 å’Œ Python3 æš´éœ²çš„æ–¹æ³•åä¸ä¸€æ ·ï¼Œéœ€è¦åœ¨ CMake ä¸Šè¿›è¡Œåˆ¤æ–­ã€‚<br>&emsp;&emsp;ä½¿ç”¨ pybind11 è¿›è¡Œè½¬æ¢ç›¸å¯¹æ–¹ä¾¿è®¸å¤š</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Python.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;maya/MGlobal.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pybind11/pybind11.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://zhuanlan.zhihu.com/p/80884925</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">displayInfo</span><span class="params">(<span class="type">char</span> *inputString)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MGlobal::<span class="built_in">displayInfo</span>(inputString);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">PYBIND11_MODULE</span>( pybind11cpp, m )&#123;</span><br><span class="line">    m.<span class="built_in">doc</span>() = <span class="string">&quot;pybind11 example&quot;</span>;</span><br><span class="line">    m.<span class="built_in">def</span>(<span class="string">&quot;display_info&quot;</span>, &amp;displayInfo, <span class="string">&quot;Maya Display Info&quot;</span> ,pybind11::<span class="built_in">arg</span>(<span class="string">&quot;inputString&quot;</span>) = <span class="string">&quot;hello world!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;pybind11 ä¼šè‡ªåŠ¨å°† Python çš„å‚æ•°è¿›è¡Œè½¬æ¢<br>&emsp;&emsp;è¿™æ ·åªè¦å°†çº¯ç²¹çš„ C++ å‡½æ•°æ”¾å…¥åˆ° <code>PYBIND11_MODULE</code> å®<br>&emsp;&emsp;å¹¶ä¸” pybind11 çš„ 2.9 ç‰ˆæœ¬æ”¯æŒ python2 python3 çš„ pyd ç¼–è¯‘ã€‚<br>&emsp;&emsp;åªè¦åœ¨ cmake é‡Œé¢é…ç½® <code>/export</code> å¯¹åº”çš„æ–¹æ³•å³å¯ã€‚</p></blockquote><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find_package</span>(Pybind11 REQUIRED) </span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>(pybind11cpp) <span class="comment">#project name</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">file</span>(GLOB SRCS <span class="string">&quot;pybind11/*.cpp&quot;</span> <span class="string">&quot;pybind11/*.h&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;MAYA_INCLUDE_DIR&#125;</span> <span class="variable">$&#123;MAYA_PYTHON_INCLUDE_DIR&#125;</span> <span class="variable">$&#123;PYBIND11_INCLUDE_DIR&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">link_directories</span>(<span class="variable">$&#123;MAYA_LIBRARY_DIR&#125;</span>) <span class="comment">#specifies a directory where a linker should search for libraries</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">add_library</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> SHARED <span class="variable">$&#123;SRCS&#125;</span>) <span class="comment">#Add a dynamic library to the project using the specified source files</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pybind11_add_module($&#123;PROJECT_NAME&#125; $&#123;SRCS&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">target_link_libraries</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> <span class="variable">$&#123;MAYA_LIBRARIES&#125;</span>) <span class="comment">#specifies list of libraries to use when linking the terget and its dependents</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$&#123;MAYA_VERSION&#125;</span> <span class="keyword">GREATER</span> <span class="number">2020</span>) </span><br><span class="line">    <span class="keyword">set</span>(PYBIND_LINK_FLAGS <span class="string">&quot;/export:PyInit_pybind11cpp&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>() </span><br><span class="line">    <span class="keyword">set</span>(PYBIND_LINK_FLAGS <span class="string">&quot;/export:initpybind11cpp&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">set_target_properties</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> PROPERTIES</span><br><span class="line">    LINK_FLAGS <span class="variable">$&#123;PYBIND_LINK_FLAGS&#125;</span></span><br><span class="line">    SUFFIX <span class="string">&quot;.pyd&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;pybind11 å¯ä»¥ä½¿ç”¨ <code>pybind11_add_module</code> æ¥ç”Ÿæˆ pyd<br>&emsp;&emsp;ä½†æ˜¯å®ƒæ˜¯è‡ªåŠ¨æŸ¥æ‰¾ Python ç¯å¢ƒï¼ŒæŒ‡å®š Maya çš„ Python éœ€è¦é¢å¤–çš„é…ç½®ã€‚<br>&emsp;&emsp;æ‰€ä»¥æˆ‘å°±ä¸ç”¨è¿™ä¸ªï¼Œè‡ªå·±æ¥é…ç½®å¥½äº†ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;é€šè¿‡ä¸Šé¢çš„æ–¹å¼å¯ä»¥å¤§å¤§ç®€åŒ– C++ çš„ç¼–å†™ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;ä»¥ä¸Šå°±æ˜¯ pyd ç¼–è¯‘çš„å„ç§æŠ˜è…¾ç»“æœã€‚<br>&emsp;&emsp;ç¤¾åŒºé‡Œé¢å€¼å¾—è¯´é“çš„æœ‰ <a href="https://github.com/mottosso/cmdc">cmdc</a> åŸºäº pybind11 ç¼–è¯‘çš„äºŒæ¬¡å°è£… C++ API åº“ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;Python è°ƒç”¨ C++ è¿˜æœ‰åˆ©ç”¨ <code>ctypes</code> åº“è®¿é—® dll çš„æ–¹å¼<br>&emsp;&emsp;åç»­ä¹Ÿå¯ä»¥å®éªŒä¸€ä¸‹åœ¨ Python ä¸­ä» dll é‡Œé¢è°ƒç”¨ function å®ç° å‚è€ƒ:<a href="https://github.com/Autodesk/animx">https://github.com/Autodesk/animx</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      Python C++ Extension
    
    </summary>
    
      <category term="CG" scheme="https://blog.l0v0.com/categories/CG/"/>
    
      <category term="Maya" scheme="https://blog.l0v0.com/categories/CG/Maya/"/>
    
      <category term="C++" scheme="https://blog.l0v0.com/categories/CG/Maya/C/"/>
    
    
      <category term="à €Maya" scheme="https://blog.l0v0.com/tags/%E0%A0%80Maya/"/>
    
      <category term="à ‡Cpp" scheme="https://blog.l0v0.com/tags/%E0%A0%87Cpp/"/>
    
  </entry>
  
  <entry>
    <title>Unreal C++ VScode é…ç½®</title>
    <link href="https://blog.l0v0.com/posts/51c731db.html"/>
    <id>https://blog.l0v0.com/posts/51c731db.html</id>
    <published>2022-07-12T06:47:30.000Z</published>
    <updated>2022-11-09T02:37:04.727Z</updated>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;è¿™æ¬¡å°è¯•åœ¨ VScode è¿›è¡Œå¼•æ“ç¼–è¯‘ã€‚<br>&emsp;&emsp;ç½‘ä¸Šä¸€æŸ¥å‘ç°ï¼Œå®˜æ–¹å…¶å®æœ‰åšæ”¯æŒçš„ï¼Œå…·ä½“å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  <a href="http://jollymonsterstudio.com/2018/11/02/unreal-c-with-visual-studio-code">é“¾æ¥</a><br>&emsp;&emsp;è¿™ç¯‡æ–‡ç« ä¼ æ’­ç”šå¹¿ï¼Œå¯ä»¥å‚ç…§å’Œè¿™ä¸ªæ–¹å¼é…ç½® VScode ç¼–è¯‘ã€‚</p></blockquote><p><a href="https://www.youtube.com/watch?v=fydvKedIxKk">https://www.youtube.com/watch?v=fydvKedIxKk</a><br><a href="https://github.com/boocs/ue4-tellisense-fixes">https://github.com/boocs/ue4-tellisense-fixes</a></p><h2 id="C-ç¼–è¯‘è¿‡ç¨‹"><a href="#C-ç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="C++ ç¼–è¯‘è¿‡ç¨‹"></a>C++ ç¼–è¯‘è¿‡ç¨‹</h2><p>æ·±åº¦å‚è€ƒå­¦ä¹ è¿™è¾¹æ–‡ç«  <a href="https://ericlemes.com/2018/11/21/compiling-c-code/">https://ericlemes.com/2018/11/21/compiling-c-code/</a><br>é‰´äºæœ¬äººçš„ C++ æ°´å¹³ä¸€èˆ¬ï¼Œå»ºè®®é˜…è¯»åŸæ–‡</p><h3 id="ç¼–è¯‘æ­¥éª¤"><a href="#ç¼–è¯‘æ­¥éª¤" class="headerlink" title="ç¼–è¯‘æ­¥éª¤"></a>ç¼–è¯‘æ­¥éª¤</h3><blockquote><p>&emsp;&emsp;C++ ç¼–è¯‘å¯èƒ½ä¼šç”¨åˆ°ä¸‹é¢çš„æ–‡ä»¶ã€‚</p></blockquote><ul><li>.cpp æ–‡ä»¶ç¼–è¯‘æˆ .obj</li><li>ç”Ÿæˆé™æ€åº“ .lib</li><li>ç”ŸæˆåŠ¨æ€åº“ .dll </li><li>ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ executable</li></ul><h3 id="VS-å·¥å…·é“¾"><a href="#VS-å·¥å…·é“¾" class="headerlink" title="VS å·¥å…·é“¾"></a>VS å·¥å…·é“¾</h3><blockquote><p>&emsp;&emsp;.sln å…¨ç§°æ˜¯ solution è§£å†³æ–¹æ¡ˆï¼Œæ˜¯ VS çš„é¡¹ç›®é…ç½®æ–‡ä»¶ã€‚ (æ•´åˆäº† .vcxproj .csproj)<br>&emsp;&emsp;ä»–å¯ä»¥åŒæ—¶é…ç½®å¤šä¸ªé¡¹ç›®ï¼Œæœ€åé€šè¿‡ MSBuild æ¥æ„å»º<br>&emsp;&emsp;sln åŒ…å«äº†é¡¹ç›®çš„å„ç§å¤´æ–‡ä»¶ä¾èµ–ï¼Œåº“å¼•ç”¨ç­‰æè¿°ï¼Œæ‰§è¡Œé¡ºåºï¼Œé€šè¿‡è¿™ä¸ª IDE å°±çŸ¥é“æ€ä¹ˆç¼–è¯‘ä½ çš„é¡¹ç›®ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;Xcode çš„æƒ…å†µä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚<br>&emsp;&emsp;å…¶ä¸­æ¯”è¾ƒç‰¹åˆ«çš„æ—¶ CMake ï¼Œé€šè¿‡ CMakeLists.txt æ–‡ä»¶å¯ä»¥æ ¹æ®ä¸åŒå¹³å°ç”Ÿæˆå·¥ç¨‹é…ç½®æ–‡ä»¶ã€‚</p></blockquote><h3 id="ç¬¬ä¸€æ­¥-ç¼–è¯‘"><a href="#ç¬¬ä¸€æ­¥-ç¼–è¯‘" class="headerlink" title="ç¬¬ä¸€æ­¥ ç¼–è¯‘"></a>ç¬¬ä¸€æ­¥ ç¼–è¯‘</h3><p>è¾“å…¥:</p><ul><li>Defines</li><li>Include æ–‡ä»¶å¤¹è·¯å¾„Include directories</li><li>é¢„ç¼–è¯‘å¤´æ–‡ä»¶ (å¦‚æœæœ‰ç”¨åˆ°çš„è¯)</li><li>æºä»£ç </li></ul><p>è¾“å‡º:</p><ul><li>.obj æ–‡ä»¶</li></ul><blockquote><p>&emsp;&emsp;MSBuild ä½¿ç”¨ CL.exe è¿›è¡Œ C++ ç¼–è¯‘ã€‚ å¯èƒ½çš„è·¯å¾„ <code>C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.29.30133\bin\Hostx64\x64\cl.exe</code><br>&emsp;&emsp;éœ€è¦å®‰è£… VS æˆ–è€…ç”¨ choco æ¥å®‰è£…</p></blockquote><blockquote><p>&emsp;&emsp;ç¼–è¯‘çš„æ—¶å€™ä¼šæ ¹æ® å®å®šä¹‰(æ¯”å¦‚ <code>#ifdef</code>)åŠ¨æ€ æ”¹å˜ç¼–è¯‘è¡Œä¸º<br>&emsp;&emsp;é€šè¿‡è¿™ä¸ªæ–¹å¼å¯ä»¥åœ¨ä¸åŒçš„å¹³å°ç¼–è¯‘å‡ºä¸åŒçš„è¡Œä¸ºã€‚<br>&emsp;&emsp;C++ æœ€ç»ˆç¼–è¯‘æˆå¯¹åº”å¹³å°çš„äºŒè¿›åˆ¶ï¼Œè¿™ä¸ªè®¾è®¡å’Œ Java C# éƒ½ä¸åŒã€‚</p></blockquote><blockquote><p>&emsp;&emsp;å¤´æ–‡ä»¶æœ€ç»ˆä¼šæ‹¼æ¥åˆ° C++ é‡Œé¢è¿›è¡Œç¼–è¯‘ï¼Œæ‰€ä»¥éœ€è¦åŠ ä¸Š <code>#pragma once</code> æˆ–è€… <code>#if</code> æ¥é¿å…å¤šæ¬¡å®šä¹‰ã€‚<br>&emsp;&emsp;é¢„ç¼–è¯‘å¤´åˆ™å¯ä»¥ç”Ÿæˆ <code>.pch</code> æ–‡ä»¶å®ç°å¤´æ–‡ä»¶å¤ç”¨ã€‚</p></blockquote><h3 id="ç¬¬äºŒæ­¥-é“¾æ¥"><a href="#ç¬¬äºŒæ­¥-é“¾æ¥" class="headerlink" title="ç¬¬äºŒæ­¥ é“¾æ¥"></a>ç¬¬äºŒæ­¥ é“¾æ¥</h3><p>è¾“å…¥:</p><ul><li>ä¸€äº›æºç ç”Ÿæˆ .obj æ–‡ä»¶</li><li>ä¸€äº›æºç ç”Ÿæˆ .lib æ–‡ä»¶</li><li>ç¬¬ä¸‰æ–¹çš„ lib å’Œ obj æ–‡ä»¶</li></ul><p>è¾“å‡º:</p><ul><li>.dll æˆ–è€… .exe</li></ul><blockquote><p>&emsp;&emsp;è¿™ä¸€æ­¥ä¼šå°†ç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶åˆå¹¶æˆ dll æˆ–è€… exe<br>&emsp;&emsp;è¿™ä¸ªè¿‡ç¨‹ä¼šå®Œæˆå¾ˆå¤šä¼˜åŒ–çš„æ­¥éª¤ï¼ŒæŠŠä¸è¿è¡Œçš„éƒ¨åˆ†æ¸…ç†æ‰ã€‚<br>&emsp;&emsp;æœ€åä¼šå°†ä¸€äº›å¹³å°çš„ lib å¼•å…¥ç¡®ä¿å®ƒåœ¨å¹³å°ä¸Šå¯ä»¥è¿è¡Œï¼Œæ¯”å¦‚ wincrt (Windows C Runtime library) ç­‰ç­‰<br>&emsp;&emsp;å¹¶ä¸” lib ä¹Ÿæœ‰å¾ˆå¤šç§ç±»ï¼Œæœ‰ release ç‰ˆæœ¬å’Œ debug ç‰ˆæœ¬ç­‰ç­‰ã€‚</p></blockquote><h2 id="Unreal-Build-Tool"><a href="#Unreal-Build-Tool" class="headerlink" title="Unreal Build Tool"></a>Unreal Build Tool</h2><p><a href="https://ericlemes.com/2018/11/23/understanding-unreal-build-tool/">https://ericlemes.com/2018/11/23/understanding-unreal-build-tool/</a></p><h3 id="CS-é…ç½®æ–‡ä»¶è¯´æ˜"><a href="#CS-é…ç½®æ–‡ä»¶è¯´æ˜" class="headerlink" title="CS é…ç½®æ–‡ä»¶è¯´æ˜"></a>CS é…ç½®æ–‡ä»¶è¯´æ˜</h3><p><a href="https://www.bilibili.com/read/cv15297017/">https://www.bilibili.com/read/cv15297017/</a></p><blockquote><p>&emsp;&emsp;<code>Unreal</code> ä½¿ç”¨è‡ªå·±å¼€å‘çš„ <code>UnrealBuildTool</code> æ¥ç¼–è¯‘è‡ªå·±çš„ C++ ä»£ç <br>&emsp;&emsp;ä¸ <a href="http://tw.l0v0.com/#%F0%9F%92%BECMake">ğŸ’¾CMake</a> ç±»ä¼¼çš„ï¼Œ<code>UnrealBuildTool</code> ä¼šå¼•ç”¨ä½ éœ€è¦åœ¨ç›¸åº”çš„æ¨¡å—æ·»åŠ  <code>.build.cs</code> çš„ä»£ç æ–‡ä»¶æ¥æè¿°ä»“åº“é“¾æ¥çš„ä¸œè¥¿ã€‚<br>&emsp;&emsp;<code>.build.cs</code> ä¹‹ä¸Šé…å¥—äº† <code>Private</code> <code>Public</code> æ–‡ä»¶å¤¹åˆ†åˆ«æ”¾ç½®æš´éœ²å’Œä¸æš´éœ²çš„ä»£ç ã€‚<br>&emsp;&emsp;<code>.target.cs</code> åˆ™å¯ä»¥ç”¨æ¥å®šä¹‰è¾“å‡ºçš„ç±»å‹ï¼Œæœ‰ <code>Game</code> <code>Editor</code> <code>Client</code> <code>Server</code> å‡ ç§ç±»å‹ã€‚</p></blockquote><h3 id="ç”Ÿæˆå·¥ç¨‹æ–‡ä»¶"><a href="#ç”Ÿæˆå·¥ç¨‹æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆå·¥ç¨‹æ–‡ä»¶"></a>ç”Ÿæˆå·¥ç¨‹æ–‡ä»¶</h3><blockquote><p>&emsp;&emsp;å½“æˆ‘ä»¬å¯¹ <code>uproject</code> æ–‡ä»¶å³é”®ç”Ÿæˆ project çš„æ—¶å€™èƒŒåæ‰§è¡Œå°±æ˜¯ <code>UnrealBuildTool</code></p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/51c731db/a897c17f0e8725cfdc7eef597edbc464.png" alt="image"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:/EpicGames/git/UnrealEngine-4.27/Engine/Binaries/DotNET/UnrealBuildTool.exe  -projectfiles -project=&quot;D:/EpicGames/test_plugin/test_plugin.uproject&quot; -game -engine -progress -log=&quot;D:\EpicGames\test_plugin/Saved/Logs/UnrealVersionSelector-2022.07.12-15.50.08.log&quot;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;<code>UnrealBuildTool</code> ä¼šæ ¹æ® <code>.build.cs</code> å’Œ <code>.target.cs</code> é‡Œé¢é…ç½®æ¨¡å—è·¯å¾„ç”Ÿæˆ sln å·¥ç¨‹æ–‡ä»¶ã€‚</p></blockquote><h3 id="ç¼–è¯‘-C"><a href="#ç¼–è¯‘-C" class="headerlink" title="ç¼–è¯‘ C++"></a>ç¼–è¯‘ C++</h3><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/51c731db/00ffce7125f34d3a93cc992f7d154c3c.png" alt="image"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:/EpicGames/UE_4.27/Engine/Binaries/DotNET/UnrealBuildTool.exe Development Win64 -Project=&quot;D:/EpicGames/Unreal_Playground/Unreal_Playground.uproject&quot; -TargetType=Editor -Progress -NoEngineChanges -NoHotReloadFromIDE</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è¿™ä¸ª <code>Build.bat</code> èƒŒåè¿˜æ˜¯è°ƒç”¨ <code>UnrealBuildTool.exe</code> é€šè¿‡å®ƒæ¥ç¼–è¯‘ C++<br>&emsp;&emsp;ä¸Šé¢ç”Ÿæˆå·¥ç¨‹æ—¶å€™ <code>.build.cs</code> å’Œ <code>.target.cs</code> åªæ˜¯æ”¶é›†äº†è·¯å¾„ã€‚<br>&emsp;&emsp;ç°åœ¨ä¼šå†æ¬¡è¯»å–è¿™ä¸¤ä¸ªæ–‡ä»¶æ¥è·å–ä¸€äº›ç¼–è¯‘ç”¨çš„å±æ€§ã€‚<br>&emsp;&emsp;ç„¶æ ¹æ®é…ç½®è§£å†³å„ä¸ªæ¨¡å—çš„ä¾èµ–å…³ç³»ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;æœ€åä¼šè¿è¡Œ <code>UnrealHeaderTool</code> å°† UObject çš„ä¸€äº›ç‰¹æ€§æ³¨å…¥åˆ° UObject çš„ cpp æ–‡ä»¶å½“ä¸­ã€‚<br>&emsp;&emsp;è¿™ä¹Ÿè¯´æ˜äº†ä¸ºä»€ä¹ˆéœ€è¦å¼•å…¥ <code>.generated.h</code> çš„å¤´æ–‡ä»¶ã€‚<br>&emsp;&emsp;å‡†å¤‡å¥½äº†æ‰€æœ‰ä»£ç ä¹‹åå†è°ƒç”¨ç›¸åº”çš„ç¼–è¯‘å·¥å…·å»æ„å»º C++ã€‚</p></blockquote><h2 id="VScode-ç¼–è¯‘é…ç½®"><a href="#VScode-ç¼–è¯‘é…ç½®" class="headerlink" title="VScode ç¼–è¯‘é…ç½®"></a>VScode ç¼–è¯‘é…ç½®</h2><blockquote><p>&emsp;&emsp;äº†è§£äº† C++ ç¼–è¯‘å’Œ Unreal å…¨å®¶æ¡¶çš„ç¼–è¯‘é€»è¾‘ä¹‹åã€‚<br>&emsp;&emsp;æˆ‘ä»¬ç»ˆäºå¯ä»¥å›å½’åˆ°æœ¬ç¯‡æ–‡ç« çš„æ­£é¢˜ã€‚</p></blockquote><p><a href="http://jollymonsterstudio.com/2018/11/02/unreal-c-with-visual-studio-code/">http://jollymonsterstudio.com/2018/11/02/unreal-c-with-visual-studio-code/</a></p><blockquote><p>&emsp;&emsp;æŒ‰ç…§è¿™é‡Œæä¾›çš„æ–‡ç« å°±å¯ä»¥ç”¨ Unreal å®˜æ–¹çš„æ–¹å¼é…ç½®å¥½ <code>.vscode</code> ç›®å½•çš„ç¼–è¯‘é…ç½®ã€‚<br>&emsp;&emsp;åç»­åªè¦ <code>Ctrl + shift + B</code> å°±å¯ä»¥è§¦å‘ç¼–è¯‘ã€‚<br>&emsp;&emsp;ç¼–è¯‘èƒŒåçš„é€»è¾‘å°±åœ¨ä¸Šé¢è§£é‡Šäº†ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ç›¸åº”çš„æˆ‘ä¹Ÿå¯ä»¥ç”¨ python è„šæœ¬æ¥è§¦å‘ç¼–è¯‘ã€‚<br>&emsp;&emsp;sln å·¥ç¨‹å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä¸è¿‡ VS æœ‰ VA æŸ¥æ‰¾ä»£ç æ¯”è¾ƒå¿«ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      UnrealBuildTool å®ç°ç¼–è¯‘
    
    </summary>
    
      <category term="æ¸¸æˆå¼€å‘" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/"/>
    
      <category term="Unreal" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unreal/"/>
    
      <category term="C++" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unreal/C/"/>
    
    
      <category term="à ‡Cpp" scheme="https://blog.l0v0.com/tags/%E0%A0%87Cpp/"/>
    
      <category term="à ƒUnreal" scheme="https://blog.l0v0.com/tags/%E0%A0%83Unreal/"/>
    
  </entry>
  
  <entry>
    <title>Maya C++ mll hot reload ç ”ç©¶</title>
    <link href="https://blog.l0v0.com/posts/e6dc9087.html"/>
    <id>https://blog.l0v0.com/posts/e6dc9087.html</id>
    <published>2022-07-08T02:41:12.000Z</published>
    <updated>2022-11-09T02:37:04.651Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä½œè€…: <a href="http://tw.l0v0.com/#%F0%9F%91%A8%E2%80%8D%F0%9F%92%BBsonictk">ğŸ‘¨â€ğŸ’»sonictk</a></p><p><a href="https://sonictk.github.io/maya_hot_reload_example_public/">https://sonictk.github.io/maya_hot_reload_example_public/</a></p><blockquote><p>&emsp;&emsp;è¯¦ç»†çš„è¯´æ˜ &amp; æ•™ç¨‹åœ¨ä¸Šé¢çš„é“¾æ¥ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;Maya ç”¨å†™ C++ å¼€å‘ä¼šæ¯”è¾ƒç—›è‹¦ï¼Œä¸€æ–¹é¢æ˜¯ç¼–è¯‘é—®é¢˜æ€»æ˜¯è®©äººçƒ¦èºï¼Œå¦ä¸€æ–¹é¢åŠ è½½äº† mll ä¼šå¯¼è‡´å ç”¨ï¼Œæµ‹è¯•èµ·æ¥å¾ˆä¸æ–¹ä¾¿ã€‚<br>&emsp;&emsp;æ‰€ä»¥æˆ‘ä¹‹å‰æ¨å´‡ç”¨ Python OpenMaya åšåŸå‹è®¾è®¡å†è½¬ C++<br>&emsp;&emsp;å½“ç„¶ sonictk ä¹Ÿæåˆ° Fabric Engine å’Œ Maya Bifrost ä½¿ç”¨çš„æ—¶ LLVM IR çš„æ–¹æ¡ˆæ¥å®ç° JIT ç¼–è¯‘ã€‚<br>&emsp;&emsp;å…·ä½“å¯ä»¥å‚è€ƒå¦ä¸€ä¸ªé¡¹ç›® <a href="https://github.com/giordi91/babycpp">giordi91/babycpp</a></p></blockquote><h2 id="LLVM-çƒ­åŠ è½½"><a href="#LLVM-çƒ­åŠ è½½" class="headerlink" title="LLVM çƒ­åŠ è½½"></a>LLVM çƒ­åŠ è½½</h2><blockquote><p>&emsp;&emsp;<code>babycpp</code> åŸºäº LLVM çš„è§£å†³æ–¹æ¡ˆæˆ‘ç¼–è¯‘æ²¡æœ‰é€šè¿‡ï¼Œä»£ç æŠ¥ç±»å‹é”™è¯¯ï¼Œå› æ­¤ä¹Ÿæ²¡æœ‰æµ‹è¯•æˆåŠŸã€‚<br>&emsp;&emsp;ä¸è¿‡ä¹Ÿäº†è§£äº† LLVM æ˜¯æ€ä¹ˆå®ç°çƒ­æ›´æ–°çš„ï¼Œè¿è¡Œé€»è¾‘å’Œ Python æœ‰ç‚¹åƒï¼Œä½†æ˜¯ä»æœ¬è´¨ä¸Šä¸ä¸€æ ·ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ä¼ ç»Ÿçš„ç¼–è¯‘å™¨éœ€è¦æœ‰ å‰ç«¯ ä¼˜åŒ–å™¨ åç«¯ç»„æˆï¼Œä¸€èˆ¬å‰ç«¯æ˜¯è¯­è¨€ï¼Œé€šè¿‡ tokenize å’Œ AST ç­‰æ–¹æ¡ˆå°†è¯­è¨€è§£æç„¶åé€šè¿‡ä¼˜åŒ–å™¨ç”Ÿæˆåç«¯çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚<br>&emsp;&emsp;LLVM æ¨å‡ºäº† LLVM IR ä¸­é—´è¯­è¨€ï¼Œè¿™æ ·ä¸ç®¡å‰ç«¯ç”¨ä»€ä¹ˆè¯­è¨€å¼€å‘ï¼Œåªè¦æœ‰å¯¹åº”çš„è§£æå·¥å…·ç”Ÿæˆå‡º LLVM IR ï¼Œjå°±å¯ä»¥åˆ©ç”¨ LLVM IR çš„ä¼˜åŒ–ç”Ÿæˆ äºŒè¿›åˆ¶æœºå™¨è¯­è¨€é«˜æ•ˆè¿è¡Œã€‚<br>&emsp;&emsp;<code>babycpp</code> é¡¹ç›®å°±åŸºäº LLVM IR çš„æœºåˆ¶å¼€å‘äº†ä¸€ä¸ªè‡ªå·±çš„ç®€åŒ–ç‰ˆ C++ è¯­è¨€ï¼Œé€šè¿‡ LLVM IR JIT ç¼–è¯‘åŠ¨æ€æ”¹å˜è¿è¡Œé€»è¾‘ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;æˆ‘ç›®å‰ä¸ªäººç†è§£æ¥çœ‹ï¼ŒLLVM IR æ¨¡å¼å’Œ Python æ¨¡å¼è¿˜æ˜¯ä¸ä¸€æ ·çš„ï¼ŒPython æ˜¯è°ƒç”¨è‡ªå·±ç¼–è¯‘å¥½çš„æ¨¡å—æ¥è¿è¡Œçš„ï¼Œè€Œ LLVM IR æ˜¯ç›´æ¥è¿è¡Œæ—¶(JIT)ç”Ÿæˆæœºå™¨è¯­è¨€ï¼ŒJITæ¨¡å¼çš„è¿è¡Œæ•ˆç‡æœ‰æ—¶å€™æ¯” C++ çš„é™æ€ç¼–è¯‘è¿˜è¦é«˜ï¼Œå› ä¸º JIT å¯ä»¥æ ¹æ®è¿è¡Œè¿‡ç¨‹æ¨æ–­ç¨‹åºä¸‹ä¸€æ­¥çš„æ‰§è¡Œæ¥ä¼˜åŒ–éå¿…è¦çš„è¿è¡Œé€»è¾‘ï¼Œæ‰€ä»¥ LLVM IR çš„æ€§èƒ½è¦æ¯” Python å¥½å¾—å¤šã€‚å…¶å®æˆ‘åé¢äº†è§£äº†ä¸€ä¸‹ numba æé€Ÿ Python çš„åŸç†å°±æ˜¯åˆ©ç”¨ LLVM æ ‡å‡†å®ç°çš„ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ä¸è¿‡ä¹Ÿæ­£å¦‚ sonictk çš„æ–‡ç« æ‰€æåˆ°çš„ï¼Œè¿™ä¸ªæ–¹æ¡ˆåªèƒ½è°ƒç”¨æš´éœ²çš„ä¸œè¥¿ï¼Œæ— æ³•å¯¹å†…å­˜çš„ç»†èŠ‚è¿›è¡Œå¤„ç†ã€‚</p></blockquote><h2 id="åŸºäº-dll-åŠ è½½"><a href="#åŸºäº-dll-åŠ è½½" class="headerlink" title="åŸºäº dll åŠ è½½"></a>åŸºäº dll åŠ è½½</h2><p><a href="https://github.com/FXTD-ODYSSEY/CMakeMaya/tree/master/projects/sonictk/hot_reload">https://github.com/FXTD-ODYSSEY/CMakeMaya/tree/master/projects/sonictk/hot_reload</a></p><blockquote><p>&emsp;&emsp;å¦‚æœä½¿ç”¨ä½œè€…æä¾›çš„ github ä»“åº“çš„ä»£ç ç¼–è¯‘ä¼šæœ‰é—®é¢˜ï¼Œä½œè€…çš„ thirdparty ä»“åº“ç¼–è¯‘ä¸é€šè¿‡ã€‚<br>&emsp;&emsp;æ‰€ä»¥æˆ‘åé¢æ˜¯æ ¹æ®ä½œè€…æ–‡ç« çš„ä»£ç ç¨å¾®è°ƒæ•´ç»„è£…åˆ°ä¸€èµ·å®ç°çš„ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;è¯¦ç»†è®²è§£ä¹‹å‰ï¼Œæˆ‘å…ˆç”¨æœ€ç®€å•çš„è¯è¯´æ˜è¿™ä¸ª hotreload æ–¹æ¡ˆã€‚</p><ol><li>ç¼–è¯‘ä¸€ä¸ªå˜å½¢å™¨çš„ mll æ’ä»¶ å’Œ å¸¦é€»è¾‘çš„ dll æ–‡ä»¶</li><li>mll åŠ è½½ä¹‹åä¼šè°ƒç”¨ dll çš„functionè¿›è¡Œè®¡ç®—</li><li>ä¿®æ”¹é€»è¾‘ä¹‹åé‡æ–°ç¼–è¯‘ dll</li><li>mll ä¼šé‡æ–°å¥åœ¨æœ€æ–°çš„ dll å®ç°çƒ­æ›´æ–°ã€‚</li></ol></blockquote><h3 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" class="headerlink" title="å®ç°æ€è·¯"></a>å®ç°æ€è·¯</h3><p><a href="https://sonictk.github.io/maya_hot_reload_example_public/getting_started/">https://sonictk.github.io/maya_hot_reload_example_public/getting_started/</a></p><blockquote><p>&emsp;&emsp;è¿™ç¯‡æ–‡ç« éå¸¸å¥½ï¼Œä¸ä»…ä»…è®²è§£äº†ä½œè€… hot reload çš„æ€è·¯ï¼Œè¿˜é™„å¸¦äº† windows lib dll ä¹‹é—´çš„è¿è¡Œé€»è¾‘ç­‰çŸ¥è¯†ã€‚</p></blockquote><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/e6dc9087/90f7f29f4db2deb75e3cad0924734436.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;ä»£ç ç»“æ„ä¸Šéœ€è¦å°†æ’ä»¶åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯è°ƒç”¨ logic ç”Ÿæˆ dll<br>&emsp;&emsp;å¦ä¸€ä¸ªæ˜¯ deformer çš„ä»£ç ç”Ÿæˆ mll<br>&emsp;&emsp;å…·ä½“ç¼–è¯‘é…ç½®é€šè¿‡ cmake é…ç½®ä¸¤ä¸ª project å®ç°ã€‚</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ logic</span><br><span class="line">â”‚   â”œâ”€â”€ logic.cpp                  dll ä»£ç é€»è¾‘</span><br><span class="line">â”‚   â””â”€â”€ logic.h</span><br><span class="line">â”œâ”€â”€ maya_deformer</span><br><span class="line">â”‚   â”œâ”€â”€ deformer_platform.cpp      è°ƒç”¨ &lt;windows.h&gt; API åŠ è½½ dll</span><br><span class="line">â”‚   â”œâ”€â”€ deformer_platform.h</span><br><span class="line">â”‚   â”œâ”€â”€ deformer.cpp               Maya å˜å½¢å™¨ deform è°ƒç”¨ deform_platform æä¾›çš„æ–¹æ³•</span><br><span class="line">â”‚   â”œâ”€â”€ deformer.h</span><br><span class="line">â”‚   â”œâ”€â”€ plugin_main.cpp            Maya mll æ’ä»¶åˆå§‹åŒ–å‡½æ•°</span><br><span class="line">â”‚   â””â”€â”€ plugin_main.h</span><br><span class="line">â”œâ”€â”€ scripts</span><br><span class="line">â”‚   â””â”€â”€ test_deformer.py           æµ‹è¯•æ’ä»¶æ˜¯å¦ä¿®æ”¹</span><br><span class="line">â”œâ”€â”€ CMakeLists.txt</span><br><span class="line">â””â”€â”€ readme.md</span><br></pre></td></tr></table></figure><h3 id="dll-åŠ è½½æ–¹æ¡ˆ"><a href="#dll-åŠ è½½æ–¹æ¡ˆ" class="headerlink" title="dll åŠ è½½æ–¹æ¡ˆ"></a>dll åŠ è½½æ–¹æ¡ˆ</h3><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/e6dc9087/f1b64e13564f1397cbfbe5c238e4f86a.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;ä¸Šé¢ä¸‰ä¸ªå‡½æ•°è°ƒç”¨äº† window API æä¾›çš„ <code>LoadLibrary</code> <code>FreeLibrary</code> <code>GetProcAddress</code> åŠ è½½ dll </p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/e6dc9087/0d97569dbeef6f0dac0f5d7a4f960fe4.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;ç„¶åå°†åˆ†è£…åˆ° <code>loadDeformerLogicDLL</code> å’Œ <code>unloadDeformerLogicDLL</code> æ–¹æ³•é‡Œé¢ã€‚<br>&emsp;&emsp;deformer åœ¨è§¦å‘è®¡ç®—çš„æ—¶å€™è°ƒç”¨åŠ è½½ dllã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/e6dc9087/3b60f5c6dd778aca372e3c8525a0561f.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;è¿™æ ·æ¯æ¬¡è§¦å‘èŠ‚ç‚¹è¿ç®—çš„æ—¶å€™ä¼šè‡ªåŠ¨æŒ‰ç…§ dll çš„è·¯å¾„è¿›è¡ŒåŠ è½½ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;é—®é¢˜æ˜¯æ€ä¹ˆåœ¨ C++ åŠ¨æ€è·å–åˆ°å½“å‰ dll çš„è·¯å¾„å‘¢ï¼Ÿ</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/e6dc9087/38411b72f163aada48c813abf905b0d0.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;åœ¨æ’ä»¶åŠ è½½çš„æ—¶å€™é€šè¿‡ <code>plugin.loadPath</code> å¯ä»¥æ‹¿åˆ°å½“å‰ mll åŠ è½½çš„è·¯å¾„ã€‚<br>&emsp;&emsp;åªè¦åœ¨åŒä¸€ä¸ªè·¯å¾„æ‰¾ <code>logic.dll</code> è·¯å¾„å³å¯ã€‚</p></blockquote><h3 id="é‡åˆ°çš„å‘"><a href="#é‡åˆ°çš„å‘" class="headerlink" title="é‡åˆ°çš„å‘"></a>é‡åˆ°çš„å‘</h3><h4 id="ç¼–è¯‘-dll-å ç”¨é—®é¢˜"><a href="#ç¼–è¯‘-dll-å ç”¨é—®é¢˜" class="headerlink" title="ç¼–è¯‘ dll å ç”¨é—®é¢˜"></a>ç¼–è¯‘ dll å ç”¨é—®é¢˜</h4><blockquote><p>&emsp;&emsp;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œmll è¢« Maya åŠ è½½ä¼šäº§ç”Ÿå ç”¨ï¼Œmll å»åŠ è½½ dll ä¹Ÿä¼šé€ æˆå ç”¨ã€‚<br>&emsp;&emsp;åªæœ‰æ‰§è¡Œ <code>unloadDeformerLogicDLL</code> æ‰ä¼šè§£é™¤ dll çš„å ç”¨<br>&emsp;&emsp;ä½†æ˜¯å ç”¨ä¼šé€ æˆç¼–è¯‘å¤±è´¥ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;äºæ˜¯æˆ‘ç”¨ CMake çš„ API å°†æ—§çš„ <code>logic.dll</code> æ”¹åå« <code>logic_old.dll</code><br>&emsp;&emsp;windows ä¸‹è¢«å ç”¨çš„æ–‡ä»¶è¿˜æ˜¯å¯ä»¥æ”¹åçš„ã€‚<br>&emsp;&emsp;ç„¶åæ‰§è¡Œç¼–è¯‘ç”Ÿæˆæ–°çš„ <code>logic.dll</code><br>&emsp;&emsp;è¿™æ—¶å€™éœ€è¦æ‰‹åŠ¨è§¦å‘ Maya èŠ‚ç‚¹çš„æ›´æ–°ï¼Œè¿™æ ·å°±ä¼šæŒ‰ç…§åŸæ¥çš„è·¯å¾„åŠ è½½æ–°çš„ dllã€‚</p></blockquote><blockquote><p>&emsp;&emsp;CMake æ€ä¹ˆåˆ¤æ–­ dll æ˜¯å¦å ç”¨ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰æ‰¾åˆ°åˆé€‚æ–¹æ³•ï¼Œäºæ˜¯æˆ‘æƒ³åˆ°ç›´æ¥åˆ é™¤è¿™ä¸ª dll åœ¨åˆ¤æ–­ dll æ˜¯å¦å­˜åœ¨çš„æ–¹æ³•ã€‚</p></blockquote><h3 id="extern-é—®é¢˜"><a href="#extern-é—®é¢˜" class="headerlink" title="extern é—®é¢˜"></a>extern é—®é¢˜</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> MString kPluginLogicLibraryPath;</span><br><span class="line"><span class="type">static</span> DeformerLogicLibrary kLogicLibrary;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æºç è¿™ä¸¤ä¸ªå˜é‡ç”¨çš„æ˜¯ static é™æ€å˜é‡ã€‚<br>&emsp;&emsp;ä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆåœ¨å…¶ä»– cpp æ–‡ä»¶é‡Œé¢è°ƒåŠ¨å¾—åˆ°çš„æ˜¯ä¸åŒçš„ å†…å­˜ åœ°å€ã€‚</p></blockquote><p><a href="https://blog.csdn.net/sksukai/article/details/105612235">https://blog.csdn.net/sksukai/article/details/105612235</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> MString kPluginLogicLibraryPath;</span><br><span class="line"><span class="keyword">extern</span> DeformerLogicLibrary kLogicLibrary;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;åç»­æ˜¯æ”¹æˆ extern<br>&emsp;&emsp;ç„¶ååœ¨ <code>plugin_main.cpp</code> é‡Œé¢åˆå§‹åŒ–å˜é‡è§£å†³é—®é¢˜ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;è¿™ä¸ªæ–¹æ³•åˆ‡å®è§£å†³äº† èŠ‚ç‚¹çƒ­åŠ è½½çš„é—®é¢˜ï¼Œä¸éœ€è¦ <code>unloadPlugin</code> æ¸…ç©ºåœºæ™¯ä¹‹ç±»çš„æ“ä½œï¼Œæµ‹è¯•èµ·æ¥æ–¹ä¾¿äº†è®¸å¤šã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      C++ å˜å½¢å™¨çƒ­æ›´æ–°æ–¹æ¡ˆ
    
    </summary>
    
      <category term="CG" scheme="https://blog.l0v0.com/categories/CG/"/>
    
      <category term="Maya" scheme="https://blog.l0v0.com/categories/CG/Maya/"/>
    
      <category term="C++" scheme="https://blog.l0v0.com/categories/CG/Maya/C/"/>
    
    
      <category term="à €Maya" scheme="https://blog.l0v0.com/tags/%E0%A0%80Maya/"/>
    
      <category term="à ‡Cpp" scheme="https://blog.l0v0.com/tags/%E0%A0%87Cpp/"/>
    
  </entry>
  
  <entry>
    <title>Maya CMake æ„å»º C++ æ’ä»¶ç¼–è¯‘ç¯å¢ƒ</title>
    <link href="https://blog.l0v0.com/posts/5875a169.html"/>
    <id>https://blog.l0v0.com/posts/5875a169.html</id>
    <published>2022-07-01T06:21:00.000Z</published>
    <updated>2022-11-09T02:37:04.651Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;è¿‡å»æ„å»º Maya C++ æ’ä»¶æ˜¯æŒ‰ç…§ Autodesk å®˜æ–¹æä¾›çš„æµç¨‹ï¼Œåœ¨ VS é‡Œé¢é…ç½®é¡¹ç›®å·¥ç¨‹ã€‚ <a href="https://blog.csdn.net/hp_cpp/article/details/80265856">å‚è€ƒé“¾æ¥</a><br>&emsp;&emsp;é€šè¿‡é…ç½® devkit çš„ pluginwizard æ¥æ„å»ºé¡¹ç›®ã€‚<br>&emsp;&emsp;ä½†æ˜¯ä½¿ç”¨ VS é…ç½® Maya ä¾èµ–çš„å¤´æ–‡ä»¶å’Œ lib å…¶å®æŒºä¸æ–¹ä¾¿çš„ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5875a169/dedb5d9005f1dff970148bf91c26311a.jpeg" alt="image"></p><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5875a169/cfafe1377b6d4e6bb1382f53c76c91da.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;ä¾èµ–å’Œä¿®æ”¹éƒ½åœ¨ä¸åŒé€‰é¡¹é‡Œé¢ï¼Œé…ç½®èµ·æ¥è¦æåŠå¤©ã€‚<br>&emsp;&emsp;è€Œä¸”è¿™ä¸ªå·¥ç¨‹é…ç½®åªèƒ½å…¼å®¹ Windows ï¼Œå¦‚æœæˆ‘ä»¬è¦åœ¨ Linux ç¯å¢ƒä¸‹ç¼–è¯‘ï¼Œæ•´ä¸ªæµç¨‹åˆå®Œå…¨ä¸ä¸€æ ·äº†ã€‚<br>&emsp;&emsp;å…¶å®è§£å†³è¿™ç§é—®é¢˜ï¼Œæœ‰ä¸“é—¨çš„å·¥å…·å»åšã€‚<br>&emsp;&emsp;è¿™å°±æ˜¯ <a href="https://cmake.org/">CMake</a><br>&emsp;&emsp;é€šè¿‡ cmake é…ç½®å¯ä»¥ç”Ÿæˆä¸åŒå¹³å°çš„å·¥ç¨‹æ–‡ä»¶ï¼Œä¸éœ€è¦æ‰“å¼€ IDE å°±å¯ä»¥è°ƒç”¨ compiler ç¼–è¯‘ç»“æœã€‚</p></blockquote><p><a href="https://github.com/volodinroman/CMakeMaya">https://github.com/volodinroman/CMakeMaya</a></p><blockquote><p>&emsp;&emsp;è¿™ä¸ªä»“åº“æ˜¯åˆ«äººé…ç½®å¥½çš„åŸºäº CMake æ„å»º Maya æ’ä»¶çš„ä»“åº“ã€‚</p></blockquote><h2 id="Doit-è‡ªåŠ¨æ„å»ºç¯å¢ƒ"><a href="#Doit-è‡ªåŠ¨æ„å»ºç¯å¢ƒ" class="headerlink" title="Doit è‡ªåŠ¨æ„å»ºç¯å¢ƒ"></a>Doit è‡ªåŠ¨æ„å»ºç¯å¢ƒ</h2><blockquote><p>&emsp;&emsp;ä½†æ˜¯æ„å»ºç¼–è¯‘ç¯å¢ƒè¿˜æ˜¯æŒºéº»çƒ¦çš„ï¼Œä¸€æ–¹é¢éœ€è¦ä¸‹è½½ VS å’Œ CMake<br>&emsp;&emsp;å¦å¤–è¿˜è¦é…ç½®å¥½ Maya æä¾›çš„ SDK</p></blockquote><p><a href="https://github.com/FXTD-ODYSSEY/CMakeMaya">https://github.com/FXTD-ODYSSEY/CMakeMaya</a></p><blockquote><p>&emsp;&emsp;æˆ‘è¿™ä¸ªä»“åº“æä¾›äº†æ‡’äººåŒ…ç¯å¢ƒï¼Œåªéœ€è¦é…ç½®æœ‰ Python ç¯å¢ƒå’Œpoetry åº“ã€‚<br>&emsp;&emsp;åœ¨ä»“åº“çš„ç›®å½•ï¼Œæ‰§è¡Œ <code>poetry install</code> å’Œ <code>poetry shell</code> å°±å¯ä»¥è¿›å…¥å¼€å‘è™šæ‹Ÿç¯å¢ƒã€‚(æ³¨: éœ€è¦ç®¡ç†å‘˜æƒé™)<br>&emsp;&emsp;poetry ä¼šè‡ªåŠ¨å®‰è£…é…ç½®å¥½çš„ä¾èµ–ï¼ŒåŒ…æ‹¬ <code>doit æ¡†æ¶</code><br>&emsp;&emsp;æ‰§è¡Œ <code>doit init</code> ä¼šè°ƒç”¨ <code>choco</code> å®‰è£… VS çš„ä¾èµ–ï¼Œä»¥åŠ CMake<br>&emsp;&emsp;è¿™ä¸ªè¿‡ç¨‹éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;æ‰§è¡Œå®Œä¹‹å VS Build Tool å°±æ·»åŠ åˆ°ç³»ç»Ÿäº†ã€‚<br>&emsp;&emsp;ä½†è¿˜æ˜¯æ‰¾ä¸åˆ° C++ compiler ï¼Œéœ€è¦æ‰‹åŠ¨æ‰“å¼€ installer ä¸‹è½½ C++ CMake å¼€å‘åŒ…ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5875a169/911e11826073a3058551680de9aba826.png" alt="image"></p><blockquote><p>&emsp;&emsp;ä½¿ç”¨ <code>doit SDK -v 2020</code> ä¼šä¸‹è½½ Maya å®˜æ–¹çš„ devkit åˆ°ä»“åº“çš„ SDK ç›®å½•ã€‚<br>&emsp;&emsp;å‡†å¤‡å¥½ç¯å¢ƒä¹‹åï¼Œè¿˜éœ€è¦å®‰è£…å¥½ maya 2020<br>&emsp;&emsp;å¦‚æ­¤å°±æ˜¯å®Œå¤‡çš„ç¼–è¯‘ç¯å¢ƒï¼Œåªéœ€è¦ç”¨ <code>doit c</code> æ‰§è¡Œ cmake ç¼–è¯‘å‘½ä»¤æ¥ç¼–è¯‘ C++ æ’ä»¶ã€‚</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">doit c -p weightDriver -v 2020</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä½¿ç”¨ -p å¯ä»¥æŒ‡å®šç¼–è¯‘çš„é¡¹ç›®ï¼Œ-v å¯ä»¥æŒ‡å®šç¼–è¯‘çš„ Maya ç‰ˆæœ¬ï¼Œé»˜è®¤ä¸æŒ‡å®šä¼šç¼–è¯‘å…¨éƒ¨é¡¹ç›®çš„ 2020 ç‰ˆæœ¬<br>&emsp;&emsp;-p æ”¯æŒå®Œæ•´çš„projects ç›¸å¯¹è·¯å¾„æˆ–è€…æœ€ç»ˆç›®å½•æŒ‡å®š</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">doit c -p IngoClemens/weightDriver</span><br><span class="line">doit c -p weightDriver</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ‰§è¡Œ doit çš„æ—¶å€™ä¼šç”¨ python è¯†åˆ«å°†æœ«ç«¯ç›®å½•å˜æˆå®Œæ•´çš„ç›¸å¯¹ç›®å½•</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5875a169/12a58e2b26c25afaa90321434254ccb4.png" alt="image"></p><hr><blockquote><p>&emsp;&emsp;ä¸‹é¢æ˜¯å®Œæ•´æ‰§è¡Œç¼–è¯‘çš„æµç¨‹</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5875a169/105b5139b33ef1c83e10c9a0e171243e.png" alt="image"></p><blockquote><p>&emsp;&emsp;doit èƒŒåæ‰§è¡Œçš„æ˜¯ æ‹¼æ¥è¾“å…¥ æ‰§è¡Œ cmake å‘½ä»¤</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake -Wno-dev -G &quot;Visual Studio 16 2019&quot; -DMAYA_VERSION=&#123;version&#125; -DMAYA_PROJECT=&#123;project&#125;. -B build</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;DMAYA_VERSION æŒ‡å®š Maya ç‰ˆæœ¬å·<br>&emsp;&emsp;DMAYA_PROJECT æŒ‡å®š Maya é¡¹ç›®ï¼Œå¤šä¸ªé¡¹ç›®å¯ä»¥ç”¨ ; åˆ†å‰²ã€‚<br>&emsp;&emsp;è¿™ä¸ªå‘½ä»¤ä¼šè¯»å–æ ¹ç›®å½•çš„ CMakeLists.txt æ ¹æ® VS2019 çš„é…ç½®ç”Ÿæˆ sln æ–‡ä»¶åˆ° Build ç›®å½•ã€‚<br>&emsp;&emsp;windows ä¸‹å¦‚æœéœ€è¦ Debug ä¹Ÿå¯ä»¥ç”¨ VS æ‰“å¼€ sln å»é…ç½® Debug å·¥å…·ã€‚</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake --build build --config Release</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;åé¢ä¼šæ‰§è¡Œ build å‘½ä»¤æ ¹æ®é…ç½®ç¼–è¯‘è¾“å‡ºåˆ°æŒ‡å®šç›®å½•ã€‚</p></blockquote><h3 id="ä¸­æ–‡ä¹±ç å‘"><a href="#ä¸­æ–‡ä¹±ç å‘" class="headerlink" title="ä¸­æ–‡ä¹±ç å‘"></a>ä¸­æ–‡ä¹±ç å‘</h3><p><a href="http://tw.l0v0.com/#%F0%9F%92%A1Vscode%20terminal%20%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81">ğŸ’¡Vscode terminal ä¸­æ–‡ä¹±ç </a></p><blockquote><p>&emsp;&emsp;Window Terminal é»˜è®¤ä¸æ”¯æŒ MSBuild çš„å­—ç¬¦è¾“å‡ºã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5875a169/07a6a6d0ef789b42617075a90cb84b8f.png" alt="image"></p><blockquote><p>&emsp;&emsp;éœ€è¦åœ¨ terminal ä¸Šæ‰§è¡Œ <code>chcp 65001</code> åˆ‡æ¢å­—ç¬¦é›†ã€‚</p></blockquote><h2 id="æ·»åŠ æ–°å·¥ç¨‹"><a href="#æ·»åŠ æ–°å·¥ç¨‹" class="headerlink" title="æ·»åŠ æ–°å·¥ç¨‹"></a>æ·»åŠ æ–°å·¥ç¨‹</h2><blockquote><p>&emsp;&emsp;å¦‚æœéœ€è¦æ·»åŠ è‡ªå·±çš„ mll éœ€è¦è‡ªå·±å¡«å…… CMakeLists.txt é…ç½®<br>&emsp;&emsp;ä½¿ç”¨ <code>doit new</code> å¯ä»¥å¿«é€Ÿç”Ÿæˆ æ’ä»¶ ç¼–è¯‘æ¨¡æ¿</p></blockquote><h3 id="cmake-é…ç½®è¯´æ˜"><a href="#cmake-é…ç½®è¯´æ˜" class="headerlink" title="cmake é…ç½®è¯´æ˜"></a>cmake é…ç½®è¯´æ˜</h3><p><code>projects</code> ä¸‹æ¯ä¸ªé¡¹ç›®ç›®å½•éƒ½æœ‰å¯¹åº”çš„  <code>CMakeLists.txt</code> </p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®è¾“å‡ºç›®å½•</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_RUNTIME_OUTPUT_DIRECTORY_RELEASE <span class="variable">$&#123;CMAKE_RUNTIME_OUTPUT_DIRECTORY_RELEASE&#125;</span>/maya<span class="variable">$&#123;MAYA_VERSION&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®é¡¹ç›®åç§° (ä¸€èˆ¬ç¼–è¯‘çš„æ–‡ä»¶åå–é¡¹ç›®å)</span></span><br><span class="line"><span class="keyword">project</span>(&#123;&#123;cookiecutter.project_name&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ ç¼–è¯‘çš„æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">file</span>(GLOB SRCS <span class="string">&quot;*.cpp&quot;</span> <span class="string">&quot;*.h&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ å¤´æ–‡ä»¶ä¾èµ–</span></span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;MAYA_INCLUDE_DIR&#125;</span>) </span><br><span class="line"><span class="comment"># æ·»åŠ  lib åº“ç›®å½•</span></span><br><span class="line"><span class="keyword">link_directories</span>(<span class="variable">$&#123;MAYA_LIBRARY_DIR&#125;</span>) </span><br><span class="line"><span class="comment"># é“¾æ¥æºç </span></span><br><span class="line"><span class="keyword">add_library</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> SHARED <span class="variable">$&#123;SRCS&#125;</span>) </span><br><span class="line"><span class="comment"># é“¾æ¥ lib</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> <span class="variable">$&#123;MAYA_LIBRARIES&#125;</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># mll è¾“å‡ºé…ç½®</span></span><br><span class="line">MAYA_PLUGIN(<span class="variable">$&#123;PROJECT_NAME&#125;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¤§éƒ¨åˆ†çš„ç»“æ„å¦‚ä¸Šå›¾ï¼Œé»˜è®¤æ¨¡æ¿å¦‚ä¸Šã€‚<br>&emsp;&emsp;æˆ‘åŠ ä¸Šäº†æ³¨é‡Šè¯´æ˜ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;<code>MAYA_PLUGIN</code>æ–¹æ³•å°† mll çš„ <code>initializePlugin</code> <code>uninitializePlugin</code> ä¸¤ä¸ªæ–¹æ³•æš´éœ²å‡ºæ¥(Maya åŠ è½½ç”¨)ï¼Œå¹¶ä¸”å°† dll çš„åç¼€æ”¹ä¸º mllã€‚</p></blockquote><h2 id="ç”¨-CMake-ç¼–è¯‘-Devkit-çš„æ¡ˆä¾‹ä»£ç "><a href="#ç”¨-CMake-ç¼–è¯‘-Devkit-çš„æ¡ˆä¾‹ä»£ç " class="headerlink" title="ç”¨ CMake ç¼–è¯‘ Devkit çš„æ¡ˆä¾‹ä»£ç "></a>ç”¨ CMake ç¼–è¯‘ Devkit çš„æ¡ˆä¾‹ä»£ç </h2><blockquote><p>&emsp;&emsp;ä¸Šé¢æåˆ°çš„ CMake æ˜¯åŸºäº <a href="https://github.com/volodinroman/CMakeMaya">https://github.com/volodinroman/CMakeMaya</a> çš„æ–¹æ¡ˆæ­å»ºçš„ã€‚<br>&emsp;&emsp;cmake æ–‡ä»¶åŸºæœ¬ä¸Šæ˜¯è‡ªå·±ç¼–å†™ï¼Œå¯ä»¥æ§åˆ¶æ¯ä¸€å¤„çš„ç»†èŠ‚ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;å…¶å® Maya çš„ Devkit ä¹Ÿæä¾›äº†ä¸€å¥— CMake çš„æ–¹æ¡ˆã€‚<br>&emsp;&emsp;æ¯ä¸ªæ’ä»¶éƒ½ä¿ç•™äº† CMakeLists.txt ç”¨äºç¼–è¯‘ã€‚<br>&emsp;&emsp;å¦‚ä½•é¡ºåˆ©ç¼–è¯‘ Maya C++ çš„æ¡ˆä¾‹æ’ä»¶æ˜¯ä¸€ä¸ªå¥½é—®é¢˜ã€‚<br>&emsp;&emsp;æˆ‘è¿‡å»çœ‹ Maya çš„æ–‡æ¡£ä½†æ˜¯å› ä¸ºä¸ä¼šæŠ˜è…¾è¿™ä¸ªç¼–è¯‘(ç¼–è¯‘å‡ºé”™ä¸çŸ¥é“æ€ä¹ˆè§£å†³) ï¼Œå¯¼è‡´æ— æ³•æ·±å…¥å­¦ä¹  C++ æ’ä»¶ã€‚<br>&emsp;&emsp;åªèƒ½æ‹¿ Devkit æä¾›çš„ Python æ–‡ä»¶è¿›è¡Œå­¦ä¹ ã€‚<br>&emsp;&emsp;é€šè¿‡ä¸Šé¢çš„æŠ˜è…¾ä¸å­¦ä¹ ï¼Œè‡ªå·±ä¹Ÿç®—æ˜¯å¯¹ CMake æœ‰äº†åŸºç¡€çš„å…¥é—¨ï¼Œç»ˆäºæœ‰èƒ½åŠ›æå®šè¿™ä¸ªé—®é¢˜äº†~</p></blockquote><p><a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__developer_Maya_SDK_MERGED_A_First_Plugin_HelloWorld_html">https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__developer_Maya_SDK_MERGED_A_First_Plugin_HelloWorld_html</a></p><blockquote><p>&emsp;&emsp;ä¸Šé¢çš„é“¾æ¥æ˜¯å®˜æ–¹æ–‡æ¡£æä¾›çš„ä¸€ä¸ª Maya æ’ä»¶æœ€ç®€æ¡ˆä¾‹ã€‚<br>&emsp;&emsp;ç›¸åº”çš„ä»£ç åœ¨ <code>devkit\plug-ins\helloCmd</code> æ‰¾åˆ°</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5875a169/307f99197358b87b94dc4bb1629731b8.jpeg" alt="image"></p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">2.8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># include the project setting file</span></span><br><span class="line"><span class="keyword">include</span>($ENV&#123;DEVKIT_LOCATION&#125;/cmake/pluginEntry.cmake)</span><br><span class="line"></span><br><span class="line"><span class="comment"># specify project name</span></span><br><span class="line"><span class="keyword">set</span>(PROJECT_NAME helloCmd)</span><br><span class="line"></span><br><span class="line"><span class="comment"># set SOURCE_FILES</span></span><br><span class="line"><span class="keyword">set</span>(SOURCE_FILES</span><br><span class="line">   helloCmd.cpp</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># set linking libraries</span></span><br><span class="line"><span class="keyword">set</span>(LIBRARIES</span><br><span class="line">     OpenMaya</span><br><span class="line">     Foundation</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build plugin</span></span><br><span class="line">build_plugin()</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ„å»ºæ’ä»¶çš„ cmake ä»£ç å¦‚ä¸Šï¼Œæ ¸å¿ƒéƒ¨åˆ†æ˜¯ <code>$ENV&#123;DEVKIT_LOCATION&#125;</code> é€šè¿‡ç¯å¢ƒå˜é‡è·å– Devkit çš„è·¯å¾„<br>&emsp;&emsp;æ‰€ä»¥æ‰§è¡Œ CMake ä¹‹å‰å¯ä»¥é…ç½®ä¸€ä¸‹ç¯å¢ƒå˜é‡ã€‚</p></blockquote><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> DEVKIT_LOCATION=F:\maya_devkit\devkitBase</span><br><span class="line">cmake -G &quot;Visual Studio <span class="number">16</span> <span class="number">2019</span>&quot; . -B build</span><br><span class="line">cmake --build build --config Release</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5875a169/237ae7978ede1e82be485148ff36e526.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;å¦‚æ­¤æ“ä½œï¼Œå°±å¯ä»¥ç¼–è¯‘å‡º mll äº†ã€‚(å‰ææ˜¯è¦é…ç½®å¥½ VS çš„ç¯å¢ƒ)</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;è¿™ä¸ªç¯å¢ƒæˆ‘é€šè¿‡ è™šæ‹Ÿæœº æµ‹è¯•è¿‡ï¼Œåœ¨ win10 ç¯å¢ƒæ˜¯æ²¡æœ‰é—®é¢˜ã€‚<br>&emsp;&emsp;é€šè¿‡ cmake é…ç½®å¯ä»¥å¿«é€Ÿæ„å»ºå¥½ C++ ç¼–è¯‘ç¯å¢ƒï¼Œæ¯”èµ·ä»¥å‰æŠ˜è…¾ VS æ¥æ–¹ä¾¿å¤ªå¤šäº†ã€‚<br>&emsp;&emsp;åˆ©ç”¨ <code>choco</code> æ¥å®‰è£…ä¾èµ–ä¹Ÿè§£å†³äº†å„ç§ç¼ºåº“å¯¼è‡´èµ·ä¸æ¥çš„é—®é¢˜ã€‚<br>&emsp;&emsp;é€šè¿‡è¿™ä¸ªäººæ‡’äººåŒ…å¯ä»¥æå¤§é™ä½ Maya å†™ C++ çš„éš¾åº¦ã€‚</p></blockquote><!-- TODOå¤šè¿›ç¨‹æ‰§è¡Œ chocoè‡ªåŠ¨æ·»åŠ ç®¡ç†å‘˜æƒé™ --><h3 id="2022-7-8-è¡¥å……è¯´æ˜"><a href="#2022-7-8-è¡¥å……è¯´æ˜" class="headerlink" title="2022-7-8 è¡¥å……è¯´æ˜"></a>2022-7-8 è¡¥å……è¯´æ˜</h3><blockquote><p>&emsp;&emsp;æœ€è¿‘åˆ©ç”¨ submodule æ·»åŠ äº†å¾ˆå¤šç¤¾åŒºçš„ C++ åº“ã€‚<br>&emsp;&emsp;clone ä»“åº“ä¹‹åéœ€è¦ç”¨æ‰§è¡Œ <code>git submodule update --init</code> æ¥æ‹‰å– submodule</p></blockquote><blockquote><p>&emsp;&emsp;ä¸€äº›æ³¨æ„äº‹é¡¹è¯·å‚é˜… readme æ–‡æ¡£</p></blockquote>]]></content>
    
    <summary type="html">
    
      CMake ç¼–è¯‘
    
    </summary>
    
      <category term="CG" scheme="https://blog.l0v0.com/categories/CG/"/>
    
      <category term="Maya" scheme="https://blog.l0v0.com/categories/CG/Maya/"/>
    
      <category term="C++" scheme="https://blog.l0v0.com/categories/CG/Maya/C/"/>
    
    
      <category term="à €Maya" scheme="https://blog.l0v0.com/tags/%E0%A0%80Maya/"/>
    
      <category term="à ‡Cpp" scheme="https://blog.l0v0.com/tags/%E0%A0%87Cpp/"/>
    
  </entry>
  
  <entry>
    <title>Unreal Python å¯¼å‡º MetaHuman æ§åˆ¶å™¨å…³é”®å¸§</title>
    <link href="https://blog.l0v0.com/posts/1b238b83.html"/>
    <id>https://blog.l0v0.com/posts/1b238b83.html</id>
    <published>2022-06-24T08:57:06.000Z</published>
    <updated>2022-11-09T02:37:04.745Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;MetaHuman å·²ç»åœ¨æ•°å­—äººé¢†åŸŸé‡Œé¢ç›¸å½“æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆã€‚<br>&emsp;&emsp;å¹¶ä¸” UE å®˜æ–¹å¼€å‘äº†æºç å·¥ç¨‹ã€‚<br>&emsp;&emsp;ç›®å‰ github ä¸Šæœ‰ä¸å°‘äººæ¼”ç¤ºè‡ªå·±å¥—ç”¨ MetaHuman åŠ¨ç”»çš„æ•ˆæœã€‚<br>&emsp;&emsp;äºæ˜¯æˆ‘è‡ªå·±ä¹Ÿå°è¯•ç€æƒ³å°†å®ƒ UE é‡Œé¢çš„æ§åˆ¶å™¨åŠ¨ç”»å¯¼å‡ºæ¥ã€‚<br>&emsp;&emsp;ç„¶è€Œå´å‘ç°è¡Œä¸é€šã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1b238b83/01.png" alt="image.png"></p><blockquote><p>&emsp;&emsp;å®ƒçš„æ§åˆ¶å™¨å…³é”®å¸§æ˜¯åœ¨ sequencer é‡Œé¢ã€‚<br>&emsp;&emsp;æœ€åˆæ˜¯å°è¯•å°† sequencer çš„èµ„æºå…¨éƒ¨å¯¼å‡ºæˆ FBXã€‚<br>&emsp;&emsp;ç„¶è€Œæ§åˆ¶å™¨çš„å…³é”®å¸§å¹¶æ²¡æœ‰è·Ÿéšå¯¼å…¥åˆ° FBX å½“ä¸­ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;äºæ˜¯æˆ‘æƒ³åˆ°å¯ä»¥ç”¨ unreal python è¯»å–å…³é”®å¸§æ•°æ®å¯¼å‡º json<br>&emsp;&emsp; Maya å†è¯»å–æ•°æ®è®¾ç½®å…³é”®å¸§åˆ°æ§åˆ¶å™¨ä¸Šã€‚</p></blockquote><h2 id="unreal-python-å¯¼å‡ºå…³é”®å¸§"><a href="#unreal-python-å¯¼å‡ºå…³é”®å¸§" class="headerlink" title="unreal python å¯¼å‡ºå…³é”®å¸§"></a>unreal python å¯¼å‡ºå…³é”®å¸§</h2><blockquote><p>&emsp;&emsp;æœ‰æ€è·¯ä¹‹åå°±å¥½åŠã€‚<br>&emsp;&emsp;ä¹‹å‰æˆ‘ä¹Ÿå†™è¿‡è„šæœ¬æ¥è·å– sequencer å…³é”®å¸§çš„ã€‚<br>&emsp;&emsp;éœ€è¦æ³¨æ„å¦‚æœæƒ³è¦ä½¿ç”¨ unreal python çš„ API éœ€è¦å¼€å¯ç›¸åº”çš„ C++ æ’ä»¶ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1b238b83/02.png" alt="image.png"></p><blockquote><p>&emsp;&emsp;å¦åˆ™ python ä¼šè·å–ä¸åˆ°ç›¸åº”çš„ API æŠ¥é”™ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Import built-in modules</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># Import local modules</span></span><br><span class="line"><span class="keyword">import</span> unreal</span><br><span class="line"></span><br><span class="line">DIR = os.path.dirname(os.path.abspath(__file__))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">unreal_progress</span>(<span class="params">tasks, label=<span class="string">&quot;è¿›åº¦&quot;</span>, total=<span class="literal">None</span></span>):</span><br><span class="line">    total = total <span class="keyword">if</span> total <span class="keyword">else</span> <span class="built_in">len</span>(tasks)</span><br><span class="line">    <span class="keyword">with</span> unreal.ScopedSlowTask(total, label) <span class="keyword">as</span> task:</span><br><span class="line">        task.make_dialog(<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">for</span> i, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(tasks):</span><br><span class="line">            <span class="keyword">if</span> task.should_cancel():</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            task.enter_progress_frame(<span class="number">1</span>, <span class="string">&quot;%s %s/%s&quot;</span> % (label, i, total))</span><br><span class="line">            <span class="keyword">yield</span> item</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># <span class="doctag">NOTE:</span> è¯»å– sequence</span></span><br><span class="line">    sequence = unreal.load_asset(<span class="string">&#x27;/Game/Sequencer/MetaHumanSample_Sequence.MetaHumanSample_Sequence&#x27;</span>)</span><br><span class="line">    <span class="comment"># <span class="doctag">NOTE:</span> æ”¶é›† sequence é‡Œé¢æ‰€æœ‰çš„ binding</span></span><br><span class="line">    binding_dict = defaultdict(<span class="built_in">list</span>)</span><br><span class="line">    <span class="keyword">for</span> binding <span class="keyword">in</span> sequence.get_bindings():</span><br><span class="line">        binding_dict[binding.get_name()].append(binding)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># <span class="doctag">NOTE:</span> éå†å‘½åä¸º Face çš„ binding</span></span><br><span class="line">    <span class="keyword">for</span> binding <span class="keyword">in</span> unreal_progress(binding_dict.get(<span class="string">&quot;Face&quot;</span>, []), <span class="string">&quot;å¯¼å‡º Face æ•°æ®&quot;</span>):</span><br><span class="line">        <span class="comment"># <span class="doctag">NOTE:</span> è·å–å…³é”®å¸§ channel æ•°æ®</span></span><br><span class="line">        keys_dict = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> track <span class="keyword">in</span> binding.get_tracks():</span><br><span class="line">            <span class="keyword">for</span> section <span class="keyword">in</span> track.get_sections():</span><br><span class="line">                <span class="keyword">for</span> channel <span class="keyword">in</span> unreal_progress(section.get_channels(), <span class="string">&quot;å¯¼å‡ºå…³é”®å¸§&quot;</span>):</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">not</span> channel.get_num_keys():</span><br><span class="line">                        <span class="keyword">continue</span></span><br><span class="line">                    keys = []</span><br><span class="line">                    <span class="keyword">for</span> key <span class="keyword">in</span> channel.get_keys():</span><br><span class="line">                        frame_time = key.get_time()</span><br><span class="line">                        frame = frame_time.frame_number.value + frame_time.sub_frame</span><br><span class="line">                        keys.append(&#123;<span class="string">&quot;frame&quot;</span>: frame, <span class="string">&quot;value&quot;</span>: key.get_value()&#125;)</span><br><span class="line"></span><br><span class="line">                    keys_dict[channel.get_name()] = keys</span><br><span class="line"></span><br><span class="line">        <span class="comment"># <span class="doctag">NOTE:</span> å¯¼å‡º json</span></span><br><span class="line">        name = binding.get_parent().get_name()</span><br><span class="line">        export_path = os.path.join(DIR, <span class="string">&quot;&#123;0&#125;.json&quot;</span>.<span class="built_in">format</span>(name))</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(export_path, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> wf:</span><br><span class="line">            json.dump(keys_dict, wf, indent=<span class="number">4</span>)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¸Šé¢çš„è„šæœ¬ä¼šå®šä½ MetaHuman çš„ sequence èµ„æºï¼Œç„¶åå¯¼å‡ºå…³é”®å¸§çš„ä¿¡æ¯ä¸º json</p></blockquote><video src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1b238b83/meta_export.mp4" autoplay="autoplay" loop="loop" style="width: 100%; height:100%;"></video><blockquote><p>&emsp;&emsp;å¯¼å‡ºä¼šåœ¨è„šæœ¬ç›®å½•è¾“å‡ºä¸¤ä¸ª json æ–‡ä»¶ã€‚<br>&emsp;&emsp;Maya å¯ä»¥è§£æè¿™ä¸ªè¿™ä¸¤ä¸ª json å°†å…³é”®å¸§è®¾ç½®åˆ° æ§åˆ¶å™¨ä¸Šã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Import built-in modules</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> traceback</span><br><span class="line"></span><br><span class="line"><span class="comment"># Import third-party modules</span></span><br><span class="line"><span class="keyword">import</span> pymel.core <span class="keyword">as</span> pm</span><br><span class="line"></span><br><span class="line">DIR = os.path.dirname(os.path.abspath(__file__))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">progress</span>(<span class="params">seq, status=<span class="string">&quot;&quot;</span>, title=<span class="string">&quot;&quot;</span></span>):</span><br><span class="line">    pm.progressWindow(status=status, title=title, progress=<span class="number">0.0</span>, isInterruptable=<span class="literal">True</span>)</span><br><span class="line">    total = <span class="built_in">len</span>(seq)</span><br><span class="line">    <span class="keyword">for</span> i, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(seq):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">if</span> pm.progressWindow(query=<span class="literal">True</span>, isCancelled=<span class="literal">True</span>):</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            pm.progressWindow(e=<span class="literal">True</span>, progress=<span class="built_in">float</span>(i) / total * <span class="number">100</span>)</span><br><span class="line">            <span class="keyword">yield</span> item  <span class="comment"># with body executes here</span></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            traceback.print_exc()</span><br><span class="line">            pm.progressWindow(ep=<span class="number">1</span>)</span><br><span class="line">    pm.progressWindow(ep=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line"></span><br><span class="line">    <span class="comment"># <span class="doctag">NOTE:</span> è¯»å–æ•°æ®</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(os.path.join(DIR, <span class="string">&quot;BP_metahuman_001.json&quot;</span>), <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> rf:</span><br><span class="line">        data = json.load(rf)</span><br><span class="line"></span><br><span class="line">    attr_map = &#123;<span class="string">&quot;location&quot;</span>: <span class="string">&quot;t&quot;</span>, <span class="string">&quot;rotation&quot;</span>: <span class="string">&quot;r&quot;</span>&#125;</span><br><span class="line">    status = <span class="string">&quot;Import Keyframe to metahuman controller&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># <span class="doctag">NOTE:</span> undo æ”¯æŒ</span></span><br><span class="line">    pm.undoInfo(ock=<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> channel, frame_list <span class="keyword">in</span> progress(data.items(), status=status):</span><br><span class="line">        <span class="comment"># <span class="doctag">NOTE:</span> è§£æ channel_name</span></span><br><span class="line">        has_attr = channel.count(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> has_attr:</span><br><span class="line">            <span class="comment"># <span class="doctag">NOTE:</span> å¤„ç† `CTRL_C_eye_parallelLook_4311` æ ¼å¼</span></span><br><span class="line">            ctrl_name = channel.rsplit(<span class="string">&quot;_&quot;</span>, <span class="number">1</span>)[<span class="number">0</span>]</span><br><span class="line">            attr = <span class="string">&quot;ty&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            parts = <span class="built_in">iter</span>(channel.split(<span class="string">&quot;.&quot;</span>))</span><br><span class="line">            ctrl_name = <span class="built_in">next</span>(parts, <span class="string">&quot;&quot;</span>)</span><br><span class="line">            param = <span class="built_in">next</span>(parts, <span class="string">&quot;&quot;</span>)</span><br><span class="line">            axis = <span class="built_in">next</span>(parts, <span class="string">&quot;&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> axis:</span><br><span class="line">                <span class="comment"># <span class="doctag">NOTE:</span> å¤„ç† `CTRL_C_teethD.Y_4330` æ ¼å¼</span></span><br><span class="line">                attr = <span class="string">&quot;t&quot;</span></span><br><span class="line">                axis = param</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># <span class="doctag">NOTE:</span> å¤„ç† `CTRL_L_eyeAim.Rotation.Y_4387` æ ¼å¼</span></span><br><span class="line">                attr = attr_map.get(param.lower())</span><br><span class="line">            attr += axis.split(<span class="string">&quot;_&quot;</span>)[<span class="number">0</span>].lower()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># <span class="doctag">NOTE:</span> è§£æå‡ºæ§åˆ¶å™¨å±æ€§è®¾ç½®å…³é”®å¸§</span></span><br><span class="line">        attribute = pm.PyNode(<span class="string">&quot;.&quot;</span>.join([ctrl_name, attr]))</span><br><span class="line">        <span class="keyword">for</span> frame_data <span class="keyword">in</span> frame_list:</span><br><span class="line">            frame = frame_data.get(<span class="string">&quot;frame&quot;</span>)</span><br><span class="line">            value = frame_data.get(<span class="string">&quot;value&quot;</span>)</span><br><span class="line">            attribute.setKey(t=frame, v=value)</span><br><span class="line"></span><br><span class="line">    pm.undoInfo(cck=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><video src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1b238b83/maya_load.mp4" autoplay="autoplay" loop="loop" style="width: 100%; height:100%;"></video><blockquote><p>&emsp;&emsp;åŠ è½½ unreal å¯¼å‡ºçš„æ•°æ®ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;å…¶å®æ•´ä¸ªæµç¨‹ä¸å¤æ‚ï¼Œæœ‰æ€è·¯å°±å¾ˆå¥½å¤„ç†ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      python å¯¼å‡º sequencer å…³é”®å¸§
    
    </summary>
    
      <category term="æ¸¸æˆå¼€å‘" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/"/>
    
      <category term="Unreal" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unreal/"/>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unreal/Python/"/>
    
    
      <category term="à €Maya" scheme="https://blog.l0v0.com/tags/%E0%A0%80Maya/"/>
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
      <category term="à ƒUnreal" scheme="https://blog.l0v0.com/tags/%E0%A0%83Unreal/"/>
    
  </entry>
  
  <entry>
    <title>TA å·¥å…·äººçŸ¥ä¹åˆ†äº«</title>
    <link href="https://blog.l0v0.com/posts/4831b5c7.html"/>
    <id>https://blog.l0v0.com/posts/4831b5c7.html</id>
    <published>2022-05-13T07:01:29.000Z</published>
    <updated>2022-11-09T02:37:04.807Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç . æç¤º(ç¥ç§˜å·ç  + å…‰å­)</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="fb2a28db5cfcf9c9721b69dcf0363b14040b5af44b27fd3fff3b68c3375036b0">8fa7d4705a9ea2d031cb386fd946285e6e06572cf6c48f20e4e93f64b126b72db6b7070420aa236602175645bb6952c708919e626ce7b5e4c9c2ce5233d6ca9453e4f985eb5743e515e7e935ac25f512d0f37151972dbb079320ba80baf7dae7ccaa2eb91279dadf7fae0cd4262f09e41d57257560714d89b9af184023b2489db4bac09dbd48acd6b62afd5caa56a00f6f79ea0af9ac70c063e872bf819a68a2f89eaf8c81a21e51f6ab1f3a91025894049dae0b604fa859081918fe71a35ae052db98ec94da9fc5e86e3b1c47227fdd244f77c5d59986005ff1b37286a218081a45349fb7adfb304c0003889441cf65d8496fdacb5ae626f86cc705c44ec6dda6978212ff1f8765b7703603ed6a599d0a93ffe9f9dfd4e7c9dad9e0c7fb3209cff2d173b0d26a14698b982aa16795ba1c9c4e5fb82e68ceac65c9880efd73f864cc74b71e289cb8746e0a31a88c699d10061e0f6116f89794b6d9354c1efdb850045d101d9e0c030a24efbb7477eb2becacec083ee04f093825fd6962f4317a4b3f553088968ef83a4a75d513bf33b67661ed7de6d6c3031b951e520bfd77cb56bb9e19e51b9423183a90e7d1f5f075f485c636dddd9a8459cfcfe2cadd1650faa702db0d76a330e4a290c8f0d45b5722f9c9c96832eee831e28401f0b6c37dedfcdbd5bf55163e425cd9bf30829fbf0df2cc1b800ebb507259c8b3c9a75fa762ef15d114128837d20e3580fa42e53ce665aae00ab344918af64b2367c6392988deb437ee90ee6b4861b478d04d26e52d7961e89a0e81ca50a7dfd02e120efc9f512509787e17233ec1ff4beaa77529df7a8386a41408d9a844c5cb821b5aa53a5b8cae826ed484ea7c6da24779a250ff142c7ad81c297c5da0ba7f3d28c2a3e2bfc2b03f202bfa704493dfbe15e5f26507c7b0f457bf970078dcd18ca628f22e077502247056c2a1d4b9fa49bc2d351911658c42055ad7565dbbea5a31951b8d57dfbaf4ddebe35f2955d7f432061e053534991dc4b5a2007744109cf95db12d1dbec4d2f1ccadd86e00ecca3c715900d4a3d20a0a2473f286a19338cceb8fefebccd22d3595c47ae4e16e5f765465d5c2a40ce91ff17956dd0d7269026bcfe8f275d7a567bf1ab90c42604644ff7739a7cf8480c886a41f366d4b3be977984df0b5f62ec74ca8b5f0adec0f87056981231c0bc1ff80c9bf140de1e145d4dc1f67fe16ee20e42393fd17123ec10faae3eedbdf412eda34476fc33865ef5e75884850c9b298b08c634770c1200719f2e1b8581a72d3b5c0ba3b36c44735a7154105c1840e67ebf48ae8218a48c50d2a7544069871910348093c1c2daff52d9eaa1979a0ecb8b45225a853788add60a2065357de2ac4b9ebd2bdff6ed6ac397d79a90f131f5f25cca4c579dfc98b42a6b1f7baf9ac75abda0d30630c9a4593d0dfbf5e6f5abd72067cd3c0b6d866e58e9c8f3512b3021df06db8d5136a3a71aa6fa09ea53b22c0bc1b7d493e5c7c5569134a48104d5a733893b69f906eeda936aae13aa421517613df2efb8ec05760c64d9160cebcc2397c87da19316b5c1c6f8bdd75939349208d5ddbbc914cd55ca6ae18cb4eaf00586fbbcabada19aa2d838006b21e01ce6248498a5156a20771d48f782aae443a190095ca944bf566c764822bd990184f16823098204ccbb28cdbf0bc2a29df18a50a2fe0db80c4942bf1a68bf016a402ac07228be42d7963f88715756b5259c186bc06bdd8b85ac7dd7351d0588469710d479fccd5f861bddc58a185ae32af2ca8ed902f520ccc2d3eb89d704926d18b4ad2a236193b964c3926164848442597d26069fbbe6f62ed84adf22eceadbbee7fe316f66ca213bcf2aa4ab1ec4eff93aa7ed8bb3fc4d8642ec387641b70b5638696e8633e0c33fd32c314cb3a555f6585477e35832d241472a45be77133edd20344a06e3a4d048387521aff1f9b32b2bf9ecd118618d7574d8e9c6084e2247891c85f365a1d76356bfd1601f5594435e2772d0d5388dfaafa2593b6f6ba6c62cde9ef6322efa8e906417bc9c5fa63a3172c57a7f8150376517828973f43a387447cc8418510ecd7b7eb755940902dabc5fa709ba77ea0ff0319c20826362ed3bb3f08b833b5e81f6f26507f18ad5dd7496eac072c81bac588ff3ad1a05ac184b1a34653a710699a042fa49c470a9302c696580049c0dd76764eb7b92622039b18f232b371bd2b98a0a9c3c02a55c27ffac699179091e4e1baaee1c350e5e17fd7cbc3ad1a7a1c8a47f7110270f841fc0ef62ae25c2b208ddfdea840c9e68ac15eae56377d2aec241f1b6a33a769b5834ab19ba87e87ec66f54df90f1d2bccc32ac9bd47b19b6e91e095c6ce0a080448abe58ed75e6fd658259a4a9bdf6d0a62247fcedd35137c402443c9a8b567480658522ff0c5bc84daa9bba58738ce29e8bf3182872d377b8df42d429dd451d8888aedc99ee256a5d51324c248f62c25b4fdde33968c9f5988ac211af6946e5c669fab6e3b3c2eac93d9c25073de7cf611da967574d0418d71e6d26903a64b3ed2503116d3ba620ccf937acdc99f97358d01d7a6ceaf8846f1fe47923534c0656cd38730ec02d3a0cedf3354df80cc08abd6fac6bd4c7b2a9a1011a22b1f319bbc27b0f42f8ef8c92e39c81432549c73ba3d14ed0a100cb7ef63ab3d77811758f63a45e15794a10f762ed897510b8f818fc224c3f894d88951eeea89bb5c4802397a28280351e02cd6718364b5ac378826283619a425225c59a428cb714cb8352ced7d4a60cf591b59222a98374e6e2b95077b398dc5491ddadf129dc6116cf888e9d5b89de9a266cf5e041e157dd40d8f985569e9d02edb4796b38c83ac08f75b4fa36a1a0f6689496b5f42b1cada3acec32db498cc8777c63c5c778508fdfde422d8c69900685391869cb8dc684527a650d53c12c38345eebfb48a80d223da4bc65eeac5e6f1bca6293a514207ac8b39ac9fa5981aafad0c9773fe9fdb70f9084320a923ea5ca9105c8110bf360466c64c5b567060e6cb45503ae75c20b12a1ad93e4c0a3f08e9a267da59b8a1dba01bebe51c67f1051699513e52360f30fc1d83f3b32142910fe1fc3ad7f3fd0f7125751d533a5064ca4bd9998336809a992fa7b894103603884e8ebf3029a43587c66f81f5b5f0e4f1c635ced6842a042a807456f956be55d88cfb72ebab0b2ad14ac5ce7b412c739ee05fe845ba9b30b9aefc2d760fb2e1f7e1e3d7da54548ac1dc7255b590fec949885ae239fe529b0cb798f966b30e6e279146fe4fc1ccaa6786167cbcfc734a7055915a767340cb15955dac6809199b407eae57c775b999b982c765926862e5a478f17e33e9099ee21d01ac33ca7419621d0243ac60381fb529896246c2ccecb0c7e4252c8f8da1278cfd82970698a7aca505d7d5f0831f4665f48cf8a02f3040c133837efdd05173c4a5a5cfad1783aa3c21bad167a88414a27747fa68786a037f6f9201644612cd515294d3f5641d24e749ee39f86042aa93b301fec4cfe4df2ea2f7cac4b9ec942443777e17ae2b2bed3a04f31c92cb3a49df11512173597affe9790c85a0963d74eabea4fecdc8e9c7423f0b98ead090109ccd786a574e52777569a7018570d5d1b973826e4607362a9c102e9f96eea5a2dbc68ac24fda58ce49fc39ae06b859fd175f6289bdf37f033b3e27215545a0b1c60756154471003e59ee4d6139a9bd506149d9e84163407b60f489d2b2927baa171c27525437d8a0960612c11dd56b0c8b50bd78dcbd1ac513f3c806304a1434b6659663d3d59fabd4f5395957261a4b63b03541288f04aa4dc1f05a39518b213bcf09dc801ba4a402fa3b5f168d09292a77aa78a4c3140580737c7e5f4442c5477987175acf6fd9c57834177f11e90a88d0536b13f31100f697710d1e8d731d352b73d5e75f3b35fd334ce927f9a3794a6c88d709d3824c51750a215f4c19529d89fe077ad9c6b01c2319ffff7d85f710272fc620c82090e1c697343389f71a6576beea4911cde87cf0411c8dbdb7db05252109b21e7fe5e402c07e5b02aa42e8a074ff3ea0506e927a633855cf3847d90c9b78ddd67d3e6a7184346dbd1c4ed25fc61a5d01e76f0e2edcac5d12ab1f912e4900511d7c7df8ef7730638318d25300018bbbbde83f3e5686282d7b7835e459bda0ce31569449a873a51dff65955942f1f3a270b7dac3238d0031851af179ef39bc140b4d715d6a5484f40af20c8feb2d5035f70f37524be26a10374f93870c405bcc696700ba1e509dbf0e24a840bc28c746596079bd8feeb67a4d933f9f4691e7c131d43f6f89ce0a799b1134b8201b4f3bf0969446926b525542d774b1616fc344455e78240a0bdd13576198d950a0e62d84fb0a488e34c90a7322bd9d6fc4f54d0526b238c0395811b21e2bd51ca6ee7dbba677406239d848c2664821b2d978d910f8e105ac780b9c126df7498eb4aad68b431fcb16a023a1b072b4367881de98c9592e100af419922b3197a34e8aa1487ee91c079c915751f9317904f52bc1ee827358a5c6d1c6090d63397ea1c3c49454d1c49e7d0f8ccea1dd319dedc8075a0b8ad0b094d14c925e9c778fd5601e180cfe6ab550f9362babfcf7f0d041038f6b1710fa4d0c8cce3eeac02246070b47e8ac1ad2606de8ae71c89a416affef37d087fe187d67b9538564b9524fa3df08018a88d9f46ecf1c5140066697c5841594f4702c93dd73ffc20eb824b8ee73461427c620d80716cf143f6d935f886ee7c8d4285eb0850bc546700906f9ad3ad4f6e48c1b66fa5ebd75a95a13c56b0838efb3ab1c59e42301bf10f673024e0533c4a1f99b560e15ebd9657a532860f8917dd8fb9a05f9030d0627014b26a6740494cb2fb90ffa5c53b104596d76107557e12fb8b310e74362e70c4c207b28e172bac9592b3cf8a9bf06f19e47ebb08e41bcbd1a1abcf931b78bf9c137289e1bc5bda8d3c316b713934ec9af620b63fa823289ceef2482c0d0e657b81bbb05afd4755d6f41a93a27ca1fae71c52bcd5c7a84770423204d918de498a78cccb07a129b3ae63ae5d49ebf3e934e084e9f84220f6859d679a98c3053ca81243bd2bf9f8b7b8639eaa8b94239374e0f65e40581bbbcf0ab29def2808900c12378add6ea1c3884dba3dc1a9abf94417f34b539129e8eb2629544771fa32d261676ccf605d389d46152681d30900d4bc1a2221e1509a789814cdbf823015de8e5ac05ae280f7d72085806e8067c9dacf7903fed4569efeef1250e8183ac9238fd8b0dfa7f74a0b462860c47f986a9af2bc57e8081f4af248fff773a91d3a39c2efb90824cbdc1d6898630b6e456d3ad03b258c78240713155e89f30b57d2cdf65ca9b07b04338b378eaedb594fa971aa6e34e4206184288e281ed9d6bfd96b97ce510ccdcc5c5eeebe4d004e1cc999cdc0a71405a0b868475b91978a88115b2df1487ddd25bedab60596e858e8bd1200e28b361c58b732b220e5594cc880d2fb16c8f64b80f68f8bba3f14343c2ec9064c64ac148da0259091446b7c520baa32f2ad9eaf57246225e6bd01a726b8413dce00245473c9f8f91f4db3cdd0cbdc643cadad1994fde266ecb8cb9d7c0a72efab8a6011d8c29b9f31fb8ed25d72a63e13ee7b2858707a6c8cb611b57ca79a217ecc52f2a996c54f959cd13dda00148525ece56d5c3f601cb64d8dbe4755a6b6b7811b4525960df0e4bddf59e8b5fb22c8a5f4d66cfd6b3d71a99927f2a6b394f11c08aecad3898859b2a000e8ab8b1d5541b2d1819c1f389d8b58cb14a848cfa17fc5304fc0041857048f9c683ed3a9656777b60d1171903d4e27b7c727c30b55c8c81b571b6998195642d968f78d1d299c23274ecb752241677c78cd2ec822f7f35912ac028db6f125bb8259a2b603626819a4bd1792cdfa31e099533bdf7456d8b73bcf06f38c2d35125433f66a5b6ccb51128b38079168bc6f90e506861bafe3c5bf9a33277d688ec9aecf4b04c59527f6be82d854eaba5d49b79368b435097168c25121f66638fa33228c484352adc69a07955cd29db03fdd5dcb99fbaa9ec9293c1040b1a933da8dd5161e1c165dd6d0b0082c3c077f076fd46991db5726b91f0d360e2d929e698e0d09d57aa83c412bd04db6b6fc3b772d0606f9b8e9b9bd90a1423db27def94d07fdfecf632cbde3cf2e9d3f080801a04e1ec111c4996e7e7c0fb39b03262388afd6f4192852987fa8c39a319680f1a2a059fd58d2a85c9191287d34eedde8ad7b32b4dfb2b17b1737f7085daaadb7d1227dea0c581acf07201aa02014b934fcddfd7834217537f2ab8adafe5b817fe994b49aa8692343cc7fed84e2ee2dc3fe9171ab6694eb65ee2c15e6a463e468e887570b90f0fb016157fb36a3e5c71a55cd46a09af7232129a2a61ad34673c580c3ae990e881337fea4f04c1096718af3d607c4c4923b0f95fb5f15d5df5b8de95871d708aaffe34ccb146d75561d4ba8507d3e5865316a17d84c036870f744d96151098dad673071a39ea8adf73a1793b617de4a65dac6e63f9d962c9e187ebc8d9772f39064198d6abcccfbde981077a7350d8dd82ec3136a8abaade9b8a36e43e96e12aaecf2f03d7be622170caa8359d69c1c2a71bd21b9b24da721cf0c3e7f695d1cab162ad57b48a3a7a01ffbe5723ffa3826d135bc27e05e57029066cfe8c19427fea48b65fc0c7215dbfdc72f1bcb52db4d1c5a01af1384bea939d9855c39b15b504671290d20ed1fd9efa9c879ccd5dd4d8c4d9ea180565318c77a3a6dfb0a16c14b382cfbb64df4590bd2a3b0674ae7f9418a8f28ab0bd3158ac16421bf144c8c894c64931625365dd006ef22c29b93d14c22babee0d1215538d04a4fae6b534d664e8e8326232d4a985ac1e1f49a717c08e04287d774f395ac12fe3c8c1a6eb766fe3ffc0641774d6ee0b8cf2b59c72e86621f2a790e06f0069b234a692211a357b8c22185cd70acc53856e27ce3bb54b83564cd613592aa74e1b647991a5b6e8e75a5f3571da05fd798abc6c130373fb0f0dbec756d02f827567f0d1d381d60538fd3153c66d56b012050782b1b6de7d6d216c33758a2f7d3780eff6d9e3e1a5adf598a54c9b3cb1f3d28f707766fb7276d1d2c39bb40423648ad239c1c5848d74669af5eea35e914993258f4d6aff95cc7f521eeb1d99b6bdae3cac8e786af29d445d078d19465b26e11e427f2deb7f138a8ab630d1d8fdab636c64b1e3241b0a587e8200530d7ef164c7f9674f24d410c2db6cf556e15029834a7f01aa4b563d2e91fe066ab1d89a373f313432f3663fea34caeb0009ab267d81d8bf003ebf727b552fdbe6ab882c8162e4a4cf589c2243fce3b59d6985621b3ca88d3c8aa7fc8e50c52e5e9c61ffc6a2c910d0deaa7a03f50d68652d0c5b0a4a0908637f93257791c2a872f72f37c27912307e53b5e8385c9ebc6ceda46db959ecb37e565a30b7c5352c87520ac6b2542ebb6ec39e5d0107fe2d833023cb8c9d7b1320ce7b15a41cfdb7bc499938b05178facf71e7c52a88a26e9e44af7674c388267c95dd2547cf34848954d73862d06985efa06c1bcc82e12e4f0ee3ad0481c7b32c77226ac6b5f025fe17dd47de3201d3b25b6526faecc51ef230f028de0df3246615056ea4ca0d901db7ed4e9402469785f7b3416ddd66fa747400929cabbe77d685f24c9c488cea6ce9b1d56c6c81d9396bc15d9d194b5dc37d22d852d20b19a74818f9a32c101d1fdf373ceedf33c99cf6ff5ad64d8c09d77d780c87c0bd20c672fc1e91e6d4d055130b4d42744c903f640db33a2f2f8397518269423175a251f51e810007eb7bb95a099d0364acb9c6f96acfdebf569d0c3d572a406e544702ccb9be27036b325cbd7dd75f08fb0ca2db5d8f65291f6d1dcd9dca4ccaf3de92789b2fb5eeac1a91f56b61fe075a81e6499a7cbef9c3e59ba91ed5fed565a80cc307805f1dfbadb5ebb0cf38ae656f3ac4cea27c2de36c88b31e9e2e7bab92af0fb6b8b04b1efba530781cce6e49deca95172e286ecf324cd1785c2a4d5439d9becdd276fd464e97df27554f6b7e508a35151afb06d5c8113920598cb72bbdd6cb48dd3ad6cab309091b84d4524a58c262b713f459228c424e0fc2340f2e6ea8f6de06186f9e6d1392b56eb35e5093475304c915f4b89d05bd05b23290f2ed3338e09725dee38e109eabcd92168db4d319df75b4ec0a4102a9a806a177bb4e8f1b25e841f4a9cc6621373e89c6595e5f51e7cf1b91cfa58c79679cd653782ea375abbd3223ac1b7b36a4450009883a009a2ba0f44920284026e7a2030882d1c62c4bd0d40643fc7717e708bd78b43b71a65af1ee58e973dee3f70dc32c0663e2636ce28f571beaae7c17699ac8ca802bb29ea2b63c5f26c487ca6487072cc0fecf84ebb7c5d088aa00a218d4548c0c519d47495187b0f062b83630218090c1a68a704118528a225e1d52ddb09ab074e2e1a85170175c03107266ec0fe4c0b6ef3dab705a21d96aa989bbee153b35fcd8d6dea8cf925d7f42f89233e11d72facf4017ecb423b2ecef55c74e109c5fe9a85387d58fb8c285c84f8daa6c9be94080799309b12e65a7b3f4ad911e3c281f0b54db5a579964ad742a248a90056e344e2053d5d919114d3e40378a8db5c8423e177b1ee429ebfca4946b013c79d6a743e5448f6b88a4708d399e5114a6e0660a5d7cf354cefd285c1aa9fcb8d25543f51e32b71656e4b249fe60cf248e98f72d1f661e80cfe54511e7fdcd00f46dd2ddb7b3f9aba026bcb68aea6821703b3dd3fb6b64507287fa36e29afa28a2e1c069ba4d21d1c067376c67fff08105d14204ee472076ba990c4f8652cecc1855b1145503e12e3b07b8db10d468c07fc9ea7fea0138f33d3d13e30e16801330caa88c23e961376390cd390975472a3281f12a59992fa356e8bf97e67f71d64ed2dda7df30d27eb507cb29570beb41d47231ff837669683c82bf0753e8bc9b7e8ac8abdde1cd794ffb838bedcf52e12b789c93deb35e4daa109e07c1306433f037f72d83656dce0ffe1672700812602e988162c9295ca31dc6ab8f0d493a918d4b5bcf7ceb95cebeb4edb295db614b327ab28608fb25f24bb144022a87e66ae43eff370eb302de6467dfcfbbb8329a7aea1676519dfe3114c1ea6668eefe085491325d825d4556daaeccf428e069ad24e5a8e113947d6d19ba72d82ea7fbfea3871c077057674e6a3cd04c467b3c32a8d40d212f975c7003ab81be8c2c827eb1c74756cff558dac3cc13f99017bb1604c6f38888d663fb3a7a96685c862f81b2434c84dd6ba083698d3f2dcb9a4a629bff2120c8cfb7e271844d8e57f5f4cacb7b1aa9394f9980b7775ee24487fa46ad100a021017fb222fcd7cdb4ddb80bdeaee7e64bd954d3822510c61bd38294b4dcd55e175ce231c86419a0ad44373870a795174b15cb6e1f6cceb4e63eebc5bdefea5fed59f253af69bea6e033247c1572c40b47e2792f8d34e34be8f7d90f340a8a7afbc1a3fbb555cb76303fc0527fb993df76334b3887fe613b9573ee12dffb1dd7ab6715eeca5f4f28ac9fc71f08d2cbf98c989e5d5bfaf44a0519c8b9925dd42dd2136e90f2278171bc037ef4c4a1121fd4c616aeabe0aaa02970debce08a97454b5c0bad33e91255d0ab7f44b71c9aafdb37b7365d294db5c6175ad7cdc3d396f65a1b76b3fd0388eea8b8c5e0eb8a1750edf4c16582395da5207b56225fb375d25fe21226647e6ddc0141f7a475bab6781a67065b73e4f6ca2469c20c4d0f3fa762a65d6d61f8bb5060666fa3aca71b0ca682853f259490bfa14520cfd136415888f3034bfb928af4ba16831c4420c25c73f6e51083f6d69e48633bde32b396994e51bac0e5395c00600282e6ceeabe622d315ba7d6f8cc5bbdb49e38ef4e6884ee74a2eb6e0b4688f87da223ff954c8b3ce05f858cb8ff5ce63c3450d8ec8583db7387be852975608e409248a9538980ab20ad8da5344ae3855be2188ef086c94861e3db46c2e65f84bf9f965c168c45f4acbd20beec8f0e2183c8a471a4f38b38348dab3900858e050a4f258148e6184610596334d10382d150cfb4ab54e98051509ae67e87ced0ca6b5eb1cff3c4e1866bd35fec02efa96cd688a59faee57ed1f8b95c21d5e6eca42cb2bb1871233529c4af1eabe79ccdbec8f41d7d0f18378e915ceaa8dec08a148c55edc2f0d6e169e83d36d5577d278b424a433fb2ce6fd3a2ddc9c60bd55c3fcf1e97abad7133c90e3578851a9ae898a6faff8b7788edb76df7c43afbe799a519fd864c46a8eb18ab9bef622969e8e82387e19fa551e7c9ec609c0bb248f796287591c8bd70423cef929028f060ab5c34d273be15408f4b474b85537bb4d27868324bfc52428b454e773d8111bb45bcded7fcde6d9acbe2facc6192fa483b2b2096b868a614382d331f756c08dfe70e2910b0f767778545ad5bbb79cac49b79cf990112f2386036fed9435c7972fafcda30418161eaa68a30f527f1300e3b3a1842aec219a015e8cc2a03b5fcfd2b9b3ba782be8834d91490c243b0e0b984276cac82406897338db70fccf15b42a58cab504cf941194c25b29f199adea59954cb41a3578d6bc23bc2beb5e142ddf587246f77f187c105a4176a8bf78a82b068441a2d51a17af44e7241dd313ec6516f8ff6fe3c6f606cfa917de6413fb4bfaefde58eec54469aff9b6fed5d8618ff19f29a827bbf576f05351df5611f8f3d4ed754b5acc13bd7bb1962ea7deadeb02423ca604f63b85132de332349336cf75d4c4652343dd14536707e3fb4d4fffd1393425662016adb4fdf2eb0a24dccf75b24a075d2b230028b08c29822a174edf14f9349d1b2b48e80b5643836f33b199ca535d1a0fceb8f63d0e8cb1281c134456224681789e271add11650763db2712f29f3a23ca1cc845549fd77f3503c7d7f1aaf1b8e5e8cfbda41847e34e27f80cda5625adb730e77c064ff22035bbeeef398af056839ec8198bbdd5e8b4540c07de52568d81d6f7939d7cdcecfee1242d9baf04b71c761cff6a4aa70c32245515134e4f41b999c58529f9746a9c784c1086a5b62d895d710740e1ce5a9cf3e7f39a9c588c9b5e94f0f2b945c55a1d76dfd2c7e723b48de32aa01ab05b45eae5b00c443af52d72ed86a34c9cbc997d7665ab78389428718352abb5fb7853ab0d238b94eea092a94790449abb88fd58efeb8fe047dca4b5dcb91ac8482a03619c407bb562cd6232c3843ebfb61187fefe890de2d81236076a218fd3a6571827831d8d4912c8c4fe00955b5e48a1e89ab946064431a3e0e4bd76ecb445a0866b245e641a3af747dca807da16c355a444ba5e7a663eec995bb347d246e5c70fb23e2017a13f798fb571ee0dfd98da8aaa6a33c4c2eb1b9eb211cbf88059097e89d8e7afc9f45f589ad1b554f12a979b22b1330aabe09396f57d786fc52718dd7afda8f9679d16d13c6e73b0499bacb411b96bc4e1fc61bf7b3add288241b2c2d08fead59c4d6a385f8bcab775827a3fb9848da3ee319cbc1bd615b0bc8f4747cefe72dbbc2264398bc62b4671a00624106c7ab45a9701e75ce03eea712fc2445d9bd01da87e3365d930ed5390732f26785e0801ba593e5f57ab06463e5d4460e240d62d02e3093fe23c87b5b4a4be59fbf391a94a2bccac00ad12a53c3d1ecdb21fa6dde784ab2474a8bf9ffba514d22bbb653cf62f3feb2ab624bce584628f321fd22b7343878f7b371823bea3550d84e1f91bf2b1e4aa6e87b076d1c4fbc8cac0bef6853c074d27a5b925478951db0c69ebb40d65a4411109d88789e745915acf057e2582c30ac8ace8a01f61b2687e8b71d4bedb241feeb3c0b1fe12ee808fe6f981804fc9c495c6c97cdf4c6202a7a021a2036dbde3b5f54d1271e10891485a8c7eca6a5c4d5c0d3b506527ad00107fca053d28f955f1db0d087ba7f4d954b02b8d169587aa7adfd6889573e1935ada68c88846b0c03b66a490167b78978a59ca9936226bf0d687bf7e3f5a89f5042c0711777ab684eeefdfee6747f9a5b788bdee9356fbc2f560f58611506878e0ec2abafa7fe06f8f3d8f8d4386d50fc050e18c74f09f7a36fcf7b110d2ae78cfcac824f029c252477c4aa944d14614990487df7a4ea79c310558eeeba46e608c351989bc22e36134a439f38de9f6cbe9014f23cd6851c6c08a18f983e75dd2c69187c0becf19df8ac969f87c7b44f8882c01521e0bc225b48bdaa3fc321f03babaaefd60ee0728c39b6d821f963145e335efaa0c1c6d4818bbdeacc339690e9fa6cb945a56f55edd0c67cee9a95f585523b37d3efac8abd5ae3a2f5fb71c0a399a6e780cf87159f405a70c61385d8344300bf535f56505e11d3d2aafff43d4e682eb02735f084a8496742f23593459f8a2984b683371d59096206fdc936f356091590b3ad809ffafb2b7f983050839555d3158e057de7733e4d39d5adbb37f0462c80e30e972dccde17b27aaf8237577676bfabf613772e92bbf9185d3b474d215f7279de634849fd6934334fc711857d9fe337cc7e85f1a24d66b649fac998b3792cf7c46161dfe0574b546dcc1a2ad3196511ab130607a1ac1e772b837573890b27702f9fec7c0545eb0df2129050045a21a11645b3a4b7ca18ae6d9c5b4cad0f7f441472413903ad3aef973b00e5ed88962599b51ab025de8fa1e79c251bcae5e15079b73fae17cb647848860e3a80434df4c9c5b99437258a81e869509e54ca037b4b92c6ed99954683ad3d469f4b22aee33eb37b79ad1ec365554da2bf4415e9247f2b74a9f4499e2c6be4db517ab23a0dbf6b6bc33549927d469513c242b03edd77a5d52e384550b56f749abbafe31760d76ad9edf497bb790a98791542efac0f64d5231ecae5ed00a3ea8d498951a1fce4b4b47218d9374f62d38453b1f3e7dc37d27942ee716ea00e7225f6f8fb3a0e378e491b291006962a133e8ecf61e42eccd003efaf873811c7d116b194fb10f8bf646bdff19b563128b2431d5bdc69881ef0f694305f0ff838e931172392acb88c49b7cb07531bf6f13d983cb8e2d5f50c08df71640635936d3213641d935c4f9ef3680f9db88a82a1677319f3e04aa9fe3742c67e5c3484379089a3188249bc1c5f9605b89661f6926c8bf99c11a78858f058e108be900d169ebc1a1e742aa08c7c462703d80c96298502ea7752e257652cc75f4508957b0c9394c4fa96a055b1d371621b3aca4d923d261d6de397280541946e00c6506022822d4738581196e28956c383099bbeaeab78bada79e7b826a81a7fafa6ed714d36c5b8144d0dcf70fa6198b8d2a3493b3dcc82190dd000582ffce3f7638f478b7a144fc15b7312986995433f701ebcc32bd4fbc8c35e84b69aa2a21738a7d7fac15e4cafddec0b9c0b4f09a23f19e13d3fc7903c67ba1f002ce9e22f49b09ed0a6a0106aa1b81471d6dbd046fba8ccf15174150e8f76d77d8ab9d1cf04c08b0ac8e125a001318927699cbe46df994f43320b77435c087de28235a316e4e8c34cd73c5e48775d98824b88b2112443285c32abb0b57cfee39d80f8b458baa7e43361c9202108e352c8d8c51a8ca0c9113b76707073064ba96844c414f3e5c37f1fe3dc8fc7efbb27b0998dba63d39a2ec82ce19b9a3c0b51e46d0018d06cd9c1b886ab49725fcfd65439b57ab1fe05f0b814eb1d1a819dcf64e6919ad4c9fa78bd1133e58076894eea3616c8846af2ebf926a44881580e617a733eeaf8b2ab5269428111f5b8e597fd0e2baf714099a04e73b94917a87bd4d192b1623c63c287a3cf372bea2cf56b916ced14860c14701ffa23ab2b1cba136c758e48dd4bbd263d87dcdc8e1b1480d349974f4eb5e76db2deff85ac0d48ddd02689406058565cf5f010d7493e7e15c204fdcb5d4dc52f7b11f0b43765a8da0485ffa6b75afe5b881a7353a787adf5ea69db7f9d9af48948d123ac70a7d95f0aed1a8a0bd937249602f5a959934f7208205592f73a8e9f1e2791bcc2c299933c1f1fb7b50db2e35d4b69381d6766f1d2519bb5397c690beaedcdd228e2d9f32578648aed03012c5ecb3c8f28b0b581e16cc9ba6be3e8e625beb0dea5985d96d9dcfeec69824a98dfbb76153fee0969d28c4c49bcefb55342fc2435e549ecc8986624513de76f060bf9bcfdf92d0b3248300ae2b4baca3c9ca7610df44f5f58ca4053d6a8aaf1d795aca713ae0002149e9ef9bb6f2f58b6dca8f10fa23595625c2571c18d0fbed47a92613464f192703112953052a27cb5e0ec40807626b5f4d911b928af6423355ecb74044269f3eb7745be427f33afe8cf7d8d6f55557ad09082a75902d5ef846ffd85a93ad806de9ca02eb4e36b557df019e5fd60b5b9ea26792372511dd33f8b5df6c86681d8c722257b9daf593401c67488ef27ffcb3eac186563657d00c82a3ff53938fdb7dbb5b51c4132d633d57c4519811b61e4fe1baf34f846f001e96c0c16a6edcfd6932b88c333aef51bd364f82986292b0c63fdfab6ab7412f67025fa63fe36caba70c95e4fced67d4f45797e1ed858c2fd32b29fcf51c61bbb0f800410f10123867150625fbbcf64a074cda092925110644ac549e1418b85125f1712f338abcb6c8a516b2a66188a7df577eecb474df0e869cce6d3f5e2a8e822da76f5eb12b763168cd9469e62b664db7ddfb867c3fa6bc0653f684cdc6bb0cecddf5c212362dead5c87987429f6b4aaa98415f7ba0a8ec58ae834359f459fa86e988bf214b26b3e8422e7129b3d0809551122be29b1586159549e0366bed0925875552415951ca71d98904c695313aaf631df87566d566c389a999bf0a5226bc1876c46b587aa66b5f26a534336bf740cdf5656b822a81e48b5068bfa345af1b74f7fbb6a2c59b54751fad370b6f2d77c66928fd0df11f1cee75110b132b5e4c9f7086b43fe828868d46e5edbcf834450e0146bfc0b535e102360bec39d420a1ac0d61d613dd7aade39759e6543e8e7de9a925a2d9c6f4ee89d897d98858306d9d0956df041861c4e18705f1a54bb83037c1d67a42d7c717dad762a3f209cba7b1595687613a0b173413f7e4e3605ba491481225c04c5319c1a4e8ddc79c8299d2f08da66e63ee56d2196f17287964c70593f80617d8a48d68014773d05bc81e8cddb65adb217804f19186b493dc9fdfbecc0fb6cd5a69c9d33801c4c1a31873d7b994bd095e1080181f2198648606798e175f0e05ce9a2e1b83c50d424ee2ff081401fd49c41dc6a8f374cee05291b5b08abbd673f0d66f85f30bb5bdd0dac505a90b4a0bc8f1417388c9b6a5d88634b742b648e8bb39ddd7834d00ef34c5d32c43ee3ba9fbe2c54e12833caddb6fba00b246c83cc28905b3cadc0f48558807738ba1fca33f012085663a6f9852c59a6f37bb9de622c062e6bd9a31c38f0dc1c424e66741a0db74dcecf8273fb66e22b3dae9d87b95b3dc9d9e65567cf7123f8e5681371bdf09debe56a4d274df7598ca5df84521383aee23ac8c1a9c1dc3f48f4772249e45a0dc4fd8145068728bfaeb2b477c07437cf49ecb0f6a05c741aef4df3d495b28a23b12cebb12bd6cec8d629556d55147d6ae3ce601b0247f19180fee1c0992224361b515e5358f874ae2770c29b7a92a4cfb481766835b6a6694048d31a64fd2f958d23273570663168382b70d86467df5093ac7e5837b1b9588a84aba349c0539a68b92e81d966737b506ccf9772b606998d6fa05150357f6dcf0d7c38098b2090dea40677420846ac0dfcab70714581ceb0136e876cf212dd73567b33c2d692dda7e1a59d1fa32d2d53534257e2ad02663cd72f87230d829acc172bcb2766bb596b0f35385c02b0761b236a2f8122329bc1e79d26d5a83eb4c6d39827890049f0a52d8b84c885d621de71bdd116b029b8ac561dac8b66136e362ec017ffdd82c1e6643da74f6fa8cd60f743ddeb3c19bb1daf0b0353a716286be8e99c29d91ddbe41227c606f31a48930005bf2d77bbd2ef82e0a439d4545ad4254f7795edd62837f22a1ccd90762cfde79e42f6441e6cff588c37cef73086415da708b848280d4c1dc9af5b44b51f95dfc156bebe7668c7434edad5b93c27bdf5f7928d00d04692ca61ad6cd07be336ba0326a76ac7faa1b2b6a5755ec6fdea96a22a2a4b2269459b40d8828c2166cbb00e61bd55053387b0392eb11e022455efcd5665b052445b715ccde9ace3ee107c021058df727b8532f806e3a9f11f2aa38513e2742d8f907cc412f65fe12bef6304a64693435dff47750a59cf77ad6485c1d7e2f8724d2d2fcf526b0c6fd0da3c6241ff08952812bab9903103cd617e5be020284c3693d45f757ae8e252ef06be91acd206ed9f5e030e1a6180d3519eb559e5c780073b25e4162da06c46cee20533f1247537084e897b5c7177fb7178736c5337afbf3fcb718023bbe3890f0ffeab56349481d18a7e1abb316d9815cd8bac6f55144e8882786e8bb9c6a06929bda7b00fbaed214a36eee1701c73a51b926c2a5b2b8f1a7eef407a97623aeeb4e74660ed5d44f98b67d9d11e9668788a73a477cdcb64e509b960b9f4fcec688bb9efa916fb43bc8b7a7e4c174de79c8b07603954ceac76cb97117f3460676f30a5fa988a2b436e37a814d04a9fe3641c4c21daf2057476e831fc5b9c72b571a2a0b845726062f78fa0f7bba897a7d82cea9f9dbf8489d33546042704dae1c5420491382b14dd5fe7c8b834216eb37128c458989e822f25ee14acd08b1d8c1024b61d7ae6a138f9a50a09b8833100ee60a83ea08f7bade4c6f8d86464b52698ddb89624a655ebd8501839f74d0804cd8697125d4b050cf401eb1002706e21ce8362cb774301343ad940d8bc5e6c6d4e41fa756194cb83b6e019bba349f4bf56d85d2c2c3202a7f1a488b0d7e2fc48170c5291e5b651714d2c8e4e3869498dd9f39e9e33b5cd938a81b6b27a391fd08e350f198d888eb60ddb788a29f99935e988e9145095a816fd4cedf6306102c7c135e6525fce80df748c9d2a81f64b5da870b2aed8388b96a5bae8e257cf117641e17515a8886a4b91b53d38b71b5f991af3bbbb27d0da7d5eb32318cf654a6f43e080c69294a8e59cffc9bfab71b3cb65c37837a38fc3057c8c9666384faaec63c1ba22d9e043798882d9eee8e171c1e030483b3b779e2317b6d90c47739b9f519f0e04fcfc01beb9b0a56f78862e8399cfda86ae38564e1b01d345fbbecb59589d4f867f756ef19fe215961e6069e027a92b881f648a2362cc5579144ec08e65ffe4a017a1f945089b5713dd643a168be98c313f08ae5dff83378fbad2467e8945910db64614e943cd9abf5d0c8e817ce36b3da1759cbe9ed53ffe16adef734316e0f7ecc0398d9bb25e2ff5e2815ff9d77797848481031afd65b07736e41def9c01919538c06007dcab83bfbf024555d6bbf2fb4f276890a27ae61f9302bcf0a04cb670c47dd896754711663acd8c469316df9a47f7a49d0438513e2eaf9ee796069e4531319c26f7bb7534cf2de0cf2f42d22d6171c65938a2fcb62ad69ba9bbc6aecc34f1a733f09876e949b9c2aa7b7ac52019c90663e184606d0b8959fb1ebcda9c17c086e9a249a0f58cb215b27884538dc45231e105965a63e513d883e3f3321d4807c4c3a9ed32e913808bffe015a2d007da21f1317c6fc5c9fad3537c298599a499937ba57495fe8e62746cd7c1f7efb6e1bb055e7f92eafcd8f0bde2437398eba921136f953a1d843075b1a9aca7ff3446ed63d8c1e7b59f48ecea3665bc4a009bf4e435d0bd6b447b9d9f3ebbdb78ce86e02b2f434c78e2f06b78f671d67da27ef622cf3673cb6e3cd174a304ecf0e6f05df6d111f2ec6cdf1f7d95eaed2061d36ed595a19138d58aa4ebab964898304ed053c092a6f8c183b84391a518c29b999666a1a0abb234b8cf7abe00bc2b1b188632338ab732e1257d0eccacfc72adff1d6474959671df167302ce999527b9677fd47077e272fddef5c2ea572ddc001ab0d9c1bef243982bfd6c4b04ac409518e4b702aa92a8527f8df95f7ce6b0743107db99941c3cfea6de5b08718e8a2e5ab2dafdaf8274e4ac365170130ee50b559d1aa96d9529c7c61be846171d024cbb3721b52faeb8e58ac866e1782f3aa815f4bed58df7930d963e65f2bf977a269d52b8a4b8c108ad1fbd2c85409c240688c473658ab008d08d8db8a018e916c90de0d1316a054872bff56d4b4acbc5b6b35e766fde27981ffb34833b505d3d0d87e29ffbe1cc67f5392608d0af23874f4754f8af995dab066a2df21914e0fcfd9c894e97479726e47b4cc506b8ad66346495a7ba8675cad3867690e21d526286b8a8bbdd0cce291d23e2934ed3e3a2590c39ed3814c951849bc06c8c071e82c75b04e539a31ccb9a9899c2f7bb12e6afaca175de4e88ffa964b8f889e824b65af248f2b79107d114a332b14141e549d0e6bfbc9c7f6813ee7ec7f4a6da42cfca749bce9a128fb7cbb2d8f4bee01106bcb181df75e1088909ec7b5f0b82deff5b559495ef9c03565b381552969a0bccaa0dd98136ecb89e547c0639953556c93604118ed5d8216cc19f3518c349e0814e794dcb24bbdc1156e6025c02a777c58d756dd691ea0ee2a66ae943ae58762b92ff02b583eb55efcbb6cf816abd8a0d5f566c94b8cfc0847cb37d930a6503b9b07af8ee135441d872aa63f3bc7fe934b352220bb62650c86b042e46033826eb425edc2feb60aa1b5d3a3c04294aa5648d98fbec0ae67c24ff9c629586a2cdd3954648fd241bdda48bbaa28cac7fbc30d6977b353472d94836bc724654c40e88e8e1e5e50eb536e352398de44f44e871dc166eb40528f0ed6138de6ebe175d2d400a0d44793c36a4fc9cdce74642baf33fbe610bcc61c74b2429a93488d127cd37d5af15664c36adf1557536a688976691160d740b813e97ece28a11d12b970775a92149ab3ffce8b8466a81d8583e04f80a1d7f726816e0add5287533b86209b7594e41f1c9eb61e39fa8f4164416f69589efbb87cdc6fd1167f6e4f9a1dcbe818afe39d0cadd24bc77861b4a66394d9253d06f17640533ce9893b222a53d4bdc7a88d215b3d15af7a64dc52b6b309f57fc79d3107d496bcad2738ff54d5a0a1ce16e82ef02a6c5172295b0ae2e6eda8a5ed86e0fd026fc77746937bfd4f93321fbb6d22dfee9345bb9c1b96ec71be000d5bd9fae793293db6cff5536b9285c2a0b4e091e3cd03da6de40569f594cc60bde75971ac2712c9ba3514c48470682c215f78a73713543d776fb7b01bf5c1a29d5c55cb79e34506980163a51bfe6d77dec5760933e9ae39522e5b30f151a0c731559ae0e70777b78715cec6b7ec3532019dd5365aa741fb35ad8ef1885f1446ff9c0a84d550a3447649ac94c824f90ff19da8d21ba62c77ebd13573c5d72c27bd33c8b496aebacd3e9e9f465c9bd2fc42570432ed71c3b375dafa0807e855d4047a467c48100e38375c4c2d3acb89140592186ccd78324601286f4edc002f9aa9eeeb9c85679cb30741baa33ba0c5052aea4c503200df8da59c1070f2515efed087c7959e8389f35499c2cb5973c3f85df1ff106cfcffa76fe13043447d158293693627b0f6fd8f1644176df961de64f92fcb2c1c9454b5cf9a19d35f3a597aa9f7a45699fe9e17481f451a91cb5b86c193bec42107e0201feed624a27f930ee045237d93187640e8841318b80679a45e3d0a99e8f30023e76420504520678e387d246dadea6ad8bda37468ad5de81ac43cdc1abd0d95e5665ecdfca0506d4b9167b72659b53f5485f82624c4385acbe4bc93f73d6d4be57f241214c3e5a1cdd4e97b48885ca017587d4ab443e95c8f8a3958aa93ebeeca7b4ebb29d168feb0c25f64b9fae418705bc138586ec17e094ed8bee2269925eb50ef307d939d0a0399a7bd7ab723ab63700ad69cf2e8d17917798a9ae94f865c12aaec6e911157b226fdb0da1aa8fb4787db305a319475fd77ce492ab77a3c472a0056884d53b28fdbf1a211b900bea5094f9be52ba3f507fd1a8428316e8b0ed7a81129264fc72ec029fc836bdd008aa1e1d0f4495f959dcbd001a371a858ec4d5a3b2f24b7a87d9e1bdac41161fc0d65259c7c67c4cec44b7af97fb7afb631334d08aa9a9f5fa05ce8448f41a32add145301292eabcca045c2c15a7f3d3cf7ad261475b78737e42fa4e59a6facba2a2c81e2eb123d6fc02f31967ca71779fdd7a4ca03b04c8944d54cf1bf89f33b40222476a4961e326f60c0014cd8253e8950e456858683811f885569cf361b651b7c62ee0edb36aa764d9a24a4ed5c1591d6c95ad1f2842405e1de0d927474bff647d875cd49c57636be78605c7b74ebf6ba8610933d6a23ee3e6f81f1bd99d7b9a3fc3d6f9a861ef1bb6a3b0766e4078f57cdf6626aefdae32b37dc1a78a0e4a4ecab84310baaadd6585e57d884efc9637e6bda0d4f0d3b021460a06613588bafd45ecc45d13dde939a7fdb4dd47f1809d6b558307161539e10ec7187d852cdb9d41ed6d58898019cb2f6201ca8ec99973e2172ffffa4055cb9f735033dbf67da130f7ecd1fdbf5938b8134a6eeaa2f8986f143db83e5b8bd851079606d5d57c7a6e132dcee394d79aef73bae8d925d1e12cf1e092b23d10ef0f5f13e78776529bdacb76f04e68f1658f1dfb8630395206eb291d17b9a83d58f9a891bf893375bb8b1583a87cbee6c5886c0dec5d1f546a9d5ba964ab0c8bd9458b76e895a075b0ee654e263f58570f70a5ad6d888c0d310e5ee22b6b4f496eb17e1dd5f7a31320693c6ec9d8f6cb77895f27708ddb12b057991013360450f9db1091151c7575a6f764d93583d779b1b6480cad94758be647d4cf8794e20c6b5718381e8fce46fed3820e20c4e4c82b8465794b6984adc52596c6827f01e6e9a99db61784e39d1ea23ccdf1b720210a1b26c8a8bff1509bf7f179bf485388286766cc3094176121983c35d01eef78e1c7c67cf7789eb3450b833db4c3526b74ecf5d15d56074d5e788fe8ee99c7e12f823cc10ab1171ecac2d49a2d4ff80dff1ad371a98bf6d37f60b627e16a7fd0b550a98088356cbde17d0cffa78c6375b6d9daa66e3c8d154a685f515e66667961fab09d412ac4c2ea2b2f0e6213e7f6ff2a717a9ebce30fec12d8de7f3cc31f4eb2bfe95031505a3d75a8b8fb42afa4fca8cccffccfe7b15bc6d02699c86d5c0593f4cedcb3d523bc4c97e9fa5f448d03f75f794528e2a792e67948154d80ad2733030323b6dc51220281e61e2159fd3011197b8035da6104369229f6897ddc15338f761e303c81fd4306c7150fa2c24bb64d805cfd84f41b7ea94c874ea5619cd09e4d8b89bacb71da01ec5e4da36718977876b4f9a9dd8c3c956bb76c3828f105456fad1a2df55e0e91baa5c96c4cb0e94f73a57a9f6ca9dfbecf6af0150db77918fab3c4a8afcbfa5cc3f82748955885b74bf31b1404f88fb08bbcbedbc171bfa546a1bc8a7a207e85605dbf36e73b992da2c38006b0db8b6d2a255a2b12e7bba361710ca620ef471ad4e7016759c12efcc6d4816a677834d4ef1b5246bd778d8de3092aafa52c352b478fb2dc7308e42d9c97edfcf838c9b755568dea4428b7b163fa078084e879d84ec0e5a778098761cab7ad1a1b0ca217adfb3be505d587ef8f018893969db88eb8b44dcf64ac529070b33a42fab1f756df6d87e11f4919578631e4e6a92238aad138c0e73e60f4e376c78a411e644c3434d0e82f60bec1d8feb5c3f594d5fe9d6f2083657aabde969dec3f22b6fad6e6b5db7f941232b108f581ef70ef75e769d6848368d874de979bfe25776f0763fffd4e80051cff954b8c103c6dedcc839c410b95f0065b92a8bc53284557ab82115a0eafef47dd022842b8e36403486f1d6d2d819a65ac183c700d204007aaeb484afd70e108a9db278f3ffd116b83a1c1705933c542c08d2ec4aab489c4c658d038fd7d81cccde7780c7f675c596d32c50a93a2a4f1ceb0681e034357b630bc23cabcaa765173d29a4930</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      å›´ç»•ä¸€äº›ä¸»é¢˜çš„çº¦ç¨¿
    
    </summary>
    
      <category term="å…‰å­" scheme="https://blog.l0v0.com/categories/%E5%85%89%E5%AD%90/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Python ä»£ç è§„èŒƒ</title>
    <link href="https://blog.l0v0.com/posts/1cd351e0.html"/>
    <id>https://blog.l0v0.com/posts/1cd351e0.html</id>
    <published>2022-05-09T03:16:02.000Z</published>
    <updated>2022-11-09T02:37:04.838Z</updated>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="Python-ç¼–ç¨‹è§„èŒƒç³»åˆ—å¤§çº²"><a href="#Python-ç¼–ç¨‹è§„èŒƒç³»åˆ—å¤§çº²" class="headerlink" title="Python ç¼–ç¨‹è§„èŒƒç³»åˆ—å¤§çº²"></a>Python ç¼–ç¨‹è§„èŒƒç³»åˆ—å¤§çº²</h2><ol><li><strong>Python ä»£ç è§„èŒƒ</strong><ol><li>flake8 ä»£ç æ£€æŸ¥å·¥å…·</li><li>wemake python style</li></ol></li><li>Python poetry åŒ…ç®¡ç†</li><li>Python å·¥å…·é…ç½®<ol><li>commitizen</li><li>isort</li><li>black</li><li>pylint</li><li>falkehell</li><li>pre-commit</li><li>tox &amp; nox æµ‹è¯•ç¯å¢ƒç®¡ç†</li></ol></li><li>Python mkdocs æ–‡æ¡£æ„å»º</li><li>Python pytest å•å…ƒæµ‹è¯•</li><li>Python cookiecutter é¡¹ç›®æ¨¡æ¿ç”Ÿæˆå·¥å…·</li><li>Python Github å¼€æºé¡¹ç›®ç»´æŠ¤æµç¨‹<ol><li>Github Action</li><li>pull request</li><li>git rebase è¯´æ˜</li></ol></li></ol><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;è¿‡å»åœ¨é¡¹ç›®ç»„å¼€å‘ï¼Œéœ€è¦å¿«é€Ÿè¿­ä»£ï¼Œé€šå¸¸éƒ½æ˜¯é¢å‘ç¾æœ¯ç¼–ç¨‹ï¼Œè¿™ä¸ªéœ€è¦å¿«å‡†ç‹ åœ°è§£å†³é—®é¢˜ï¼Œè‡³äºä»£ç æ€ä¹ˆå†™å…¶å®æ˜¯æ²¡æœ‰ä»»ä½•è¦æ±‚çš„ã€‚<br>&emsp;&emsp;ä½†æ˜¯è¿™å¯¹äºé•¿çº¿ç»´æŠ¤æ¥è¯´ç®€ç›´æ˜¯ç¾éš¾ï¼Œå½“è¿™ç§ä»£ç è¶Šæ¥è¶Šå¤šä¹‹åï¼Œå°±ä¼šå˜æˆä¸€å †æ²¡äººæ•¢ç¢°çš„å±å±±ä»£ç ã€‚<br>&emsp;&emsp;é‚£æ€ä¹ˆæ‰èƒ½å†™å‡ºå¯ä»¥é•¿æœŸç»´æŠ¤çš„ä»£ç å‘¢ï¼Ÿ<br>&emsp;&emsp;ä¸‹é¢æˆ‘ä¼šå¼€ä¸€ä¸ª Python ç¼–ç¨‹è§„èŒƒ ç³»åˆ—ï¼Œæ•´ç†å‡ºä¸€æ•´å¥— Python çš„ç¼–ç¨‹è§„èŒƒï¼Œä»¥åŠé…å¥—çš„å·¥å…·ã€‚<br>&emsp;&emsp;è¿™ä¸ªè¿‡ç¨‹æ˜¯è¿™å°åŠå¹´æ¥çš„ä¸€æ¬¡æ€»ç»“ï¼Œè¿™é‡Œè¯šæŒšåœ°æ„Ÿè°¢æˆ‘çš„åŒäº‹ <code>é¾™æµ©</code> ï¼Œå®ƒæ•™ä¼šäº†å¾ˆå¤š~</p></blockquote><h2 id="Python-ä»£ç è§„èŒƒ"><a href="#Python-ä»£ç è§„èŒƒ" class="headerlink" title="Python ä»£ç è§„èŒƒ"></a>Python ä»£ç è§„èŒƒ</h2><ol><li>è°·æ­Œè§„èŒƒ <a href="https://google.github.io/styleguide/pyguide.html">styleguide | Style guides for Google-originated open-source projects</a></li><li>Maya Python å¼€å‘è§„èŒƒ: <a href="https://www.chadvernon.com/python-scripting-for-maya-artists/#writing-clean-code">Python Scripting for Maya Artists | Chad Vernon</a></li><li>TA 101: <a href="https://github.com/theodox/ta_101">theodox/ta_101: a coding standards doc for technical artists (github.com)</a></li></ol><blockquote><p>&emsp;&emsp;å…¶ä¸­æˆ‘ç»“åˆè‡ªèº«ç†è§£ï¼Œç¿»è¯‘äº† <a href="">Maya Python å¼€å‘è§„èŒƒ</a> å’Œ <a href="">TA 101</a>ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œå‚é˜…ã€‚</p></blockquote><h2 id="æ–‡ä»¶å¤´éƒ¨ç»Ÿä¸€å†™æ³•"><a href="#æ–‡ä»¶å¤´éƒ¨ç»Ÿä¸€å†™æ³•" class="headerlink" title="æ–‡ä»¶å¤´éƒ¨ç»Ÿä¸€å†™æ³•"></a>æ–‡ä»¶å¤´éƒ¨ç»Ÿä¸€å†™æ³•</h2><blockquote><p>&emsp;&emsp;æˆ‘ä»¬çš„ä»£ç ä¼˜å…ˆé‡‡ç”¨ Python3 å†™æ³•ï¼Œå› æ­¤æ ¹æ®è°·æ­Œè§„èŒƒï¼Œæ‰€æœ‰çš„ä»£ç æ–‡ä»¶éœ€è¦åŠ ä¸Šä¸‹åˆ—è§„èŒƒ<br>&emsp;&emsp;<code>__future__</code> æ¨¡å—ç”¨æ¥å…¼å®¹ Python3 å†™æ³•<br>&emsp;&emsp;<code>coding:utf-8</code> å…¼å®¹ utf-8 ç¼–ç </p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">module docstring</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> absolute_import</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;<code>from __future__ import division</code> å¯ä»¥å¼•å…¥æ•´æ•°ç›¸é™¤å¯ä»¥å¾—åˆ°å°æ•° (Python2çš„é»˜è®¤ç¯å¢ƒæ˜¯å¾—åˆ°æ•´æ•°)<br>&emsp;&emsp;<code>from __future__ import print_function</code> å¯ä»¥è®© print å…³é”®å­—å˜ä¸º Python3 çš„ print æ–¹æ³•ï¼Œå¯ä»¥åœ¨ lambda é‡Œé¢ä½¿ç”¨ <code>print</code><br>&emsp;&emsp;<em>**</em><code>from __future__ import absolute_import</code> å¼•å…¥ç»å¯¹å¯¼å…¥</p></blockquote><blockquote><p>&emsp;&emsp;division ä¼šå¯¼è‡´ OpenMaya ä¸€äº›ç±»å‹çš„è¿ç®—ç¬¦å¤±æ•ˆ</p></blockquote><p><a href="http://www.jp.square-enix.com/tech/library/pdf/BDSeminar20210518_sasaki.pdf">PowerPoint ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (square-enix.com)</a></p><blockquote><p>&emsp;&emsp;åŸå› æ˜¯å¼•å…¥ division ä¹‹å é™¤æ³• é™¤æ³• __truediv__ è€Œä¸å†æ˜¯ __div__ äº†</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cd351e0/01.png" alt="enter image description here"></p><h2 id="backport-å…¼å®¹åº“"><a href="#backport-å…¼å®¹åº“" class="headerlink" title="backport å…¼å®¹åº“"></a>backport å…¼å®¹åº“</h2><h3 id="six-py2-amp-py3-å…¼å®¹"><a href="#six-py2-amp-py3-å…¼å®¹" class="headerlink" title="six - py2 &amp; py3 å…¼å®¹"></a>six - py2 &amp; py3 å…¼å®¹</h3><p>Github: <a href="https://github.com/benjaminp/six">benjaminp/six: Python 2 and 3 compatibility library (github.com)</a></p><blockquote><p>&emsp;&emsp;six åº“æä¾›äº†ç»Ÿä¸€çš„ API è§£å†³äº† Py2 Py3 ä¸ç»Ÿä¸€çš„é—®é¢˜ã€‚<br>&emsp;&emsp;æ¯”å¦‚åŠ å…¥ metaclass </p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Python2</span></span><br><span class="line"><span class="keyword">import</span> abc</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestClass</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">__metaclass__ = abc.ABCMeta</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Python3</span></span><br><span class="line"><span class="keyword">import</span> abc</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestClass</span>(metaclass=abc.ABCMeta):</span><br><span class="line"><span class="keyword">pass</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># py2 &amp; py3 å…¼å®¹</span></span><br><span class="line"><span class="keyword">import</span> abc</span><br><span class="line"><span class="keyword">import</span> six</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestClass</span>(six.with_metaclass(abc.ABCMeta, <span class="built_in">object</span>)):</span><br><span class="line"><span class="keyword">pass</span></span><br></pre></td></tr></table></figure><h3 id="future-æ¨¡å—"><a href="#future-æ¨¡å—" class="headerlink" title="future æ¨¡å—"></a>future æ¨¡å—</h3><p><a href="https://python-future.org/quickstart.html">Quick-start guide â€” Python-Future documentation</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> future.standard_library <span class="keyword">import</span> install_aliases</span><br><span class="line">install_aliases()</span><br><span class="line"><span class="keyword">import</span> queue</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¯ä»¥æ”¯æŒå¤§éƒ¨åˆ†åå­—è¿ç§»çš„åº“ï¼Œæ¯”å¦‚ Python2 é‡Œé¢ç”¨ <code>Queue</code> åœ¨ Python3 ä¸‹ç”¨ <code>queue</code><br>&emsp;&emsp;ä½¿ç”¨ future åº“å°±å¯ä»¥ç”¨ Python3 å†™æ³•åœ¨ Python2 ä¸‹è¿è¡Œã€‚</p></blockquote><h3 id="Qt-py-Qtåº“å…¼å®¹"><a href="#Qt-py-Qtåº“å…¼å®¹" class="headerlink" title="Qt.py Qtåº“å…¼å®¹"></a>Qt.py Qtåº“å…¼å®¹</h3><p>Github : <a href="https://github.com/mottosso/Qt.py">mottosso/Qt.py: Minimal Python 2 &amp; 3 shim around all Qt bindings - PySide, PySide2, PyQt4 and PyQt5. (github.com)</a></p><p>Qt.py çš„ä½œè€…æ˜¯ æµç¨‹TD å› æ­¤å½±è§†è¡Œä¸šå¤šé‡‡ç”¨è¿™ä¸ªï¼ŒQt.py æ˜¯è¿è¡Œæ—¶ Resolve Qt çš„åº“ï¼Œå› æ­¤ä¸å¤ªå…¼å®¹ pyinstaller æ‰“åŒ…ä¹‹ç±»ä¾èµ–é™æ€åˆ†æçš„åº“ï¼Œè¦è§£å†³è¿™ä¸ªé—®é¢˜å¯ä»¥ç”¨ <a href="https://github.com/spyder-ide/qtpy">qtpy</a> åº“ (qtpy æ˜¯å¤šæ–‡ä»¶ Qt.py æ˜¯å•æ–‡ä»¶)</p><hr><p>Qt çš„ Python Binding å› ä¸ºä¸€äº›å†å²ç“œè‘›ï¼Œå¯¼è‡´æ‹†åˆ†å‡ºäº†ä¸¤ä¸ªå¯ç”¨çš„åº“<br><strong>PyQt</strong> &amp; <strong>PySide</strong><br>PyQt å•†ç”¨ä»˜è´¹ï¼ŒPySide å•†ç”¨å…è´¹</p><p>ä¸¤è€…éƒ½æ˜¯ Qt C++ å°è£…æš´éœ²åˆ° Python åº“ï¼Œä½¿ç”¨ä¸Šå¤§éƒ¨åˆ†çš„ä»£ç éƒ½æ˜¯èƒ½å¤Ÿå…¼å®¹çš„ã€‚<br>éœ€è¦æ³¨æ„çš„éƒ¨åˆ†å·®å¼‚æœ‰ä¿¡å·æ§½åŒºåˆ«<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5 <span class="keyword">import</span> QtCore</span><br><span class="line">signal = QtCore.pyqtSignal()</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> PySide2 <span class="keyword">import</span> QtCore</span><br><span class="line">signal = QtCore.Signal()</span><br></pre></td></tr></table></figure></p><hr><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cd351e0/02.png" alt="enter image description here"></p><table><thead><tr><th>Maya</th><th>C++ Qt ç‰ˆæœ¬</th><th>PyQt</th><th>PySide</th></tr></thead><tbody><tr><td>2014+ <a href="https://download.autodesk.com/global/docs/maya2014/en_us/index.html?url=files/GUID-AEAEAE08-96B2-47EC-BD0D-21A4D072C458.htm,topicNumber=d30e47245">ä¿¡æ¯æº</a></td><td>Qt4</td><td>PyQt4</td><td>PySide</td></tr><tr><td>2017+  <a href="https://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=GUID-955290A5-C27E-47AC-B930-A0430182EAA0">ä¿¡æ¯æº</a></td><td>Qt5</td><td>PyQt5</td><td>PySide2</td></tr><tr><td>æœªæ”¯æŒ</td><td>Qt6</td><td>PyQt6</td><td>PySide6</td></tr></tbody></table><p><a href="https://fredrikaverpil.github.io/2016/07/25/dealing-with-maya-2017-and-pyside2/">Dealing with Maya 2017 and PySide2 Â· Fredrik Averpil</a></p><p>éœ€è¦æ³¨æ„ PySide å‡çº§åˆ° PySide2 çš„ API ç”±ä»¥å‰çš„ä¸¤ä¸ªæ¨¡å—æ‹†åˆ†æˆäº†ä¸‰ä¸ª (QtCore QtWidgets QtGui)<br>å®˜æ–¹æ¨èä¸‹åˆ—çš„ä»£ç è§£å†³é—®é¢˜ <a href="https://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=GUID-0617A132-1B57-474F-A656-6E71A002CA28">ä¿¡æ¯æº</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">from</span> PySide2.QtCore <span class="keyword">import</span> * </span><br><span class="line">    <span class="keyword">from</span> PySide2.QtGui <span class="keyword">import</span> * </span><br><span class="line">    <span class="keyword">from</span> PySide2.QtWidgets <span class="keyword">import</span> *</span><br><span class="line">    <span class="keyword">from</span> PySide2 <span class="keyword">import</span> __version__</span><br><span class="line">    <span class="keyword">from</span> shiboken2 <span class="keyword">import</span> wrapInstance </span><br><span class="line"><span class="keyword">except</span> ImportError:</span><br><span class="line">    <span class="keyword">from</span> PySide.QtCore <span class="keyword">import</span> * </span><br><span class="line">    <span class="keyword">from</span> PySide.QtGui <span class="keyword">import</span> * </span><br><span class="line">    <span class="keyword">from</span> PySide <span class="keyword">import</span> __version__</span><br><span class="line">    <span class="keyword">from</span> shiboken <span class="keyword">import</span> wrapInstance </span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ä¸Šé¢çš„ä»£ç éœ€è¦ <code>*</code> å¯¼å…¥ï¼Œå¹¶ä¸ç¬¦åˆæˆ‘ä»¬çš„ä»£ç è§„èŒƒ<br>ä½¿ç”¨ Qt.py å°±å¯ä»¥è½»æ¾è§£å†³é—®é¢˜</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Qt <span class="keyword">import</span> QtCore</span><br><span class="line"><span class="keyword">from</span> Qt <span class="keyword">import</span> QtGui</span><br><span class="line"><span class="keyword">from</span> Qt <span class="keyword">import</span> QtWidgets</span><br><span class="line"><span class="keyword">from</span> Qt.QtCompat <span class="keyword">import</span> wrapInstance</span><br></pre></td></tr></table></figure><p>è€ç‰ˆæœ¬çš„ Maya ä½¿ç”¨ PySide ä¹Ÿä¼šè¢«æ˜ å°„åˆ° PySide2 çš„è°ƒç”¨è§„èŒƒä¸Šã€‚</p><h2 id="black-ä»£ç æ ¼å¼åŒ–"><a href="#black-ä»£ç æ ¼å¼åŒ–" class="headerlink" title="black ä»£ç æ ¼å¼åŒ–"></a>black ä»£ç æ ¼å¼åŒ–</h2><p>VScode é…ç½® black å·¥å…·<br><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cd351e0/03.png" alt="enter image description here"><br>ä½¿ç”¨çš„ Python å¿…é¡» <code>pip install black</code></p><h2 id="Pylint-ä»£ç æç¤º"><a href="#Pylint-ä»£ç æç¤º" class="headerlink" title="Pylint ä»£ç æç¤º"></a>Pylint ä»£ç æç¤º</h2><p>VScode é…ç½® Pylint å·¥å…·<br><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cd351e0/04.png" alt="enter image description here"></p><p>è¯¥é€‰é¡¹é»˜è®¤æ˜¯å¯ç”¨çš„<br>åªè¦å¯ç”¨ Python å®‰è£…è¿‡ Pylint (<code>pip install pylint</code>)</p><h2 id="docstring-è§„èŒƒ"><a href="#docstring-è§„èŒƒ" class="headerlink" title="docstring è§„èŒƒ"></a>docstring è§„èŒƒ</h2><p>docstringæœ‰å››ç§é€šç”¨çš„æ ‡æ³¨è§„èŒƒ</p><ul><li>Epytext</li><li>reST</li><li>Google</li><li>Numpy</li></ul><p><a href="https://www.chadvernon.com/python-scripting-for-maya-artists/#epytext">å››ç§è§„èŒƒçš„æ ·å¼</a></p><p><a href="https://www.sphinx-doc.org/en/master/usage/extensions/napoleon.html">sphinx.ext.napoleon æ”¯æŒå°† Google å’Œ Numpy è½¬æ¢æˆ reST</a></p><p>å»ºè®®åšåˆ°æ‰€æœ‰çš„å‡½æ•°éƒ½è¿›è¡Œ docstirng æ³¨é‡Š</p><h3 id="VScode-è‡ªåŠ¨ç”Ÿæˆ-docstring"><a href="#VScode-è‡ªåŠ¨ç”Ÿæˆ-docstring" class="headerlink" title="VScode è‡ªåŠ¨ç”Ÿæˆ docstring"></a>VScode è‡ªåŠ¨ç”Ÿæˆ docstring</h3><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cd351e0/05.png" alt="enter image description here"><br><a href="https://marketplace.visualstudio.com/items?itemName=njpwerner.autodocstring">Python Docstring Generator - Visual Studio Marketplace</a><br>å®‰è£… VScode æ’ä»¶</p><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cd351e0/06.png" alt="enter image description here"><br>è®¾å®šå¯ä»¥ä¿®æ”¹ Docstring çš„ç”Ÿæˆæ ¼å¼ã€‚<br>é»˜è®¤ç”Ÿæˆå¿«æ·é”®ä¸º ctrl+shift+2</p><h2 id="ä»£ç -review"><a href="#ä»£ç -review" class="headerlink" title="ä»£ç  review"></a>ä»£ç  review</h2><p>ä»“åº“è®¾ç½®å¿…é¡»ç»è¿‡ review æ‰èƒ½åˆå¹¶<br>review ä»£ç å¯ä»¥å¤§å®¶å…±åŒæˆé•¿ï¼Œç»Ÿä¸€ä»£ç è§„èŒƒã€‚</p><h2 id="tox"><a href="#tox" class="headerlink" title="tox"></a>tox</h2><p><a href="https://iwiki.woa.com/pages/viewpage.action?pageId=758823139">THMä¸­çš„toxå‘½ä»¤è¡Œå¤§å…¨ - è…¾è®¯iWiki (woa.com)</a></p><p>é¾™æµ©æä¾›çš„ thm ä»“åº“ä¼šæä¾› <code>open-dev-shell.cmd</code> è„šæœ¬ï¼Œéœ€è¦æœ¬æœºå®‰è£… thm<br>å¯åŠ¨å¯ä»¥è¿›å…¥ thm çš„å‘½ä»¤è¡Œå¼€å‘ç¯å¢ƒï¼Œé…å¤‡äº†å¤šä¸ªä¸­å¿ƒåŒ–éƒ¨ç½²çš„å·¥å…·</p><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cd351e0/07.png" alt="enter image description here"></p><p>åˆ©ç”¨ä¸Šé¢çš„ <code>tox -a</code> å¯ä»¥æŸ¥çœ‹é¾™æµ©æä¾›çš„ tox é…ç½®å‘½ä»¤ã€‚<br>ä½¿ç”¨ <code>tox -e pkg-py</code> å¯ä»¥åˆå§‹åŒ–å½“å‰ä»“åº“ï¼Œç”Ÿæˆ package.py å’Œ setup.py ç­‰ä¸€ç³»åˆ—é…ç½®æ–‡ä»¶ã€‚<br>å¯ä»¥ä½¿ç”¨ <code>tox -e ide-code</code> ä½¿ç”¨ä¸­å¿ƒåŒ–çš„ vscode æ‰“å¼€å½“å‰ä»“åº“</p><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cd351e0/08.png" alt="enter image description here"></p><p>é»˜è®¤ package.py å·²ç»é…ç½®å¥½ docs å’Œ å•å…ƒæµ‹è¯• ç­‰è¯¸å¤šç¯å¢ƒã€‚<br>ç¯å¢ƒå˜é‡åˆ©ç”¨ rez çš„è§„åˆ™æ·»åŠ åˆ° commands å‡½æ•°é‡Œé¢ã€‚</p><hr><p>æ—¥å¸¸ä¸Šä¼ ä»£ç å‰ä½¿ç”¨ <code>tox -e preflight</code><br>ä¼šè¿è¡Œ <a href="https://pre-commit.com/">pre-commit</a>,<a href="https://github.com/psf/black">black</a>å’Œ<a href="https://pycqa.github.io/isort/">isort</a> æ ‡å‡†åŒ–æ‰€æœ‰çš„ä»£ç ï¼Œä¹Ÿèƒ½æå‰å‘ç°ä¸€äº›æ–‡ä»¶é”™è¯¯ã€‚</p><p>åç»­ä½¿ç”¨ <code>git add &lt;æ–‡ä»¶&gt;</code> å‘½ä»¤å°†è¦æäº¤çš„æ–‡ä»¶æ·»åŠ åˆ° git è®°å½•é‡Œã€‚<br>commit æ­¥éª¤ <code>tox -e commit</code>æ·»åŠ æäº¤ä¿¡æ¯ã€‚(è¿™æ ·æäº¤ä¿¡æ¯æœ‰ç»Ÿä¸€è§„èŒƒ)</p><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1cd351e0/09.png" alt="enter image description here"><br><a href="https://iwiki.woa.com/pages/viewpage.action?pageId=768400271">å‚è€ƒé“¾æ¥</a></p><hr><p>å‘å¸ƒå‰å¯ä»¥ä½¿ç”¨ <code>tox -e build-test &lt;ç‰ˆæœ¬å·&gt;</code> æµ‹è¯•æ˜¯å¦å¯ä»¥æ­£å¸¸å‘å¸ƒ thm packages<br>å¦‚æœ build-test é€šè¿‡å¯ä»¥ä½¿ç”¨ <code>tox -e build &lt;ç‰ˆæœ¬å·&gt;</code> æ¥å‘å¸ƒåˆ° thm ä¸­å¿ƒåŒ–äº‘ç«¯ä¸Š</p><h2 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h2><p><a href="https://www.chadvernon.com/blog/unit-testing-in-maya/">Unit Testing in Maya | Chad Vernon</a><br><a href="https://www.chadvernon.com/blog/unit-testing-in-maya-part-2/">Unit Testing in Maya (Part 2) | Chad Vernon</a></p><p>å¯ä»¥ä½¿ç”¨ é¾™æµ© é…ç½®å¥½çš„ tox è¿›è¡Œå•å…ƒæµ‹è¯•</p><h3 id="Qt-å•å…ƒæµ‹è¯•"><a href="#Qt-å•å…ƒæµ‹è¯•" class="headerlink" title="Qt å•å…ƒæµ‹è¯•"></a>Qt å•å…ƒæµ‹è¯•</h3><p><a href="https://pytest-qt.readthedocs.io/en/latest/">pytest-qt â€” pytest-qt documentation</a></p><h2 id="sphinx-æ–‡æ¡£ç”Ÿæˆ"><a href="#sphinx-æ–‡æ¡£ç”Ÿæˆ" class="headerlink" title="sphinx æ–‡æ¡£ç”Ÿæˆ"></a>sphinx æ–‡æ¡£ç”Ÿæˆ</h2><p><a href="https://www.jianshu.com/p/d38573785b66">ä½¿ç”¨ Sphinx æ’°å†™æŠ€æœ¯æ–‡æ¡£å¹¶ç”Ÿæˆ PDF æ€»ç»“ - ç®€ä¹¦ (jianshu.com)</a></p><p><a href="https://www.sphinx-doc.org/en/master/usage/markdown.html">ä½¿ç”¨ Markdown ç¼–å†™ Sphinx æ–‡æ¡£</a></p><p>ä½¿ç”¨ é¾™æµ© çš„ _build_docs å‘½ä»¤å¯ä»¥è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£ã€‚</p><h2 id="Poetry-ä¾èµ–ç®¡ç†"><a href="#Poetry-ä¾èµ–ç®¡ç†" class="headerlink" title="Poetry ä¾èµ–ç®¡ç†"></a>Poetry ä¾èµ–ç®¡ç†</h2><p><a href="https://mp.weixin.qq.com/s/0tHCKnEpdFOmk8yKM7iDCQ">Poetry | PYTHON æ‰“åŒ…å’Œä¾èµ–ç®¡ç†å˜å¾—ç®€å• (qq.com)</a><br>åŸºäº é¾™æµ© æä¾›çš„ thm(rez) æµç¨‹ï¼Œä¸æ˜¯ååˆ†éœ€è¦ poetryã€‚</p><h2 id="Sentry-é”™è¯¯è¿½è¸ª"><a href="#Sentry-é”™è¯¯è¿½è¸ª" class="headerlink" title="Sentry é”™è¯¯è¿½è¸ª"></a>Sentry é”™è¯¯è¿½è¸ª</h2><p><a href="https://mp.weixin.qq.com/s/PoBwVvREoeKQmGzcxK5LXQ">Sentry | åº”ç”¨ç¨‹åºç›‘æ§å’Œé”™è¯¯è·Ÿè¸ª (qq.com)</a></p><h2 id="typing-é™æ€ç±»å‹æ£€æµ‹"><a href="#typing-é™æ€ç±»å‹æ£€æµ‹" class="headerlink" title="typing é™æ€ç±»å‹æ£€æµ‹"></a>typing é™æ€ç±»å‹æ£€æµ‹</h2><p><a href="https://github.com/python/mypy">python/mypy: Optional static typing for Python 3 and 2 (PEP 484) (github.com)</a></p>]]></content>
    
    <summary type="html">
    
      PEP8 è§„èŒƒ | Google Python Style Guide
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
      <category term="Python ç¼–ç¨‹è§„èŒƒ" scheme="https://blog.l0v0.com/categories/Python/Python-%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
      <category term="à ´ç¼–ç¨‹/ç¼–ç¨‹è§„èŒƒ" scheme="https://blog.l0v0.com/tags/%E0%A0%B4%E7%BC%96%E7%A8%8B-%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83/"/>
    
  </entry>
  
  <entry>
    <title>Python - Import æœºåˆ¶</title>
    <link href="https://blog.l0v0.com/posts/5e6e2bc7.html"/>
    <id>https://blog.l0v0.com/posts/5e6e2bc7.html</id>
    <published>2022-04-15T01:23:50.000Z</published>
    <updated>2022-11-09T02:37:04.817Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;ä½ æ˜¯å¦ä¹Ÿä¼šä¸º reload Python çš„æ¨¡å—å¹²åˆ°çƒ¦æ¼ã€‚<br>&emsp;&emsp;éœ€è¦åœ¨ä¸åŒçš„è„šæœ¬åŠ ä¸Š reload å¯¼å…¥çš„æ¨¡å—ç¡®ä¿å¯ä»¥çœ‹åˆ°ä»£ç çš„æ›´æ–°ã€‚<br>&emsp;&emsp;Python æ˜¯æ€ä¹ˆç¼“å­˜ import çš„æ¨¡å—çš„ã€‚</p></blockquote><p>TLDR;</p><blockquote><p>&emsp;&emsp;æˆ‘åæ¥äº†è§£äº† Python çš„åŠ è½½æœºåˆ¶ä¹‹åå¼„äº†ä¸€ä¸ªå‡½æ•°ï¼Œåªè¦å°†æˆ‘ä»¬å¼€å‘çš„åŒ…å‘½ååŠ ä¸Šï¼Œå°±å¯ä»¥å®ç°æ•´ä¸ªå¼€å‘åŒ… reload ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">module_cleanup</span>(<span class="params">module_name</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Cleanup module_name in sys.modules cache.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        module_name (str): Module Name</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> module_name <span class="keyword">in</span> sys.builtin_module_names:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    packages = [mod <span class="keyword">for</span> mod <span class="keyword">in</span> sys.modules <span class="keyword">if</span> mod.startswith(<span class="string">&quot;%s.&quot;</span> % module_name)]</span><br><span class="line">    <span class="keyword">for</span> package <span class="keyword">in</span> packages + [module_name]:</span><br><span class="line">        module = sys.modules.get(package)</span><br><span class="line">        <span class="keyword">if</span> module <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">del</span> sys.modules[package]  <span class="comment"># noqa:WPS420</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># NOTES(timmyliang): è¿™ä¸ªæ“ä½œç­‰åŒäºå¯¹ test_module ä¸‹æ‰€æœ‰çš„ module è¿›è¡Œ reload</span></span><br><span class="line">module_cleanup(<span class="string">&quot;test_module&quot;</span>)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¦‚æœæˆ‘ä»¬çš„ test_module ä¸‹æœ‰ä¼—å¤šè„šæœ¬å°±ä¸éœ€è¦é€ä¸ªå»æ·»åŠ  reload äº†ã€‚<br>&emsp;&emsp;ä¸‡ä¸€ä¸å°å¿ƒæŠŠ reload å‘å¸ƒå‡ºå»äº†ä¹Ÿä¼šç¨å¾®é™ä½è„šæœ¬è¿è¡Œçš„æ€§èƒ½ã€‚</p></blockquote><h2 id="Python-Import"><a href="#Python-Import" class="headerlink" title="Python Import"></a>Python Import</h2><p><a href="https://docs.python.org/3/reference/import.html">https://docs.python.org/3/reference/import.html</a></p><!-- https://docs.python.org/3/library/sys.html#sys.modules --><blockquote><p>&emsp;&emsp;ä¸Šé¢æ˜¯ Python çš„å®˜æ–¹æ–‡æ¡£è®²è¿° Pythonçš„ import çš„æ—¶å€™èƒŒåçš„è¿è¡Œæœºç†ï¼Œä¹Ÿå¯ä»¥åˆ‡æ¢æˆä¸­æ–‡è¿›è¡Œé˜…è¯»ã€‚<br>&emsp;&emsp;è¿™é‡Œæˆ‘å°†ä¸Šé¢çš„æ–‡ç« ç»“åˆè‡ªå·±çš„å®è·µæ€»ç»“ä¸€ç•ªã€‚</p></blockquote><blockquote><p>&emsp;&emsp;Python import æ¨¡å—å¯ä»¥ç”¨å…³é”®å­— <code>import</code> æˆ–è€… <code>importlib.import_module()</code><br>å¤‡æ³¨: å…³é”®å­—è°ƒç”¨æ— æ³•æ”¾åˆ° lambda å‡½æ•°é‡Œé¢ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ Python2 ä¸‹é»˜è®¤ <code>print</code> æ— æ³•æ”¾å…¥ lambda é‡Œé¢ï¼Œ python3 <code>print</code> ä¸å†æ˜¯å…³é”®å­—å¯ä»¥æ”¾å…¥ lambda<br>&emsp;&emsp;ä½¿ç”¨ <code>import</code> å…³é”®å­—å…¶å®èƒŒåæ‰§è¡Œçš„æ˜¯ <code>__import__()</code> å†…ç½®æ–¹æ³•ã€‚<br>&emsp;&emsp;import è§¦å‘ä¹‹åä¼šä» <code>sys.modules</code> æŸ¥æ‰¾ç¼“å­˜ï¼Œæ‰¾ä¸åˆ°å°±ä» <code>sys.path</code> é‡Œé¢åŒ¹é…æ¨¡å— (è¿™ä¸ªè¿‡ç¨‹ä¹Ÿä¼šè§¦å‘ meta_path ç­‰è§¦å‘è‡ªå®šä¹‰çš„ import è¡Œä¸º)<br>&emsp;&emsp;æ‰¾åˆ°åŒ¹é…çš„æ¨¡å—å°±ä¼šåˆ›å»ºæ¨¡å— å¦åˆ™ <code>raise ModuleNotFoundError</code><br>&emsp;&emsp;ç”Ÿæˆçš„æ¨¡å—ä¼šæ”¾å…¥åˆ° <code>sys.modules</code> è¿›è¡Œç¼“å­˜ã€‚</p></blockquote><p>import æ‰§è¡Œæ“ä½œ(ä¸è€ƒè™‘è‡ªå®šä¹‰ import æƒ…å†µ)</p><ol><li>ä» <code>sys.modules</code> æŸ¥æ‰¾æ¨¡å—ç¼“å­˜</li><li>ä» <code>sys.path</code> åŒ¹é…è„šæœ¬ ç”Ÿæˆæ¨¡å— æ”¾å…¥  <code>sys.modules</code> ç¼“å­˜</li></ol><h3 id="sys-modules"><a href="#sys-modules" class="headerlink" title="sys.modules"></a>sys.modules</h3><blockquote><p>&emsp;&emsp;ç”±äº <code>sys.modules</code> çš„ç¼“å­˜æœºåˆ¶ï¼ŒPython ä¸‹æ¬¡å¯¼å…¥å°±ä»å·²ç»åŠ è½½çš„ç¼“å­˜ä¸­è·å–æ¨¡å—ï¼Œå¯¼è‡´æ¨¡å—ç”¨çš„è¿˜æ˜¯æ—§çš„ä»£ç é€»è¾‘ã€‚<br>&emsp;&emsp;ç›¸åº”çš„ä¹Ÿå¯ä»¥ä¿®æ”¹ sys.modules çš„å­—å…¸å®ç°éªšæ“ä½œ</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.modules[<span class="string">&#x27;a&#x27;</span>] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> a</span><br><span class="line"><span class="built_in">print</span>(a) <span class="comment"># æ‰“å° 1</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å½“ç„¶è¿™ç§éªšæ“ä½œä¸æ¨èä½¿ç”¨å°±æ˜¯äº†ã€‚<br>&emsp;&emsp;å¦å¤–è¿˜æœ‰ä¸€äº›å±é™©çš„æ“ä½œï¼Œæ¯”å¦‚ <code>del sys.modules[&quot;builtins&quot;]</code> ä¼šè®© Python å˜å¾—ä¸æ­£å¸¸<em>(:Ğ·ã€âˆ )</em></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">del</span> sys.modules[<span class="string">&quot;builtins&quot;</span>]  </span><br><span class="line"><span class="built_in">map</span></span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span></span><br><span class="line"><span class="comment"># RuntimeError: lost builtins module</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;åŸºäºè¿™ä¸ªåŸç†ï¼Œå¦‚æœå°†ç¼“å­˜æ¸…ç†äº†ï¼Œä¸‹æ¬¡ Python import å°±ä¼šé‡æ–°åŠ è½½è¿™ä¸ªæ¨¡å—ï¼Œå®ç° reload çš„æ•ˆæœã€‚<br>&emsp;&emsp;æˆ‘æœ€åˆä¹Ÿæ˜¯åœ¨ mGear çš„ä»£ç é‡Œé¢å­¦ä¹ å®ƒä»¬çš„ reload æ–¹æ³•å­¦ä¹ åˆ°çš„ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5e6e2bc7/f00532dcd9c19a47bf2caf9012f31df4.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;å®ƒèƒŒåå®ç°çš„ä»£ç å°±æ˜¯ <code>del sys.modules[&quot;mgear&quot;]</code> ç­‰ç›¸å…³çš„æ¨¡å—</p></blockquote><p><a href="https://docs.python.org/3/reference/import.html#the-module-cache">https://docs.python.org/3/reference/import.html#the-module-cache</a></p><blockquote><p>&emsp;&emsp;æ ¹æ®å®˜æ–¹æ–‡æ¡£çš„è¯´æ˜ï¼Œå¦‚æœä¸€ä¸ªå¤§æ¨¡å—ä¸‹æœ‰å¾ˆå¤šå­æ¨¡å—ï¼Œéƒ½æ˜¯å•ç‹¬é”®å€¼ç¼“å­˜çš„ã€‚<br>&emsp;&emsp;æ‰€ä»¥è¦ reload æ‰€æœ‰çš„å­æ¨¡å—éœ€è¦ç¼–è¯‘é”®å€¼å°†åŒ¹é…çš„éƒ½åˆ é™¤æ‰ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">module_cleanup</span>(<span class="params">module_name</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Cleanup module_name in sys.modules cache.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        module_name (str): Module Name</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> module_name <span class="keyword">in</span> sys.builtin_module_names:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    packages = [mod <span class="keyword">for</span> mod <span class="keyword">in</span> sys.modules <span class="keyword">if</span> mod.startswith(<span class="string">&quot;%s.&quot;</span> % module_name)]</span><br><span class="line">    <span class="keyword">for</span> package <span class="keyword">in</span> packages + [module_name]:</span><br><span class="line">        module = sys.modules.get(package)</span><br><span class="line">        <span class="keyword">if</span> module <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">del</span> sys.modules[package]  <span class="comment"># noqa:WPS420</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># NOTES(timmyliang): è¿™ä¸ªæ“ä½œç­‰åŒäºå¯¹ test_module ä¸‹æ‰€æœ‰çš„ module è¿›è¡Œ reload</span></span><br><span class="line">module_cleanup(<span class="string">&quot;test_module&quot;</span>)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è¿™ä¸ªå°±æ˜¯æˆ‘æ•´ç†çš„éå†æ‰€æœ‰åŒ¹é…çš„æ¨¡å—è¿›è¡Œç¼“å­˜åˆ é™¤çš„å‡½æ•°ï¼Œ<code>sys.builtin_module_names</code> é€šè¿‡è§„é¿å¯¹å†…ç½®æ¨¡å—çš„æ¸…ç†ã€‚<br>&emsp;&emsp;è¿™æ ·æºä»£ç ä¸éœ€è¦æ·»åŠ  reload ï¼Œæˆ‘ä»¬åªåœ¨å¼€å‘ç”¨çš„è°ƒè¯•è„šæœ¬æ·»åŠ è¿™ä¸ªå‡½æ•°æ‰§è¡Œ reload å³å¯ã€‚<br>&emsp;&emsp;å¦å¤–æœ‰ä¸€ä¸ªå°å°æ³¨æ„ç‚¹ï¼Œç”¨è¿™ä¸ªåˆ é™¤ç¼“å­˜çš„æ–¹å¼ reload ä¼šå°†ä¹‹å‰çš„ module åˆ é™¤ç”Ÿæˆæ–°çš„ module å¯¹è±¡ï¼Œä½†æ˜¯å¦‚æœç”¨ <code>reload</code> çš„è¯æ˜¯æ²¿ç”¨ä¹‹å‰çš„ module å¯¹è±¡ã€‚<br>&emsp;&emsp;ç›®å‰æˆ‘å®è·µä¸Šè¿˜æ²¡é‡åˆ°è¿‡å› ä¸ºè¿™ä¸ªå¯¼è‡´å‡ºç°é—®é¢˜çš„æƒ…å†µã€‚</p></blockquote><h2 id="packages-å‘½åç©ºé—´åŒ…"><a href="#packages-å‘½åç©ºé—´åŒ…" class="headerlink" title="packages å‘½åç©ºé—´åŒ…"></a>packages å‘½åç©ºé—´åŒ…</h2><p><a href="https://packaging.python.org/en/latest/guides/packaging-namespace-packages/">https://packaging.python.org/en/latest/guides/packaging-namespace-packages/</a></p><blockquote><p>&emsp;&emsp;æŒ‰ç…§ä¸Šé¢é“¾æ¥æä¾›çš„ç›®å½•ç»“æ„</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mynamespace-subpackage-a/</span><br><span class="line">    setup.py</span><br><span class="line">    mynamespace/</span><br><span class="line">        subpackage_a/</span><br><span class="line">            __init__.py</span><br><span class="line"></span><br><span class="line">mynamespace-subpackage-b/</span><br><span class="line">    setup.py</span><br><span class="line">    mynamespace/</span><br><span class="line">        subpackage_b/</span><br><span class="line">            __init__.py</span><br><span class="line">        module_b.py</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ç„¶åå°±å¯ä»¥ <code>from mynamespace import subpackage_b</code> <code>from mynamespace import subpackage_a</code><br>&emsp;&emsp;ç”¨åŒä¸€ä¸ª <code>mynamespace</code> åŒ…å¯¼å…¥ä¸¤ä¸ªä¸åŒè·¯å¾„çš„æ¨¡å—ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5e6e2bc7/db4d5d1b1d1d7fe61a561b13a9c00e2d.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;ä½†æ˜¯ä¸Šé¢çš„é“¾æ¥ä¹Ÿæåˆ° å‘½åç©ºé—´åŒ…å¹¶ä¸é€‚ç”¨æ‰€æœ‰çš„æƒ…å†µï¼Œåè€Œæ˜¯ç”¨å‰ç¼€åŒ…ä¼šæ›´å¥½ã€‚</p></blockquote><h3 id="æ¨¡å—éå†æŸ¥æ‰¾"><a href="#æ¨¡å—éå†æŸ¥æ‰¾" class="headerlink" title="æ¨¡å—éå†æŸ¥æ‰¾"></a>æ¨¡å—éå†æŸ¥æ‰¾</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pkgutil</span><br><span class="line"><span class="keyword">import</span> xml</span><br><span class="line"><span class="keyword">for</span> finder,name,ispkg <span class="keyword">in</span> pkgutil.walk_packages(xml.__path__,xml.__name__+<span class="string">&#x27;.&#x27;</span>):</span><br><span class="line">    <span class="built_in">print</span>(finder,name,ispkg)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºå¦‚ä¸‹</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml&#x27;) xml.dom True</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\dom&#x27;) xml.dom.NodeFilter False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\dom&#x27;) xml.dom.domreg False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\dom&#x27;) xml.dom.expatbuilder False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\dom&#x27;) xml.dom.minicompat False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\dom&#x27;) xml.dom.minidom False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\dom&#x27;) xml.dom.pulldom False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\dom&#x27;) xml.dom.xmlbuilder False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml&#x27;) xml.etree True</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\etree&#x27;) xml.etree.ElementInclude False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\etree&#x27;) xml.etree.ElementPath False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\etree&#x27;) xml.etree.ElementTree False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\etree&#x27;) xml.etree.cElementTree False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml&#x27;) xml.parsers True</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\parsers&#x27;) xml.parsers.expat False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml&#x27;) xml.sax True</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\sax&#x27;) xml.sax._exceptions False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\sax&#x27;) xml.sax.expatreader False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\sax&#x27;) xml.sax.handler False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\sax&#x27;) xml.sax.saxutils False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\sax&#x27;) xml.sax.xmlreader False</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡ <code>pkgutil.walk_packages</code> å¯ä»¥éå†ä¸€ä¸ªæ¨¡å—æ‰€æœ‰çš„å­æ¨¡å—ã€‚<br>&emsp;&emsp;<code>from setuptools import find_packages</code> ä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½<br>&emsp;&emsp;ä½†æ˜¯ <code>find_packages</code> é¢å¯¹å‘½åç©ºé—´æ¨¡å—ä¸å¥½ä½¿ï¼Œä½†æ˜¯ <code>walk_packages</code> å¥½ä½¿ã€‚(åŸå› æ˜¯ <code>find_packages</code> é€šè¿‡ <code>os.walk</code> å»æŸ¥æ‰¾è·¯å¾„çš„)<br>&emsp;&emsp;ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹å¼å°†å¯¹åº”æ¨¡å—çš„ç¼“å­˜è¿›è¡Œåˆ é™¤~</p></blockquote><h3 id="åˆ¤æ–­æ¨¡å—æ˜¯å¦å­˜åœ¨"><a href="#åˆ¤æ–­æ¨¡å—æ˜¯å¦å­˜åœ¨" class="headerlink" title="åˆ¤æ–­æ¨¡å—æ˜¯å¦å­˜åœ¨"></a>åˆ¤æ–­æ¨¡å—æ˜¯å¦å­˜åœ¨</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">importable</span>(<span class="params">module_name</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="built_in">__import__</span>(module_name)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">except</span> ImportError:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è¿‡å»åˆ¤æ–­ä¸€æ¨¡å—æ˜¯å¦å¯ä»¥ import é€šå¸¸ä½¿ç”¨å¼‚å¸¸è¿›è¡Œå¤„ç†ã€‚<br>&emsp;&emsp;å…¶å® <code>pkgutil.find_loader</code> ä¹Ÿå¯ä»¥è¿”å›æ¨¡å—æ˜¯å¦å¯ä»¥ import</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pkgutil</span><br><span class="line">loader = pkgutil.find_loader(<span class="string">&quot;maya&quot;</span>)</span><br><span class="line">has_maya = loader <span class="keyword">and</span> loader.load_module(<span class="string">&quot;maya&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(has_maya) <span class="comment"># å¦‚æœå­˜åœ¨è¿”å› maya åº“ï¼Œä¸å­˜åœ¨è¿”å› None</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¸Šé¢çš„æ–¹å¼å°±ä¸éœ€è¦ç”¨ exception è¿›è¡Œå¤„ç†ã€‚(find_loader çš„æºç å·²ç»æœ‰ exception çš„é€»è¾‘)</p></blockquote><blockquote><p>&emsp;&emsp;å¦‚æœæ¨¡å—å¯ä»¥å¯¼å…¥ä¼šè¿”å›å¯¹åº”çš„ <code>loader</code>ï¼Œä½¿ç”¨ <code>load_module</code> å¯ä»¥è¿›è¡ŒåŠ è½½ã€‚<br>æ³¨: py2 çš„ <code>load_module</code> å¿…é¡»è¦ä¼ å‚ã€‚</p></blockquote><h2 id="è‡ªå®šä¹‰-import-è¡Œä¸º"><a href="#è‡ªå®šä¹‰-import-è¡Œä¸º" class="headerlink" title="è‡ªå®šä¹‰ import è¡Œä¸º"></a>è‡ªå®šä¹‰ import è¡Œä¸º</h2><blockquote><p>&emsp;&emsp;é™¤äº† <code>sys.path</code> é€šè¿‡ç³»ç»Ÿè·¯å¾„æŸ¥æ‰¾ python åŒ…è¿›è¡ŒåŠ è½½ä¹‹å¤–ã€‚<br>&emsp;&emsp;Python è¿˜æœ‰ <code>sys.meta_path</code> å­˜å‚¨ä¸€ç³»åˆ— Finder ç±» (Py3è¿˜éœ€è¦ <code>Loader</code> ç±») æ¥è‡ªå®šä¹‰ import é€»è¾‘ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> types</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CustomFinder</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.submodule_search_locations = []</span><br><span class="line">        self.has_location = <span class="literal">False</span></span><br><span class="line">        self.origin = <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_module</span>(<span class="params">self, spec</span>):</span><br><span class="line">        <span class="keyword">return</span> self.load_module(spec.name)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">exec_module</span>(<span class="params">self, module</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;Execute the given module in its own namespace</span></span><br><span class="line"><span class="string">        This method is required to be present by importlib.abc.Loader,</span></span><br><span class="line"><span class="string">        but since we know our module object is already fully-formed,</span></span><br><span class="line"><span class="string">        this method merely no-ops.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">find_spec</span>(<span class="params">self, fullname,*args</span>):</span><br><span class="line">        self.name = fullname</span><br><span class="line">        self.loader = self</span><br><span class="line">        <span class="keyword">return</span> self.find_module()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># NOTES(timmyliang): compat with Python2</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">find_module</span>(<span class="params">self,*args</span>):</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">load_module</span>(<span class="params">self, fullname</span>):</span><br><span class="line">        module = sys.modules.get(fullname)</span><br><span class="line">        <span class="keyword">if</span> module:</span><br><span class="line">            <span class="keyword">return</span> module</span><br><span class="line">        </span><br><span class="line">        new_module = types.ModuleType(fullname)</span><br><span class="line">        sys.modules[fullname] = new_module</span><br><span class="line">        new_module.__name__ = fullname</span><br><span class="line">        new_module.__loader__ = self</span><br><span class="line">        <span class="keyword">return</span> new_module</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    sys.meta_path.append(CustomFinder())</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">import</span> myapp</span><br><span class="line">    <span class="built_in">print</span>(myapp)  </span><br><span class="line">    <span class="comment"># Py3: &lt;module &#x27;myapp&#x27; (&lt;__main__.CustomFinder object at 0x000002A2A2904808&gt;)&gt;</span></span><br><span class="line">    <span class="comment"># Py2: &lt;module &#x27;myapp&#x27; (built-in)&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¸Šé¢çš„ä»£ç å®ç°äº† py2 py3 çš„ Finder å…¼å®¹ã€‚<br>&emsp;&emsp;å¯ä»¥å®ç°åŠ è½½ä»»æ„åç§°çš„æ¨¡å—éƒ½èƒ½æˆåŠŸè¿”å›è€Œä¸ä¼šå¼•å‘ ImportError<br>&emsp;&emsp;å½“ç„¶è¿™ç§æ“ä½œå¦‚æœç”¨åˆ°é¡¹ç›®é‡Œé¢ï¼Œè‚¯å®šä¼šè¢«äººæ‰“æ­» ğŸ˜„</p></blockquote><blockquote><p>&emsp;&emsp;åœ¨ Py2 ç¯å¢ƒä¸‹ Finder éœ€è¦å®ç° <code>find_module</code> å’Œ <code>load_module</code> æ–¹æ³•<br>&emsp;&emsp;Py3 ç¯å¢ƒå¯ä»¥å‚è€ƒä¸‹é¢çš„é“¾æ¥ã€‚</p></blockquote><p><a href="https://stackoverflow.com/a/58275573/13452951">https://stackoverflow.com/a/58275573/13452951</a></p><blockquote><p>&emsp;&emsp;éœ€è¦æœ‰ Finder éœ€è¦å®ç° <code>find_spec</code> è¿”å› <code>ModuleSpec</code> ç±»ï¼Œè¿™ä¸ªç±»éœ€è¦æœ‰ <code>Loader</code> è¿›è¡ŒåŠ è½½é€»è¾‘</p></blockquote><blockquote><p>&emsp;&emsp;å®˜æ–¹æä¾›çš„ <code>zipimport.zipimporter</code> åœ¨ Py2 ä¸‹æ˜¯ Finder ï¼Œåœ¨ Py3 ä¸‹æ˜¯ Loaderã€‚<br>&emsp;&emsp;å¯ä»¥ä»ä¸‹é¢å®˜æ–¹æ–‡æ¡£çš„ç±»æ–¹æ³•ä¸­çœ‹å‡ºæ¥ã€‚</p></blockquote><p><a href="https://docs.python.org/2.7/library/zipimport.html?highlight=zip#module-zipimport">https://docs.python.org/2.7/library/zipimport.html?highlight=zip#module-zipimport</a><br><a href="https://docs.python.org/3.10/library/zipimport.html?highlight=zip#module-zipimport">https://docs.python.org/3.10/library/zipimport.html?highlight=zip#module-zipimport</a></p><blockquote><p>&emsp;&emsp;é€šè¿‡éœ€æ”¹ import æœºåˆ¶ï¼Œå¯ä»¥å®ç°å¾ˆå¤šé»‘ç§‘æŠ€ï¼Œä½†æ˜¯æ¨èä½¿ç”¨ä¾µå…¥æ€§è¾ƒå°çš„ä½¿ç”¨æ–¹å¼ã€‚<br>&emsp;&emsp;è¿™ä¸ªæœºåˆ¶å¯ä»¥è®©æŸä¸ªæ¨¡å—è™šç©ºå¯¼å…¥è€Œä¸æŠ¥é”™ï¼Œè¿™ä¸ç¬¦åˆæ­£å¸¸ä½¿ç”¨ Python çš„é€»è¾‘ï¼Œå¯èƒ½ä¼šè®©å›¢é˜Ÿå…¶ä»–äººå¾ˆæ‡µé€¼çš„ã€‚<br>&emsp;&emsp;å¦‚æœæŸä¸ª BUG æ˜¯å› ä¸ºè¿™ä¸ªæœºåˆ¶å¯¼è‡´çš„ï¼Œå…¶ä»–äººåˆä¸ç†Ÿæ‚‰è¿™å—çš„è¯ï¼Œé‚£è¿™é—®é¢˜æŸ¥åŠå¤©ä¹Ÿä¸ä¸€å®šæœ‰ç»“æœ ğŸ˜¢</p></blockquote><blockquote><p>&emsp;&emsp;è¿™ç§é»‘ç§‘æŠ€çš„æ–¹å¼æ— æ³•æ”¯æŒ mypy ç±»å‹æ£€æµ‹å’Œå›æº¯ï¼Œå€’æ˜¯å¯ä»¥åšä¸€äº›ä»£ç æ¡©æ¥å®ç°æç¤ºï¼Œä½†ä¸æ˜¯å¾ˆæ¨èã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;æœ¬æ¬¡æ·±å…¥æµ…å‡ºåœ°å­¦ä¹ äº† Python Import çš„å„ç§åº•å±‚é€»è¾‘ã€‚<br>&emsp;&emsp;ä»¥åæœ‰æœºä¼šçš„è¯ä¹Ÿæƒ³å¥½å¥½å­¦ä¹ ä¸€ä¸‹ CPython çš„åº•å±‚å®ç°ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      è‡ªåŠ¨ unload æ¨¡å— &amp; meta import å­¦ä¹ 
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
      <category term="å·¥å…·å¼€å‘" scheme="https://blog.l0v0.com/categories/Python/%E5%B7%A5%E5%85%B7%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Python doit åº“</title>
    <link href="https://blog.l0v0.com/posts/b552c0c3.html"/>
    <id>https://blog.l0v0.com/posts/b552c0c3.html</id>
    <published>2022-03-28T07:50:36.000Z</published>
    <updated>2022-11-09T02:37:04.831Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;ä»£ç å¼€å‘çš„è¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°ä¸€äº›æƒ…å†µæƒ³è¦é€šè¿‡ ä»£ç  æ¥è‡ªåŠ¨æ‰§è¡Œå‘½ä»¤è¡Œç”Ÿæˆä¸€äº›ä¸œè¥¿çš„æƒ…å†µã€‚<br>&emsp;&emsp;å¦‚æœä¸ä½¿ç”¨æ¡†æ¶è¿›è¡Œç®¡ç†ï¼Œè¿™äº›ä»£ç è„šæœ¬å°±å¾ˆé›¶ç¢åœ°æ•£è½åœ¨å„ä¸ªåœ°æ–¹ã€‚<br>&emsp;&emsp;å› æ­¤å°±æ‰¾åˆ°è¿™ä¸ªæ¡†æ¶å¯ä»¥å¾ˆæ–¹ä¾¿ç®¡ç†å¤šä¸ªä»»åŠ¡ï¼Œå®ç°</p></blockquote><p><a href="https://github.com/pydoit/doit">Github åœ°å€</a><br><a href="https://pydoit.org/">å®˜æ–¹è¯´æ˜æ–‡æ¡£</a></p><h2 id="doit-çš„åŸºæœ¬ç”¨æ³•"><a href="#doit-çš„åŸºæœ¬ç”¨æ³•" class="headerlink" title="doit çš„åŸºæœ¬ç”¨æ³•"></a>doit çš„åŸºæœ¬ç”¨æ³•</h2><blockquote><p>&emsp;&emsp;åœ¨ doit æ‰§è¡Œå‘½ä»¤çš„åœ°æ–¹æ·»åŠ ä¸€ä¸ª <code>dodo.py</code> çš„è„šæœ¬<br>&emsp;&emsp;doit ä¼šå»è¯»å– <code>dodo.py</code> é‡Œé¢å‘½åå¼€å¤´ä¸º <code>task_</code> çš„æ–¹æ³•ä½œä¸ºæ‰§è¡Œçš„å‘½ä»¤ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">task_hello</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;hello&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">python_hello</span>(<span class="params">targets</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(targets[<span class="number">0</span>], <span class="string">&quot;a&quot;</span>) <span class="keyword">as</span> output:</span><br><span class="line">            output.write(<span class="string">&quot;Python says Hello World!!!\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&#x27;actions&#x27;</span>: [python_hello],</span><br><span class="line">        <span class="string">&#x27;targets&#x27;</span>: [<span class="string">&quot;hello.txt&quot;</span>],</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ¯”å¦‚æ·»åŠ ä¸Šé¢çš„æ–¹æ³•åˆ° <code>dodo.py</code> é‡Œé¢<br>&emsp;&emsp;æ‰§è¡Œ <code>doit list</code> å¯ä»¥ç½—åˆ—å‡ºå½“å‰çš„å¯æ‰§è¡Œçš„å‘½ä»¤</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">F:\thm_git\adam_pose_editor&gt;doit list</span><br><span class="line">hello   hello</span><br><span class="line">F:\thm_git\adam_pose_editor&gt;doit hello</span><br><span class="line">.  hello</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ‰§è¡Œ <code>doit hello</code> å°±ä¼šåœ¨ <code>dodo.py</code> ç¼©åœ¨ç›®å½•ä¸‹è¾“å‡ºä¸€ä¸ª hello.txt çš„æ–‡ä»¶ã€‚<br>&emsp;&emsp;è¿™ä¸ªå°±æ˜¯ doit çš„åŸºæœ¬ç”¨æ³•ã€‚</p></blockquote><h3 id="dodo-py-é…ç½®"><a href="#dodo-py-é…ç½®" class="headerlink" title="dodo.py é…ç½®"></a>dodo.py é…ç½®</h3><p><a href="https://pydoit.org/configuration.html">https://pydoit.org/configuration.html</a></p><blockquote><p>&emsp;&emsp;å¯ä»¥ä½¿ç”¨ <code>doit -f xxx/dodo.py</code> é…ç½® <code>dodo.py</code> çš„è·¯å¾„<br>&emsp;&emsp;ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>pyproject.toml</code> è¿›è¡Œé…ç½®</p></blockquote><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[tool.doit]</span></span><br><span class="line"><span class="attr">dodoFile</span> = <span class="string">&quot;scripts/dodo.py&quot;</span></span><br></pre></td></tr></table></figure><h3 id="task-é…ç½®"><a href="#task-é…ç½®" class="headerlink" title="task é…ç½®"></a>task é…ç½®</h3><blockquote><p>&emsp;&emsp;<code>dodo.py</code> çš„ task æ”¯æŒå¯¼å…¥<br>&emsp;&emsp;åªè¦æ˜¯ <code>task_</code> å‰ç¼€çš„æ–¹æ³•å°±ä¼šè‡ªåŠ¨è¯†åˆ«ã€‚<br>&emsp;&emsp;ä¹Ÿå¯ä»¥ç»™å‡½æ•°æ·»åŠ  <code>create_doit_tasks</code> å±æ€§ï¼Œè¿™æ ·å°±å¯ä»¥è‡ªåŠ¨ç”Ÿæˆäº†ã€‚ <a href="https://pydoit.org/task-creation.html#custom-task-definition">æ–‡æ¡£é“¾æ¥</a></p></blockquote><blockquote><p>&emsp;&emsp;åˆ©ç”¨è¿™äº›æœºåˆ¶ï¼Œæˆ‘æäº†ä¸€ä¸ªè£…é¥°å™¨å¯ä»¥ç»™ task æ·»åŠ ä¸€ä¸ªçŸ­åçš„æ–¹æ¡ˆã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add_short_name</span>(<span class="params">short_name</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Doit for short decorator.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        short_name (str): short alias name.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        callable: decoartor function.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decorator</span>(<span class="params">func</span>):</span><br><span class="line">        <span class="built_in">globals</span>()[<span class="string">&quot;task_&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(short_name)] = func  <span class="comment"># noqa: WPS421</span></span><br><span class="line">        <span class="keyword">return</span> func</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line"></span><br><span class="line"><span class="meta">@add_short_name(<span class="params"><span class="string">&quot;pf&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_preflight</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Run pre commit for all files.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        dict: doit config.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    command = [<span class="string">&quot;poetry&quot;</span>, <span class="string">&quot;run&quot;</span>, <span class="string">&quot;pre-commit&quot;</span>, <span class="string">&quot;run&quot;</span>, <span class="string">&quot;-a&quot;</span>]</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;actions&quot;</span>: [command], <span class="string">&quot;verbosity&quot;</span>: <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è¿™æ ·è¿è¡Œ doit ä¼šè¯†åˆ«åˆ°ä¸¤ä¸ª task ï¼Œå¯ä»¥åˆ†åˆ«é€šè¿‡ <code>doit pf</code> æˆ–è€… <code>doit preflight</code> è§¦å‘æŒ‡ä»¤</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;doit list </span><br><span class="line">pf          Run pre commit <span class="keyword">for</span> all files.</span><br><span class="line">preflight   Run pre commit <span class="keyword">for</span> all files.</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä½†æ˜¯é»˜è®¤æ’åºæ˜¯æŒ‰å‘½åæ¥çš„ï¼Œå¦‚æœå‘½ä»¤å¾ˆå¤šå°±ä¼šæ··åœ¨ä¸€èµ·</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt;doit list </span><br><span class="line">b             Run black format all python files.</span><br><span class="line">black         Run black format all python files.</span><br><span class="line">d             Run mkdocs serve.</span><br><span class="line"><span class="built_in">dd</span>            Run mike to deploy docs.</span><br><span class="line">docs          Run mkdocs serve.</span><br><span class="line">docs_deploy   Run mike to deploy docs.</span><br><span class="line">f             Run `black` `isort`.</span><br><span class="line">format        Run `black` `isort`.</span><br><span class="line">i             Run isort format all python files.</span><br><span class="line">isort         Run isort format all python files.</span><br><span class="line">l             Run flakehell lint <span class="keyword">for</span> all python files.</span><br><span class="line">lint          Run flakehell lint <span class="keyword">for</span> all python files.</span><br><span class="line">m             Run mike serve.</span><br><span class="line">mike          Run mike serve.</span><br><span class="line">pf            Run pre commit <span class="keyword">for</span> all files.</span><br><span class="line">preflight     Run pre commit <span class="keyword">for</span> all files.</span><br><span class="line">pt            Run pytest.</span><br><span class="line">pytest        Run pytest.</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¯ä»¥ä½¿ç”¨ doit list â€“sort=definition çš„æ–¹å¼è®©æ’åºå˜æˆåˆ›å»ºé¡ºåºã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt;doit list --<span class="built_in">sort</span>=definition</span><br><span class="line">f             Run `black` `isort`.</span><br><span class="line">format        Run `black` `isort`.</span><br><span class="line">pf            Run pre commit <span class="keyword">for</span> all files.</span><br><span class="line">preflight     Run pre commit <span class="keyword">for</span> all files.</span><br><span class="line">b             Run black format all python files.</span><br><span class="line">black         Run black format all python files.</span><br><span class="line">i             Run isort format all python files.</span><br><span class="line">isort         Run isort format all python files.</span><br><span class="line">l             Run flakehell lint <span class="keyword">for</span> all python files.</span><br><span class="line">lint          Run flakehell lint <span class="keyword">for</span> all python files.</span><br><span class="line">pt            Run pytest.</span><br><span class="line">pytest        Run pytest.</span><br><span class="line">d             Run mkdocs serve.</span><br><span class="line">docs          Run mkdocs serve.</span><br><span class="line">m             Run mike serve.</span><br><span class="line">mike          Run mike serve.</span><br><span class="line"><span class="built_in">dd</span>            Run mike to deploy docs.</span><br><span class="line">docs_deploy   Run mike to deploy docs.</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä½†æ˜¯æ¯æ¬¡ä½¿ç”¨éƒ½è¦åŠ ä¸€ä¸ªå‚æ•°é…ç½®ï¼Œé‚£æ˜¯ç›¸å½“çš„éº»çƒ¦ã€‚<br>&emsp;&emsp;æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>DOIT_CONFIG</code> è¿›è¡Œé…ç½® <a href="https://pydoit.org/configuration.html#configuration-at-dodo-py">æ–‡æ¡£é“¾æ¥</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DOIT_CONFIG = &#123;</span><br><span class="line">    <span class="string">&quot;sort&quot;</span>: <span class="string">&quot;definition&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="task-group"><a href="#task-group" class="headerlink" title="task group"></a>task group</h3><blockquote><p>&emsp;&emsp;å¯ä»¥ä½¿ç”¨ <code>task_dep</code> çš„æ–¹å¼æ‰§è¡Œå¤šä¸ªå®šä¹‰å¥½çš„ task <a href="https://pydoit.org/task-creation.html#custom-task-definition">æ–‡æ¡£é“¾æ¥</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> glob</span><br><span class="line">DIR = os.path.dirname(__file__)</span><br><span class="line">PY_FILES = glob.glob(os.path.join(DIR, <span class="string">&quot;**/*.py&quot;</span>), recursive=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">@add_short_name(<span class="params"><span class="string">&quot;f&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_format</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Run `black` `isort`.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        dict: doit config.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;actions&quot;</span>: <span class="literal">None</span>, <span class="string">&quot;task_dep&quot;</span>: [<span class="string">&quot;black&quot;</span>, <span class="string">&quot;isort&quot;</span>]&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@add_short_name(<span class="params"><span class="string">&quot;b&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_black</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Run black format all python files.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        dict: doit config.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    command = [<span class="string">&quot;poetry&quot;</span>, <span class="string">&quot;run&quot;</span>, <span class="string">&quot;black&quot;</span>] + PY_FILES</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;actions&quot;</span>: [command], <span class="string">&quot;verbosity&quot;</span>: <span class="number">2</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@add_short_name(<span class="params"><span class="string">&quot;i&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_isort</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Run isort format all python files.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        dict: doit config.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    command = [<span class="string">&quot;poetry&quot;</span>, <span class="string">&quot;run&quot;</span>, <span class="string">&quot;isort&quot;</span>] + PY_FILES</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;actions&quot;</span>: [command], <span class="string">&quot;verbosity&quot;</span>: <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡ä¸Šé¢çš„é…ç½®å°±å¯ä»¥å¿«é€Ÿç»™æ‰€æœ‰çš„ python è„šæœ¬è¿è¡Œ black å’Œ isort </p></blockquote><h3 id="task-ä¼ å‚"><a href="#task-ä¼ å‚" class="headerlink" title="task ä¼ å‚"></a>task ä¼ å‚</h3><p><a href="https://pydoit.org/task-args.html#task-action-parameters">æ–‡æ¡£é“¾æ¥</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">gen_api</span>(<span class="params">api</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Generate API docs.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        api (bool): flag to generate docs</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        str: running command</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># NOTES(timmyliang): remove reference api</span></span><br><span class="line">    rmtree(os.path.join(DIR, <span class="string">&quot;docs&quot;</span>, <span class="string">&quot;reference&quot;</span>), ignore_errors=<span class="literal">True</span>)</span><br><span class="line">    script_path = os.path.join(DIR, <span class="string">&quot;docs&quot;</span>, <span class="string">&quot;gen_api_nav.py&quot;</span>)</span><br><span class="line">    api_command = <span class="string">&quot; &quot;</span>.join([<span class="string">&quot;poetry&quot;</span>, <span class="string">&quot;run&quot;</span>, <span class="string">&quot;python&quot;</span>, script_path])</span><br><span class="line">    serve_command = <span class="string">&quot; &quot;</span>.join([<span class="string">&quot;poetry&quot;</span>, <span class="string">&quot;run&quot;</span>, <span class="string">&quot;mkdocs&quot;</span>, <span class="string">&quot;serve&quot;</span>])</span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;api_command&#125;</span> &amp; <span class="subst">&#123;serve_command&#125;</span>&quot;</span> <span class="keyword">if</span> api <span class="keyword">else</span> serve_command</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@add_short_name(<span class="params"><span class="string">&quot;d&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_docs</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Run mkdocs serve.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        dict: doit config.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&quot;actions&quot;</span>: [CmdAction(gen_api)],</span><br><span class="line">        <span class="string">&quot;params&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;name&quot;</span>: <span class="string">&quot;api&quot;</span>,</span><br><span class="line">                <span class="string">&quot;short&quot;</span>: <span class="string">&quot;a&quot;</span>,</span><br><span class="line">                <span class="string">&quot;type&quot;</span>: <span class="built_in">bool</span>,</span><br><span class="line">                <span class="string">&quot;default&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">                <span class="string">&quot;inverse&quot;</span>: <span class="string">&quot;flagoff&quot;</span>,</span><br><span class="line">                <span class="string">&quot;help&quot;</span>: <span class="string">&quot;generate api docs&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;verbosity&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡ <code>params</code> å®šä¹‰ä¼ å…¥çš„å‚æ•°ï¼Œå°±å¯ä»¥æ§åˆ¶ mkdocs æ˜¯å¦è‡ªåŠ¨ç”Ÿæˆ api çš„ markdown è„šæœ¬ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;ç›®å‰æˆ‘ä½¿ç”¨ä¸Šé¢çš„å†™æ³•å·²ç»å¾ˆå¤Ÿç”¨äº†ï¼Œå…¶å®å®ƒè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„é…ç½®å¯ä»¥ç”¨æ¥åš C ç¼–è¯‘ã€‚<br>&emsp;&emsp;è¿˜å¯ä»¥å®šä¹‰ task ä¾èµ– å’Œ æ–‡ä»¶ä¾èµ–ï¼Œç¡®ä¿ task çš„æ‰§è¡Œé¡ºåºã€‚<br>&emsp;&emsp;æ•´ä½“è€Œè¨€ï¼Œdoit æ˜¯ä¸ªéå¸¸ç®€å•è€Œæ˜¯ç”¨çš„æ¡†æ¶ï¼Œé…ç½® tox ç­‰å·¥å…·å¯è°“æ˜¯é”¦ä¸Šæ·»èŠ±ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      Python ä»»åŠ¡ç®¡ç†å‘½ä»¤è¡Œ
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Python dependencies åº“</title>
    <link href="https://blog.l0v0.com/posts/7aa50252.html"/>
    <id>https://blog.l0v0.com/posts/7aa50252.html</id>
    <published>2022-03-28T01:50:26.000Z</published>
    <updated>2022-11-09T02:37:04.831Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;åœ¨ Java Spring Boot ç­‰ç­‰çš„åç«¯é¢†åŸŸï¼Œä¼šå¤§é‡ä½¿ç”¨ä¾èµ–æ³¨å…¥çš„æ–¹å¼æ¥ç®€åŒ–å¤æ‚çš„è®¾è®¡æ¨¡å¼ã€‚<br>&emsp;&emsp;å®ç°å‚æ•°çš„è‡ªåŠ¨åŒ–æ³¨å…¥ã€‚<br>&emsp;&emsp;è¿™äº›è®¾è®¡æ–¹å¼åœ¨ Python çš„ä¸–ç•Œé‡Œä½¿ç”¨ä¸å¤šï¼Œå› ä¸º Python è¯­è¨€è¶³å¤Ÿçµæ´»ã€‚<br>&emsp;&emsp;å€˜è‹¥éœ€è¦å¼€å‘å¤æ‚çš„æ¡†æ¶ï¼Œä½¿ç”¨ ä¾èµ–æ³¨å…¥ æ¡†æ¶å¯ä»¥ç®€åŒ–å¾ˆå¤šä»£ç ã€‚</p></blockquote><p><a href="https://github.com/proofit404/dependencies">Github åœ°å€</a><br><a href="https://proofit404.github.io/dependencies/">å®˜æ–¹è¯´æ˜æ–‡æ¡£</a></p><h2 id="ä¾èµ–æ³¨å…¥è§£å†³çš„é—®é¢˜"><a href="#ä¾èµ–æ³¨å…¥è§£å†³çš„é—®é¢˜" class="headerlink" title="ä¾èµ–æ³¨å…¥è§£å†³çš„é—®é¢˜"></a>ä¾èµ–æ³¨å…¥è§£å†³çš„é—®é¢˜</h2><p><a href="https://sobolevn.me/2020/02/typed-functional-dependency-injection">å‚è€ƒæ–‡ç« </a></p><blockquote><p>&emsp;&emsp;åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬çš„æ–¹æ³•è°ƒç”¨å¯èƒ½ä¼šè¶Šæ¥è¶Šæ·±ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot</span>(<span class="params">robot_name</span>):</span><br><span class="line">    create_robot_hand()</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot_hand</span>():</span><br><span class="line">    create_robot_finger()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot_finger</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;create_robot_finger&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¸Šé¢æ˜¯ä¸€ä¸ªç®€å•çš„æœºå™¨äººåˆ›å»ºè°ƒç”¨å‡½æ•°ã€‚<br>&emsp;&emsp;è°ƒç”¨æ–¹å¼ä¼šä¼´éšåˆ™ç³»ç»Ÿçš„å¤æ‚ç¨‹åº¦é€å±‚æ·±å…¥ã€‚<br>&emsp;&emsp;åˆ°äº† <code>create_robot_finger</code> æ·±åº¦çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šéœ€è¦åœ¨ä¸Šå±‚ä¼ å…¥å‚æ•°æ§åˆ¶ finger çš„æ•°é‡</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot</span>(<span class="params">robot_name,finger_num=<span class="number">10</span></span>):</span><br><span class="line">    create_robot_hand(finger_num=finger_num)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot_hand</span>(<span class="params">finger_num=<span class="number">10</span></span>):</span><br><span class="line">    create_robot_finger(finger_num=finger_num)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot_finger</span>(<span class="params">finger_num=<span class="number">10</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;create_robot_finger finder_number:&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(finger_num))</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è¿™éœ€è¦å°†å‚æ•°è¡¥å……åˆ° è°ƒç”¨é“¾æ¡ çš„æ¯ä¸€ä¸ªå‡½æ•°å½“ä¸­ã€‚<br>&emsp;&emsp;å¦‚æœåªæ˜¯ä¸Šé¢çš„ ä¸‰å±‚ è°ƒç”¨æ·±åº¦ï¼Œé‚£å¯èƒ½æ‰‹åŠ¨ä¿®æ”¹ç»´æŠ¤è¿˜ä¸æ˜¯ä»€ä¹ˆé—®é¢˜ã€‚<br>&emsp;&emsp;ä½†å€˜è‹¥è°ƒç”¨æ·±åº¦å¾ˆæ·±ï¼Œé‚£è¿™ä¸ªä»£ç ä¿®æ”¹é‡å°±ä¼šéå¸¸åºå¤§ã€‚<br>&emsp;&emsp;ä¸åˆ©äºä»£ç çš„æ‰©å±•å’Œç»´æŠ¤ã€‚</p></blockquote><hr><blockquote><p>&emsp;&emsp;åœ¨ Python çš„ä¸–ç•Œé‡Œï¼Œè§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æœ‰å¾ˆå¤šã€‚</p><ol><li>å¯¼å…¥ é…ç½® æ¨¡å—ï¼Œå¤–éƒ¨è·å–å‚æ•°é…ç½®</li><li>é¢å‘å¯¹è±¡ æ³¨å…¥ä¾èµ–ï¼Œä»å®ä¾‹åŒ–ä¸­è·å–å‚æ•°é…ç½®</li></ol></blockquote><h3 id="æ–¹æ¡ˆä¸€-å¯¼å…¥æ¨¡å—"><a href="#æ–¹æ¡ˆä¸€-å¯¼å…¥æ¨¡å—" class="headerlink" title="æ–¹æ¡ˆä¸€ å¯¼å…¥æ¨¡å—"></a>æ–¹æ¡ˆä¸€ å¯¼å…¥æ¨¡å—</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;settings.py&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> absolute_import</span><br><span class="line"></span><br><span class="line">ROBOT_FINGER_NUM = <span class="number">10</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> settings</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot</span>(<span class="params">robot_name</span>):</span><br><span class="line">    create_robot_hand()</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot_hand</span>():</span><br><span class="line">    create_robot_finger()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot_finger</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;create_robot_finger finder_number:&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(settings.ROBOT_FINGER_NUM))</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡æ¨¡å—çš„æ–¹å¼å°†å‚æ•°è½¬ç§»åˆ°å¤–éƒ¨ï¼Œè¿›è¡Œé…ç½®ã€‚<br>&emsp;&emsp;è¿™ä¸ªåšæ³•å¯ä»¥è§£å†³å‚æ•°ä¼ é€’çš„é—®é¢˜ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ç¼ºç‚¹å°±æ˜¯å‚æ•°ç®¡ç†ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œé€šå¸¸æ˜¯å°†å…¨å±€é…ç½®çš„å‚æ•°éƒ½æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶æ–¹ä¾¿é›†ä¸­ç®¡ç†ã€‚<br>&emsp;&emsp;ä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´ä¸åŒçš„é€»è¾‘è°ƒç”¨çš„å‚æ•°éƒ½ä¼šå¡åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œå¹¶ä¸æ˜¯ååˆ†æ•´æ´ã€‚</p></blockquote><h3 id="æ–¹æ¡ˆäºŒ-æ³¨å…¥ä¾èµ–"><a href="#æ–¹æ¡ˆäºŒ-æ³¨å…¥ä¾èµ–" class="headerlink" title="æ–¹æ¡ˆäºŒ æ³¨å…¥ä¾èµ–"></a>æ–¹æ¡ˆäºŒ æ³¨å…¥ä¾èµ–</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dependencies <span class="keyword">import</span> Injector</span><br><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Robot</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    finger_num = attr.ib(default=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_robot</span>(<span class="params">self,robot_name</span>):</span><br><span class="line">        self.create_robot_hand()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_robot_hand</span>(<span class="params">self</span>):</span><br><span class="line">        self.create_robot_finger()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_robot_finger</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;create_robot_finger finder_number:&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(self.finger_num))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Container</span>(<span class="title class_ inherited__">Injector</span>):</span><br><span class="line">    finger_num = <span class="number">10</span></span><br><span class="line">    robot = Robot</span><br><span class="line">Container.robot.create_robot(<span class="string">&quot;robot name&quot;</span>)</span><br><span class="line"><span class="comment"># æ‰“å° create_robot_finger finder_number:10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># `dependencies` çš„å®ç°ç­‰ä»·äºä¸‹é¢çš„ä»£ç </span></span><br><span class="line">robot = Robot(finger_num=<span class="number">10</span>)</span><br><span class="line">robot.create_robot(<span class="string">&quot;robot name&quot;</span>)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä½¿ç”¨ <code>dependencies</code> åº“å®ç°ä¾èµ–æ³¨å…¥ï¼Œè‡ªåŠ¨å°†å®¹å™¨å†…çš„æ•°æ®å¡«å……åˆ° ç±»çš„å®ä¾‹åŒ–è¿‡ç¨‹ä¸­ã€‚<br>&emsp;&emsp;é€šè¿‡ç±»çš„å±æ€§å®ç°å‚æ•°ä¼ é€’ã€‚</p></blockquote><h2 id="dependencies-ä»‹ç»"><a href="#dependencies-ä»‹ç»" class="headerlink" title="dependencies ä»‹ç»"></a>dependencies ä»‹ç»</h2><blockquote><p>&emsp;&emsp;é€šè¿‡ä¸Šé¢çš„æ¡ˆä¾‹å¯ä»¥çœ‹åˆ°ã€‚<br>&emsp;&emsp;<code>dependencies</code> å¯ä»¥è‡ªåŠ¨å®ä¾‹åŒ–ç±»ï¼Œå¡«å……ç±»åˆå§‹åŒ–éœ€è¦çš„å‚æ•°ã€‚<br>&emsp;&emsp;ä½†å®ƒçš„åŠŸèƒ½è¿˜è¿œä¸æ­¢è¿™ä¹ˆç®€å•ã€‚<br>&emsp;&emsp;å®ƒè¿˜å¯ä»¥å®ç°å¤šä¸ªç±»å®ä¾‹åŒ–çš„è‡ªåŠ¨å¡«å……ï¼Œåªè¦å‚æ•°å˜é‡åå‘½åé…ç½®å¥½å³å¯ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dependencies <span class="keyword">import</span> Injector</span><br><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Robot</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    servo = attr.ib()</span><br><span class="line">    controller = attr.ib()</span><br><span class="line">    settings = attr.ib()</span><br><span class="line">    di_environment = attr.ib()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;controller di_environment&quot;</span>,self.controller.di_environment)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;self di_environment&quot;</span>,self.di_environment)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;settings threshold&quot;</span>,self.settings.threshold)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;servo threshold&quot;</span>,self.servo.threshold)</span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Servo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    threshold = attr.ib()</span><br><span class="line">    </span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Controller</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    di_environment = attr.ib()</span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Settings</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    threshold = attr.ib()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Container</span>(<span class="title class_ inherited__">Injector</span>):</span><br><span class="line">    threshold = <span class="number">1</span></span><br><span class="line">    di_environment = <span class="string">&quot;production&quot;</span></span><br><span class="line">    </span><br><span class="line">    robot = Robot</span><br><span class="line">    servo = Servo</span><br><span class="line">    settings = Settings</span><br><span class="line">    controller = Controller</span><br><span class="line"></span><br><span class="line">Container.robot.run()</span><br><span class="line"><span class="comment"># æ‰“å°: </span></span><br><span class="line"><span class="comment"># controller di_environment production</span></span><br><span class="line"><span class="comment"># self di_environment production</span></span><br><span class="line"><span class="comment"># settings threshold 1</span></span><br><span class="line"><span class="comment"># servo threshold 1</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡ <code>dependencies</code> å¯ä»¥æ ¹æ®å±æ€§å‘½åè‡ªåŠ¨å¡«å……å¤šä¸ªç±»çš„å‚æ•°æ•°æ®ã€‚<br>&emsp;&emsp;container çš„é€»è¾‘ç­‰ä»·äºä¸‹é¢çš„ä»£ç </p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">threshold = <span class="number">1</span></span><br><span class="line">di_environment = <span class="string">&quot;production&quot;</span></span><br><span class="line">servo = Servo(threshold)</span><br><span class="line">settings = Settings(threshold)</span><br><span class="line">controller = Controller(di_environment)</span><br><span class="line">robot = Robot(servo,controller,settings,di_environment)</span><br><span class="line">robot.run()</span><br><span class="line"><span class="comment"># æ‰“å°: </span></span><br><span class="line"><span class="comment"># controller di_environment production</span></span><br><span class="line"><span class="comment"># self di_environment production</span></span><br><span class="line"><span class="comment"># settings threshold 1</span></span><br><span class="line"><span class="comment"># servo threshold 1</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä½†æ˜¯ <code>dependencies</code> åº“æ ¹æ®å‚æ•°çš„å‘½åè‡ªåŠ¨å®ä¾‹åŒ–å¯¹è±¡ï¼Œå‚æ•°çš„è°ƒæ•´å˜å¾—ç®€å•å¯æ§ã€‚</p></blockquote><h2 id="dependencies-å®ç°-caller-æ–¹æ³•"><a href="#dependencies-å®ç°-caller-æ–¹æ³•" class="headerlink" title="dependencies å®ç° caller æ–¹æ³•"></a>dependencies å®ç° caller æ–¹æ³•</h2><p><a href="https://sobolevn.me/2019/03/enforcing-srp">å‚è€ƒæ–‡ç« </a></p><blockquote><p>&emsp;&emsp;åˆ©ç”¨ ä¾èµ–æ³¨å…¥ å¯ä»¥åˆ†ç¦» ä¾èµ– å’Œ ä¸šåŠ¡ é€»è¾‘</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"><span class="keyword">from</span> dependencies <span class="keyword">import</span> Injector</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Editor</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">install_language</span>(<span class="params">self,lang</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;install language:&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(lang))</span><br><span class="line"></span><br><span class="line">editor = Editor()</span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s(<span class="params">frozen=<span class="literal">True</span>, slots=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ChangeLanguage</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    editor = attr.ib()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self,lang</span>):</span><br><span class="line">        self.editor.install_language(lang)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Container</span>(<span class="title class_ inherited__">Injector</span>):</span><br><span class="line">    editor = editor</span><br><span class="line">    change_language = ChangeLanguage</span><br><span class="line"></span><br><span class="line">Container.change_language(<span class="string">&quot;en_US&quot;</span>)</span><br><span class="line"><span class="comment"># æ‰“å°: install language:en_US</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;åˆ©ç”¨ dependencies å¯ä»¥æ„å»ºå‡º caller å¯¹è±¡ã€‚<br>&emsp;&emsp;caller è™½ç„¶ç”¨ç±»æ„å»ºï¼Œä½†æ˜¯è°ƒç”¨æ–¹å¼å’Œæ–¹æ³•ä¸€è‡´ï¼Œå¯ä»¥æ–¹æ³•éœ€è¦ç”¨åˆ°çš„ä¾èµ–ç”¨ç±»å®ä¾‹åŒ–çš„æ–¹å¼è¿›è¡Œæ³¨å…¥ã€‚<br>&emsp;&emsp;å®ç°ä¾èµ–å’Œä¼ å‚çš„åˆ†ç¦»ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;ä¾èµ–æ³¨å…¥å¯ä»¥å¾ˆå¥½è§£å†³å‡½æ•°è°ƒç”¨è¿‡æ·±çš„é—®é¢˜ï¼Œè®©ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      Python ä¾èµ–æ³¨å…¥å®ç°
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Python blinker åº“</title>
    <link href="https://blog.l0v0.com/posts/9ad5ab39.html"/>
    <id>https://blog.l0v0.com/posts/9ad5ab39.html</id>
    <published>2022-02-28T12:47:25.000Z</published>
    <updated>2022-11-09T02:37:04.826Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;Qt å†…ç½®äº†éå¸¸æ£’çš„ ä¿¡å·æ§½çš„å‡½æ•°ã€‚<br>&emsp;&emsp;å¯ä»¥è®© UI è¿›è¡Œå¼‚æ­¥è°ƒç”¨ã€‚<br>&emsp;&emsp;ä½†æ˜¯æœ‰äº›æ—¶å€™ï¼Œå¹¶ä¸æƒ³ä¾èµ– Qt æ¡†æ¶åŒæ—¶åˆèƒ½å®ç°ä¿¡å·æ§½çš„åŠŸèƒ½ã€‚<br>&emsp;&emsp;è¿™é‡Œå¯ä»¥ä½¿ç”¨ <code>blinker</code> åº“æ¥å®Œæˆã€‚</p></blockquote><p><a href="https://pythonhosted.org/blinker/">Github åœ°å€</a><br><a href="https://github.com/jek/blinker">å®˜æ–¹è¯´æ˜æ–‡æ¡£</a></p><h2 id="blinker-åŸºæœ¬ç”¨æ³•"><a href="#blinker-åŸºæœ¬ç”¨æ³•" class="headerlink" title="blinker åŸºæœ¬ç”¨æ³•"></a>blinker åŸºæœ¬ç”¨æ³•</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> blinker <span class="keyword">import</span> signal,Signal</span><br><span class="line"></span><br><span class="line">initialized = signal(<span class="string">&#x27;initialized&#x27;</span>)</span><br><span class="line">initialized <span class="keyword">is</span> signal(<span class="string">&#x27;initialized&#x27;</span>)</span><br><span class="line">sig = Signal()</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¯ä»¥ä½¿ç”¨åŒ¿åä¿¡å·æ§½ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¸¦åç§°çš„ä¿¡å·æ§½ã€‚</p></blockquote><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> blinker <span class="keyword">import</span> signal</span><br><span class="line">send_data = signal(<span class="string">&#x27;send-data&#x27;</span>)</span><br><span class="line"><span class="meta">@send_data.connect</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">receive_data</span>(<span class="params">sender, **kw</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Caught signal from %r, data %r&quot;</span> % (sender, kw))</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;received!&#x27;</span></span><br><span class="line">result = send_data.send(<span class="string">&#x27;anonymous&#x27;</span>, abc=<span class="number">123</span>)</span><br><span class="line"><span class="built_in">print</span>(result)  <span class="comment"># æ‰“å° [(&lt;function receive_data at 0x000002A3328D4DC8&gt;, &#x27;received!&#x27;)]</span></span><br><span class="line"><span class="comment"># æ‰“å° Caught signal from &#x27;anonymous&#x27;, data &#123;&#x27;abc&#x27;: 123&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¯ä»¥ç”¨è£…é¥°å™¨çš„æ–¹å¼è¿æ¥ä¿¡å·æ§½<br>&emsp;&emsp;è§¦å‘ä¿¡å·æ§½ä½¿ç”¨ send æ–¹æ³•<br>&emsp;&emsp;å¹¶ä¸”ä¿¡å·æ§½æ‰§è¡Œå®Œå¯ä»¥æ‹¿åˆ°å‡½æ•°è§¦å‘çš„è¿”å›å€¼ã€‚</p></blockquote><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> blinker <span class="keyword">import</span> signal</span><br><span class="line"></span><br><span class="line">dice_roll = signal(<span class="string">&#x27;dice_roll&#x27;</span>)</span><br><span class="line"><span class="meta">@dice_roll.connect_via(<span class="params"><span class="number">1</span></span>)</span></span><br><span class="line"><span class="meta">@dice_roll.connect_via(<span class="params"><span class="number">3</span></span>)</span></span><br><span class="line"><span class="meta">@dice_roll.connect_via(<span class="params"><span class="number">5</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">odd_subscriber</span>(<span class="params">sender</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Observed dice roll %r.&quot;</span> % sender)</span><br><span class="line">result = dice_roll.send(<span class="number">3</span>)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¦å¤–ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯å¯ä»¥æ ¹æ®è§¦å‘çš„å‚æ•°å»è§¦å‘ç›¸åº”æ³¨å†Œçš„å‡½æ•°ã€‚<br>&emsp;&emsp;Qt å› ä¸ºè¦ä½¿ç”¨ C++ï¼Œè¿™ç§æ³¨å†Œæ–¹å¼ä¼šéå¸¸éº»çƒ¦ã€‚</p></blockquote><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> blinker <span class="keyword">import</span> signal</span><br><span class="line"></span><br><span class="line">initialized = signal(<span class="string">&quot;initialized&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@initialized.connect</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize_call1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;initialize_call1&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@initialized.connect</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize_call2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;initialize_call2&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@initialized.connect</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize_call3</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;initialize_call3&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> key, weakref <span class="keyword">in</span> initialized.receivers.items():</span><br><span class="line">    func = weakref()</span><br><span class="line">    func()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å°: </span></span><br><span class="line"><span class="comment"># initialize_call1</span></span><br><span class="line"><span class="comment"># initialize_call2</span></span><br><span class="line"><span class="comment"># initialize_call3</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡ä¿¡å·æ§½çš„ <code>receivers</code> æ–¹æ³•å¯ä»¥è·å–åˆ°æ³¨å†Œåˆ°ä¿¡å·æ§½çš„æ‰€æœ‰å‡½æ•°ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;è¿™ä¸ªåº“å¯ä»¥æ‘†è„± Qt çš„ä¾èµ–å®ç°å‡½æ•°çš„å¼‚æ­¥è°ƒç”¨ã€‚<br>&emsp;&emsp;å¦‚æœæ˜¯ Qt çš„ç¯å¢ƒå»ºè®®è¿˜æ˜¯ä½¿ç”¨ Qt å†…ç½®çš„ ä¿¡å·æ§½ï¼Œè¿™æ ·å¯ä»¥æ”¯æŒ Qt çš„å¤šçº¿ç¨‹ç­‰å¤„ç†ã€‚<br>&emsp;&emsp;ä½†å¦‚æœæ˜¯ Python ç¯å¢ƒä¸‹æƒ³è¦æ‘†è„± Qt çš„ä¾èµ–ï¼Œåˆ™æ¨è blinker æ¥å®Œæˆä¿¡å·è§¦å‘ã€‚<br>&emsp;&emsp;blinker è¿˜æœ‰ä¸ªå¥½å¤„æ˜¯å¯ä»¥è·å–åˆ°æ³¨å†Œçš„å‡½æ•°åˆ—è¡¨ï¼Œè€Œ Qt åŸºäº C++ çš„å¹¶æ²¡æœ‰æä¾›è¿™ä¸ªåŠŸèƒ½ï¼Œåªèƒ½é€šè¿‡ Meta å¯¹è±¡æ¥åˆ¤æ–­è¿™ä¸ªä¿¡å·æ§½æ˜¯å¦æœ‰å‡½æ•°è¿æ¥ã€‚ <a href="https://github.com/PyQt5/PyQt/blob/0c8e7d33d7a1da7a53a6b6d15869095f1626faf0/Demo/IsSignalConnected.py">å‚è€ƒå®ç°</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      çº¯ Python ä¿¡å·æ§½åº“
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Python marshmallow åº“</title>
    <link href="https://blog.l0v0.com/posts/2c8022e3.html"/>
    <id>https://blog.l0v0.com/posts/2c8022e3.html</id>
    <published>2022-02-28T07:37:44.000Z</published>
    <updated>2022-11-09T02:37:04.824Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;ä½¿ç”¨ Python ç»å¸¸éœ€è¦å°†ä¸€äº›æ•°æ®åºåˆ—åŒ–å­˜å‚¨åˆ°æœ¬åœ°<br>&emsp;&emsp;åŒæ—¶åˆæƒ³è¦ååºåˆ—åŒ–å°†æœ¬åœ°çš„ json æ•°æ®è½¬æ¢ä¸ºå¯¹è±¡ã€‚<br>&emsp;&emsp;é€šå¸¸çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨æ•°æ®åº“çš„ orm æ–¹æ¡ˆï¼Œç”¨ orm å¯¹è±¡æ¥åŒæ­¥æ•°æ®åº“ã€‚<br>&emsp;&emsp;æ•°æ®å…¨éƒ¨é™„ç€åœ¨ orm ä¸Šï¼Œå½“ orm ä¸Šçš„æ•°æ®æ”¹å˜æ—¶ç›´æ¥ä¿®æ”¹åˆ°æ•°æ®åº“ä¸Šã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ä½†æ˜¯åœ¨æˆ‘çš„å·¥ä½œä½¿ç”¨åœºæ™¯ä¸­ï¼ŒData Centric çš„æµç¨‹æ›´ä¸ºæ¨å´‡ï¼Œå› æ­¤è¾“å‡ºä¸€ä¸ª json æ–‡ä»¶ä¼šæ›´å¥½ä¸€ç‚¹ã€‚<br>&emsp;&emsp;é‚£ä¹ˆ marshmallow åº“å°±æ˜¯ä¸€ä¸ªå¾ˆä¸é”™çš„é€‰é¡¹ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;å¦å¤–è¿™ä¸ªåº“å¯ä»¥å’Œ ä¹‹å‰æåˆ°çš„ attrs åº“å¯ä»¥ç»“åˆä½¿ç”¨ã€‚ <a href="./1f4cc7d1.html">æ–‡ç« </a></p></blockquote><p><a href="https://github.com/marshmallow-code/marshmallow">Github åœ°å€</a><br><a href="https://marshmallow.readthedocs.io/en/stable/">å®˜æ–¹è¯´æ˜æ–‡æ¡£</a></p><h2 id="ä»€ä¹ˆæ˜¯åºåˆ—åŒ–-ä»€ä¹ˆæ˜¯-orm"><a href="#ä»€ä¹ˆæ˜¯åºåˆ—åŒ–-ä»€ä¹ˆæ˜¯-orm" class="headerlink" title="ä»€ä¹ˆæ˜¯åºåˆ—åŒ– ä»€ä¹ˆæ˜¯ orm"></a>ä»€ä¹ˆæ˜¯åºåˆ—åŒ– ä»€ä¹ˆæ˜¯ orm</h2><blockquote><p>&emsp;&emsp;åºåˆ—åŒ–å°±æ˜¯å°†ä»£ç å¯¹è±¡è½¬æ¢ä¸ºçº¯æ•°æ®è¿›è¡Œå­˜å‚¨<br>&emsp;&emsp;ååºåˆ—åŒ–å°±æ˜¯å°†çº¯æ•°æ®é‡æ–°è½¬æ¢ä¸º ä»£ç å¯¹è±¡<br>&emsp;&emsp;ä»£ç å¯¹è±¡å¯ä»¥æ‹¥æœ‰ç‰¹å®šçš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥è§¦å‘å¯¹æ•°æ®çš„å¤„ç†ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;orm å…¨ç§°æ˜¯ Object-relational Mappers<br>&emsp;&emsp;é€šå¸¸æ˜¯ä¸€ä¸ªå®šä¹‰äº†å¯¹è±¡å®ä¾‹åŒ–è§„åˆ™çš„ç±»ã€‚<br>&emsp;&emsp;é€šè¿‡æ“ä½œè¿™ä¸ªç±»çš„å®ä¾‹å°±å¯ä»¥ç”¨ä»£ç çš„æ–¹å¼å°†æ•°æ®è¿›è¡Œäº’ç›¸è½¬æ¢ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/2c8022e3/01.png" alt="alt"></p><blockquote><p>&emsp;&emsp;ä¸Šé¢çš„å›¾ç‰‡å°±æ˜¯ä¼ ç»Ÿ orm å®ç°çš„æ•ˆæœï¼Œå¯ä»¥ç”¨ orm å¯¹è±¡æ¥æ‰§è¡Œ sql è¯­å¥ä»è€Œç®€åŒ–æ•°æ®åº“åŒæ­¥çš„æ“ä½œï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†ä»£ç çš„å®‰å…¨æ€§ã€‚<br>&emsp;&emsp;è¿™ä¸ªæ“ä½œå®ç°äº†å†…å­˜åˆ°ç¡¬ç›˜æ¡¥æ¢ï¼Œç®¡ç†æ›´åŠ æ¸…æ™°æ–¹ä¾¿ã€‚</p></blockquote><h2 id="marshmallow-ä»‹ç»"><a href="#marshmallow-ä»‹ç»" class="headerlink" title="marshmallow ä»‹ç»"></a>marshmallow ä»‹ç»</h2><h3 id="marshmallow-åŸºæœ¬ç”¨æ³•"><a href="#marshmallow-åŸºæœ¬ç”¨æ³•" class="headerlink" title="marshmallow åŸºæœ¬ç”¨æ³•"></a>marshmallow åŸºæœ¬ç”¨æ³•</h3><blockquote><p>&emsp;&emsp;å’Œå…¶ä»– orm åº“ä¸€æ ·ï¼Œmarshmallow éœ€è¦å®šä¹‰ Schema ç±»ä½œä¸ºæ•°æ®çº¦æŸã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Album</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    title = attr.ib()</span><br><span class="line">    artist = attr.ib()</span><br><span class="line">    </span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Artist</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    name = attr.ib()</span><br><span class="line"></span><br><span class="line"><span class="comment"># NOTE ç”Ÿæˆ Python å¯¹è±¡</span></span><br><span class="line">bowie = Artist(name=<span class="string">&quot;David Bowie&quot;</span>)</span><br><span class="line">album = Album(artist=bowie, title=<span class="string">&quot;Hunky Dory&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> marshmallow <span class="keyword">import</span> Schema, fields</span><br><span class="line"></span><br><span class="line"><span class="comment"># NOTE å®šä¹‰ Schema æ¥çº¦æŸæ•°æ®è½¬æ¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ArtistSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    name = fields.Str()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AlbumSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    title = fields.Str()</span><br><span class="line">    artist = fields.Nested(ArtistSchema())</span><br><span class="line"></span><br><span class="line"><span class="comment"># NOTE é€šè¿‡ Schema å°†å¯¹è±¡è½¬æ¢ä¸ºå­—å…¸</span></span><br><span class="line">schema = AlbumSchema()</span><br><span class="line">result = schema.dump(album)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(result))  <span class="comment"># &lt;class &#x27;dict&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(result)  <span class="comment"># &#123;&#x27;artist&#x27;: &#123;&#x27;name&#x27;: &#x27;David Bowie&#x27;&#125;, &#x27;title&#x27;: &#x27;Hunky Dory&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line">result = schema.dumps(album)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(result))  <span class="comment"># &lt;class &#x27;str&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(result)   <span class="comment"># &#x27;&#123;&quot;artist&quot;: &#123;&quot;name&quot;: &quot;David Bowie&quot;&#125;, &quot;title&quot;: &quot;Hunky Dory&quot;&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">album = schema.loads(result)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(album))  <span class="comment"># &lt;class &#x27;dict&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(album)  <span class="comment"># &#123;&#x27;artist&#x27;: &#123;&#x27;name&#x27;: &#x27;David Bowie&#x27;&#125;, &#x27;title&#x27;: &#x27;Hunky Dory&#x27;&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡ Schema å®šä¹‰å¥½æ•°æ®å¯¹è±¡çš„è½¬æ¢æ–¹å¼ã€‚<br>&emsp;&emsp;<code>dump</code> å¯ä»¥å°†å¯¹è±¡æ•°æ®è½¬æ¢ä¸ºå­—å…¸ï¼Œ<code>dumps</code> åˆ™æ˜¯è½¬æ¢ä¸º å­—ç¬¦ä¸²<br>&emsp;&emsp;<code>load</code> å¯ä»¥å°†å­—å…¸è½¬æ¢ä¸ºå¯¹è±¡(é»˜è®¤æ˜¯å­—å…¸ï¼Œéœ€è¦é¢å¤–çš„å¤„ç†æ‰å¯ä»¥)ï¼Œ<code>loads</code> å¯ä»¥å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹è±¡ã€‚</p></blockquote><h3 id="ååºåˆ—åŒ–ä¸ºå¯¹è±¡"><a href="#ååºåˆ—åŒ–ä¸ºå¯¹è±¡" class="headerlink" title="ååºåˆ—åŒ–ä¸ºå¯¹è±¡"></a>ååºåˆ—åŒ–ä¸ºå¯¹è±¡</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"><span class="keyword">from</span> marshmallow <span class="keyword">import</span> Schema, fields, post_load</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Album</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    title = attr.ib()</span><br><span class="line">    artist = attr.ib()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Artist</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    name = attr.ib()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ArtistSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    name = fields.Str()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ArtistSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    name = fields.Str()</span><br><span class="line"></span><br><span class="line"><span class="meta">    @post_load</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">make_artist</span>(<span class="params">self, data, **kwargs</span>):</span><br><span class="line">        <span class="keyword">return</span> Artist(**data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AlbumSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    title = fields.Str()</span><br><span class="line">    artist = fields.Nested(ArtistSchema())</span><br><span class="line"></span><br><span class="line"><span class="meta">    @post_load</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">make_album</span>(<span class="params">self, data, **kwargs</span>):</span><br><span class="line">        <span class="keyword">return</span> Album(**data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">bowie = Artist(name=<span class="string">&quot;David Bowie&quot;</span>)</span><br><span class="line">album = Album(artist=bowie, title=<span class="string">&quot;Hunky Dory&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># NOTE é€šè¿‡ Schema å°†å¯¹è±¡è½¬æ¢ä¸ºå­—å…¸</span></span><br><span class="line">schema = AlbumSchema()</span><br><span class="line">result = schema.dumps(album)</span><br><span class="line">album = schema.loads(result)</span><br><span class="line"><span class="built_in">print</span>(album)  <span class="comment"># Album(title=&#x27;Hunky Dory&#x27;, artist=Artist(name=&#x27;David Bowie&#x27;))</span></span><br><span class="line"><span class="built_in">print</span>(album.title)  <span class="comment"># Hunky Dory</span></span><br><span class="line"><span class="built_in">print</span>(album.artist)  <span class="comment"># Artist(name=&#x27;David Bowie&#x27;)</span></span><br><span class="line"><span class="built_in">print</span>(album.artist.name)  <span class="comment"># David Bowie</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡åŠ å…¥ <code>post_load</code> è£…é¥°å™¨å¯ä»¥å°†å­—å…¸æ•°æ®åšè¿›ä¸€æ­¥çš„è½¬æ¢ã€‚<br>&emsp;&emsp;ä½¿ç”¨ attrs åº“å°±ä¸éœ€è¦åœ¨ <code>__init__</code> å‡½æ•°ä¸­å†™å…¥å¤§é‡ä¼ å‚å’Œåˆå§‹åŒ–æ•°æ®çš„ä¿¡æ¯äº†ã€‚</p></blockquote><h3 id="åµŒå¥—-Schema"><a href="#åµŒå¥—-Schema" class="headerlink" title="åµŒå¥— Schema"></a>åµŒå¥— Schema</h3><p><a href="https://marshmallow.readthedocs.io/en/stable/nesting.html">å®˜æ–¹æ–‡æ¡£</a></p><blockquote><p>&emsp;&emsp;é€šè¿‡ <code>fields.Nested</code> çš„æ–¹æ³•å®šä¹‰åµŒå¥—çš„å¯¹è±¡ï¼Œä»è€Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–å¯ä»¥å¤ç”¨ Schemaã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"><span class="keyword">from</span> marshmallow <span class="keyword">import</span> Schema, fields</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>(<span class="title class_ inherited__">Dict</span>):</span><br><span class="line">    title = attr.ib()</span><br><span class="line">    author = attr.ib()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Author</span>(<span class="title class_ inherited__">Dict</span>):</span><br><span class="line">    name = attr.ib()</span><br><span class="line">    books = attr.ib()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">potter = Book(<span class="string">&quot;potter&quot;</span>, <span class="string">&quot;JK&quot;</span>)</span><br><span class="line">JK = Author(<span class="string">&quot;JK&quot;</span>, [potter])</span><br><span class="line">potter.author = JK</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BookSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    title = fields.Str()</span><br><span class="line">    author = fields.Nested(<span class="string">&quot;AuthorSchema&quot;</span>, only=(<span class="string">&quot;name&quot;</span>,))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AuthorSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    name = fields.Str()</span><br><span class="line">    books = fields.<span class="type">List</span>(fields.Nested(<span class="string">&quot;BookSchema&quot;</span>, exclude=(<span class="string">&quot;author&quot;</span>,)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">schema = BookSchema()</span><br><span class="line">res = schema.dump(potter)</span><br><span class="line"><span class="built_in">print</span>(res)  <span class="comment"># &#123;&#x27;title&#x27;: &#x27;potter&#x27;, &#x27;author&#x27;: &#123;&#x27;name&#x27;: &#x27;JK&#x27;&#125;&#125;</span></span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰-Field"><a href="#è‡ªå®šä¹‰-Field" class="headerlink" title="è‡ªå®šä¹‰ Field"></a>è‡ªå®šä¹‰ Field</h3><p><a href="https://marshmallow.readthedocs.io/en/stable/custom_fields.html">å®˜æ–¹æ–‡æ¡£</a></p><blockquote><p>&emsp;&emsp;é»˜è®¤æä¾›çš„ field å¯èƒ½ä¸èƒ½æ»¡è¶³éœ€æ±‚ã€‚<br>&emsp;&emsp;æœ‰äº›åº“çš„ field éœ€è¦è‡ªå®šä¹‰å¤æ‚çš„ åºåˆ—åŒ– å’Œ ååºåˆ—åŒ–æ“ä½œã€‚<br>&emsp;&emsp;è¿™ä¸ªæ—¶å€™å°±å¯ä»¥å®šä¹‰è‡ªå·±çš„ field æ¥è§£å†³é—®é¢˜ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ç®€å•çš„æƒ…å†µå¯ä»¥ä½¿ç”¨ <code>Method</code> å’Œ <code>Function</code> æ¥è§£å†³é—®é¢˜</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    name = fields.String()</span><br><span class="line">    email = fields.String()</span><br><span class="line">    created_at = fields.DateTime()</span><br><span class="line">    since_created = fields.Method(<span class="string">&quot;get_days_since_created&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_days_since_created</span>(<span class="params">self, obj</span>):</span><br><span class="line">        <span class="keyword">return</span> dt.datetime.now().day - obj.created_at.day</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    name = fields.String()</span><br><span class="line">    email = fields.String()</span><br><span class="line">    created_at = fields.DateTime()</span><br><span class="line">    uppername = fields.Function(<span class="keyword">lambda</span> obj: obj.name.upper())</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é»˜è®¤æƒ…å†µä¸‹æ˜¯ serialize å‡½æ•°ï¼Œå¦‚æœè¦è‡ªå®šä¹‰ deserialize å¯ä»¥ä½¿ç”¨  <code>Method</code> å’Œ <code>Function</code> ä¼ å…¥ deserialize å‚æ•°è¿›è¡ŒæŒ‡å®šã€‚</p></blockquote><blockquote><p>&emsp;&emsp;å¤æ‚çš„æƒ…å†µå°±éœ€è¦ <code>fields.Field</code> ç±»ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> marshmallow <span class="keyword">import</span> fields, ValidationError</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PinCode</span>(fields.Field):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Field that serializes to a string of numbers and deserializes</span></span><br><span class="line"><span class="string">    to a list of numbers.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_serialize</span>(<span class="params">self, value, attr, obj, **kwargs</span>):</span><br><span class="line">        <span class="keyword">if</span> value <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>.join(<span class="built_in">str</span>(d) <span class="keyword">for</span> d <span class="keyword">in</span> value)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_deserialize</span>(<span class="params">self, value, attr, data, **kwargs</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">return</span> [<span class="built_in">int</span>(c) <span class="keyword">for</span> c <span class="keyword">in</span> value]</span><br><span class="line">        <span class="keyword">except</span> ValueError <span class="keyword">as</span> error:</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(<span class="string">&quot;Pin codes must contain only digits.&quot;</span>) <span class="keyword">from</span> error</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    name = fields.String()</span><br><span class="line">    email = fields.String()</span><br><span class="line">    created_at = fields.DateTime()</span><br><span class="line">    pin_code = PinCode()</span><br></pre></td></tr></table></figure><h2 id="è¸©è¿‡çš„å‘"><a href="#è¸©è¿‡çš„å‘" class="headerlink" title="è¸©è¿‡çš„å‘"></a>è¸©è¿‡çš„å‘</h2><h3 id="åŒå‘åµŒå¥—æ•°æ®"><a href="#åŒå‘åµŒå¥—æ•°æ®" class="headerlink" title="åŒå‘åµŒå¥—æ•°æ®"></a>åŒå‘åµŒå¥—æ•°æ®</h3><blockquote><p>&emsp;&emsp;å¦‚æœæ•°æ®å­˜åœ¨ç›¸äº’åµŒå¥—å¼•ç”¨çš„å…³ç³»ï¼Œæ˜¯æ— æ³•é€šè¿‡åŸç”Ÿçš„ json å†…ç½®åº“è¿›è¡Œåºåˆ—åŒ–çš„ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> addict <span class="keyword">import</span> <span class="type">Dict</span></span><br><span class="line"><span class="keyword">from</span> marshmallow <span class="keyword">import</span> Schema, fields</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>(<span class="title class_ inherited__">Dict</span>):</span><br><span class="line">    title = attr.ib()</span><br><span class="line">    author = attr.ib()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Author</span>(<span class="title class_ inherited__">Dict</span>):</span><br><span class="line">    name = attr.ib()</span><br><span class="line">    books = attr.ib()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">potter = Book(<span class="string">&quot;potter&quot;</span>, <span class="string">&quot;JK&quot;</span>)</span><br><span class="line">JK = Author(<span class="string">&quot;JK&quot;</span>, [potter])</span><br><span class="line">potter.author = JK</span><br><span class="line"><span class="built_in">print</span>(json.dumps(potter))</span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#   File &quot;f:/repo/_blog/source/_posts/Python/pacakge/02_marshmallow.py&quot;, line 22, in &lt;module&gt;</span></span><br><span class="line"><span class="comment">#     print(json.dumps(potter))</span></span><br><span class="line"><span class="comment">#   File &quot;C:\tools\Anaconda3\lib\json\__init__.py&quot;, line 231, in dumps</span></span><br><span class="line"><span class="comment">#     return _default_encoder.encode(obj)</span></span><br><span class="line"><span class="comment">#   File &quot;C:\tools\Anaconda3\lib\json\encoder.py&quot;, line 199, in encode</span></span><br><span class="line"><span class="comment">#     chunks = self.iterencode(o, _one_shot=True)</span></span><br><span class="line"><span class="comment">#   File &quot;C:\tools\Anaconda3\lib\json\encoder.py&quot;, line 257, in iterencode</span></span><br><span class="line"><span class="comment">#     return _iterencode(o, 0)</span></span><br><span class="line"><span class="comment"># ValueError: Circular reference detected</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;marshmallow åˆ™éœ€è¦é€šè¿‡ Schema çš„å®šä¹‰è¿‡æ»¤æ‰ç‰¹å®šçš„åµŒå¥—é”®å€¼æ‰å¯ç”¨ã€‚<br>&emsp;&emsp;å¹¶ä¸”åŠ è½½æ•°æ®çš„æ—¶å€™å¹¶ä¸èƒ½è¿˜åŸå®ƒä»¬åŸæœ‰çš„å…³è”å…³ç³»ã€‚<br>&emsp;&emsp;éœ€è¦è‡ªå·±çš„æ‰‹åŠ¨å»å®šä¹‰ååºåˆ—åŒ–ä¹‹åçš„æ“ä½œã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> addict <span class="keyword">import</span> <span class="type">Dict</span></span><br><span class="line"><span class="keyword">from</span> marshmallow <span class="keyword">import</span> Schema, fields,post_load</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>(<span class="title class_ inherited__">Dict</span>):</span><br><span class="line">    title = attr.ib()</span><br><span class="line">    author = attr.ib(default=<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Author</span>(<span class="title class_ inherited__">Dict</span>):</span><br><span class="line">    name = attr.ib()</span><br><span class="line">    books = attr.ib(factory=<span class="built_in">list</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">potter = Book(<span class="string">&quot;potter&quot;</span>, <span class="string">&quot;JK&quot;</span>)</span><br><span class="line">JK = Author(<span class="string">&quot;JK&quot;</span>, [potter])</span><br><span class="line">potter.author = JK</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BookSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    title = fields.Str()</span><br><span class="line">    author = fields.Nested(<span class="string">&quot;AuthorSchema&quot;</span>, only=(<span class="string">&quot;name&quot;</span>,))</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @post_load</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">make_object</span>(<span class="params">self, data, **kwargs</span>):</span><br><span class="line">        book = Book(**data)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;author&#x27;</span> <span class="keyword">in</span> data:</span><br><span class="line">            books = book.author.books</span><br><span class="line">            <span class="keyword">if</span> book <span class="keyword">not</span> <span class="keyword">in</span> books:</span><br><span class="line">                books.append(book)</span><br><span class="line">        <span class="keyword">return</span> book</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AuthorSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    name = fields.Str()</span><br><span class="line">    books = fields.<span class="type">List</span>(fields.Nested(<span class="string">&quot;BookSchema&quot;</span>, exclude=(<span class="string">&quot;author&quot;</span>,)))</span><br><span class="line"></span><br><span class="line"><span class="meta">    @post_load</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">make_object</span>(<span class="params">self, data, **kwargs</span>):</span><br><span class="line">        author = Author(**data)</span><br><span class="line">        <span class="keyword">for</span> book <span class="keyword">in</span> author.books:</span><br><span class="line">            book.author = author</span><br><span class="line">        <span class="keyword">return</span> author</span><br><span class="line"></span><br><span class="line">schema = BookSchema()</span><br><span class="line">res = schema.dumps(potter).data</span><br><span class="line"></span><br><span class="line">new_potter = schema.loads(res).data</span><br><span class="line"><span class="built_in">print</span>(potter)  <span class="comment"># Book(title=&#x27;potter&#x27;, author=Author(name=&#x27;JK&#x27;, books=[...]))</span></span><br><span class="line"><span class="built_in">print</span>(new_potter)  <span class="comment"># Book(title=&#x27;potter&#x27;, author=Author(name=&#x27;JK&#x27;, books=[...]))</span></span><br><span class="line"></span><br><span class="line">schema = AuthorSchema()</span><br><span class="line">res = schema.dumps(JK).data</span><br><span class="line">new_JK = schema.loads(res).data</span><br><span class="line"><span class="built_in">print</span>(JK)  <span class="comment"># Author(name=&#x27;JK&#x27;, books=[Book(title=&#x27;potter&#x27;, author=...)])</span></span><br><span class="line"><span class="built_in">print</span>(new_JK)  <span class="comment"># Author(name=&#x27;JK&#x27;, books=[Book(title=&#x27;potter&#x27;, author=...)])</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å…³ç³»é‡å»ºéœ€è¦æ‰‹åŠ¨å¤„ç†ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;ä½¿ç”¨ marshmallow å¯ä»¥å¾ˆæ–¹ä¾¿å®ç°æ•°æ®åºåˆ—åŒ–ã€‚<br>&emsp;&emsp;ä½¿ç”¨çš„æ—¶å€™å¯ä»¥é…åˆ <code>addict</code> ä»¥åŠä¸‹ä¸€ç¯‡æ–‡ç« è¦ä»‹ç»çš„ <code>cerberus</code> ç»“åˆä½¿ç”¨ã€‚<br>&emsp;&emsp;å¯ä»¥è®©ä½¿ç”¨ä½“éªŒæ›´ä¸Šä¸€å±‚æ¥¼ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      åºåˆ—åŒ– orm å·¥å…·
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Python cerberus åº“</title>
    <link href="https://blog.l0v0.com/posts/8a7956b2.html"/>
    <id>https://blog.l0v0.com/posts/8a7956b2.html</id>
    <published>2022-02-28T07:37:38.000Z</published>
    <updated>2022-11-09T02:37:04.825Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;cerberus ç¿»è¯‘ä¸ºåœ°ç‹±çŠ¬ï¼Œæ˜¯åœ°ç‹±çš„çœ‹é—¨ç‹—ï¼Œæ¯”å–»åšæ•°æ®çš„æ ¡éªŒè€…ã€‚<br>&emsp;&emsp;è¿™ä¸ªåº“æ˜¯ä¸“é—¨ç”¨æ¥æ ¡éªŒåšæ•°æ®æ ¡éªŒã€‚<br>&emsp;&emsp;å¯ä»¥é€šè¿‡å®šä¹‰ä¸€ä¸ª schema æ–‡ä»¶æ¥å¿«é€Ÿæ ¡éªŒæ•°æ®æ˜¯å¦å¤åˆ schemaã€‚</p></blockquote><p><a href="https://github.com/pyeve/cerberus">Github åœ°å€</a><br><a href="https://docs.python-cerberus.org/en/stable/index.html">å®˜æ–¹è¯´æ˜æ–‡æ¡£</a></p><h2 id="cerberus-ä»‹ç»"><a href="#cerberus-ä»‹ç»" class="headerlink" title="cerberus ä»‹ç»"></a>cerberus ä»‹ç»</h2><h3 id="cerberus-åŸºæœ¬ç”¨æ³•"><a href="#cerberus-åŸºæœ¬ç”¨æ³•" class="headerlink" title="cerberus åŸºæœ¬ç”¨æ³•"></a>cerberus åŸºæœ¬ç”¨æ³•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> cerberus <span class="keyword">import</span> Validator</span><br><span class="line"></span><br><span class="line">schema = &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>&#125;,</span><br><span class="line">    <span class="string">&quot;member&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;dict&quot;</span>,</span><br><span class="line">        <span class="string">&quot;require_all&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&quot;schema&quot;</span>: &#123;<span class="string">&quot;address&quot;</span>: &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>&#125;&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">v = Validator(schema)</span><br><span class="line">document = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;john doe&quot;</span>, <span class="string">&quot;member&quot;</span>: &#123;&#125;&#125;</span><br><span class="line">result = v.validate(document)</span><br><span class="line"><span class="built_in">print</span>(result)  <span class="comment"># æ‰“å° False</span></span><br><span class="line"><span class="built_in">print</span>(v.errors)  <span class="comment"># æ‰“å° &#123;&#x27;member&#x27;: [&#123;&#x27;address&#x27;: [&#x27;required field&#x27;]&#125;]&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¸»è¦ç”¨æ³•å°±æ˜¯å®šä¹‰ä¸€ä¸ªè§„èŒƒã€‚<br>&emsp;&emsp;cerberus ä¼šæ ¹æ®è¿™ä¸ªè§„èŒƒå¯¹æ•°æ®è¿›è¡Œæ ¡éªŒã€‚<br>&emsp;&emsp;è¿™å…¶ä¸­çš„è§„åˆ™æ—¢å¯ä»¥æ ¹æ®å®˜æ–¹æ–‡æ¡£æ·»åŠ ï¼Œä¹Ÿå¯ä»¥ç»§æ‰¿ Validator å®ç°è‡ªå®šä¹‰çš„è§„åˆ™ã€‚</p></blockquote><h3 id="cerberus-åµŒå¥—æ£€æŸ¥"><a href="#cerberus-åµŒå¥—æ£€æŸ¥" class="headerlink" title="cerberus åµŒå¥—æ£€æŸ¥"></a>cerberus åµŒå¥—æ£€æŸ¥</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> cerberus <span class="keyword">import</span> schema_registry</span><br><span class="line"></span><br><span class="line">schema_registry.add(<span class="string">&quot;non-system user&quot;</span>, &#123;<span class="string">&quot;uid&quot;</span>: &#123;<span class="string">&quot;min&quot;</span>: <span class="number">1000</span>, <span class="string">&quot;max&quot;</span>: <span class="number">0xFFFF</span>&#125;&#125;)</span><br><span class="line">schema = &#123;</span><br><span class="line">    <span class="string">&quot;sender&quot;</span>: &#123;<span class="string">&quot;schema&quot;</span>: <span class="string">&quot;non-system user&quot;</span>, <span class="string">&quot;allow_unknown&quot;</span>: <span class="literal">True</span>&#125;,</span><br><span class="line">    <span class="string">&quot;receiver&quot;</span>: &#123;<span class="string">&quot;schema&quot;</span>: <span class="string">&quot;non-system user&quot;</span>, <span class="string">&quot;allow_unknown&quot;</span>: <span class="literal">True</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¯¼å…¥ schema_registry æ·»åŠ åˆ°é‡Œé¢çš„ schema å¯ä»¥è¢«åˆ«çš„åœ°æ–¹å¤ç”¨ã€‚<br>&emsp;&emsp;åˆ«çš„ schema åªè¦è¾“å…¥ç›¸åº”çš„å­—ç¬¦ä¸²å°±å¯ä»¥å¤ç”¨ schema<br>&emsp;&emsp;æˆ–è€…ä¹Ÿå¯ä»¥é€šè¿‡æ¥å…¥å­—å…¸å˜é‡çš„æ–¹å¼æ¥å¤ç”¨ schema </p></blockquote><h3 id="cerberus-è‡ªå®šä¹‰æ£€æŸ¥åŠŸèƒ½"><a href="#cerberus-è‡ªå®šä¹‰æ£€æŸ¥åŠŸèƒ½" class="headerlink" title="cerberus è‡ªå®šä¹‰æ£€æŸ¥åŠŸèƒ½"></a>cerberus è‡ªå®šä¹‰æ£€æŸ¥åŠŸèƒ½</h3><blockquote><p>&emsp;&emsp;æ‰©å±•æ£€æŸ¥è§„åˆ™å¯ä»¥é€šè¿‡ç»§æ‰¿ <code>Validator</code> æ¥å®ç°ï¼Œéå¸¸ç®€å•æ–¹ä¾¿ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> cerberus <span class="keyword">import</span> Validator</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyValidator</span>(<span class="title class_ inherited__">Validator</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_validate_is_odd</span>(<span class="params">self, constraint, field, value</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; Test the oddity of a value.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        The rule&#x27;s arguments are validated against this schema:</span></span><br><span class="line"><span class="string">        &#123;&#x27;type&#x27;: &#x27;boolean&#x27;&#125;</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> constraint <span class="keyword">is</span> <span class="literal">True</span> <span class="keyword">and</span> <span class="keyword">not</span> <span class="built_in">bool</span>(value &amp; <span class="number">1</span>):</span><br><span class="line">            self._error(field, <span class="string">&quot;Must be an odd number&quot;</span>)</span><br><span class="line"></span><br><span class="line">schema = &#123;<span class="string">&#x27;amount&#x27;</span>: &#123;<span class="string">&#x27;is odd&#x27;</span>: <span class="literal">True</span>, <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;integer&#x27;</span>&#125;&#125;</span><br><span class="line">v = MyValidator(schema)</span><br><span class="line">v.validate(&#123;<span class="string">&#x27;amount&#x27;</span>: <span class="number">10</span>&#125;)  <span class="comment"># æ‰“å° False</span></span><br></pre></td></tr></table></figure><h2 id="ç»“åˆ-marshmallow-ä½¿ç”¨"><a href="#ç»“åˆ-marshmallow-ä½¿ç”¨" class="headerlink" title="ç»“åˆ marshmallow ä½¿ç”¨"></a>ç»“åˆ marshmallow ä½¿ç”¨</h2><blockquote><p>&emsp;&emsp;ä½¿ç”¨ cerberus çš„ schema å¯ä»¥è®©æ ¡éªŒè§„åˆ™ç»Ÿä¸€åˆ°ä¸€ä¸ªåœ°æ–¹è¿›è¡Œé…ç½®ã€‚<br>&emsp;&emsp;é…ç½®æ›´åŠ æ¸…æ™°ï¼ŒæŸ¥æ‰¾ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ã€‚<br>&emsp;&emsp;ç›¸è¾ƒäºä½¿ç”¨ <code>attrs</code> æˆ–è€… <code>marshmallow</code> æä¾›æ ¡éªŒåŠŸèƒ½ã€‚<br>&emsp;&emsp;cerberus å¯ä»¥æ›´åŠ æ¸…æ™°åœ°é…ç½®å’Œä¿®æ”¹ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« ä»‹ç»äº†ä½¿ç”¨ <code>marshmallow</code> å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯¹æ•°æ®è¿›è¡Œåºåˆ—åŒ–ã€‚<br>&emsp;&emsp;åŒæ—¶å®ƒä¹Ÿå¯ä»¥å¯¹æ¯ä¸€ä¸ª field ç¼–å†™å‡½æ•°è¿›è¡Œæ•°æ®æ ¡éªŒï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨ åµŒå¥— Schema çš„è¯<br>&emsp;&emsp;è¿™äº›æ ¡éªŒæ–¹æ³•ä¸œä¸€å—è¥¿ä¸€å—ï¼Œé…ç½®å’Œä¿®æ”¹éƒ½éå¸¸ç¹çã€‚<br>&emsp;&emsp;è¿™ä¸ªä½¿ç”¨å¯ä»¥ç»“åˆ <code>marshmallow</code> çš„ <code>validates_schema</code> è£…é¥°å™¨é€šè¿‡å‡½æ•°è°ƒç”¨ cerberus è¿›è¡Œæ•°æ®æ ¡éªŒã€‚ <a href="https://marshmallow.readthedocs.io/en/stable/upgrading.html?highlight=validate_schema#schema-validators">marshmallow æ–‡æ¡£</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> marshmallow <span class="keyword">import</span> Schema, fields, validates_schema, ValidationError</span><br><span class="line"><span class="keyword">from</span> cerberus <span class="keyword">import</span> Validator</span><br><span class="line"></span><br><span class="line">schema = &#123;</span><br><span class="line">    <span class="string">&quot;field_a&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;required&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;integer&quot;</span>,</span><br><span class="line">        <span class="string">&quot;min&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;max&quot;</span>: <span class="number">5</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">validator = Validator(schema)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MySchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    field_a = fields.Int(required=<span class="literal">True</span>)</span><br><span class="line">    field_b = fields.Int(required=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @validates_schema(<span class="params">pass_original=<span class="literal">True</span></span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">validate_schema</span>(<span class="params">self, data, original_data</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> validator.validate(original_data):</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(validator.errors)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">schema = MySchema()</span><br><span class="line">document = &#123;</span><br><span class="line">    <span class="string">&quot;field_a&quot;</span>: -<span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;field_b&quot;</span>: -<span class="number">1</span>,</span><br><span class="line">&#125;</span><br><span class="line">res, err = schema.load(document)</span><br><span class="line"><span class="built_in">print</span>(err)  <span class="comment"># æ‰“å° &#123;&#x27;_schema&#x27;: [&#123;&#x27;field_a&#x27;: [&#x27;min value is 0&#x27;], &#x27;field_b&#x27;: [&#x27;unknown field&#x27;]&#125;]&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è¿™æ ·å°±å¯ä»¥å®ç°ååºåˆ—åŒ–æ•°æ®çš„åŒæ—¶è¿›è¡Œæ•°æ®æ ¡éªŒã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;cerberus å…¶å®ä¹Ÿå¯ä»¥åšæ•°æ®çš„ coerce ï¼Œå®ç°ä¸€å®šç¨‹åº¦çš„åºåˆ—åŒ–åŠŸèƒ½ã€‚<br>&emsp;&emsp;ä¸è¿‡å¦‚æœéœ€è¦åµŒå¥—çš„è¯ï¼Œè¿˜æ˜¯ç”¨ marshmallow è¿›è¡Œå¤„ç†æ¯”è¾ƒæ–¹ä¾¿ã€‚<br>&emsp;&emsp;è€Œä¸” marshmallow åµŒå¥—è°ƒç”¨ä¹Ÿå¯ä»¥é…åˆç€ cerberus é¡ºä¾¿è¿›è¡Œæ•°æ®æ ¡éªŒã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      åŸºäº schema å­—å…¸æ•°æ®æ ¡éªŒåº“
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Python pluggy åº“</title>
    <link href="https://blog.l0v0.com/posts/7beafa88.html"/>
    <id>https://blog.l0v0.com/posts/7beafa88.html</id>
    <published>2022-02-28T03:13:26.000Z</published>
    <updated>2022-11-09T02:37:04.829Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;</p></blockquote><h2 id="ä»€ä¹ˆæ˜¯-pluggy"><a href="#ä»€ä¹ˆæ˜¯-pluggy" class="headerlink" title="ä»€ä¹ˆæ˜¯ pluggy"></a>ä»€ä¹ˆæ˜¯ pluggy</h2><blockquote><p>&emsp;&emsp;pluggy æ˜¯ pytest å›¢é˜Ÿå¼€å‘çš„åº“ï¼Œ<br>&emsp;&emsp;ç”¨æ¥è§£å†³ç»™ pytest å†™æ‰©å±•æ’ä»¶çš„ã€‚<br>&emsp;&emsp;pluggy æä¾›äº†æ–¹ä¾¿çš„ API å¯ä»¥å¾ˆè½»æ¾çš„æ‰©å±•æ¡†æ¶çš„é€»è¾‘ã€‚</p></blockquote><p><a href="https://github.com/pytest-dev/pluggy">Githubä»“åº“</a><br><a href="https://pluggy.readthedocs.io/en/latest/">æ–‡æ¡£åœ°å€</a></p><h2 id="pluggy-çš„è°ƒåº¦æ–¹å¼"><a href="#pluggy-çš„è°ƒåº¦æ–¹å¼" class="headerlink" title="pluggy çš„è°ƒåº¦æ–¹å¼"></a>pluggy çš„è°ƒåº¦æ–¹å¼</h2><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/2c8022e3/a27504a12b44751e025e75587f27b489.jpeg" alt="image"></p><p><a href="https://viewer.diagrams.net/?tags=%7B%7D&amp;highlight=0000ff&amp;edit=_blank&amp;layers=1&amp;nav=1&amp;title=pluggy.drawio#R7VxLc%2BI4EP41qto5bMqW30cbyGZqkp3U5rDHlAIK9sRYlC1Ckl%2B%2Falk2GBlCIASY9Qm5LQk9vu7%2B1JKMrN7k5a%2BcTOMbNqIpwsboBVl9hLHpWrb4AcmrkpguLiXjPBkp2UJwl7xRJTSUdJaMaNHIyBlLeTJtCocsy%2BiQN2Qkz9m8me2Rpc1%2FnZIx1QR3Q5Lq0n%2BTEY9LqY%2B9hfyKJuOY1%2F0LyjcPZPg0ztksU%2F%2BHsHVpXoaDQfl6Qqq6VEeLmIzYfElkDZDVyxnjZWry0qMpDG41bJfR3P3xdGUUf9vhaGgX7Oou%2FrOs7PIjReoe5jTjn1y1o%2FrGX6vxpCMxvOqR5TxmY5aRdLCQRsNZ%2FkyhVkM8yAGUT6Z4Kp4oH8bq1aL0NWNTleMX5fxVoYjMOBOimE9S9faRZbzHUpbLtlhm33IcD%2BrlOXuiS29sx4uCPpRI0nRJHvr9sN8T8rJf0JkVmLwziCpfwWb5kG7Ip9SGk3xMN9Zn1lAROkjZhPL8VRTMaUp48txsHVG6MK7z1UVvWSLajQ2luLX6KbW1XLdZRdkwVWoBC5FYasZCJMHyAeCo7j%2BTdKa6cMXYUzGlwxuSP9EcYTcVwxI9QGoMqT9ileGb%2Fg4NHBQOUBCigY2iAPmBDss0FRYF4DePE07vpkROz1xYtSaECPwHzMhj8gK4XEIogDIlDzSNatVvg04DxJ%2BNyGeac%2FqyAyZ1CKla7BUkVM%2FzhTU0K7TEDUtorEddAy8fBYfVWZUdrYqzpVXBwZ5WZb%2F5dbv5Pez8WtZR59fr5vfA82scc36dVuedTKbpRucNGdY4b99BkSeddx8FVuXOB2jgIX%2BAIkPHU%2BfO17hzbDsNf%2B4e3Z2bLdPXmYNtzIG7pTk4qjd3NWtwm87GSXZDMrF2bjMG08m3TqG3VmjPxBdNlT4Bio47CrejTgfbUnR8TKUONKWeTi7AiXeKu4fiOtg6tuKafqe4uymuWUWn39Nc95iKa%2BqaS0aje9C9oo17u0C8o5KEhyg0ZMKXlNuoPbiQBsgXXLwHCTELIW5F0TXo8IrWp8k4E%2BmhmARRlRWBniVDkobqxSQZjSTIclokb%2BRB1gdgmkLsUQ6PEyGnvwEra0xHxjK6Sb3VjoL6S1QH6t9HjL9R740L0whwQ%2FHVP%2B4atK2ysMfHgh4kHos7jn5os%2BDsaRZk0TDPyetSBqUk6%2BP8fjO6a2JnBT5ljZ8LJrMD04HBtO%2BKbycwWUYTTI73BWCqhmTJoYW336VPkp4q8NDAR6GJQp3ZFPNkkhLpBQADFQABRsM4SUfX5JXNYJgLLrxH9RTFLE%2FeRH5SAUi8zrmCl1j5NPGh3Myi0B1UVgEZnBq9rfBhrohuyEsj4zUpeNVAlqZkWiSld4KCEwGKJIsY52yi6ckGCq0auCd7PhRLxtbq%2FlMLR7bbOLJhH4pDYQ1ySXGfZPeFYDFUQ5kYEK4NnRr0FqBUjCilj7yFD3EwalEhllFJNr6Wefr2QvKPGgAQMVH2MZVnCmLBomgmEcEJX8uigNb1DLEqEXwK98SzuXiWFGsqzGuPZaIvJJGTSgUi5xRQ%2Bflg2wNSazClMFRFJ96DEHYPhSBLQ1BBU0E279nDL1gFdxg6dQw5%2BNgY0s9IDHNKOL0XM5ONiphMO1t0%2Bjjy%2FCPjCOve7Ornzx8dg%2FpdGJS7ssZzvRYGpaj6FzEorPs%2FFT%2B%2B6JjUSVmvddsMG5hUG5QOZ710L1ghqWNU54WlNkb1tVjSD65UWOqY1fnhqY1ZfSmerG4vbcc4J1Yjd9p7aVUrl%2BzFLOFpcTF97YjyGRJlBzeJMm45RtO2NKsMzecDTN%2Bs7ejxabmgNVu9pxJorILnXaDxbDF09ECj1XJbqqMx29AYC58DjbF1G5HTcVJwdbTHRf4lCrA8fh%2BhqP1k5%2F%2FkaI%2B1ZmO9PtpjeL7bJBHl0%2Bke7alAujT9i2VuR2V%2FDyprWlty2crbfL4X0UO%2BXVDlBNmI9fGA75eyEdvu2MiOnxQ4iwPKVSuX7ETKxp0fOk8%2F5K%2FsPW7rhg639WjrdKeLqZyUB7JP%2FPCW3R3eOncMHT2mYutbjR0bPj8cHf3wlu1pOGoJ2JSJ0IFXoQFnugYefA3Jt%2BGIVyTva0GiBwUh4cirXPK7C6JUy7UwH0XiLwx1MKy89yUSUSiLh7KeAPkmVAWSAQpDUZpMAHPZQwE%2F198vf6LylJmoyR9UtVZffIBmOnCtLApbmrBSWVuOdvU5UIQKVgZFSSLNDyjpAc4bbiZkePXSqem3GEOvLTRwqDuntr6PWl4lXr5XuARYgEQfsBw4cBERMOih0JWvBH5Mifee%2FNyXvKnoWwqVZZ76GyK%2BqFzWAwkZ6Ax6kIZLjxacdoQ8bvPf9WCorhwBvAp82TAB%2FLKUBZAuKwSdEMV95NeaJPslkA%2FfNKn7JS9eij9tvZa5kgc0%2B1Kqnaw5DCslsmQeW17dLM2AtTjO2VJKNx513%2FWmOjBuYqg75dtpNeSZ%2BnKo%2FiDLnqonHhffjixjxYsvdFqD%2FwA%3D">draw.ioé“¾æ¥</a></p><p><strong>pluggy æœ‰ä¸‰å¤§è¦ç´ </strong></p><p><code>HookspecMarker</code>(hookspec) å®šä¹‰<br><code>HookimplMarker</code>(hookimpl) å®ç°<br><code>PluginManager</code>(pm) æ’ä»¶ç®¡ç†å™¨</p><blockquote><p>&emsp;&emsp;spec å®šä¹‰äº†å¯ä»¥æš´éœ²çš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ pm.hook å»è°ƒç”¨å¯¹åº”çš„æ–¹æ³•<br>&emsp;&emsp;è°ƒç”¨çš„æ—¶å€™ä¼šé€ä¸ªæ‰§è¡Œ impl æ³¨å†Œçš„æ’ä»¶ï¼ŒæŒ‰ LIFO åè¿›å…ˆå‡ºçš„æ–¹å¼è¿›è¡Œã€‚</p></blockquote><h2 id="pluggy-æ¡ˆä¾‹ä»£ç "><a href="#pluggy-æ¡ˆä¾‹ä»£ç " class="headerlink" title="pluggy æ¡ˆä¾‹ä»£ç "></a>pluggy æ¡ˆä¾‹ä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pluggy</span><br><span class="line"></span><br><span class="line">hookspec = pluggy.HookspecMarker(<span class="string">&quot;myproject&quot;</span>)</span><br><span class="line">hookimpl = pluggy.HookimplMarker(<span class="string">&quot;myproject&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MySpec</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;A hook specification namespace.&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @hookspec</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">myhook</span>(<span class="params">self, arg1, arg2</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;My special little hook that you can customize.&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Plugin_1</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;A hook implementation namespace.&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @hookimpl</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">myhook</span>(<span class="params">self, arg1, arg2</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;inside Plugin_1.myhook()&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> arg1 + arg2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Plugin_2</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;A 2nd hook implementation namespace.&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @hookimpl</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">myhook</span>(<span class="params">self, arg1, arg2</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;inside Plugin_2.myhook()&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> arg1 - arg2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># create a manager and add the spec</span></span><br><span class="line">pm = pluggy.PluginManager(<span class="string">&quot;myproject&quot;</span>)</span><br><span class="line">pm.add_hookspecs(MySpec)</span><br><span class="line"><span class="comment"># register plugins</span></span><br><span class="line">pm.register(Plugin_1())</span><br><span class="line">pm.register(Plugin_2())</span><br><span class="line"><span class="comment"># call our `myhook` hook</span></span><br><span class="line">results = pm.hook.myhook(arg1=<span class="number">1</span>, arg2=<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(results)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä»£ç æ¥è‡ªå®˜æ–¹æ–‡æ¡£<br>&emsp;&emsp;æ‰§è¡Œä¼šå…ˆè§¦å‘ <code>Plugin_2</code> å†è§¦å‘ <code>Plugin_1</code></p></blockquote><blockquote><p>&emsp;&emsp;ä¸Šè¿°æ˜¯ pluggy æœ€ç®€å•çš„ç”¨æ³•<br>&emsp;&emsp;è¿˜æœ‰ <code>firstresult</code> <code>hookwrapper</code> ç­‰ç”¨æ³•<br>&emsp;&emsp;å¯ä»¥å‚ç…§æ–‡æ¡£è¯´æ˜å­¦ä¹ ï¼Œç”¨æ³•éå¸¸çµæ´»ã€‚</p></blockquote><hr><blockquote><p>&emsp;&emsp;<code>pm.hook.myhook</code> å°±æ˜¯åœ¨æºä»£ç ä¸­çš„ ä»£ç æ¡©ã€‚<br>&emsp;&emsp;ä¹‹å‰æ³¨å†Œçš„æ’ä»¶éƒ½ä¼šåœ¨è¿™ä¸ªä»£ç æ¡©ä¸­é€ä¸€è§¦å‘ã€‚<br>&emsp;&emsp;pluggy æ˜¯å¯é…ç½®çš„ï¼Œå¯ä»¥ç”¨ä»£ç åŠ¨æ€åœ°ä¿®æ”¹æ³¨å†Œåœ°æ’ä»¶ï¼Œå®æ—¶æ”¹å˜è¿è¡Œçš„é€»è¾‘ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;ä½¿ç”¨ pluggy å¯ä»¥å°†åŠŸèƒ½æ‹†åˆ†æˆå°æ–‡ä»¶</p></blockquote><ol><li>æ›´å¥½é€‚é…ä»£ç è§„èŒƒ</li><li>é€»è¾‘æ›´åŠ ç®€æ´æ¸…æ™°ï¼ŒæŸ¥æ‰¾æ–¹ä¾¿</li><li>åŠŸèƒ½æ‰©å±•ç®€å•</li><li>å¯ç”¨ç¦ç”¨åŠŸèƒ½å¾ˆæ–¹ä¾¿</li></ol>]]></content>
    
    <summary type="html">
    
      pytest å›¢é˜Ÿå‡ºå“ | è®©ä»£ç å˜å¾—å¯æ‰©å±•
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
</feed>
