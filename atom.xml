<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ™ºä¼¤å¸çš„ä¸ªäººåšå®¢</title>
  
  <subtitle>å²æœˆä¸é¥¶äººï¼Œæˆ‘äº¦æœªæ›¾é¥¶è¿‡å²æœˆã€‚</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.l0v0.com/"/>
  <updated>2022-07-30T07:31:56.112Z</updated>
  <id>https://blog.l0v0.com/</id>
  
  <author>
    <name>æ™ºä¼¤å¸</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Maya C++ curveBrush å¼€å‘</title>
    <link href="https://blog.l0v0.com/posts/cacaf61d.html"/>
    <id>https://blog.l0v0.com/posts/cacaf61d.html</id>
    <published>2022-07-25T07:32:10.000Z</published>
    <updated>2022-07-30T07:31:56.112Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;æµ‹è¯•</p></blockquote><h2 id="ç¬”åˆ·å·¥å…·çš„æ³¨æ„ç‚¹"><a href="#ç¬”åˆ·å·¥å…·çš„æ³¨æ„ç‚¹" class="headerlink" title="ç¬”åˆ·å·¥å…·çš„æ³¨æ„ç‚¹"></a>ç¬”åˆ·å·¥å…·çš„æ³¨æ„ç‚¹</h2><p><a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__developer_Maya_SDK_MERGED_Command_plug_ins_Tool_property_sheets_html">https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__developer_Maya_SDK_MERGED_Command_plug_ins_Tool_property_sheets_html</a></p><p>&lt;&gt;Properties.mel å®ç°å·¦ä¾§çš„å¯ä¿®æ”¹ç•Œé¢<br>&lt;&gt;Values.mel è·å–ç¬”åˆ·æ•°å€¼</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;</p></blockquote>]]></content>
    
    <summary type="html">
    
      Mayaç¬”åˆ·å¼€å‘å­¦ä¹ 
    
    </summary>
    
      <category term="CG" scheme="https://blog.l0v0.com/categories/CG/"/>
    
      <category term="Maya" scheme="https://blog.l0v0.com/categories/CG/Maya/"/>
    
      <category term="C++" scheme="https://blog.l0v0.com/categories/CG/Maya/C/"/>
    
    
      <category term="à €Maya" scheme="https://blog.l0v0.com/tags/%E0%A0%80Maya/"/>
    
      <category term="à ‡Cpp" scheme="https://blog.l0v0.com/tags/%E0%A0%87Cpp/"/>
    
  </entry>
  
  <entry>
    <title>Unreal C++ å·¥å…·å¼€å‘æœ€å°å®è·µ</title>
    <link href="https://blog.l0v0.com/posts/cab0d099.html"/>
    <id>https://blog.l0v0.com/posts/cab0d099.html</id>
    <published>2022-07-15T08:00:58.000Z</published>
    <updated>2022-07-30T07:31:56.858Z</updated>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;Unreal çš„å­¦ä¹ æµ©ç€šä¸”åšæ‚ï¼Œæœ‰æ—¶å€™ä¸€ä¸ªæœ€å° Demo å°±æ˜¯å¾ˆå¥½çš„å­¦ä¹ èµ·ç‚¹ã€‚<br>&emsp;&emsp;æƒ³èµ·æˆ‘ä»¥å‰ç¿»é˜… UE çš„æºç ä¸€å¤§å †çš„æ–‡ä»¶ï¼Œçœ‹å¾—æˆ‘æ˜¯æ— æ¯”å¤´ç–¼ã€‚<br>&emsp;&emsp;å¶ç„¶é—´å‘ç° CSDN YakSue å†™äº†å¥½å¤šç¯‡ Unreal å·¥å…·å¼€å‘çš„ ä»‹ç»ã€‚<br>&emsp;&emsp;è™½ç„¶æ²¡æœ‰é…ä¸Š Github é“¾æ¥ï¼Œä½†æ˜¯æºç éƒ½åœ¨æ–‡ç« é‡Œé¢ä½“ç°äº†ã€‚<br>&emsp;&emsp;å¯¹äºå·¥å…·å¼€å‘çš„ä¸åŒæ¨¡å—éƒ½å¤§æœ‰è£¨ç›Šã€‚<br>&emsp;&emsp;äºæ˜¯æˆ‘å°†è¿™äº›å†…å®¹æ•´åˆåˆ°ä¸€èµ·ï¼Œå¹¶ä¸”è¯¦ç»†è®²è§£å…¶ä¸­å®ç°çš„æ ¸å¿ƒç‚¹ã€‚</p></blockquote><h2 id="Custom-Asset"><a href="#Custom-Asset" class="headerlink" title="Custom Asset"></a>Custom Asset</h2><p><a href="https://yaksue.blog.csdn.net/article/details/107646900">https://yaksue.blog.csdn.net/article/details/107646900</a><br><a href="https://github.com/FXTD-ODYSSEY/Unreal-Playground/tree/main/Plugins/Yaksue/TestAssetEditorPlg">https://github.com/FXTD-ODYSSEY/Unreal-Playground/tree/main/Plugins/Yaksue/TestAssetEditorPlg</a></p><blockquote><p>&emsp;&emsp;åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ Asset éœ€è¦æœ‰ä¸‰ä¸ªç±»</p><ol><li>Asset (UObject)</li><li>AssetFactory (UFactory)</li><li>AssetTypeActions (FAssetTypeActions_Base)</li></ol></blockquote><blockquote><p>&emsp;&emsp;Asset æè¿°å¯¹è±¡æœ¬èº«çš„æ•°æ®<br>&emsp;&emsp;AssetFactory æè¿°å¦‚ä½•åˆ›å»ºå¯¹è±¡<br>&emsp;&emsp;AssetTypeActions è¿”å›å¯¹è±¡æ˜¾ç¤ºçš„ä¿¡æ¯</p></blockquote><blockquote><p>&emsp;&emsp;<code>AssetTypeActions</code> åŒ…å«æ–¹æ³• <code>GetName</code> <code>GetTypeColor</code> <code>GetSupportedClass</code> <code>GetCategories</code> ç”¨æ¥æè¿°å¯¹åº”çš„ä¿¡æ¯ã€‚<br>&emsp;&emsp;<code>GetCategories</code> ä¼šåˆ†é… Asset æ‰€å±çš„ä½ç½®ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;è¿™ä¸ªæ–¹å¼é»˜è®¤æ‰“å¼€çš„çª—å£æ˜¯ Details Panel.<br>&emsp;&emsp;å¦‚æœæƒ³è¦è‡ªå®šä¹‰æ‰“å¼€çš„çª—å£éœ€è¦æ·»åŠ  <code>FAssetEditorToolkit</code> ç±»<br>&emsp;&emsp;<code>AssetTypeActions</code> æ·»åŠ  <code>OpenAssetEditor</code> æ–¹æ³•å°† Toolkit ç”Ÿæˆå¹¶åˆå§‹åŒ–ã€‚</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">FAssetEditorToolkit</span><br><span class="line">  GetToolkitFName</span><br><span class="line">  GetBaseToolkitName</span><br><span class="line">  GetWorldCentricTabPrefix</span><br><span class="line">  GetWorldCentricTabColorScale</span><br><span class="line">  Initialize</span><br><span class="line">  RegisterTabSpawners</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;<code>RegisterTabSpawners</code> é€šè¿‡è¿™ä¸ªæ–¹æ³•æ³¨å†Œç”Ÿäº§ Tab çš„ ID<br>&emsp;&emsp;åç»­é€šè¿‡ <code>Initialize</code> æ–¹æ³•è°ƒç”¨ AddTab å°† Register çš„ Tab ç”Ÿæˆã€‚<br>&emsp;&emsp;æœ€åé€šè¿‡ <code>FAssetEditorToolkit::InitAssetEditor</code> å®Œæˆ Toolkit çš„åˆå§‹åŒ–</p></blockquote><hr><blockquote><p>&emsp;&emsp;å¦‚æœä¸æƒ³å°† Asset æ”¾åˆ° <code>EAssetTypeCategories::Misc</code> çš„åˆ†ç±»ä¸­ã€‚<br>&emsp;&emsp;ä¹Ÿå¯ä»¥æ„å»ºä¸€ä¸ªæ–°çš„æ ‡ç­¾é™„ä¸Šå»ã€‚<br>&emsp;&emsp;åªæ˜¯éœ€è¦å°† factory ç›¸å…³çš„ <code>GetMenuCategories</code> æ”¾å…¥å»æ‰ã€‚<br>&emsp;&emsp;æˆ‘ä¹‹å‰æ²¡æœ‰å»æ‰ï¼Œä¸€ç›´å¾ˆç–‘æƒ‘ä¸ºå•¥è‡ªå®šä¹‰èœå•æ²¡æœ‰ç”Ÿæ•ˆã€‚</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">FYaksueTestAssetTypeActions::<span class="built_in">FYaksueTestAssetTypeActions</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// <span class="doctag">NOTE:</span> æ³¨å†Œæ–°çš„åˆ†ç±»</span></span><br><span class="line">IAssetTools &amp;AssetTools = FModuleManager::<span class="built_in">LoadModuleChecked</span>&lt;FAssetToolsModule&gt;(<span class="string">&quot;AssetTools&quot;</span>).<span class="built_in">Get</span>();</span><br><span class="line">    AssetCategory = AssetTools.<span class="built_in">RegisterAdvancedAssetCategory</span>(<span class="built_in">FName</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;Custom Assets&quot;</span>)), <span class="built_in">LOCTEXT</span>(<span class="string">&quot;CustomAssetCategory&quot;</span>, <span class="string">&quot;Custom Assets&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">uint32 <span class="title">FYaksueTestAssetTypeActions::GetCategories</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> AssetCategory;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ„é€ å‡½æ•°æ³¨å†Œæ–°çš„åˆ†ç±»ï¼Œå¤´æ–‡ä»¶éœ€è¦æ·»åŠ ä¸Šå®šä¹‰ <code>FYaksueTestAssetTypeActions();</code> <code>EAssetTypeCategories::Type AssetCategory;</code></p></blockquote><h2 id="Custom-Filter"><a href="#Custom-Filter" class="headerlink" title="Custom Filter"></a>Custom Filter</h2><p><a href="https://yaksue.blog.csdn.net/article/details/120929455">https://yaksue.blog.csdn.net/article/details/120929455</a><br><a href="https://github.com/FXTD-ODYSSEY/Unreal-Playground/tree/main/Plugins/Yaksue/TestCustomFilter">https://github.com/FXTD-ODYSSEY/Unreal-Playground/tree/main/Plugins/Yaksue/TestCustomFilter</a></p><blockquote><p>&emsp;&emsp;ç»§æ‰¿ <code>UContentBrowserFrontEndFilterExtension</code> å¯ä»¥é€šè¿‡ override <code>AddFrontEndFilterExtensions</code> æ–¹æ³•æ‰©å±• filterã€‚<br>&emsp;&emsp;ç”Ÿæˆä¸€ä¸ª <code>FFrontendFilter</code> å­ç±»ï¼Œç„¶åé€šè¿‡ <code>AddFrontEndFilterExtensions</code> å°†è¿‡æ»¤å¯¹è±¡æ·»åŠ åˆ°è¿‡æ»¤åˆ—è¡¨é‡Œé¢ã€‚<br>&emsp;&emsp;<code>FFrontendFilter</code> æœ€æ ¸å¿ƒçš„æ–¹æ³•å°±æ˜¯ <code>PassesFilter</code> å®ƒä¼šå°†æ¯ä¸ª item ä¼ åˆ°è¿™ä¸ªå‡½æ•°è¿”å› bool æ¥å†³å®šæ˜¯å¦æ˜¾ç¤ºã€‚</p></blockquote><!-- TODO PassesFilter item wrong --><h2 id="Slate"><a href="#Slate" class="headerlink" title="Slate"></a>Slate</h2><p><a href="https://yaksue.blog.csdn.net/article/details/110084013">https://yaksue.blog.csdn.net/article/details/110084013</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Put your tab content here!</span></span><br><span class="line"><span class="built_in">SNew</span>(SOverlay)</span><br><span class="line">+ SOverlay::<span class="built_in">Slot</span>()<span class="comment">//åº•å±‚</span></span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SHorizontalBox)</span><br><span class="line">+ SHorizontalBox::<span class="built_in">Slot</span>().<span class="built_in">FillWidth</span>(<span class="number">0.3f</span>)<span class="comment">//å 30%</span></span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SButton)<span class="number">1</span></span><br><span class="line">]</span><br><span class="line">+ SHorizontalBox::<span class="built_in">Slot</span>().<span class="built_in">FillWidth</span>(<span class="number">0.7f</span>)<span class="comment">//å 70%</span></span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SVerticalBox)</span><br><span class="line">+ SVerticalBox::<span class="built_in">Slot</span>().<span class="built_in">FillHeight</span>(<span class="number">0.5f</span>)<span class="comment">//å 50%</span></span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SButton)</span><br><span class="line">]</span><br><span class="line">+ SVerticalBox::<span class="built_in">Slot</span>().<span class="built_in">FillHeight</span>(<span class="number">0.5f</span>)<span class="comment">//å 50%</span></span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SButton)</span><br><span class="line">]</span><br><span class="line">]</span><br><span class="line">]</span><br><span class="line">+ SOverlay::<span class="built_in">Slot</span>()<span class="comment">//é¡¶å±‚</span></span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SHorizontalBox)</span><br><span class="line">+ SHorizontalBox::<span class="built_in">Slot</span>().<span class="built_in">FillWidth</span>(<span class="number">1.0f</span>)<span class="comment">//å æ»¡å‰©ä½™ç©ºé—´</span></span><br><span class="line">+ SHorizontalBox::<span class="built_in">Slot</span>().<span class="built_in">AutoWidth</span>()</span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SVerticalBox)</span><br><span class="line">+ SVerticalBox::<span class="built_in">Slot</span>().<span class="built_in">FillHeight</span>(<span class="number">1.0f</span>)<span class="comment">//å æ»¡å‰©ä½™ç©ºé—´</span></span><br><span class="line">+ SVerticalBox::<span class="built_in">Slot</span>().<span class="built_in">AutoHeight</span>()</span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SBox)</span><br><span class="line">.<span class="built_in">HeightOverride</span>(<span class="number">128</span>)</span><br><span class="line">.<span class="built_in">WidthOverride</span>(<span class="number">128</span>)</span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(SButton)</span><br><span class="line">]</span><br><span class="line">]</span><br><span class="line">+ SVerticalBox::<span class="built_in">Slot</span>().<span class="built_in">FillHeight</span>(<span class="number">1.0f</span>)<span class="comment">//å æ»¡å‰©ä½™ç©ºé—´</span></span><br><span class="line">]</span><br><span class="line">+ SHorizontalBox::<span class="built_in">Slot</span>().<span class="built_in">FillWidth</span>(<span class="number">1.0f</span>)<span class="comment">//å æ»¡å‰©ä½™ç©ºé—´</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä½¿ç”¨ Unreal Slate æ„å»ºçª—å£ï¼Œé€šè¿‡ä»£ç çš„å±æ€§ç»“æ„æ¥æè¿° UI çš„æ„æˆå’Œé…ç½®ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20201124215104568.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM0MTIzOTE=,size_16,color_FFFFFF,t_70#pic_center" alt="alt"></p><h2 id="DockTab-Layout"><a href="#DockTab-Layout" class="headerlink" title="DockTab Layout"></a>DockTab Layout</h2><p><a href="https://yaksue.blog.csdn.net/article/details/109321869">https://yaksue.blog.csdn.net/article/details/109321869</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">FTestLayoutWindowModule::StartupModule</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// This code will execute after your module is loaded into memory; the exact timing is specified in the .uplugin file per-module</span></span><br><span class="line"></span><br><span class="line">FTestLayoutWindowStyle::<span class="built_in">Initialize</span>();</span><br><span class="line">FTestLayoutWindowStyle::<span class="built_in">ReloadTextures</span>();</span><br><span class="line"></span><br><span class="line">FTestLayoutWindowCommands::<span class="built_in">Register</span>();</span><br><span class="line"></span><br><span class="line">PluginCommands = <span class="built_in">MakeShareable</span>(<span class="keyword">new</span> FUICommandList);</span><br><span class="line"></span><br><span class="line">PluginCommands-&gt;<span class="built_in">MapAction</span>(</span><br><span class="line">FTestLayoutWindowCommands::<span class="built_in">Get</span>().OpenLayoutWindow,</span><br><span class="line">FExecuteAction::<span class="built_in">CreateRaw</span>(<span class="keyword">this</span>, &amp;FTestLayoutWindowModule::PluginButtonClicked),</span><br><span class="line"><span class="built_in">FCanExecuteAction</span>());</span><br><span class="line"></span><br><span class="line">FLevelEditorModule&amp; LevelEditorModule = FModuleManager::<span class="built_in">LoadModuleChecked</span>&lt;FLevelEditorModule&gt;(<span class="string">&quot;LevelEditor&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">TSharedPtr&lt;FExtender&gt; MenuExtender = <span class="built_in">MakeShareable</span>(<span class="keyword">new</span> <span class="built_in">FExtender</span>());</span><br><span class="line">MenuExtender-&gt;<span class="built_in">AddMenuExtension</span>(<span class="string">&quot;WindowLayout&quot;</span>, EExtensionHook::After, PluginCommands, FMenuExtensionDelegate::<span class="built_in">CreateRaw</span>(<span class="keyword">this</span>, &amp;FTestLayoutWindowModule::AddMenuExtension));</span><br><span class="line"></span><br><span class="line">LevelEditorModule.<span class="built_in">GetMenuExtensibilityManager</span>()-&gt;<span class="built_in">AddExtender</span>(MenuExtender);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">TSharedPtr&lt;FExtender&gt; ToolbarExtender = <span class="built_in">MakeShareable</span>(<span class="keyword">new</span> FExtender);</span><br><span class="line">ToolbarExtender-&gt;<span class="built_in">AddToolBarExtension</span>(<span class="string">&quot;Settings&quot;</span>, EExtensionHook::After, PluginCommands, FToolBarExtensionDelegate::<span class="built_in">CreateRaw</span>(<span class="keyword">this</span>, &amp;FTestLayoutWindowModule::AddToolbarExtension));</span><br><span class="line"></span><br><span class="line">LevelEditorModule.<span class="built_in">GetToolBarExtensibilityManager</span>()-&gt;<span class="built_in">AddExtender</span>(ToolbarExtender);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">FGlobalTabmanager::<span class="built_in">Get</span>()-&gt;<span class="built_in">RegisterNomadTabSpawner</span>(TestLayoutWindowTabName, FOnSpawnTab::<span class="built_in">CreateRaw</span>(<span class="keyword">this</span>, &amp;FTestLayoutWindowModule::OnSpawnPluginTab))</span><br><span class="line">.<span class="built_in">SetDisplayName</span>(<span class="built_in">LOCTEXT</span>(<span class="string">&quot;FTestLayoutWindowTabTitle&quot;</span>, <span class="string">&quot;TestLayoutWindow&quot;</span>))</span><br><span class="line">.<span class="built_in">SetMenuType</span>(ETabSpawnerMenuType::Hidden);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ! InnerTabçš„å†…å®¹ï¼š</span></span><br><span class="line">FGlobalTabmanager::<span class="built_in">Get</span>()-&gt;<span class="built_in">RegisterNomadTabSpawner</span>(InnerTabName, FOnSpawnTab::<span class="built_in">CreateLambda</span>([](<span class="type">const</span> FSpawnTabArgs&amp; SpawnTabArgs)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line"><span class="built_in">SNew</span>(SDockTab)</span><br><span class="line">.<span class="built_in">TabRole</span>(ETabRole::NomadTab)</span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(STextBlock)</span><br><span class="line">.<span class="built_in">Text</span>(FText::<span class="built_in">FromString</span>(<span class="string">&quot;InnerTab&quot;</span>))</span><br><span class="line">];</span><br><span class="line">&#125;))</span><br><span class="line">.<span class="built_in">SetDisplayName</span>(<span class="built_in">LOCTEXT</span>(<span class="string">&quot;InnerTab&quot;</span>, <span class="string">&quot;InnerTab&quot;</span>))</span><br><span class="line">.<span class="built_in">SetMenuType</span>(ETabSpawnerMenuType::Hidden);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ! InnerTab2çš„å†…å®¹ï¼š</span></span><br><span class="line">FGlobalTabmanager::<span class="built_in">Get</span>()-&gt;<span class="built_in">RegisterNomadTabSpawner</span>(InnerTabName2, FOnSpawnTab::<span class="built_in">CreateLambda</span>([](<span class="type">const</span> FSpawnTabArgs&amp; SpawnTabArgs)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line"><span class="built_in">SNew</span>(SDockTab)</span><br><span class="line">.<span class="built_in">TabRole</span>(ETabRole::NomadTab)</span><br><span class="line">[</span><br><span class="line"><span class="built_in">SNew</span>(STextBlock)</span><br><span class="line">.<span class="built_in">Text</span>(FText::<span class="built_in">FromString</span>(<span class="string">&quot;InnerTab2&quot;</span>))</span><br><span class="line">];</span><br><span class="line">&#125;))</span><br><span class="line">.<span class="built_in">SetDisplayName</span>(<span class="built_in">LOCTEXT</span>(<span class="string">&quot;InnerTab2&quot;</span>, <span class="string">&quot;InnerTab2&quot;</span>))</span><br><span class="line">.<span class="built_in">SetMenuType</span>(ETabSpawnerMenuType::Hidden);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ ¸å¿ƒå¤„ç†æ˜¯åœ¨æ’ä»¶åŠ è½½çš„æ—¶å€™ <code>StartupModule</code> è°ƒç”¨ <code>RegisterNomadTabSpawner</code> æ³¨å†Œ Tab</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">FTestLayoutWindowModule::PluginButtonClicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">FGlobalTabmanager::<span class="built_in">Get</span>()-&gt;<span class="built_in">InvokeTab</span>(TestLayoutWindowTabName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ç‚¹å‡» GUI ä¼šè§¦å‘ Tab ç”Ÿæˆï¼Œè°ƒç”¨ <code>OnSpawnPluginTab</code> æ–¹æ³•</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">TSharedRef&lt;SDockTab&gt; <span class="title">FTestLayoutWindowModule::OnSpawnPluginTab</span><span class="params">(<span class="type">const</span> FSpawnTabArgs&amp; SpawnTabArgs)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//åŸæ¥çš„åˆ†é¡µï¼š</span></span><br><span class="line"><span class="type">const</span> TSharedRef&lt;SDockTab&gt; NomadTab = <span class="built_in">SNew</span>(SDockTab)</span><br><span class="line">.<span class="built_in">TabRole</span>(ETabRole::NomadTab);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºTabManager</span></span><br><span class="line"><span class="keyword">if</span> (!TabManager.<span class="built_in">IsValid</span>())</span><br><span class="line">&#123;</span><br><span class="line">TabManager = FGlobalTabmanager::<span class="built_in">Get</span>()-&gt;<span class="built_in">NewTabManager</span>(NomadTab);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºå¸ƒå±€ï¼š</span></span><br><span class="line"><span class="keyword">if</span> (!TabManagerLayout.<span class="built_in">IsValid</span>())</span><br><span class="line">&#123;</span><br><span class="line">TabManagerLayout = FTabManager::<span class="built_in">NewLayout</span>(<span class="string">&quot;TestLayoutWindow&quot;</span>)</span><br><span class="line">-&gt;<span class="built_in">AddArea</span></span><br><span class="line">(</span><br><span class="line">FTabManager::<span class="built_in">NewPrimaryArea</span>()</span><br><span class="line">-&gt;<span class="built_in">SetOrientation</span>(Orient_Vertical)</span><br><span class="line">-&gt;<span class="built_in">Split</span></span><br><span class="line">(</span><br><span class="line">FTabManager::<span class="built_in">NewStack</span>()</span><br><span class="line">-&gt;<span class="built_in">SetSizeCoefficient</span>(<span class="number">.4</span>f)</span><br><span class="line">-&gt;<span class="built_in">AddTab</span>(InnerTabName, ETabState::OpenedTab)</span><br><span class="line">)</span><br><span class="line">-&gt;<span class="built_in">Split</span></span><br><span class="line">(</span><br><span class="line">FTabManager::<span class="built_in">NewStack</span>()</span><br><span class="line">-&gt;<span class="built_in">SetSizeCoefficient</span>(<span class="number">.4</span>f)</span><br><span class="line">-&gt;<span class="built_in">AddTab</span>(InnerTabName2, ETabState::OpenedTab)</span><br><span class="line">)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»å¸ƒå±€ä¸­æ¢å¤å¾—åˆ°æ§ä»¶</span></span><br><span class="line">TSharedRef&lt;SWidget&gt; TabContents = TabManager-&gt;<span class="built_in">RestoreFrom</span>(TabManagerLayout.<span class="built_in">ToSharedRef</span>(), <span class="built_in">TSharedPtr</span>&lt;SWindow&gt;()).<span class="built_in">ToSharedRef</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®å†…å®¹æ§ä»¶</span></span><br><span class="line">NomadTab-&gt;<span class="built_in">SetContent</span>(</span><br><span class="line">TabContents</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> NomadTab;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è¿™é‡Œå°†ä¹‹å‰æ³¨å†Œçš„ Tab å”¤èµ·ã€‚</p></blockquote><h2 id="Viewport"><a href="#Viewport" class="headerlink" title="Viewport"></a>Viewport</h2><p><a href="https://yaksue.blog.csdn.net/article/details/109258860">https://yaksue.blog.csdn.net/article/details/109258860</a></p><blockquote><p>&emsp;&emsp;å¼•å…¥é»˜è®¤çš„ <code>SEditorViewport</code> ç±»<br>&emsp;&emsp;ç„¶å override æ–¹æ³• <code>MakeEditorViewportClient</code></p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">TSharedRef&lt;FEditorViewportClient&gt; <span class="title">STestLevelEditorViewport::MakeEditorViewportClient</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">TSharedPtr&lt;FEditorViewportClient&gt; EditorViewportClient = <span class="built_in">MakeShareable</span>(<span class="keyword">new</span> <span class="built_in">FEditorViewportClient</span>(<span class="literal">nullptr</span>));</span><br><span class="line"><span class="keyword">return</span> EditorViewportClient.<span class="built_in">ToSharedRef</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ç„¶åSlate ä»£ç ç›´æ¥ä½¿ç”¨ <code>SNew(STestLevelEditorViewport)</code> åˆå§‹åŒ–ç•Œé¢å³å¯ã€‚<br>&emsp;&emsp;ä¸è¿‡è¿™ä¸ªæ–¹å¼æ²¿ç”¨äº† Viewport ï¼Œå¦‚ä½•æ„å»ºä¸€ä¸ªè‡ªå®šä¹‰ Viewport å‘¢ï¼Ÿ</p></blockquote><hr><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">TSharedRef&lt;FEditorViewportClient&gt; <span class="title">STestEditorViewport::MakeEditorViewportClient</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">PreviewScene = <span class="built_in">MakeShareable</span>(<span class="keyword">new</span> <span class="built_in">FPreviewScene</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘é¢„è§ˆåœºæ™¯ä¸­åŠ ä¸€ä¸ªæµ‹è¯•æ¨¡å‹</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//è¯»å–æ¨¡å‹</span></span><br><span class="line">UStaticMesh* SM = <span class="built_in">LoadObject</span>&lt;UStaticMesh&gt;(<span class="literal">NULL</span>, <span class="built_in">TEXT</span>(<span class="string">&quot;StaticMesh&#x27;/Engine/EngineMeshes/Cube.Cube&#x27;&quot;</span>), <span class="literal">NULL</span>, LOAD_None, <span class="literal">NULL</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºç»„ä»¶</span></span><br><span class="line">UStaticMeshComponent* SMC = <span class="built_in">NewObject</span>&lt;UStaticMeshComponent&gt;();</span><br><span class="line">SMC-&gt;<span class="built_in">SetStaticMesh</span>(SM);</span><br><span class="line"><span class="comment">//å‘é¢„è§ˆåœºæ™¯ä¸­å¢åŠ ç»„ä»¶</span></span><br><span class="line">PreviewScene-&gt;<span class="built_in">AddComponent</span>(SMC, FTransform::Identity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">TSharedPtr&lt;FEditorViewportClient&gt; EditorViewportClient = <span class="built_in">MakeShareable</span>(<span class="keyword">new</span> <span class="built_in">FEditorViewportClient</span>(<span class="literal">nullptr</span>, PreviewScene.<span class="built_in">Get</span>()));</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> EditorViewportClient.<span class="built_in">ToSharedRef</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ–°å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ <code>FPreviewScene</code> ï¼Œå¯ä»¥å°†ç‰©ä½“å®ä¾‹åŒ–æ·»åŠ åˆ°åœºæ™¯å½“ä¸­ã€‚<br>&emsp;&emsp;å°† <code>PreviewScene</code> ä¼ å…¥åˆ°  <code>FEditorViewportClient</code> ä¸­ï¼Œè¿™æ · Viewport å°±æ˜¾ç¤ºç‹¬ç«‹çš„åœºæ™¯ã€‚</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">TSharedPtr&lt;SWidget&gt; <span class="title">STestEditorViewport::MakeViewportToolbar</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">SNew</span>(SCommonEditorViewportToolbarBase, <span class="built_in">SharedThis</span>(<span class="keyword">this</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä½¿ç”¨ä¸Šé¢çš„ä»£ç å¯ä»¥æ„å»ºå‡ºé»˜è®¤ Viewport çš„ Toolbarã€‚</p></blockquote><h2 id="GraphEditor"><a href="#GraphEditor" class="headerlink" title="GraphEditor"></a>GraphEditor</h2><p><a href="https://yaksue.blog.csdn.net/article/details/107945507">https://yaksue.blog.csdn.net/article/details/107945507</a><br><a href="https://yaksue.blog.csdn.net/article/details/108020797">https://yaksue.blog.csdn.net/article/details/108020797</a><br><a href="https://yaksue.blog.csdn.net/article/details/108227439">https://yaksue.blog.csdn.net/article/details/108227439</a><br><a href="https://yaksue.blog.csdn.net/article/details/109347063">https://yaksue.blog.csdn.net/article/details/109347063</a></p><h2 id="EditorMode"><a href="#EditorMode" class="headerlink" title="EditorMode"></a>EditorMode</h2><!-- TODO -->]]></content>
    
    <summary type="html">
    
      YakSue å·¥å…·å¼€å‘æ–‡ç« å­¦ä¹ 
    
    </summary>
    
      <category term="æ¸¸æˆå¼€å‘" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/"/>
    
      <category term="Unreal" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unreal/"/>
    
      <category term="C++" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unreal/C/"/>
    
    
      <category term="à ‡Cpp" scheme="https://blog.l0v0.com/tags/%E0%A0%87Cpp/"/>
    
      <category term="à ƒUnreal" scheme="https://blog.l0v0.com/tags/%E0%A0%83Unreal/"/>
    
  </entry>
  
  <entry>
    <title>Maya C++ pyd æ¨¡å—å¼€å‘</title>
    <link href="https://blog.l0v0.com/posts/ce449c32.html"/>
    <id>https://blog.l0v0.com/posts/ce449c32.html</id>
    <published>2022-07-14T02:52:30.000Z</published>
    <updated>2022-07-30T07:31:56.103Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä½œè€…: [[ğŸ‘¨â€ğŸ’»sonictk]]</p><p><a href="https://github.com/sonictk/maya_python_c_extension">https://github.com/sonictk/maya_python_c_extension</a></p><blockquote><p>&emsp;&emsp;è¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯å‚è€ƒ sonictk å¤§ä½¬çš„æä¾›çš„ pyd å¼€å‘æ–‡ç« ã€‚<br>&emsp;&emsp;æ–‡ç« ä¹Ÿæåˆ°ä¹‹å‰çš„ hot reload æ–¹æ¡ˆå·²ç»è§£å†³äº†å¾ˆå¤š C++ å¼€å‘å›°éš¾çš„é—®é¢˜ã€‚<br>&emsp;&emsp;ç„¶è€Œè¿˜æ˜¯æœ‰å¾ˆå¤šæƒ…å†µéœ€è¦å¼€å‘ä¸€ä¸ª python çš„ C++ æ¨¡å—å®ç° Maya C++ API çš„ è°ƒç”¨ã€‚<br>&emsp;&emsp;è¿™ä¸ªæƒ…å†µæœ‰ç‚¹åƒæ˜¯ Unreal æš´éœ² C++ API åˆ° Python ä¸€æ ·ã€‚</p></blockquote><p>[[17_Maya ç¼–è¯‘ c ç›¸å…³ Python åº“ &amp; pyd ç¼–è¯‘]]</p><blockquote><p>&emsp;&emsp;ä¹‹å‰æˆ‘ä¹Ÿå†™è¿‡å…³äº Maya pyd ç¼–è¯‘çš„æ–‡ç« ï¼Œä½†æ˜¯è¿™ä¸ªæ–‡ç« æ˜¯ç”¨ Cython è‡ªåŠ¨ç”Ÿæˆ C ä»£ç ç¼–è¯‘å®ç°çš„ï¼Œè¿™æ¬¡æ˜¯æ‰‹å†™ pydã€‚</p></blockquote><h2 id="ä»€ä¹ˆæ˜¯-pyd"><a href="#ä»€ä¹ˆæ˜¯-pyd" class="headerlink" title="ä»€ä¹ˆæ˜¯ pyd"></a>ä»€ä¹ˆæ˜¯ pyd</h2><blockquote><p>&emsp;&emsp;pyd æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ª dll æ–‡ä»¶ï¼Œå°±åƒ Maya æ’ä»¶çš„ mll ä¸€æ ·ã€‚<br>&emsp;&emsp;åªæ˜¯ pyd è§„å®šäº†ä¸€äº›æš´éœ²è§„åˆ™ï¼Œä»è€Œè®© python è§£é‡Šå™¨å¯ä»¥è¯»å–ã€‚<br>&emsp;&emsp;è¿™ä¹Ÿæ˜¯ Python ç§°ä¹‹ä¸ºèƒ¶æ°´è¯­è¨€çš„ä¸€å¤§ç‰¹ç‚¹ï¼Œå®ƒå¯ä»¥æ— ç¼å’Œ C++ ç¼–è¯‘çš„æ¨¡å—è¿›è¡Œäº¤äº’ã€‚<br>&emsp;&emsp;å› æ­¤å¾ˆå¤š C++ çš„åŒ… æ¯”å¦‚ Qt ç­‰å¯ä»¥æš´éœ²æ¥å£åˆ° Python å®ç°è°ƒç”¨ã€‚</p></blockquote><h2 id="pyd-hello-world-æ¡ˆä¾‹"><a href="#pyd-hello-world-æ¡ˆä¾‹" class="headerlink" title="pyd hello world æ¡ˆä¾‹"></a>pyd hello world æ¡ˆä¾‹</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Python.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;maya/MGlobal.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">char</span> MAYA_PYTHON_C_EXT_DOCSTRING[] = <span class="string">&quot;An example Python C extension that makes use of Maya functionality.&quot;</span>;</span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">char</span> HELLO_WORLD_MAYA_DOCSTRING[] = <span class="string">&quot;Says hello world!&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NOTE(timmyliang): è°ƒç”¨ MGlobal API æ‰“å° Python ä¼ é€’çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function"><span class="type">static</span> PyObject *<span class="title">pyHelloWorldMaya</span><span class="params">(PyObject *<span class="keyword">module</span>, PyObject *args)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *inputString;</span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">PyArg_ParseTuple</span>(args, <span class="string">&quot;s&quot;</span>, &amp;inputString))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PyGILState_STATE pyGILState = <span class="built_in">PyGILState_Ensure</span>();</span><br><span class="line"></span><br><span class="line">MGlobal::<span class="built_in">displayInfo</span>(inputString);</span><br><span class="line"></span><br><span class="line">PyObject *result = <span class="built_in">Py_BuildValue</span>(<span class="string">&quot;s&quot;</span>, inputString);</span><br><span class="line"></span><br><span class="line"><span class="built_in">PyGILState_Release</span>(pyGILState);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NOTE(timmyliang): å®šä¹‰æ¨¡å—çš„å‡½æ•°åˆ—è¡¨</span></span><br><span class="line"><span class="type">static</span> PyMethodDef mayaPythonCExtMethods[] = &#123;</span><br><span class="line">&#123;<span class="string">&quot;hello_world_maya&quot;</span>, pyHelloWorldMaya, METH_VARARGS, HELLO_WORLD_MAYA_DOCSTRING&#125;,</span><br><span class="line">&#123;<span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="number">0</span>, <span class="literal">NULL</span>&#125; <span class="comment">// <span class="doctag">NOTE:</span> (sonictk) Sentinel value for Python</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// NOTE(timmyliang): python2 åˆå§‹åŒ–å‡½æ•°è§„èŒƒ init&lt;module_name&gt; </span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> PY_MAJOR_VERSION == 2</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> <span class="function">PyMODINIT_FUNC <span class="title">initpy_hello</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">Py_InitModule3</span>(<span class="string">&quot;py_hello&quot;</span>,</span><br><span class="line">  mayaPythonCExtMethods,</span><br><span class="line">  MAYA_PYTHON_C_EXT_DOCSTRING);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// NOTE(timmyliang): python3 åˆå§‹åŒ–å‡½æ•°è§„èŒƒ PyInit_&lt;module_name&gt; </span></span><br><span class="line"><span class="meta">#<span class="keyword">elif</span> PY_MAJOR_VERSION == 3</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> <span class="function">PyMODINIT_FUNC <span class="title">PyInit_py_hello</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">static</span> PyModuleDef hello_module = &#123;</span><br><span class="line">PyModuleDef_HEAD_INIT,</span><br><span class="line"><span class="string">&quot;py_hello&quot;</span>, <span class="comment">// Module name to use with Python import statements</span></span><br><span class="line">MAYA_PYTHON_C_EXT_DOCSTRING, <span class="comment">// Module description</span></span><br><span class="line"><span class="number">0</span>,</span><br><span class="line">mayaPythonCExtMethods <span class="comment">// Structure that defines the methods of the module</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">PyModule_Create</span>(&amp;hello_module);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¸Šé¢çš„ä»£ç å°±æ˜¯ä¸€ä¸ªå°æ¡ˆä¾‹ï¼Œå°† C++ ç¼–è¯‘æˆ pyd ç»™ python è°ƒç”¨ã€‚<br>&emsp;&emsp;å¹¶ä¸”è¿™é‡Œå¼•ç”¨äº† Maya çš„ API ï¼Œå› æ­¤åªèƒ½ä½¿ç”¨ Maya çš„ Python Interpreter (mayapy.exe) è¿›è¡ŒåŠ è½½ã€‚<br>&emsp;&emsp;å¦‚æœä½¿ç”¨å…¶ä»– Python å¯¼å…¥è¿™ä¸ªæ¨¡å—ä¼šå‡ºç°å¦‚ä¸‹çš„é”™è¯¯</p></blockquote><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent <span class="keyword">call</span> last):</span><br><span class="line">  File &quot;d:/Obsidian/Personal/<span class="number">2</span>_Area/ğŸ“Blog/CG/Maya/C++/test_load.py&quot;, line <span class="number">5</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    import py_hello</span><br><span class="line"><span class="function">ImportError: <span class="title">DLL</span> <span class="title">load</span> <span class="title">failed</span> <span class="title">while</span> <span class="title">importing</span> <span class="title">py_hello</span>: æ‰¾ä¸åˆ°æŒ‡å®šçš„ç¨‹åºã€‚</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;pyd çš„ C++ ä»£ç åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†</p><ol><li>python å®šä¹‰çš„å‡½æ•°</li><li>å‡½æ•°åˆ—è¡¨å®šä¹‰ (éœ€è¦ä¼ å…¥ä¸Šé¢çš„ C++ ç¼–å†™çš„ Python å‡½æ•°)</li><li>æ¨¡å—å®šä¹‰ (ä¼ å…¥ä¸Šé¢çš„ å‡½æ•°åˆ—è¡¨)</li></ol></blockquote><blockquote><p>&emsp;&emsp;æœ€åç”Ÿæˆæ¨¡å—éƒ¨åˆ†ï¼ŒPython2 å’Œ Python3 æš´éœ²çš„ API ä¸ä¸€è‡´ï¼Œå¯ä»¥ç”¨å®æ¥åŒºåˆ†ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ç¼–è¯‘è¿™ä¸ª cpp éœ€è¦åŠ ä¸Š Maya include ç›®å½•çš„å¤´æ–‡ä»¶ï¼Œä»¥åŠé“¾æ¥ Maya lib çš„é™æ€åº“æ–‡ä»¶ã€‚<br>&emsp;&emsp;å¦å¤–ç¼–è¯‘ pyd éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œå®ƒä¹Ÿéœ€è¦æƒ³ mll ä¸€æ ·æš´éœ²å‡ºåˆå§‹åŒ–çš„å‡½æ•°ã€‚<br>&emsp;&emsp;åœ¨ python2 ä¸‹æ˜¯ <code>init&lt;module_name&gt;</code> å¼€å¤´ï¼Œåœ¨ python3 ä¸‹æ˜¯ <code>PyInit_&lt;module_name&gt;</code> å¼€å¤´ã€‚<br>&emsp;&emsp;åœ¨ cpp é‡Œé¢é…ç½®ç¼–è¯‘ç¯å¢ƒæ˜¯ä¸ªç›¸å½“è®©äººå¤´ç–¼çš„é—®é¢˜ã€‚<br>&emsp;&emsp;æˆ‘åœ¨è‡ªå·±çš„ <a href="https://github.com/FXTD-ODYSSEY/CMakeMaya">CMakeMaya</a> åº“é‡Œé¢å·²ç»é…ç½®å¥½äº†ç¼–è¯‘ç”¨çš„ç¯å¢ƒï¼Œ<br>&emsp;&emsp;å…·ä½“çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥çœ‹ readme æˆ–è€…å‚è€ƒæˆ‘çš„æ–‡ç«  [[01_Maya CMake æ„å»º C++ æ’ä»¶ç¼–è¯‘ç¯å¢ƒ]] </p></blockquote><blockquote><p>&emsp;&emsp;åœ¨æˆ‘æä¾›çš„ç¯å¢ƒä¸‹æ‰§è¡Œ <code>doit c -p pyd -v 2020</code> å³å¯ç¼–è¯‘å‡º pyd åˆ° <code>plug-ins\Release\maya2022\pyd\py_hello.pyd</code><br>&emsp;&emsp;éœ€è¦æ³¨æ„ pyd åœ¨ä¸åŒçš„å¹³å°ä¸åŒMayaç‰ˆæœ¬éƒ½éœ€è¦å•ç‹¬ç¼–è¯‘ã€‚è¿™é‡Œæˆ‘æä¾›äº†ç¼–è¯‘å¥½ç»™ Windows64 Maya2020 çš„ <a href="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/ce449c32/py_hello.pyd">pyd</a> </p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/ce449c32/ea63da79573f07279f606f9b77b16f21.jpeg" alt="image"></p><h3 id="å¯¼å…¥-pyd-å¼•å…¥-Maya-C-èŠ‚ç‚¹"><a href="#å¯¼å…¥-pyd-å¼•å…¥-Maya-C-èŠ‚ç‚¹" class="headerlink" title="å¯¼å…¥ pyd å¼•å…¥ Maya C++ èŠ‚ç‚¹"></a>å¯¼å…¥ pyd å¼•å…¥ Maya C++ èŠ‚ç‚¹</h3><blockquote><p>&emsp;&emsp;åœ¨ç›¸åº”çš„ç‰ˆæœ¬æ‰§è¡Œå°±å¯ä»¥çœ‹åˆ°å¦‚æœŸè§¦å‘äº† maya API çš„æ–¹æ³•ã€‚<br>&emsp;&emsp;ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªæ–¹å¼æ³¨å†Œ Maya çš„èŠ‚ç‚¹å’Œ Mel å‘½ä»¤ï¼Œå…·ä½“å¯ä»¥çœ‹ <a href="https://github.com/FXTD-ODYSSEY/CMakeMaya/tree/master/projects/sonictk/pyd/pyDeformer">pyDeformer</a> çš„ä»£ç ã€‚<br>&emsp;&emsp;åªæ˜¯ç”±äºæ²¡æœ‰ <code>initializePlugin</code> æ‹¿ä¸åˆ°ä¼ è¿›æ¥çš„ <code>MObject</code> å®ä¾‹åŒ– <code>MFnPlugin</code>ã€‚<br>&emsp;&emsp;æˆ‘æµ‹è¯•çš„ py_deformer ç”¨äº† <code>MFnPlugin::findPlug</code> æ‹¿åˆ°å†…ç½®æ’ä»¶ <code>matrixNodes</code> æä¾›çš„ MObject æ¥æ³¨å†ŒèŠ‚ç‚¹ã€‚<br>&emsp;&emsp;ç­”æ¡ˆæ˜¯å¯ä»¥å®ç°çš„ï¼Œè€Œä¸”æ–°åŠ å…¥çš„èŠ‚ç‚¹ä¹Ÿä¼šæ˜¾ç¤ºåœ¨ <code>matrixNodes</code> ä¸Šã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/ce449c32/877d402bb3650b6b9d965467d2811829.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;è¿™ç§éªšæ“ä½œä¸å»ºè®®ä½¿ç”¨ï¼Œè€Œä¸”ä¹Ÿä¸çŸ¥é“ä¼šä¸ä¼šæœ‰ä»€ä¹ˆ BUG å¯¼è‡´ Maya å´©æºƒã€‚<br>&emsp;&emsp;å¦å¤–æ²¡æœ‰åŠæ³•è§¦å‘ <code>uninitializePlugin</code> æ¥æ³¨é”€è¿™ä¸ªèŠ‚ç‚¹çš„æ³¨å†Œã€‚</p></blockquote><h3 id="pyd-mll-ç¼åˆæ€ª"><a href="#pyd-mll-ç¼åˆæ€ª" class="headerlink" title="pyd mll ç¼åˆæ€ª"></a>pyd mll ç¼åˆæ€ª</h3><blockquote><p>&emsp;&emsp;åŸºäºä¸Šé¢çš„æµ‹è¯•æˆ‘å‘ç°è¿˜å¯ä»¥ç”Ÿæˆå‡ºæ—¢æ˜¯ Maya æ’ä»¶åˆæ˜¯ Python æ¨¡å—çš„ ç¼åˆæ€ªæ–‡ä»¶ã€‚<br>&emsp;&emsp;å› ä¸º C++ åªè¦ç¼–è¯‘çš„æ—¶å€™ export å‡ºå¯¹åº”çš„æ–¹æ³•å°±å¯ä»¥åŠ è½½ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;åªæ˜¯ Python åŠ è½½äºŒè¿›åˆ¶åŒ…è¦æ±‚æ–‡ä»¶åç¼€ä¸º pyd ï¼ŒMaya åŠ è½½äºŒè¿›åˆ¶æ’ä»¶è¦æ±‚æ–‡ä»¶å‘½åä¸º mll æ‰å¯ä»¥ã€‚<br>&emsp;&emsp;è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ç”¨è½¯è¿æ¥æˆ–è€…æ‹†åˆ†æˆä¸¤ä¸ªæ–‡ä»¶æ¥å®ç°ï¼Œç»è¿‡æµ‹è¯•æ˜¯å¯ä»¥çš„ï¼Œå…·ä½“å¯ä»¥çœ‹ <a href="https://github.com/FXTD-ODYSSEY/CMakeMaya/tree/master/projects/sonictk/pyd/pyCommand">pyCommand</a> çš„ <a href="https://github.com/FXTD-ODYSSEY/CMakeMaya/tree/master/projects/sonictk/pyd/scripts/test_py_deformer.py">æµ‹è¯•ä»£ç </a> ã€‚</p></blockquote><h2 id="ä½¿ç”¨-mll-åµŒå…¥-python-æ¨¡å—"><a href="#ä½¿ç”¨-mll-åµŒå…¥-python-æ¨¡å—" class="headerlink" title="ä½¿ç”¨ mll åµŒå…¥ python æ¨¡å—"></a>ä½¿ç”¨ mll åµŒå…¥ python æ¨¡å—</h2><blockquote><p>&emsp;&emsp;ä¸Šé¢ä¸»è¦å®ç°æŒ‰ç…§ python çš„è§„èŒƒåŠ è½½åŒ…çš„æ“ä½œï¼Œ<code>sonitck</code> çš„æ–‡ç« è¿˜æä¾›äº†ä¸€ä¸ªæ–¹æ¡ˆï¼ŒåŠ è½½ mll è·å–åˆ° python åŒ…çš„æ–¹å¼ã€‚<br>&emsp;&emsp;åšæ³•ä¹Ÿä¸å¤æ‚ï¼Œå°±æ˜¯åœ¨ <code>initializePlugin</code> çš„æ—¶å€™åŠ ä¸ŠåŠ ä¸Š C++ çš„æ¨¡å—ã€‚</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Python.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;maya/MFnPlugin.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;maya/MGlobal.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *kAUTHOR = <span class="string">&quot;TimmyLiang&quot;</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *kVERSION = <span class="string">&quot;1.0.0&quot;</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *kREQUIRED_API_VERSION = <span class="string">&quot;Any&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">char</span> HELLO_WORLD_MAYA_DOCSTRING[] = <span class="string">&quot;Says hello world!&quot;</span>;</span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">char</span> MAYA_PYTHON_C_EXT_DOCSTRING[] = <span class="string">&quot;An example Python C extension that makes use of Maya functionality.&quot;</span>;</span><br><span class="line"></span><br><span class="line">PyObject *<span class="keyword">module</span> = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">static</span> PyObject *<span class="title">pyHelloWorldMaya</span><span class="params">(PyObject *<span class="keyword">module</span>, PyObject *args)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *inputString;</span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">PyArg_ParseTuple</span>(args, <span class="string">&quot;s&quot;</span>, &amp;inputString)) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">PyGILState_STATE pyGILState = <span class="built_in">PyGILState_Ensure</span>();</span><br><span class="line">MGlobal::<span class="built_in">displayInfo</span>(inputString);</span><br><span class="line">PyObject *result = <span class="built_in">Py_BuildValue</span>(<span class="string">&quot;s&quot;</span>, inputString);</span><br><span class="line"><span class="built_in">PyGILState_Release</span>(pyGILState);</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> PyMethodDef mayaPythonCExtMethods[] = &#123;</span><br><span class="line">&#123;<span class="string">&quot;hello_world_maya&quot;</span>, pyHelloWorldMaya, METH_VARARGS, HELLO_WORLD_MAYA_DOCSTRING&#125;,</span><br><span class="line">&#123;<span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="number">0</span>, <span class="literal">NULL</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">MStatus <span class="title">initializePlugin</span><span class="params">(MObject obj)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">MFnPlugin <span class="title">plugin</span><span class="params">(obj, kAUTHOR, kVERSION, kREQUIRED_API_VERSION)</span></span>;</span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">Py_IsInitialized</span>())</span><br><span class="line"><span class="built_in">Py_Initialize</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">Py_IsInitialized</span>())</span><br><span class="line">&#123;</span><br><span class="line">PyGILState_STATE pyGILState = <span class="built_in">PyGILState_Ensure</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// NOTE(TimmyLiang): python2 ç›´æ¥åˆå§‹åŒ–æ¨¡å—å°±ä¸ä¼šå˜æˆ built-in æ¨¡å—</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> PY_MAJOR_VERSION == 2</span></span><br><span class="line"><span class="keyword">module</span> = <span class="built_in">Py_InitModule3</span>(<span class="string">&quot;mll_py&quot;</span>,</span><br><span class="line">mayaPythonCExtMethods,</span><br><span class="line">MAYA_PYTHON_C_EXT_DOCSTRING);</span><br><span class="line"><span class="comment">// NOTE(TimmyLiang): python3 ç”¨å®˜æ–¹çš„æ–¹å¼æ·»åŠ æ¨¡å—ä¸è¡Œï¼Œå¯èƒ½æ˜¯å› ä¸º Py_Initialize å·²ç»æ‰§è¡Œäº†</span></span><br><span class="line"><span class="meta">#<span class="keyword">elif</span> PY_MAJOR_VERSION == 3</span></span><br><span class="line"><span class="comment">// NOTE(TimmyLiang): å‚è€ƒ https://github.com/LinuxCNC/linuxcnc/issues/825 å°†æ¨¡å—åŠ åˆ° sys.modules é‡Œé¢</span></span><br><span class="line"><span class="type">static</span> PyModuleDef hello_module = &#123;</span><br><span class="line">PyModuleDef_HEAD_INIT,</span><br><span class="line"><span class="string">&quot;mll_py&quot;</span>, <span class="comment">// Module name to use with Python import statements</span></span><br><span class="line">MAYA_PYTHON_C_EXT_DOCSTRING, <span class="comment">// Module description</span></span><br><span class="line"><span class="number">0</span>,</span><br><span class="line">mayaPythonCExtMethods <span class="comment">// Structure that defines the methods of the module</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">module</span> = <span class="built_in">PyModule_Create</span>(&amp;hello_module);</span><br><span class="line">PyObject *sys_modules = <span class="built_in">PyImport_GetModuleDict</span>();</span><br><span class="line"><span class="built_in">PyDict_SetItemString</span>(sys_modules, <span class="string">&quot;mll_py&quot;</span>, <span class="keyword">module</span>);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">MGlobal::<span class="built_in">displayInfo</span>(<span class="string">&quot;Registered Python bindings!&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">module</span> == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> MStatus::kFailure;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">// NOTE(timmyliang): å¢åŠ å¼•ç”¨è®¡æ•°(ç¡®ä¿ä¸ä¼š gc)</span></span><br><span class="line"><span class="built_in">Py_INCREF</span>(<span class="keyword">module</span>);</span><br><span class="line"><span class="built_in">PyGILState_Release</span>(pyGILState);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> MStatus::kSuccess;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">MStatus <span class="title">uninitializePlugin</span><span class="params">(MObject obj)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MStatus status;</span><br><span class="line">  <span class="comment">// NOTE(timmyliang): å‡å°‘å¼•ç”¨è®¡æ•°</span></span><br><span class="line"><span class="built_in">Py_DECREF</span>(<span class="keyword">module</span>);</span><br><span class="line"><span class="keyword">return</span> status;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¸Šé¢çš„ä»£ç å…¼å®¹ python2 python3 ç‰ˆæœ¬ã€‚<br>&emsp;&emsp;python2 ç›´æ¥ç”¨é»˜è®¤çš„ <code>Py_InitModule</code> æ–¹æ³•å°±å¯ä»¥æ·»åŠ ï¼Œå¦‚æœåœ¨ Python æ‰“å°æ¨¡å—ä¼šæç¤º <code>&lt;module &#39;mll_py&#39; (built-in)&gt;</code><br>&emsp;&emsp;ä½†æ˜¯ python3 ä¸‹é¢ä¸è¡Œï¼Œåæ¥æŸ¥æ‰¾äº† Github çš„ <a href="https://github.com/LinuxCNC/linuxcnc/issues/825">issue</a> é€šè¿‡å°†æ¨¡å—æ·»åŠ åˆ° <code>sys.modules</code> ä¸‹é¢è§£å†³é—®é¢˜ã€‚<br>&emsp;&emsp;åªæ˜¯æ¨¡å—æ‰“å°å°±æ˜¯æ™®é€šçš„æ¨¡å—ã€‚<br>&emsp;&emsp;é‚£ä¸ºä»€ä¹ˆå°†æ¨¡å—æ”¾åˆ° sys.modules å°±å¯ä»¥äº†ï¼Œè¿™ Python çš„ import æœºåˆ¶æœ‰å…³ã€‚ [[01_Python Import æ¨¡å—æœºåˆ¶]]</p></blockquote><blockquote><p>&emsp;&emsp;è¿™ä¸ªæ–¹å¼å¯ä»¥å°†ä¸€äº› C++ çš„ API æš´éœ²ç»™ Pythonï¼Œåªæ˜¯è¿™ä¸ªæ“ä½œéœ€è¦æ›´å¤šçš„è¯´æ˜ã€‚<br>&emsp;&emsp;å¦åˆ™æ²¡äººçŸ¥é“è¿™ä¸ª mll å±…ç„¶æ·»åŠ ä¸€ä¸ª Python æ¨¡å—ã€‚</p></blockquote><h2 id="pybind11-è‡ªåŠ¨ç»‘å®š"><a href="#pybind11-è‡ªåŠ¨ç»‘å®š" class="headerlink" title="pybind11 è‡ªåŠ¨ç»‘å®š"></a>pybind11 è‡ªåŠ¨ç»‘å®š</h2><blockquote><p>&emsp;&emsp;é€šè¿‡ä¸Šé¢ä¸€é¡¿æ“ä½œï¼Œä¹Ÿå¯ä»¥æ·±åˆ»ä½“ä¼šåˆ°å¦‚æœè·¨ç‰ˆæœ¬å…¼å®¹ C++ éœ€è¦åšå¾ˆå¤šå®çš„åˆ¤æ–­ï¼Œç›¸å½“ç¹çã€‚<br>&emsp;&emsp;åŒ…æ‹¬ Python2 å’Œ Python3 æš´éœ²çš„æ–¹æ³•åä¸ä¸€æ ·ï¼Œéœ€è¦åœ¨ CMake ä¸Šè¿›è¡Œåˆ¤æ–­ã€‚<br>&emsp;&emsp;ä½¿ç”¨ pybind11 è¿›è¡Œè½¬æ¢ç›¸å¯¹æ–¹ä¾¿è®¸å¤š</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Python.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;maya/MGlobal.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pybind11/pybind11.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://zhuanlan.zhihu.com/p/80884925</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">displayInfo</span><span class="params">(<span class="type">char</span> *inputString)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MGlobal::<span class="built_in">displayInfo</span>(inputString);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">PYBIND11_MODULE</span>( pybind11cpp, m )&#123;</span><br><span class="line">    m.<span class="built_in">doc</span>() = <span class="string">&quot;pybind11 example&quot;</span>;</span><br><span class="line">    m.<span class="built_in">def</span>(<span class="string">&quot;display_info&quot;</span>, &amp;displayInfo, <span class="string">&quot;Maya Display Info&quot;</span> ,pybind11::<span class="built_in">arg</span>(<span class="string">&quot;inputString&quot;</span>) = <span class="string">&quot;hello world!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;pybind11 ä¼šè‡ªåŠ¨å°† Python çš„å‚æ•°è¿›è¡Œè½¬æ¢<br>&emsp;&emsp;è¿™æ ·åªè¦å°†çº¯ç²¹çš„ C++ å‡½æ•°æ”¾å…¥åˆ° <code>PYBIND11_MODULE</code> å®<br>&emsp;&emsp;å¹¶ä¸” pybind11 çš„ 2.9 ç‰ˆæœ¬æ”¯æŒ python2 python3 çš„ pyd ç¼–è¯‘ã€‚<br>&emsp;&emsp;åªè¦åœ¨ cmake é‡Œé¢é…ç½® <code>/export</code> å¯¹åº”çš„æ–¹æ³•å³å¯ã€‚</p></blockquote><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find_package</span>(Pybind11 REQUIRED) </span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>(pybind11cpp) <span class="comment">#project name</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">file</span>(GLOB SRCS <span class="string">&quot;pybind11/*.cpp&quot;</span> <span class="string">&quot;pybind11/*.h&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;MAYA_INCLUDE_DIR&#125;</span> <span class="variable">$&#123;MAYA_PYTHON_INCLUDE_DIR&#125;</span> <span class="variable">$&#123;PYBIND11_INCLUDE_DIR&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">link_directories</span>(<span class="variable">$&#123;MAYA_LIBRARY_DIR&#125;</span>) <span class="comment">#specifies a directory where a linker should search for libraries</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">add_library</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> SHARED <span class="variable">$&#123;SRCS&#125;</span>) <span class="comment">#Add a dynamic library to the project using the specified source files</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pybind11_add_module($&#123;PROJECT_NAME&#125; $&#123;SRCS&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">target_link_libraries</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> <span class="variable">$&#123;MAYA_LIBRARIES&#125;</span>) <span class="comment">#specifies list of libraries to use when linking the terget and its dependents</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$&#123;MAYA_VERSION&#125;</span> <span class="keyword">GREATER</span> <span class="number">2020</span>) </span><br><span class="line">    <span class="keyword">set</span>(PYBIND_LINK_FLAGS <span class="string">&quot;/export:PyInit_pybind11cpp&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>() </span><br><span class="line">    <span class="keyword">set</span>(PYBIND_LINK_FLAGS <span class="string">&quot;/export:initpybind11cpp&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">set_target_properties</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> PROPERTIES</span><br><span class="line">    LINK_FLAGS <span class="variable">$&#123;PYBIND_LINK_FLAGS&#125;</span></span><br><span class="line">    SUFFIX <span class="string">&quot;.pyd&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;pybind11 å¯ä»¥ä½¿ç”¨ <code>pybind11_add_module</code> æ¥ç”Ÿæˆ pyd<br>&emsp;&emsp;ä½†æ˜¯å®ƒæ˜¯è‡ªåŠ¨æŸ¥æ‰¾ Python ç¯å¢ƒï¼ŒæŒ‡å®š Maya çš„ Python éœ€è¦é¢å¤–çš„é…ç½®ã€‚<br>&emsp;&emsp;æ‰€ä»¥æˆ‘å°±ä¸ç”¨è¿™ä¸ªï¼Œè‡ªå·±æ¥é…ç½®å¥½äº†ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;é€šè¿‡ä¸Šé¢çš„æ–¹å¼å¯ä»¥å¤§å¤§ç®€åŒ– C++ çš„ç¼–å†™ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;ä»¥ä¸Šå°±æ˜¯ pyd ç¼–è¯‘çš„å„ç§æŠ˜è…¾ç»“æœã€‚<br>&emsp;&emsp;ç¤¾åŒºé‡Œé¢å€¼å¾—è¯´é“çš„æœ‰ <a href="https://github.com/mottosso/cmdc">cmdc</a> åŸºäº pybind11 ç¼–è¯‘çš„äºŒæ¬¡å°è£… C++ API åº“ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;Python è°ƒç”¨ C++ è¿˜æœ‰åˆ©ç”¨ <code>ctypes</code> åº“è®¿é—® dll çš„æ–¹å¼<br>&emsp;&emsp;åç»­ä¹Ÿå¯ä»¥å®éªŒä¸€ä¸‹åœ¨ Python ä¸­ä» dll é‡Œé¢è°ƒç”¨ function å®ç° å‚è€ƒ:<a href="https://github.com/Autodesk/animx">https://github.com/Autodesk/animx</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      Python C++ Extension
    
    </summary>
    
      <category term="CG" scheme="https://blog.l0v0.com/categories/CG/"/>
    
      <category term="Maya" scheme="https://blog.l0v0.com/categories/CG/Maya/"/>
    
      <category term="C++" scheme="https://blog.l0v0.com/categories/CG/Maya/C/"/>
    
    
      <category term="à €Maya" scheme="https://blog.l0v0.com/tags/%E0%A0%80Maya/"/>
    
      <category term="à ‡Cpp" scheme="https://blog.l0v0.com/tags/%E0%A0%87Cpp/"/>
    
  </entry>
  
  <entry>
    <title>Unreal C++ VScode é…ç½®</title>
    <link href="https://blog.l0v0.com/posts/51c731db.html"/>
    <id>https://blog.l0v0.com/posts/51c731db.html</id>
    <published>2022-07-12T06:47:30.000Z</published>
    <updated>2022-07-30T07:31:56.851Z</updated>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;è¿™æ¬¡å°è¯•åœ¨ VScode è¿›è¡Œå¼•æ“ç¼–è¯‘ã€‚<br>&emsp;&emsp;ç½‘ä¸Šä¸€æŸ¥å‘ç°ï¼Œå®˜æ–¹å…¶å®æœ‰åšæ”¯æŒçš„ï¼Œå…·ä½“å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  <a href="http://jollymonsterstudio.com/2018/11/02/unreal-c-with-visual-studio-code">é“¾æ¥</a><br>&emsp;&emsp;è¿™ç¯‡æ–‡ç« ä¼ æ’­ç”šå¹¿ï¼Œå¯ä»¥å‚ç…§å’Œè¿™ä¸ªæ–¹å¼é…ç½® VScode ç¼–è¯‘ã€‚</p></blockquote><p><a href="https://www.youtube.com/watch?v=fydvKedIxKk">https://www.youtube.com/watch?v=fydvKedIxKk</a><br><a href="https://github.com/boocs/ue4-tellisense-fixes">https://github.com/boocs/ue4-tellisense-fixes</a></p><h2 id="C-ç¼–è¯‘è¿‡ç¨‹"><a href="#C-ç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="C++ ç¼–è¯‘è¿‡ç¨‹"></a>C++ ç¼–è¯‘è¿‡ç¨‹</h2><p>æ·±åº¦å‚è€ƒå­¦ä¹ è¿™è¾¹æ–‡ç«  <a href="https://ericlemes.com/2018/11/21/compiling-c-code/">https://ericlemes.com/2018/11/21/compiling-c-code/</a><br>é‰´äºæœ¬äººçš„ C++ æ°´å¹³ä¸€èˆ¬ï¼Œå»ºè®®é˜…è¯»åŸæ–‡</p><h3 id="ç¼–è¯‘æ­¥éª¤"><a href="#ç¼–è¯‘æ­¥éª¤" class="headerlink" title="ç¼–è¯‘æ­¥éª¤"></a>ç¼–è¯‘æ­¥éª¤</h3><blockquote><p>&emsp;&emsp;C++ ç¼–è¯‘å¯èƒ½ä¼šç”¨åˆ°ä¸‹é¢çš„æ–‡ä»¶ã€‚</p></blockquote><ul><li>.cpp æ–‡ä»¶ç¼–è¯‘æˆ .obj</li><li>ç”Ÿæˆé™æ€åº“ .lib</li><li>ç”ŸæˆåŠ¨æ€åº“ .dll </li><li>ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ executable</li></ul><h3 id="VS-å·¥å…·é“¾"><a href="#VS-å·¥å…·é“¾" class="headerlink" title="VS å·¥å…·é“¾"></a>VS å·¥å…·é“¾</h3><blockquote><p>&emsp;&emsp;.sln å…¨ç§°æ˜¯ solution è§£å†³æ–¹æ¡ˆï¼Œæ˜¯ VS çš„é¡¹ç›®é…ç½®æ–‡ä»¶ã€‚ (æ•´åˆäº† .vcxproj .csproj)<br>&emsp;&emsp;ä»–å¯ä»¥åŒæ—¶é…ç½®å¤šä¸ªé¡¹ç›®ï¼Œæœ€åé€šè¿‡ MSBuild æ¥æ„å»º<br>&emsp;&emsp;sln åŒ…å«äº†é¡¹ç›®çš„å„ç§å¤´æ–‡ä»¶ä¾èµ–ï¼Œåº“å¼•ç”¨ç­‰æè¿°ï¼Œæ‰§è¡Œé¡ºåºï¼Œé€šè¿‡è¿™ä¸ª IDE å°±çŸ¥é“æ€ä¹ˆç¼–è¯‘ä½ çš„é¡¹ç›®ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;Xcode çš„æƒ…å†µä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚<br>&emsp;&emsp;å…¶ä¸­æ¯”è¾ƒç‰¹åˆ«çš„æ—¶ CMake ï¼Œé€šè¿‡ CMakeLists.txt æ–‡ä»¶å¯ä»¥æ ¹æ®ä¸åŒå¹³å°ç”Ÿæˆå·¥ç¨‹é…ç½®æ–‡ä»¶ã€‚</p></blockquote><h3 id="ç¬¬ä¸€æ­¥-ç¼–è¯‘"><a href="#ç¬¬ä¸€æ­¥-ç¼–è¯‘" class="headerlink" title="ç¬¬ä¸€æ­¥ ç¼–è¯‘"></a>ç¬¬ä¸€æ­¥ ç¼–è¯‘</h3><p>è¾“å…¥:</p><ul><li>Defines</li><li>Include æ–‡ä»¶å¤¹è·¯å¾„Include directories</li><li>é¢„ç¼–è¯‘å¤´æ–‡ä»¶ (å¦‚æœæœ‰ç”¨åˆ°çš„è¯)</li><li>æºä»£ç </li></ul><p>è¾“å‡º:</p><ul><li>.obj æ–‡ä»¶</li></ul><blockquote><p>&emsp;&emsp;MSBuild ä½¿ç”¨ CL.exe è¿›è¡Œ C++ ç¼–è¯‘ã€‚ å¯èƒ½çš„è·¯å¾„ <code>C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.29.30133\bin\Hostx64\x64\cl.exe</code><br>&emsp;&emsp;éœ€è¦å®‰è£… VS æˆ–è€…ç”¨ choco æ¥å®‰è£…</p></blockquote><blockquote><p>&emsp;&emsp;ç¼–è¯‘çš„æ—¶å€™ä¼šæ ¹æ® å®å®šä¹‰(æ¯”å¦‚ <code>#ifdef</code>)åŠ¨æ€ æ”¹å˜ç¼–è¯‘è¡Œä¸º<br>&emsp;&emsp;é€šè¿‡è¿™ä¸ªæ–¹å¼å¯ä»¥åœ¨ä¸åŒçš„å¹³å°ç¼–è¯‘å‡ºä¸åŒçš„è¡Œä¸ºã€‚<br>&emsp;&emsp;C++ æœ€ç»ˆç¼–è¯‘æˆå¯¹åº”å¹³å°çš„äºŒè¿›åˆ¶ï¼Œè¿™ä¸ªè®¾è®¡å’Œ Java C# éƒ½ä¸åŒã€‚</p></blockquote><blockquote><p>&emsp;&emsp;å¤´æ–‡ä»¶æœ€ç»ˆä¼šæ‹¼æ¥åˆ° C++ é‡Œé¢è¿›è¡Œç¼–è¯‘ï¼Œæ‰€ä»¥éœ€è¦åŠ ä¸Š <code>#pragma once</code> æˆ–è€… <code>#if</code> æ¥é¿å…å¤šæ¬¡å®šä¹‰ã€‚<br>&emsp;&emsp;é¢„ç¼–è¯‘å¤´åˆ™å¯ä»¥ç”Ÿæˆ <code>.pch</code> æ–‡ä»¶å®ç°å¤´æ–‡ä»¶å¤ç”¨ã€‚</p></blockquote><h3 id="ç¬¬äºŒæ­¥-é“¾æ¥"><a href="#ç¬¬äºŒæ­¥-é“¾æ¥" class="headerlink" title="ç¬¬äºŒæ­¥ é“¾æ¥"></a>ç¬¬äºŒæ­¥ é“¾æ¥</h3><p>è¾“å…¥:</p><ul><li>ä¸€äº›æºç ç”Ÿæˆ .obj æ–‡ä»¶</li><li>ä¸€äº›æºç ç”Ÿæˆ .lib æ–‡ä»¶</li><li>ç¬¬ä¸‰æ–¹çš„ lib å’Œ obj æ–‡ä»¶</li></ul><p>è¾“å‡º:</p><ul><li>.dll æˆ–è€… .exe</li></ul><blockquote><p>&emsp;&emsp;è¿™ä¸€æ­¥ä¼šå°†ç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶åˆå¹¶æˆ dll æˆ–è€… exe<br>&emsp;&emsp;è¿™ä¸ªè¿‡ç¨‹ä¼šå®Œæˆå¾ˆå¤šä¼˜åŒ–çš„æ­¥éª¤ï¼ŒæŠŠä¸è¿è¡Œçš„éƒ¨åˆ†æ¸…ç†æ‰ã€‚<br>&emsp;&emsp;æœ€åä¼šå°†ä¸€äº›å¹³å°çš„ lib å¼•å…¥ç¡®ä¿å®ƒåœ¨å¹³å°ä¸Šå¯ä»¥è¿è¡Œï¼Œæ¯”å¦‚ wincrt (Windows C Runtime library) ç­‰ç­‰<br>&emsp;&emsp;å¹¶ä¸” lib ä¹Ÿæœ‰å¾ˆå¤šç§ç±»ï¼Œæœ‰ release ç‰ˆæœ¬å’Œ debug ç‰ˆæœ¬ç­‰ç­‰ã€‚</p></blockquote><h2 id="Unreal-Build-Tool"><a href="#Unreal-Build-Tool" class="headerlink" title="Unreal Build Tool"></a>Unreal Build Tool</h2><p><a href="https://ericlemes.com/2018/11/23/understanding-unreal-build-tool/">https://ericlemes.com/2018/11/23/understanding-unreal-build-tool/</a></p><h3 id="CS-é…ç½®æ–‡ä»¶è¯´æ˜"><a href="#CS-é…ç½®æ–‡ä»¶è¯´æ˜" class="headerlink" title="CS é…ç½®æ–‡ä»¶è¯´æ˜"></a>CS é…ç½®æ–‡ä»¶è¯´æ˜</h3><p><a href="https://www.bilibili.com/read/cv15297017/">https://www.bilibili.com/read/cv15297017/</a></p><blockquote><p>&emsp;&emsp;<code>Unreal</code> ä½¿ç”¨è‡ªå·±å¼€å‘çš„ <code>UnrealBuildTool</code> æ¥ç¼–è¯‘è‡ªå·±çš„ C++ ä»£ç <br>&emsp;&emsp;ä¸ [[ğŸ’¾CMake]] ç±»ä¼¼çš„ï¼Œ<code>UnrealBuildTool</code> ä¼šå¼•ç”¨ä½ éœ€è¦åœ¨ç›¸åº”çš„æ¨¡å—æ·»åŠ  <code>.build.cs</code> çš„ä»£ç æ–‡ä»¶æ¥æè¿°ä»“åº“é“¾æ¥çš„ä¸œè¥¿ã€‚<br>&emsp;&emsp;<code>.build.cs</code> ä¹‹ä¸Šé…å¥—äº† <code>Private</code> <code>Public</code> æ–‡ä»¶å¤¹åˆ†åˆ«æ”¾ç½®æš´éœ²å’Œä¸æš´éœ²çš„ä»£ç ã€‚<br>&emsp;&emsp;<code>.target.cs</code> åˆ™å¯ä»¥ç”¨æ¥å®šä¹‰è¾“å‡ºçš„ç±»å‹ï¼Œæœ‰ <code>Game</code> <code>Editor</code> <code>Client</code> <code>Server</code> å‡ ç§ç±»å‹ã€‚</p></blockquote><h3 id="ç”Ÿæˆå·¥ç¨‹æ–‡ä»¶"><a href="#ç”Ÿæˆå·¥ç¨‹æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆå·¥ç¨‹æ–‡ä»¶"></a>ç”Ÿæˆå·¥ç¨‹æ–‡ä»¶</h3><blockquote><p>&emsp;&emsp;å½“æˆ‘ä»¬å¯¹ <code>uproject</code> æ–‡ä»¶å³é”®ç”Ÿæˆ project çš„æ—¶å€™èƒŒåæ‰§è¡Œå°±æ˜¯ <code>UnrealBuildTool</code></p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/51c731db/a897c17f0e8725cfdc7eef597edbc464.png" alt="image"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:/EpicGames/git/UnrealEngine-4.27/Engine/Binaries/DotNET/UnrealBuildTool.exe  -projectfiles -project=&quot;D:/EpicGames/test_plugin/test_plugin.uproject&quot; -game -engine -progress -log=&quot;D:\EpicGames\test_plugin/Saved/Logs/UnrealVersionSelector-2022.07.12-15.50.08.log&quot;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;<code>UnrealBuildTool</code> ä¼šæ ¹æ® <code>.build.cs</code> å’Œ <code>.target.cs</code> é‡Œé¢é…ç½®æ¨¡å—è·¯å¾„ç”Ÿæˆ sln å·¥ç¨‹æ–‡ä»¶ã€‚</p></blockquote><h3 id="ç¼–è¯‘-C"><a href="#ç¼–è¯‘-C" class="headerlink" title="ç¼–è¯‘ C++"></a>ç¼–è¯‘ C++</h3><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/51c731db/00ffce7125f34d3a93cc992f7d154c3c.png" alt="image"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:/EpicGames/UE_4.27/Engine/Binaries/DotNET/UnrealBuildTool.exe Development Win64 -Project=&quot;D:/EpicGames/Unreal_Playground/Unreal_Playground.uproject&quot; -TargetType=Editor -Progress -NoEngineChanges -NoHotReloadFromIDE</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è¿™ä¸ª <code>Build.bat</code> èƒŒåè¿˜æ˜¯è°ƒç”¨ <code>UnrealBuildTool.exe</code> é€šè¿‡å®ƒæ¥ç¼–è¯‘ C++<br>&emsp;&emsp;ä¸Šé¢ç”Ÿæˆå·¥ç¨‹æ—¶å€™ <code>.build.cs</code> å’Œ <code>.target.cs</code> åªæ˜¯æ”¶é›†äº†è·¯å¾„ã€‚<br>&emsp;&emsp;ç°åœ¨ä¼šå†æ¬¡è¯»å–è¿™ä¸¤ä¸ªæ–‡ä»¶æ¥è·å–ä¸€äº›ç¼–è¯‘ç”¨çš„å±æ€§ã€‚<br>&emsp;&emsp;ç„¶æ ¹æ®é…ç½®è§£å†³å„ä¸ªæ¨¡å—çš„ä¾èµ–å…³ç³»ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;æœ€åä¼šè¿è¡Œ <code>UnrealHeaderTool</code> å°† UObject çš„ä¸€äº›ç‰¹æ€§æ³¨å…¥åˆ° UObject çš„ cpp æ–‡ä»¶å½“ä¸­ã€‚<br>&emsp;&emsp;è¿™ä¹Ÿè¯´æ˜äº†ä¸ºä»€ä¹ˆéœ€è¦å¼•å…¥ <code>.generated.h</code> çš„å¤´æ–‡ä»¶ã€‚<br>&emsp;&emsp;å‡†å¤‡å¥½äº†æ‰€æœ‰ä»£ç ä¹‹åå†è°ƒç”¨ç›¸åº”çš„ç¼–è¯‘å·¥å…·å»æ„å»º C++ã€‚</p></blockquote><h2 id="VScode-ç¼–è¯‘é…ç½®"><a href="#VScode-ç¼–è¯‘é…ç½®" class="headerlink" title="VScode ç¼–è¯‘é…ç½®"></a>VScode ç¼–è¯‘é…ç½®</h2><blockquote><p>&emsp;&emsp;äº†è§£äº† C++ ç¼–è¯‘å’Œ Unreal å…¨å®¶æ¡¶çš„ç¼–è¯‘é€»è¾‘ä¹‹åã€‚<br>&emsp;&emsp;æˆ‘ä»¬ç»ˆäºå¯ä»¥å›å½’åˆ°æœ¬ç¯‡æ–‡ç« çš„æ­£é¢˜ã€‚</p></blockquote><p><a href="http://jollymonsterstudio.com/2018/11/02/unreal-c-with-visual-studio-code/">http://jollymonsterstudio.com/2018/11/02/unreal-c-with-visual-studio-code/</a></p><blockquote><p>&emsp;&emsp;æŒ‰ç…§è¿™é‡Œæä¾›çš„æ–‡ç« å°±å¯ä»¥ç”¨ Unreal å®˜æ–¹çš„æ–¹å¼é…ç½®å¥½ <code>.vscode</code> ç›®å½•çš„ç¼–è¯‘é…ç½®ã€‚<br>&emsp;&emsp;åç»­åªè¦ <code>Ctrl + shift + B</code> å°±å¯ä»¥è§¦å‘ç¼–è¯‘ã€‚<br>&emsp;&emsp;ç¼–è¯‘èƒŒåçš„é€»è¾‘å°±åœ¨ä¸Šé¢è§£é‡Šäº†ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ç›¸åº”çš„æˆ‘ä¹Ÿå¯ä»¥ç”¨ python è„šæœ¬æ¥è§¦å‘ç¼–è¯‘ã€‚<br>&emsp;&emsp;sln å·¥ç¨‹å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä¸è¿‡ VS æœ‰ VA æŸ¥æ‰¾ä»£ç æ¯”è¾ƒå¿«ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      UnrealBuildTool å®ç°ç¼–è¯‘
    
    </summary>
    
      <category term="æ¸¸æˆå¼€å‘" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/"/>
    
      <category term="Unreal" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unreal/"/>
    
      <category term="C++" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unreal/C/"/>
    
    
      <category term="à ‡Cpp" scheme="https://blog.l0v0.com/tags/%E0%A0%87Cpp/"/>
    
      <category term="à ƒUnreal" scheme="https://blog.l0v0.com/tags/%E0%A0%83Unreal/"/>
    
  </entry>
  
  <entry>
    <title>Maya C++ mll hot reload ç ”ç©¶</title>
    <link href="https://blog.l0v0.com/posts/e6dc9087.html"/>
    <id>https://blog.l0v0.com/posts/e6dc9087.html</id>
    <published>2022-07-08T02:41:12.000Z</published>
    <updated>2022-07-30T07:31:56.102Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä½œè€…: [[ğŸ‘¨â€ğŸ’»sonictk]]</p><p><a href="https://sonictk.github.io/maya_hot_reload_example_public/">https://sonictk.github.io/maya_hot_reload_example_public/</a></p><blockquote><p>&emsp;&emsp;è¯¦ç»†çš„è¯´æ˜ &amp; æ•™ç¨‹åœ¨ä¸Šé¢çš„é“¾æ¥ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;Maya ç”¨å†™ C++ å¼€å‘ä¼šæ¯”è¾ƒç—›è‹¦ï¼Œä¸€æ–¹é¢æ˜¯ç¼–è¯‘é—®é¢˜æ€»æ˜¯è®©äººçƒ¦èºï¼Œå¦ä¸€æ–¹é¢åŠ è½½äº† mll ä¼šå¯¼è‡´å ç”¨ï¼Œæµ‹è¯•èµ·æ¥å¾ˆä¸æ–¹ä¾¿ã€‚<br>&emsp;&emsp;æ‰€ä»¥æˆ‘ä¹‹å‰æ¨å´‡ç”¨ Python OpenMaya åšåŸå‹è®¾è®¡å†è½¬ C++<br>&emsp;&emsp;å½“ç„¶ sonictk ä¹Ÿæåˆ° Fabric Engine å’Œ Maya Bifrost ä½¿ç”¨çš„æ—¶ LLVM IR çš„æ–¹æ¡ˆæ¥å®ç° JIT ç¼–è¯‘ã€‚<br>&emsp;&emsp;å…·ä½“å¯ä»¥å‚è€ƒå¦ä¸€ä¸ªé¡¹ç›® <a href="https://github.com/giordi91/babycpp">giordi91/babycpp</a></p></blockquote><h2 id="LLVM-çƒ­åŠ è½½"><a href="#LLVM-çƒ­åŠ è½½" class="headerlink" title="LLVM çƒ­åŠ è½½"></a>LLVM çƒ­åŠ è½½</h2><blockquote><p>&emsp;&emsp;<code>babycpp</code> åŸºäº LLVM çš„è§£å†³æ–¹æ¡ˆæˆ‘ç¼–è¯‘æ²¡æœ‰é€šè¿‡ï¼Œä»£ç æŠ¥ç±»å‹é”™è¯¯ï¼Œå› æ­¤ä¹Ÿæ²¡æœ‰æµ‹è¯•æˆåŠŸã€‚<br>&emsp;&emsp;ä¸è¿‡ä¹Ÿäº†è§£äº† LLVM æ˜¯æ€ä¹ˆå®ç°çƒ­æ›´æ–°çš„ï¼Œè¿è¡Œé€»è¾‘å’Œ Python æœ‰ç‚¹åƒï¼Œä½†æ˜¯ä»æœ¬è´¨ä¸Šä¸ä¸€æ ·ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ä¼ ç»Ÿçš„ç¼–è¯‘å™¨éœ€è¦æœ‰ å‰ç«¯ ä¼˜åŒ–å™¨ åç«¯ç»„æˆï¼Œä¸€èˆ¬å‰ç«¯æ˜¯è¯­è¨€ï¼Œé€šè¿‡ tokenize å’Œ AST ç­‰æ–¹æ¡ˆå°†è¯­è¨€è§£æç„¶åé€šè¿‡ä¼˜åŒ–å™¨ç”Ÿæˆåç«¯çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚<br>&emsp;&emsp;LLVM æ¨å‡ºäº† LLVM IR ä¸­é—´è¯­è¨€ï¼Œè¿™æ ·ä¸ç®¡å‰ç«¯ç”¨ä»€ä¹ˆè¯­è¨€å¼€å‘ï¼Œåªè¦æœ‰å¯¹åº”çš„è§£æå·¥å…·ç”Ÿæˆå‡º LLVM IR ï¼Œjå°±å¯ä»¥åˆ©ç”¨ LLVM IR çš„ä¼˜åŒ–ç”Ÿæˆ äºŒè¿›åˆ¶æœºå™¨è¯­è¨€é«˜æ•ˆè¿è¡Œã€‚<br>&emsp;&emsp;<code>babycpp</code> é¡¹ç›®å°±åŸºäº LLVM IR çš„æœºåˆ¶å¼€å‘äº†ä¸€ä¸ªè‡ªå·±çš„ç®€åŒ–ç‰ˆ C++ è¯­è¨€ï¼Œé€šè¿‡ LLVM IR JIT ç¼–è¯‘åŠ¨æ€æ”¹å˜è¿è¡Œé€»è¾‘ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;æˆ‘ç›®å‰ä¸ªäººç†è§£æ¥çœ‹ï¼ŒLLVM IR æ¨¡å¼å’Œ Python æ¨¡å¼è¿˜æ˜¯ä¸ä¸€æ ·çš„ï¼ŒPython æ˜¯è°ƒç”¨è‡ªå·±ç¼–è¯‘å¥½çš„æ¨¡å—æ¥è¿è¡Œçš„ï¼Œè€Œ LLVM IR æ˜¯ç›´æ¥è¿è¡Œæ—¶(JIT)ç”Ÿæˆæœºå™¨è¯­è¨€ï¼ŒJITæ¨¡å¼çš„è¿è¡Œæ•ˆç‡æœ‰æ—¶å€™æ¯” C++ çš„é™æ€ç¼–è¯‘è¿˜è¦é«˜ï¼Œå› ä¸º JIT å¯ä»¥æ ¹æ®è¿è¡Œè¿‡ç¨‹æ¨æ–­ç¨‹åºä¸‹ä¸€æ­¥çš„æ‰§è¡Œæ¥ä¼˜åŒ–éå¿…è¦çš„è¿è¡Œé€»è¾‘ï¼Œæ‰€ä»¥ LLVM IR çš„æ€§èƒ½è¦æ¯” Python å¥½å¾—å¤šã€‚å…¶å®æˆ‘åé¢äº†è§£äº†ä¸€ä¸‹ numba æé€Ÿ Python çš„åŸç†å°±æ˜¯åˆ©ç”¨ LLVM æ ‡å‡†å®ç°çš„ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ä¸è¿‡ä¹Ÿæ­£å¦‚ sonictk çš„æ–‡ç« æ‰€æåˆ°çš„ï¼Œè¿™ä¸ªæ–¹æ¡ˆåªèƒ½è°ƒç”¨æš´éœ²çš„ä¸œè¥¿ï¼Œæ— æ³•å¯¹å†…å­˜çš„ç»†èŠ‚è¿›è¡Œå¤„ç†ã€‚</p></blockquote><h2 id="åŸºäº-dll-åŠ è½½"><a href="#åŸºäº-dll-åŠ è½½" class="headerlink" title="åŸºäº dll åŠ è½½"></a>åŸºäº dll åŠ è½½</h2><p><a href="https://github.com/FXTD-ODYSSEY/CMakeMaya/tree/master/projects/sonictk/hot_reload">https://github.com/FXTD-ODYSSEY/CMakeMaya/tree/master/projects/sonictk/hot_reload</a></p><blockquote><p>&emsp;&emsp;å¦‚æœä½¿ç”¨ä½œè€…æä¾›çš„ github ä»“åº“çš„ä»£ç ç¼–è¯‘ä¼šæœ‰é—®é¢˜ï¼Œä½œè€…çš„ thirdparty ä»“åº“ç¼–è¯‘ä¸é€šè¿‡ã€‚<br>&emsp;&emsp;æ‰€ä»¥æˆ‘åé¢æ˜¯æ ¹æ®ä½œè€…æ–‡ç« çš„ä»£ç ç¨å¾®è°ƒæ•´ç»„è£…åˆ°ä¸€èµ·å®ç°çš„ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;è¯¦ç»†è®²è§£ä¹‹å‰ï¼Œæˆ‘å…ˆç”¨æœ€ç®€å•çš„è¯è¯´æ˜è¿™ä¸ª hotreload æ–¹æ¡ˆã€‚</p><ol><li>ç¼–è¯‘ä¸€ä¸ªå˜å½¢å™¨çš„ mll æ’ä»¶ å’Œ å¸¦é€»è¾‘çš„ dll æ–‡ä»¶</li><li>mll åŠ è½½ä¹‹åä¼šè°ƒç”¨ dll çš„functionè¿›è¡Œè®¡ç®—</li><li>ä¿®æ”¹é€»è¾‘ä¹‹åé‡æ–°ç¼–è¯‘ dll</li><li>mll ä¼šé‡æ–°å¥åœ¨æœ€æ–°çš„ dll å®ç°çƒ­æ›´æ–°ã€‚</li></ol></blockquote><h3 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" class="headerlink" title="å®ç°æ€è·¯"></a>å®ç°æ€è·¯</h3><p><a href="https://sonictk.github.io/maya_hot_reload_example_public/getting_started/">https://sonictk.github.io/maya_hot_reload_example_public/getting_started/</a></p><blockquote><p>&emsp;&emsp;è¿™ç¯‡æ–‡ç« éå¸¸å¥½ï¼Œä¸ä»…ä»…è®²è§£äº†ä½œè€… hot reload çš„æ€è·¯ï¼Œè¿˜é™„å¸¦äº† windows lib dll ä¹‹é—´çš„è¿è¡Œé€»è¾‘ç­‰çŸ¥è¯†ã€‚</p></blockquote><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/e6dc9087/90f7f29f4db2deb75e3cad0924734436.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;ä»£ç ç»“æ„ä¸Šéœ€è¦å°†æ’ä»¶åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯è°ƒç”¨ logic ç”Ÿæˆ dll<br>&emsp;&emsp;å¦ä¸€ä¸ªæ˜¯ deformer çš„ä»£ç ç”Ÿæˆ mll<br>&emsp;&emsp;å…·ä½“ç¼–è¯‘é…ç½®é€šè¿‡ cmake é…ç½®ä¸¤ä¸ª project å®ç°ã€‚</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ logic</span><br><span class="line">â”‚   â”œâ”€â”€ logic.cpp                  dll ä»£ç é€»è¾‘</span><br><span class="line">â”‚   â””â”€â”€ logic.h</span><br><span class="line">â”œâ”€â”€ maya_deformer</span><br><span class="line">â”‚   â”œâ”€â”€ deformer_platform.cpp      è°ƒç”¨ &lt;windows.h&gt; API åŠ è½½ dll</span><br><span class="line">â”‚   â”œâ”€â”€ deformer_platform.h</span><br><span class="line">â”‚   â”œâ”€â”€ deformer.cpp               Maya å˜å½¢å™¨ deform è°ƒç”¨ deform_platform æä¾›çš„æ–¹æ³•</span><br><span class="line">â”‚   â”œâ”€â”€ deformer.h</span><br><span class="line">â”‚   â”œâ”€â”€ plugin_main.cpp            Maya mll æ’ä»¶åˆå§‹åŒ–å‡½æ•°</span><br><span class="line">â”‚   â””â”€â”€ plugin_main.h</span><br><span class="line">â”œâ”€â”€ scripts</span><br><span class="line">â”‚   â””â”€â”€ test_deformer.py           æµ‹è¯•æ’ä»¶æ˜¯å¦ä¿®æ”¹</span><br><span class="line">â”œâ”€â”€ CMakeLists.txt</span><br><span class="line">â””â”€â”€ readme.md</span><br></pre></td></tr></table></figure><h3 id="dll-åŠ è½½æ–¹æ¡ˆ"><a href="#dll-åŠ è½½æ–¹æ¡ˆ" class="headerlink" title="dll åŠ è½½æ–¹æ¡ˆ"></a>dll åŠ è½½æ–¹æ¡ˆ</h3><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/e6dc9087/f1b64e13564f1397cbfbe5c238e4f86a.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;ä¸Šé¢ä¸‰ä¸ªå‡½æ•°è°ƒç”¨äº† window API æä¾›çš„ <code>LoadLibrary</code> <code>FreeLibrary</code> <code>GetProcAddress</code> åŠ è½½ dll </p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/e6dc9087/0d97569dbeef6f0dac0f5d7a4f960fe4.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;ç„¶åå°†åˆ†è£…åˆ° <code>loadDeformerLogicDLL</code> å’Œ <code>unloadDeformerLogicDLL</code> æ–¹æ³•é‡Œé¢ã€‚<br>&emsp;&emsp;deformer åœ¨è§¦å‘è®¡ç®—çš„æ—¶å€™è°ƒç”¨åŠ è½½ dllã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/e6dc9087/3b60f5c6dd778aca372e3c8525a0561f.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;è¿™æ ·æ¯æ¬¡è§¦å‘èŠ‚ç‚¹è¿ç®—çš„æ—¶å€™ä¼šè‡ªåŠ¨æŒ‰ç…§ dll çš„è·¯å¾„è¿›è¡ŒåŠ è½½ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;é—®é¢˜æ˜¯æ€ä¹ˆåœ¨ C++ åŠ¨æ€è·å–åˆ°å½“å‰ dll çš„è·¯å¾„å‘¢ï¼Ÿ</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/e6dc9087/38411b72f163aada48c813abf905b0d0.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;åœ¨æ’ä»¶åŠ è½½çš„æ—¶å€™é€šè¿‡ <code>plugin.loadPath</code> å¯ä»¥æ‹¿åˆ°å½“å‰ mll åŠ è½½çš„è·¯å¾„ã€‚<br>&emsp;&emsp;åªè¦åœ¨åŒä¸€ä¸ªè·¯å¾„æ‰¾ <code>logic.dll</code> è·¯å¾„å³å¯ã€‚</p></blockquote><h3 id="é‡åˆ°çš„å‘"><a href="#é‡åˆ°çš„å‘" class="headerlink" title="é‡åˆ°çš„å‘"></a>é‡åˆ°çš„å‘</h3><h4 id="ç¼–è¯‘-dll-å ç”¨é—®é¢˜"><a href="#ç¼–è¯‘-dll-å ç”¨é—®é¢˜" class="headerlink" title="ç¼–è¯‘ dll å ç”¨é—®é¢˜"></a>ç¼–è¯‘ dll å ç”¨é—®é¢˜</h4><blockquote><p>&emsp;&emsp;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œmll è¢« Maya åŠ è½½ä¼šäº§ç”Ÿå ç”¨ï¼Œmll å»åŠ è½½ dll ä¹Ÿä¼šé€ æˆå ç”¨ã€‚<br>&emsp;&emsp;åªæœ‰æ‰§è¡Œ <code>unloadDeformerLogicDLL</code> æ‰ä¼šè§£é™¤ dll çš„å ç”¨<br>&emsp;&emsp;ä½†æ˜¯å ç”¨ä¼šé€ æˆç¼–è¯‘å¤±è´¥ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;äºæ˜¯æˆ‘ç”¨ CMake çš„ API å°†æ—§çš„ <code>logic.dll</code> æ”¹åå« <code>logic_old.dll</code><br>&emsp;&emsp;windows ä¸‹è¢«å ç”¨çš„æ–‡ä»¶è¿˜æ˜¯å¯ä»¥æ”¹åçš„ã€‚<br>&emsp;&emsp;ç„¶åæ‰§è¡Œç¼–è¯‘ç”Ÿæˆæ–°çš„ <code>logic.dll</code><br>&emsp;&emsp;è¿™æ—¶å€™éœ€è¦æ‰‹åŠ¨è§¦å‘ Maya èŠ‚ç‚¹çš„æ›´æ–°ï¼Œè¿™æ ·å°±ä¼šæŒ‰ç…§åŸæ¥çš„è·¯å¾„åŠ è½½æ–°çš„ dllã€‚</p></blockquote><blockquote><p>&emsp;&emsp;CMake æ€ä¹ˆåˆ¤æ–­ dll æ˜¯å¦å ç”¨ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰æ‰¾åˆ°åˆé€‚æ–¹æ³•ï¼Œäºæ˜¯æˆ‘æƒ³åˆ°ç›´æ¥åˆ é™¤è¿™ä¸ª dll åœ¨åˆ¤æ–­ dll æ˜¯å¦å­˜åœ¨çš„æ–¹æ³•ã€‚</p></blockquote><h3 id="extern-é—®é¢˜"><a href="#extern-é—®é¢˜" class="headerlink" title="extern é—®é¢˜"></a>extern é—®é¢˜</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> MString kPluginLogicLibraryPath;</span><br><span class="line"><span class="type">static</span> DeformerLogicLibrary kLogicLibrary;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æºç è¿™ä¸¤ä¸ªå˜é‡ç”¨çš„æ˜¯ static é™æ€å˜é‡ã€‚<br>&emsp;&emsp;ä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆåœ¨å…¶ä»– cpp æ–‡ä»¶é‡Œé¢è°ƒåŠ¨å¾—åˆ°çš„æ˜¯ä¸åŒçš„ å†…å­˜ åœ°å€ã€‚</p></blockquote><p><a href="https://blog.csdn.net/sksukai/article/details/105612235">https://blog.csdn.net/sksukai/article/details/105612235</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> MString kPluginLogicLibraryPath;</span><br><span class="line"><span class="keyword">extern</span> DeformerLogicLibrary kLogicLibrary;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;åç»­æ˜¯æ”¹æˆ extern<br>&emsp;&emsp;ç„¶ååœ¨ <code>plugin_main.cpp</code> é‡Œé¢åˆå§‹åŒ–å˜é‡è§£å†³é—®é¢˜ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;è¿™ä¸ªæ–¹æ³•åˆ‡å®è§£å†³äº† èŠ‚ç‚¹çƒ­åŠ è½½çš„é—®é¢˜ï¼Œä¸éœ€è¦ <code>unloadPlugin</code> æ¸…ç©ºåœºæ™¯ä¹‹ç±»çš„æ“ä½œï¼Œæµ‹è¯•èµ·æ¥æ–¹ä¾¿äº†è®¸å¤šã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      C++ å˜å½¢å™¨çƒ­æ›´æ–°æ–¹æ¡ˆ
    
    </summary>
    
      <category term="CG" scheme="https://blog.l0v0.com/categories/CG/"/>
    
      <category term="Maya" scheme="https://blog.l0v0.com/categories/CG/Maya/"/>
    
      <category term="C++" scheme="https://blog.l0v0.com/categories/CG/Maya/C/"/>
    
    
      <category term="à €Maya" scheme="https://blog.l0v0.com/tags/%E0%A0%80Maya/"/>
    
      <category term="à ‡Cpp" scheme="https://blog.l0v0.com/tags/%E0%A0%87Cpp/"/>
    
  </entry>
  
  <entry>
    <title>Maya CMake æ„å»º C++ æ’ä»¶ç¼–è¯‘ç¯å¢ƒ</title>
    <link href="https://blog.l0v0.com/posts/5875a169.html"/>
    <id>https://blog.l0v0.com/posts/5875a169.html</id>
    <published>2022-07-01T06:21:00.000Z</published>
    <updated>2022-07-30T07:31:56.100Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;è¿‡å»æ„å»º Maya C++ æ’ä»¶æ˜¯æŒ‰ç…§ Autodesk å®˜æ–¹æä¾›çš„æµç¨‹ï¼Œåœ¨ VS é‡Œé¢é…ç½®é¡¹ç›®å·¥ç¨‹ã€‚ <a href="https://blog.csdn.net/hp_cpp/article/details/80265856">å‚è€ƒé“¾æ¥</a><br>&emsp;&emsp;é€šè¿‡é…ç½® devkit çš„ pluginwizard æ¥æ„å»ºé¡¹ç›®ã€‚<br>&emsp;&emsp;ä½†æ˜¯ä½¿ç”¨ VS é…ç½® Maya ä¾èµ–çš„å¤´æ–‡ä»¶å’Œ lib å…¶å®æŒºä¸æ–¹ä¾¿çš„ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5875a169/dedb5d9005f1dff970148bf91c26311a.jpeg" alt="image"></p><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5875a169/cfafe1377b6d4e6bb1382f53c76c91da.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;ä¾èµ–å’Œä¿®æ”¹éƒ½åœ¨ä¸åŒé€‰é¡¹é‡Œé¢ï¼Œé…ç½®èµ·æ¥è¦æåŠå¤©ã€‚<br>&emsp;&emsp;è€Œä¸”è¿™ä¸ªå·¥ç¨‹é…ç½®åªèƒ½å…¼å®¹ Windows ï¼Œå¦‚æœæˆ‘ä»¬è¦åœ¨ Linux ç¯å¢ƒä¸‹ç¼–è¯‘ï¼Œæ•´ä¸ªæµç¨‹åˆå®Œå…¨ä¸ä¸€æ ·äº†ã€‚<br>&emsp;&emsp;å…¶å®è§£å†³è¿™ç§é—®é¢˜ï¼Œæœ‰ä¸“é—¨çš„å·¥å…·å»åšã€‚<br>&emsp;&emsp;è¿™å°±æ˜¯ <a href="https://cmake.org/">CMake</a><br>&emsp;&emsp;é€šè¿‡ cmake é…ç½®å¯ä»¥ç”Ÿæˆä¸åŒå¹³å°çš„å·¥ç¨‹æ–‡ä»¶ï¼Œä¸éœ€è¦æ‰“å¼€ IDE å°±å¯ä»¥è°ƒç”¨ compiler ç¼–è¯‘ç»“æœã€‚</p></blockquote><p><a href="https://github.com/volodinroman/CMakeMaya">https://github.com/volodinroman/CMakeMaya</a></p><blockquote><p>&emsp;&emsp;è¿™ä¸ªä»“åº“æ˜¯åˆ«äººé…ç½®å¥½çš„åŸºäº CMake æ„å»º Maya æ’ä»¶çš„ä»“åº“ã€‚</p></blockquote><h2 id="Doit-è‡ªåŠ¨æ„å»ºç¯å¢ƒ"><a href="#Doit-è‡ªåŠ¨æ„å»ºç¯å¢ƒ" class="headerlink" title="Doit è‡ªåŠ¨æ„å»ºç¯å¢ƒ"></a>Doit è‡ªåŠ¨æ„å»ºç¯å¢ƒ</h2><blockquote><p>&emsp;&emsp;ä½†æ˜¯æ„å»ºç¼–è¯‘ç¯å¢ƒè¿˜æ˜¯æŒºéº»çƒ¦çš„ï¼Œä¸€æ–¹é¢éœ€è¦ä¸‹è½½ VS å’Œ CMake<br>&emsp;&emsp;å¦å¤–è¿˜è¦é…ç½®å¥½ Maya æä¾›çš„ SDK</p></blockquote><p><a href="https://github.com/FXTD-ODYSSEY/CMakeMaya">https://github.com/FXTD-ODYSSEY/CMakeMaya</a></p><blockquote><p>&emsp;&emsp;æˆ‘è¿™ä¸ªä»“åº“æä¾›äº†æ‡’äººåŒ…ç¯å¢ƒï¼Œåªéœ€è¦é…ç½®æœ‰ Python ç¯å¢ƒå’Œpoetry åº“ã€‚<br>&emsp;&emsp;åœ¨ä»“åº“çš„ç›®å½•ï¼Œæ‰§è¡Œ <code>poetry install</code> å’Œ <code>poetry shell</code> å°±å¯ä»¥è¿›å…¥å¼€å‘è™šæ‹Ÿç¯å¢ƒã€‚(æ³¨: éœ€è¦ç®¡ç†å‘˜æƒé™)<br>&emsp;&emsp;poetry ä¼šè‡ªåŠ¨å®‰è£…é…ç½®å¥½çš„ä¾èµ–ï¼ŒåŒ…æ‹¬ <code>doit æ¡†æ¶</code><br>&emsp;&emsp;æ‰§è¡Œ <code>doit init</code> ä¼šè°ƒç”¨ <code>choco</code> å®‰è£… VS çš„ä¾èµ–ï¼Œä»¥åŠ CMake<br>&emsp;&emsp;è¿™ä¸ªè¿‡ç¨‹éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;æ‰§è¡Œå®Œä¹‹å VS Build Tool å°±æ·»åŠ åˆ°ç³»ç»Ÿäº†ã€‚<br>&emsp;&emsp;ä½†è¿˜æ˜¯æ‰¾ä¸åˆ° C++ compiler ï¼Œéœ€è¦æ‰‹åŠ¨æ‰“å¼€ installer ä¸‹è½½ C++ CMake å¼€å‘åŒ…ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5875a169/911e11826073a3058551680de9aba826.png" alt="image"></p><blockquote><p>&emsp;&emsp;ä½¿ç”¨ <code>doit SDK -v 2020</code> ä¼šä¸‹è½½ Maya å®˜æ–¹çš„ devkit åˆ°ä»“åº“çš„ SDK ç›®å½•ã€‚<br>&emsp;&emsp;å‡†å¤‡å¥½ç¯å¢ƒä¹‹åï¼Œè¿˜éœ€è¦å®‰è£…å¥½ maya 2020<br>&emsp;&emsp;å¦‚æ­¤å°±æ˜¯å®Œå¤‡çš„ç¼–è¯‘ç¯å¢ƒï¼Œåªéœ€è¦ç”¨ <code>doit c</code> æ‰§è¡Œ cmake ç¼–è¯‘å‘½ä»¤æ¥ç¼–è¯‘ C++ æ’ä»¶ã€‚</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">doit c -p weightDriver -v 2020</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä½¿ç”¨ -p å¯ä»¥æŒ‡å®šç¼–è¯‘çš„é¡¹ç›®ï¼Œ-v å¯ä»¥æŒ‡å®šç¼–è¯‘çš„ Maya ç‰ˆæœ¬ï¼Œé»˜è®¤ä¸æŒ‡å®šä¼šç¼–è¯‘å…¨éƒ¨é¡¹ç›®çš„ 2020 ç‰ˆæœ¬<br>&emsp;&emsp;-p æ”¯æŒå®Œæ•´çš„projects ç›¸å¯¹è·¯å¾„æˆ–è€…æœ€ç»ˆç›®å½•æŒ‡å®š</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">doit c -p IngoClemens/weightDriver</span><br><span class="line">doit c -p weightDriver</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ‰§è¡Œ doit çš„æ—¶å€™ä¼šç”¨ python è¯†åˆ«å°†æœ«ç«¯ç›®å½•å˜æˆå®Œæ•´çš„ç›¸å¯¹ç›®å½•</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5875a169/12a58e2b26c25afaa90321434254ccb4.png" alt="image"></p><hr><blockquote><p>&emsp;&emsp;ä¸‹é¢æ˜¯å®Œæ•´æ‰§è¡Œç¼–è¯‘çš„æµç¨‹</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5875a169/105b5139b33ef1c83e10c9a0e171243e.png" alt="image"></p><blockquote><p>&emsp;&emsp;doit èƒŒåæ‰§è¡Œçš„æ˜¯ æ‹¼æ¥è¾“å…¥ æ‰§è¡Œ cmake å‘½ä»¤</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake -Wno-dev -G &quot;Visual Studio 16 2019&quot; -DMAYA_VERSION=&#123;version&#125; -DMAYA_PROJECT=&#123;project&#125;. -B build</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;DMAYA_VERSION æŒ‡å®š Maya ç‰ˆæœ¬å·<br>&emsp;&emsp;DMAYA_PROJECT æŒ‡å®š Maya é¡¹ç›®ï¼Œå¤šä¸ªé¡¹ç›®å¯ä»¥ç”¨ ; åˆ†å‰²ã€‚<br>&emsp;&emsp;è¿™ä¸ªå‘½ä»¤ä¼šè¯»å–æ ¹ç›®å½•çš„ CMakeLists.txt æ ¹æ® VS2019 çš„é…ç½®ç”Ÿæˆ sln æ–‡ä»¶åˆ° Build ç›®å½•ã€‚<br>&emsp;&emsp;windows ä¸‹å¦‚æœéœ€è¦ Debug ä¹Ÿå¯ä»¥ç”¨ VS æ‰“å¼€ sln å»é…ç½® Debug å·¥å…·ã€‚</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake --build build --config Release</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;åé¢ä¼šæ‰§è¡Œ build å‘½ä»¤æ ¹æ®é…ç½®ç¼–è¯‘è¾“å‡ºåˆ°æŒ‡å®šç›®å½•ã€‚</p></blockquote><h3 id="ä¸­æ–‡ä¹±ç å‘"><a href="#ä¸­æ–‡ä¹±ç å‘" class="headerlink" title="ä¸­æ–‡ä¹±ç å‘"></a>ä¸­æ–‡ä¹±ç å‘</h3><p>[[ğŸ’¡Vscode terminal ä¸­æ–‡ä¹±ç ]]</p><blockquote><p>&emsp;&emsp;Window Terminal é»˜è®¤ä¸æ”¯æŒ MSBuild çš„å­—ç¬¦è¾“å‡ºã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5875a169/07a6a6d0ef789b42617075a90cb84b8f.png" alt="image"></p><blockquote><p>&emsp;&emsp;éœ€è¦åœ¨ terminal ä¸Šæ‰§è¡Œ <code>chcp 65001</code> åˆ‡æ¢å­—ç¬¦é›†ã€‚</p></blockquote><h2 id="æ·»åŠ æ–°å·¥ç¨‹"><a href="#æ·»åŠ æ–°å·¥ç¨‹" class="headerlink" title="æ·»åŠ æ–°å·¥ç¨‹"></a>æ·»åŠ æ–°å·¥ç¨‹</h2><blockquote><p>&emsp;&emsp;å¦‚æœéœ€è¦æ·»åŠ è‡ªå·±çš„ mll éœ€è¦è‡ªå·±å¡«å…… CMakeLists.txt é…ç½®<br>&emsp;&emsp;ä½¿ç”¨ <code>doit new</code> å¯ä»¥å¿«é€Ÿç”Ÿæˆ æ’ä»¶ ç¼–è¯‘æ¨¡æ¿</p></blockquote><h3 id="cmake-é…ç½®è¯´æ˜"><a href="#cmake-é…ç½®è¯´æ˜" class="headerlink" title="cmake é…ç½®è¯´æ˜"></a>cmake é…ç½®è¯´æ˜</h3><p><code>projects</code> ä¸‹æ¯ä¸ªé¡¹ç›®ç›®å½•éƒ½æœ‰å¯¹åº”çš„  <code>CMakeLists.txt</code> </p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®è¾“å‡ºç›®å½•</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_RUNTIME_OUTPUT_DIRECTORY_RELEASE <span class="variable">$&#123;CMAKE_RUNTIME_OUTPUT_DIRECTORY_RELEASE&#125;</span>/maya<span class="variable">$&#123;MAYA_VERSION&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®é¡¹ç›®åç§° (ä¸€èˆ¬ç¼–è¯‘çš„æ–‡ä»¶åå–é¡¹ç›®å)</span></span><br><span class="line"><span class="keyword">project</span>(&#123;&#123;cookiecutter.project_name&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ ç¼–è¯‘çš„æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">file</span>(GLOB SRCS <span class="string">&quot;*.cpp&quot;</span> <span class="string">&quot;*.h&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ å¤´æ–‡ä»¶ä¾èµ–</span></span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;MAYA_INCLUDE_DIR&#125;</span>) </span><br><span class="line"><span class="comment"># æ·»åŠ  lib åº“ç›®å½•</span></span><br><span class="line"><span class="keyword">link_directories</span>(<span class="variable">$&#123;MAYA_LIBRARY_DIR&#125;</span>) </span><br><span class="line"><span class="comment"># é“¾æ¥æºç </span></span><br><span class="line"><span class="keyword">add_library</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> SHARED <span class="variable">$&#123;SRCS&#125;</span>) </span><br><span class="line"><span class="comment"># é“¾æ¥ lib</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> <span class="variable">$&#123;MAYA_LIBRARIES&#125;</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># mll è¾“å‡ºé…ç½®</span></span><br><span class="line">MAYA_PLUGIN(<span class="variable">$&#123;PROJECT_NAME&#125;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¤§éƒ¨åˆ†çš„ç»“æ„å¦‚ä¸Šå›¾ï¼Œé»˜è®¤æ¨¡æ¿å¦‚ä¸Šã€‚<br>&emsp;&emsp;æˆ‘åŠ ä¸Šäº†æ³¨é‡Šè¯´æ˜ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;<code>MAYA_PLUGIN</code>æ–¹æ³•å°† mll çš„ <code>initializePlugin</code> <code>uninitializePlugin</code> ä¸¤ä¸ªæ–¹æ³•æš´éœ²å‡ºæ¥(Maya åŠ è½½ç”¨)ï¼Œå¹¶ä¸”å°† dll çš„åç¼€æ”¹ä¸º mllã€‚</p></blockquote><h2 id="ç”¨-CMake-ç¼–è¯‘-Devkit-çš„æ¡ˆä¾‹ä»£ç "><a href="#ç”¨-CMake-ç¼–è¯‘-Devkit-çš„æ¡ˆä¾‹ä»£ç " class="headerlink" title="ç”¨ CMake ç¼–è¯‘ Devkit çš„æ¡ˆä¾‹ä»£ç "></a>ç”¨ CMake ç¼–è¯‘ Devkit çš„æ¡ˆä¾‹ä»£ç </h2><blockquote><p>&emsp;&emsp;ä¸Šé¢æåˆ°çš„ CMake æ˜¯åŸºäº <a href="https://github.com/volodinroman/CMakeMaya">https://github.com/volodinroman/CMakeMaya</a> çš„æ–¹æ¡ˆæ­å»ºçš„ã€‚<br>&emsp;&emsp;cmake æ–‡ä»¶åŸºæœ¬ä¸Šæ˜¯è‡ªå·±ç¼–å†™ï¼Œå¯ä»¥æ§åˆ¶æ¯ä¸€å¤„çš„ç»†èŠ‚ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;å…¶å® Maya çš„ Devkit ä¹Ÿæä¾›äº†ä¸€å¥— CMake çš„æ–¹æ¡ˆã€‚<br>&emsp;&emsp;æ¯ä¸ªæ’ä»¶éƒ½ä¿ç•™äº† CMakeLists.txt ç”¨äºç¼–è¯‘ã€‚<br>&emsp;&emsp;å¦‚ä½•é¡ºåˆ©ç¼–è¯‘ Maya C++ çš„æ¡ˆä¾‹æ’ä»¶æ˜¯ä¸€ä¸ªå¥½é—®é¢˜ã€‚<br>&emsp;&emsp;æˆ‘è¿‡å»çœ‹ Maya çš„æ–‡æ¡£ä½†æ˜¯å› ä¸ºä¸ä¼šæŠ˜è…¾è¿™ä¸ªç¼–è¯‘(ç¼–è¯‘å‡ºé”™ä¸çŸ¥é“æ€ä¹ˆè§£å†³) ï¼Œå¯¼è‡´æ— æ³•æ·±å…¥å­¦ä¹  C++ æ’ä»¶ã€‚<br>&emsp;&emsp;åªèƒ½æ‹¿ Devkit æä¾›çš„ Python æ–‡ä»¶è¿›è¡Œå­¦ä¹ ã€‚<br>&emsp;&emsp;é€šè¿‡ä¸Šé¢çš„æŠ˜è…¾ä¸å­¦ä¹ ï¼Œè‡ªå·±ä¹Ÿç®—æ˜¯å¯¹ CMake æœ‰äº†åŸºç¡€çš„å…¥é—¨ï¼Œç»ˆäºæœ‰èƒ½åŠ›æå®šè¿™ä¸ªé—®é¢˜äº†~</p></blockquote><p><a href="https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__developer_Maya_SDK_MERGED_A_First_Plugin_HelloWorld_html">https://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=__developer_Maya_SDK_MERGED_A_First_Plugin_HelloWorld_html</a></p><blockquote><p>&emsp;&emsp;ä¸Šé¢çš„é“¾æ¥æ˜¯å®˜æ–¹æ–‡æ¡£æä¾›çš„ä¸€ä¸ª Maya æ’ä»¶æœ€ç®€æ¡ˆä¾‹ã€‚<br>&emsp;&emsp;ç›¸åº”çš„ä»£ç åœ¨ <code>devkit\plug-ins\helloCmd</code> æ‰¾åˆ°</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5875a169/307f99197358b87b94dc4bb1629731b8.jpeg" alt="image"></p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">2.8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># include the project setting file</span></span><br><span class="line"><span class="keyword">include</span>($ENV&#123;DEVKIT_LOCATION&#125;/cmake/pluginEntry.cmake)</span><br><span class="line"></span><br><span class="line"><span class="comment"># specify project name</span></span><br><span class="line"><span class="keyword">set</span>(PROJECT_NAME helloCmd)</span><br><span class="line"></span><br><span class="line"><span class="comment"># set SOURCE_FILES</span></span><br><span class="line"><span class="keyword">set</span>(SOURCE_FILES</span><br><span class="line">   helloCmd.cpp</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># set linking libraries</span></span><br><span class="line"><span class="keyword">set</span>(LIBRARIES</span><br><span class="line">     OpenMaya</span><br><span class="line">     Foundation</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build plugin</span></span><br><span class="line">build_plugin()</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ„å»ºæ’ä»¶çš„ cmake ä»£ç å¦‚ä¸Šï¼Œæ ¸å¿ƒéƒ¨åˆ†æ˜¯ <code>$ENV&#123;DEVKIT_LOCATION&#125;</code> é€šè¿‡ç¯å¢ƒå˜é‡è·å– Devkit çš„è·¯å¾„<br>&emsp;&emsp;æ‰€ä»¥æ‰§è¡Œ CMake ä¹‹å‰å¯ä»¥é…ç½®ä¸€ä¸‹ç¯å¢ƒå˜é‡ã€‚</p></blockquote><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> DEVKIT_LOCATION=F:\maya_devkit\devkitBase</span><br><span class="line">cmake -G &quot;Visual Studio <span class="number">16</span> <span class="number">2019</span>&quot; . -B build</span><br><span class="line">cmake --build build --config Release</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5875a169/237ae7978ede1e82be485148ff36e526.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;å¦‚æ­¤æ“ä½œï¼Œå°±å¯ä»¥ç¼–è¯‘å‡º mll äº†ã€‚(å‰ææ˜¯è¦é…ç½®å¥½ VS çš„ç¯å¢ƒ)</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;è¿™ä¸ªç¯å¢ƒæˆ‘é€šè¿‡ è™šæ‹Ÿæœº æµ‹è¯•è¿‡ï¼Œåœ¨ win10 ç¯å¢ƒæ˜¯æ²¡æœ‰é—®é¢˜ã€‚<br>&emsp;&emsp;é€šè¿‡ cmake é…ç½®å¯ä»¥å¿«é€Ÿæ„å»ºå¥½ C++ ç¼–è¯‘ç¯å¢ƒï¼Œæ¯”èµ·ä»¥å‰æŠ˜è…¾ VS æ¥æ–¹ä¾¿å¤ªå¤šäº†ã€‚<br>&emsp;&emsp;åˆ©ç”¨ <code>choco</code> æ¥å®‰è£…ä¾èµ–ä¹Ÿè§£å†³äº†å„ç§ç¼ºåº“å¯¼è‡´èµ·ä¸æ¥çš„é—®é¢˜ã€‚<br>&emsp;&emsp;é€šè¿‡è¿™ä¸ªäººæ‡’äººåŒ…å¯ä»¥æå¤§é™ä½ Maya å†™ C++ çš„éš¾åº¦ã€‚</p></blockquote><!-- TODOå¤šè¿›ç¨‹æ‰§è¡Œ chocoè‡ªåŠ¨æ·»åŠ ç®¡ç†å‘˜æƒé™ --><h3 id="2022-7-8-è¡¥å……è¯´æ˜"><a href="#2022-7-8-è¡¥å……è¯´æ˜" class="headerlink" title="2022-7-8 è¡¥å……è¯´æ˜"></a>2022-7-8 è¡¥å……è¯´æ˜</h3><blockquote><p>&emsp;&emsp;æœ€è¿‘åˆ©ç”¨ submodule æ·»åŠ äº†å¾ˆå¤šç¤¾åŒºçš„ C++ åº“ã€‚<br>&emsp;&emsp;clone ä»“åº“ä¹‹åéœ€è¦ç”¨æ‰§è¡Œ <code>git submodule update --init</code> æ¥æ‹‰å– submodule</p></blockquote><blockquote><p>&emsp;&emsp;ä¸€äº›æ³¨æ„äº‹é¡¹è¯·å‚é˜… readme æ–‡æ¡£</p></blockquote>]]></content>
    
    <summary type="html">
    
      CMake ç¼–è¯‘
    
    </summary>
    
      <category term="CG" scheme="https://blog.l0v0.com/categories/CG/"/>
    
      <category term="Maya" scheme="https://blog.l0v0.com/categories/CG/Maya/"/>
    
      <category term="C++" scheme="https://blog.l0v0.com/categories/CG/Maya/C/"/>
    
    
      <category term="à €Maya" scheme="https://blog.l0v0.com/tags/%E0%A0%80Maya/"/>
    
      <category term="à ‡Cpp" scheme="https://blog.l0v0.com/tags/%E0%A0%87Cpp/"/>
    
  </entry>
  
  <entry>
    <title>Unreal Python å¯¼å‡º MetaHuman æ§åˆ¶å™¨å…³é”®å¸§</title>
    <link href="https://blog.l0v0.com/posts/1b238b83.html"/>
    <id>https://blog.l0v0.com/posts/1b238b83.html</id>
    <published>2022-06-24T08:57:06.000Z</published>
    <updated>2022-07-30T07:31:57.220Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;MetaHuman å·²ç»åœ¨æ•°å­—äººé¢†åŸŸé‡Œé¢ç›¸å½“æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆã€‚<br>&emsp;&emsp;å¹¶ä¸” UE å®˜æ–¹å¼€å‘äº†æºç å·¥ç¨‹ã€‚<br>&emsp;&emsp;ç›®å‰ github ä¸Šæœ‰ä¸å°‘äººæ¼”ç¤ºè‡ªå·±å¥—ç”¨ MetaHuman åŠ¨ç”»çš„æ•ˆæœã€‚<br>&emsp;&emsp;äºæ˜¯æˆ‘è‡ªå·±ä¹Ÿå°è¯•ç€æƒ³å°†å®ƒ UE é‡Œé¢çš„æ§åˆ¶å™¨åŠ¨ç”»å¯¼å‡ºæ¥ã€‚<br>&emsp;&emsp;ç„¶è€Œå´å‘ç°è¡Œä¸é€šã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1b238b83/01.png" alt="image.png"></p><blockquote><p>&emsp;&emsp;å®ƒçš„æ§åˆ¶å™¨å…³é”®å¸§æ˜¯åœ¨ sequencer é‡Œé¢ã€‚<br>&emsp;&emsp;æœ€åˆæ˜¯å°è¯•å°† sequencer çš„èµ„æºå…¨éƒ¨å¯¼å‡ºæˆ FBXã€‚<br>&emsp;&emsp;ç„¶è€Œæ§åˆ¶å™¨çš„å…³é”®å¸§å¹¶æ²¡æœ‰è·Ÿéšå¯¼å…¥åˆ° FBX å½“ä¸­ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;äºæ˜¯æˆ‘æƒ³åˆ°å¯ä»¥ç”¨ unreal python è¯»å–å…³é”®å¸§æ•°æ®å¯¼å‡º json<br>&emsp;&emsp; Maya å†è¯»å–æ•°æ®è®¾ç½®å…³é”®å¸§åˆ°æ§åˆ¶å™¨ä¸Šã€‚</p></blockquote><h2 id="unreal-python-å¯¼å‡ºå…³é”®å¸§"><a href="#unreal-python-å¯¼å‡ºå…³é”®å¸§" class="headerlink" title="unreal python å¯¼å‡ºå…³é”®å¸§"></a>unreal python å¯¼å‡ºå…³é”®å¸§</h2><blockquote><p>&emsp;&emsp;æœ‰æ€è·¯ä¹‹åå°±å¥½åŠã€‚<br>&emsp;&emsp;ä¹‹å‰æˆ‘ä¹Ÿå†™è¿‡è„šæœ¬æ¥è·å– sequencer å…³é”®å¸§çš„ã€‚<br>&emsp;&emsp;éœ€è¦æ³¨æ„å¦‚æœæƒ³è¦ä½¿ç”¨ unreal python çš„ API éœ€è¦å¼€å¯ç›¸åº”çš„ C++ æ’ä»¶ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1b238b83/02.png" alt="image.png"></p><blockquote><p>&emsp;&emsp;å¦åˆ™ python ä¼šè·å–ä¸åˆ°ç›¸åº”çš„ API æŠ¥é”™ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Import built-in modules</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># Import local modules</span></span><br><span class="line"><span class="keyword">import</span> unreal</span><br><span class="line"></span><br><span class="line">DIR = os.path.dirname(os.path.abspath(__file__))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">unreal_progress</span>(<span class="params">tasks, label=<span class="string">&quot;è¿›åº¦&quot;</span>, total=<span class="literal">None</span></span>):</span><br><span class="line">    total = total <span class="keyword">if</span> total <span class="keyword">else</span> <span class="built_in">len</span>(tasks)</span><br><span class="line">    <span class="keyword">with</span> unreal.ScopedSlowTask(total, label) <span class="keyword">as</span> task:</span><br><span class="line">        task.make_dialog(<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">for</span> i, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(tasks):</span><br><span class="line">            <span class="keyword">if</span> task.should_cancel():</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            task.enter_progress_frame(<span class="number">1</span>, <span class="string">&quot;%s %s/%s&quot;</span> % (label, i, total))</span><br><span class="line">            <span class="keyword">yield</span> item</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># <span class="doctag">NOTE:</span> è¯»å– sequence</span></span><br><span class="line">    sequence = unreal.load_asset(<span class="string">&#x27;/Game/Sequencer/MetaHumanSample_Sequence.MetaHumanSample_Sequence&#x27;</span>)</span><br><span class="line">    <span class="comment"># <span class="doctag">NOTE:</span> æ”¶é›† sequence é‡Œé¢æ‰€æœ‰çš„ binding</span></span><br><span class="line">    binding_dict = defaultdict(<span class="built_in">list</span>)</span><br><span class="line">    <span class="keyword">for</span> binding <span class="keyword">in</span> sequence.get_bindings():</span><br><span class="line">        binding_dict[binding.get_name()].append(binding)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># <span class="doctag">NOTE:</span> éå†å‘½åä¸º Face çš„ binding</span></span><br><span class="line">    <span class="keyword">for</span> binding <span class="keyword">in</span> unreal_progress(binding_dict.get(<span class="string">&quot;Face&quot;</span>, []), <span class="string">&quot;å¯¼å‡º Face æ•°æ®&quot;</span>):</span><br><span class="line">        <span class="comment"># <span class="doctag">NOTE:</span> è·å–å…³é”®å¸§ channel æ•°æ®</span></span><br><span class="line">        keys_dict = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> track <span class="keyword">in</span> binding.get_tracks():</span><br><span class="line">            <span class="keyword">for</span> section <span class="keyword">in</span> track.get_sections():</span><br><span class="line">                <span class="keyword">for</span> channel <span class="keyword">in</span> unreal_progress(section.get_channels(), <span class="string">&quot;å¯¼å‡ºå…³é”®å¸§&quot;</span>):</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">not</span> channel.get_num_keys():</span><br><span class="line">                        <span class="keyword">continue</span></span><br><span class="line">                    keys = []</span><br><span class="line">                    <span class="keyword">for</span> key <span class="keyword">in</span> channel.get_keys():</span><br><span class="line">                        frame_time = key.get_time()</span><br><span class="line">                        frame = frame_time.frame_number.value + frame_time.sub_frame</span><br><span class="line">                        keys.append(&#123;<span class="string">&quot;frame&quot;</span>: frame, <span class="string">&quot;value&quot;</span>: key.get_value()&#125;)</span><br><span class="line"></span><br><span class="line">                    keys_dict[channel.get_name()] = keys</span><br><span class="line"></span><br><span class="line">        <span class="comment"># <span class="doctag">NOTE:</span> å¯¼å‡º json</span></span><br><span class="line">        name = binding.get_parent().get_name()</span><br><span class="line">        export_path = os.path.join(DIR, <span class="string">&quot;&#123;0&#125;.json&quot;</span>.<span class="built_in">format</span>(name))</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(export_path, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> wf:</span><br><span class="line">            json.dump(keys_dict, wf, indent=<span class="number">4</span>)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¸Šé¢çš„è„šæœ¬ä¼šå®šä½ MetaHuman çš„ sequence èµ„æºï¼Œç„¶åå¯¼å‡ºå…³é”®å¸§çš„ä¿¡æ¯ä¸º json</p></blockquote><video src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1b238b83/meta_export.mp4" autoplay="autoplay" loop="loop" style="width: 100%; height:100%;"></video><blockquote><p>&emsp;&emsp;å¯¼å‡ºä¼šåœ¨è„šæœ¬ç›®å½•è¾“å‡ºä¸¤ä¸ª json æ–‡ä»¶ã€‚<br>&emsp;&emsp;Maya å¯ä»¥è§£æè¿™ä¸ªè¿™ä¸¤ä¸ª json å°†å…³é”®å¸§è®¾ç½®åˆ° æ§åˆ¶å™¨ä¸Šã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Import built-in modules</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> traceback</span><br><span class="line"></span><br><span class="line"><span class="comment"># Import third-party modules</span></span><br><span class="line"><span class="keyword">import</span> pymel.core <span class="keyword">as</span> pm</span><br><span class="line"></span><br><span class="line">DIR = os.path.dirname(os.path.abspath(__file__))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">progress</span>(<span class="params">seq, status=<span class="string">&quot;&quot;</span>, title=<span class="string">&quot;&quot;</span></span>):</span><br><span class="line">    pm.progressWindow(status=status, title=title, progress=<span class="number">0.0</span>, isInterruptable=<span class="literal">True</span>)</span><br><span class="line">    total = <span class="built_in">len</span>(seq)</span><br><span class="line">    <span class="keyword">for</span> i, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(seq):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">if</span> pm.progressWindow(query=<span class="literal">True</span>, isCancelled=<span class="literal">True</span>):</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            pm.progressWindow(e=<span class="literal">True</span>, progress=<span class="built_in">float</span>(i) / total * <span class="number">100</span>)</span><br><span class="line">            <span class="keyword">yield</span> item  <span class="comment"># with body executes here</span></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            traceback.print_exc()</span><br><span class="line">            pm.progressWindow(ep=<span class="number">1</span>)</span><br><span class="line">    pm.progressWindow(ep=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line"></span><br><span class="line">    <span class="comment"># <span class="doctag">NOTE:</span> è¯»å–æ•°æ®</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(os.path.join(DIR, <span class="string">&quot;BP_metahuman_001.json&quot;</span>), <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> rf:</span><br><span class="line">        data = json.load(rf)</span><br><span class="line"></span><br><span class="line">    attr_map = &#123;<span class="string">&quot;location&quot;</span>: <span class="string">&quot;t&quot;</span>, <span class="string">&quot;rotation&quot;</span>: <span class="string">&quot;r&quot;</span>&#125;</span><br><span class="line">    status = <span class="string">&quot;Import Keyframe to metahuman controller&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># <span class="doctag">NOTE:</span> undo æ”¯æŒ</span></span><br><span class="line">    pm.undoInfo(ock=<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> channel, frame_list <span class="keyword">in</span> progress(data.items(), status=status):</span><br><span class="line">        <span class="comment"># <span class="doctag">NOTE:</span> è§£æ channel_name</span></span><br><span class="line">        has_attr = channel.count(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> has_attr:</span><br><span class="line">            <span class="comment"># <span class="doctag">NOTE:</span> å¤„ç† `CTRL_C_eye_parallelLook_4311` æ ¼å¼</span></span><br><span class="line">            ctrl_name = channel.rsplit(<span class="string">&quot;_&quot;</span>, <span class="number">1</span>)[<span class="number">0</span>]</span><br><span class="line">            attr = <span class="string">&quot;ty&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            parts = <span class="built_in">iter</span>(channel.split(<span class="string">&quot;.&quot;</span>))</span><br><span class="line">            ctrl_name = <span class="built_in">next</span>(parts, <span class="string">&quot;&quot;</span>)</span><br><span class="line">            param = <span class="built_in">next</span>(parts, <span class="string">&quot;&quot;</span>)</span><br><span class="line">            axis = <span class="built_in">next</span>(parts, <span class="string">&quot;&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> axis:</span><br><span class="line">                <span class="comment"># <span class="doctag">NOTE:</span> å¤„ç† `CTRL_C_teethD.Y_4330` æ ¼å¼</span></span><br><span class="line">                attr = <span class="string">&quot;t&quot;</span></span><br><span class="line">                axis = param</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># <span class="doctag">NOTE:</span> å¤„ç† `CTRL_L_eyeAim.Rotation.Y_4387` æ ¼å¼</span></span><br><span class="line">                attr = attr_map.get(param.lower())</span><br><span class="line">            attr += axis.split(<span class="string">&quot;_&quot;</span>)[<span class="number">0</span>].lower()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># <span class="doctag">NOTE:</span> è§£æå‡ºæ§åˆ¶å™¨å±æ€§è®¾ç½®å…³é”®å¸§</span></span><br><span class="line">        attribute = pm.PyNode(<span class="string">&quot;.&quot;</span>.join([ctrl_name, attr]))</span><br><span class="line">        <span class="keyword">for</span> frame_data <span class="keyword">in</span> frame_list:</span><br><span class="line">            frame = frame_data.get(<span class="string">&quot;frame&quot;</span>)</span><br><span class="line">            value = frame_data.get(<span class="string">&quot;value&quot;</span>)</span><br><span class="line">            attribute.setKey(t=frame, v=value)</span><br><span class="line"></span><br><span class="line">    pm.undoInfo(cck=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><video src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1b238b83/maya_load.mp4" autoplay="autoplay" loop="loop" style="width: 100%; height:100%;"></video><blockquote><p>&emsp;&emsp;åŠ è½½ unreal å¯¼å‡ºçš„æ•°æ®ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;å…¶å®æ•´ä¸ªæµç¨‹ä¸å¤æ‚ï¼Œæœ‰æ€è·¯å°±å¾ˆå¥½å¤„ç†ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      python å¯¼å‡º sequencer å…³é”®å¸§
    
    </summary>
    
      <category term="æ¸¸æˆå¼€å‘" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/"/>
    
      <category term="Unreal" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unreal/"/>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unreal/Python/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
      <category term="à €Maya" scheme="https://blog.l0v0.com/tags/%E0%A0%80Maya/"/>
    
      <category term="à ƒUnreal" scheme="https://blog.l0v0.com/tags/%E0%A0%83Unreal/"/>
    
  </entry>
  
  <entry>
    <title>TA å·¥å…·äººçŸ¥ä¹åˆ†äº«</title>
    <link href="https://blog.l0v0.com/posts/4831b5c7.html"/>
    <id>https://blog.l0v0.com/posts/4831b5c7.html</id>
    <published>2022-05-13T07:01:29.000Z</published>
    <updated>2022-07-30T07:31:57.751Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç . æç¤º(ç¥ç§˜å·ç  + å…‰å­)</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="fb2a28db5cfcf9c9721b69dcf0363b14040b5af44b27fd3fff3b68c3375036b0">8fa7d4705a9ea2d031cb386fd946285e6e06572cf6c48f20e4e93f64b126b72db6b7070420aa236602175645bb6952c708919e626ce7b5e4c9c2ce5233d6ca9453e4f985eb5743e515e7e935ac25f512d0f37151972dbb079320ba80baf7dae7ccaa2eb91279dadf7fae0cd4262f09e41d57257560714d89b9af184023b2489db4bac09dbd48acd6b62afd5caa56a00f6f79ea0af9ac70c063e872bf819a68a2f89eaf8c81a21e51f6ab1f3a91025894049dae0b604fa859081918fe71a35ae052db98ec94da9fc5e86e3b1c47227fdd244f77c5d59986005ff1b37286a218081a45349fb7adfb304c0003889441cf65d8496fdacb5ae626f86cc705c44ec6dda6978212ff1f8765b7703603ed6a599d0a93ffe9f9dfd4e7c9dad9e0c7fb3209cff2d173b0d26a14698b982aa16795ba1c9c4e5fb82e68ceac65c9880efd73f864cc74b71e289cb8746e0a31a88c699d10061e0f6116f89794b6d9354c1efdb850045d101d9e0c030a24efbb7477eb2becacec083ee04f093825fd6962f4317a4b3f553088968ef83a4a75d513bf33b67661ed7de6d6c3031b951e520bfd77cb56bb9e19e51b9423183a90e7d1f5f075f485c636dddd9a8459cfcfe2cadd1650faa702db0d76a330e4a290c8f0d45b5722f9c9c96832eee831e28401f0b6c37dedfcdbd5bf55163e425cd9bf30829fbf0df2cc1b800ebb507259c8b3c9a75fa762ef15d114128837d20e3580fa42e53ce665aae00ab344918af64b2367c6392988deb437ee90ee6b4861b478d04d26e52d7961e89a0e81ca50a7dfd02e120efc9f512509787e17233ec1ff4beaa77529df7a8386a41408d9a844c5cb821b5aa53a5b8cae826ed484ea7c6da24779a250ff142c7ad81c297c5da0ba7f3d28c2a3e2bfc2b03f202bfa704493dfbe15e5f26507c7b0f457bf970078dcd18ca628f22e077502247056c2a1d4b9fa49bc2d351911658c42055ad7565dbbea5a31951b8d57dfbaf4ddebe35f2955d7f432061e053534991dc4b5a2007744109cf95db12d1dbec4d2f1ccadd86e00ecca3c715900d4a3d20a0a2473f286a19338cceb8fefebccd22d3595c47ae4e16e5f765465d5c2a40ce91ff17956dd0d7269026bcfe8f275d7a567bf1ab90c42604644ff7739a7cf8480c886a41f366d4b3be977984df0b5f62ec74ca8b5f0adec0f87056981231c0bc1ff80c9bf140de1e145d4dc1f67fe16ee20e42393fd17123ec10faae3eedbdf412eda34476fc33865ef5e75884850c9b298b08c634770c1200719f2e1b8581a72d3b5c0ba3b36c44735a7154105c1840e67ebf48ae8218a48c50d2a7544069871910348093c1c2daff52d9eaa1979a0ecb8b45225a853788add60a2065357de2ac4b9ebd2bdff6ed6ac397d79a90f131f5f25cca4c579dfc98b42a6b1f7baf9ac75abda0d30630c9a4593d0dfbf5e6f5abd72067cd3c0b6d866e58e9c8f3512b3021df06db8d5136a3a71aa6fa09ea53b22c0bc1b7d493e5c7c5569134a48104d5a733893b69f906eeda936aae13aa421517613df2efb8ec05760c64d9160cebcc2397c87da19316b5c1c6f8bdd75939349208d5ddbbc914cd55ca6ae18cb4eaf00586fbbcabada19aa2d838006b21e01ce6248498a5156a20771d48f782aae443a190095ca944bf566c764822bd990184f16823098204ccbb28cdbf0bc2a29df18a50a2fe0db80c4942bf1a68bf016a402ac07228be42d7963f88715756b5259c186bc06bdd8b85ac7dd7351d0588469710d479fccd5f861bddc58a185ae32af2ca8ed902f520ccc2d3eb89d704926d18b4ad2a236193b964c3926164848442597d26069fbbe6f62ed84adf22eceadbbee7fe316f66ca213bcf2aa4ab1ec4eff93aa7ed8bb3fc4d8642ec387641b70b5638696e8633e0c33fd32c314cb3a555f6585477e35832d241472a45be77133edd20344a06e3a4d048387521aff1f9b32b2bf9ecd118618d7574d8e9c6084e2247891c85f365a1d76356bfd1601f5594435e2772d0d5388dfaafa2593b6f6ba6c62cde9ef6322efa8e906417bc9c5fa63a3172c57a7f8150376517828973f43a387447cc8418510ecd7b7eb755940902dabc5fa709ba77ea0ff0319c20826362ed3bb3f08b833b5e81f6f26507f18ad5dd7496eac072c81bac588ff3ad1a05ac184b1a34653a710699a042fa49c470a9302c696580049c0dd76764eb7b92622039b18f232b371bd2b98a0a9c3c02a55c27ffac699179091e4e1baaee1c350e5e17fd7cbc3ad1a7a1c8a47f7110270f841fc0ef62ae25c2b208ddfdea840c9e68ac15eae56377d2aec241f1b6a33a769b5834ab19ba87e87ec66f54df90f1d2bccc32ac9bd47b19b6e91e095c6ce0a080448abe58ed75e6fd658259a4a9bdf6d0a62247fcedd35137c402443c9a8b567480658522ff0c5bc84daa9bba58738ce29e8bf3182872d377b8df42d429dd451d8888aedc99ee256a5d51324c248f62c25b4fdde33968c9f5988ac211af6946e5c669fab6e3b3c2eac93d9c25073de7cf611da967574d0418d71e6d26903a64b3ed2503116d3ba620ccf937acdc99f97358d01d7a6ceaf8846f1fe47923534c0656cd38730ec02d3a0cedf3354df80cc08abd6fac6bd4c7b2a9a1011a22b1f319bbc27b0f42f8ef8c92e39c81432549c73ba3d14ed0a100cb7ef63ab3d77811758f63a45e15794a10f762ed897510b8f818fc224c3f894d88951eeea89bb5c4802397a28280351e02cd6718364b5ac378826283619a425225c59a428cb714cb8352ced7d4a60cf591b59222a98374e6e2b95077b398dc5491ddadf129dc6116cf888e9d5b89de9a266cf5e041e157dd40d8f985569e9d02edb4796b38c83ac08f75b4fa36a1a0f6689496b5f42b1cada3acec32db498cc8777c63c5c778508fdfde422d8c69900685391869cb8dc684527a650d53c12c38345eebfb48a80d223da4bc65eeac5e6f1bca6293a514207ac8b39ac9fa5981aafad0c9773fe9fdb70f9084320a923ea5ca9105c8110bf360466c64c5b567060e6cb45503ae75c20b12a1ad93e4c0a3f08e9a267da59b8a1dba01bebe51c67f1051699513e52360f30fc1d83f3b32142910fe1fc3ad7f3fd0f7125751d533a5064ca4bd9998336809a992fa7b894103603884e8ebf3029a43587c66f81f5b5f0e4f1c635ced6842a042a807456f956be55d88cfb72ebab0b2ad14ac5ce7b412c739ee05fe845ba9b30b9aefc2d760fb2e1f7e1e3d7da54548ac1dc7255b590fec949885ae239fe529b0cb798f966b30e6e279146fe4fc1ccaa6786167cbcfc734a7055915a767340cb15955dac6809199b407eae57c775b999b982c765926862e5a478f17e33e9099ee21d01ac33ca7419621d0243ac60381fb529896246c2ccecb0c7e4252c8f8da1278cfd82970698a7aca505d7d5f0831f4665f48cf8a02f3040c133837efdd05173c4a5a5cfad1783aa3c21bad167a88414a27747fa68786a037f6f9201644612cd515294d3f5641d24e749ee39f86042aa93b301fec4cfe4df2ea2f7cac4b9ec942443777e17ae2b2bed3a04f31c92cb3a49df11512173597affe9790c85a0963d74eabea4fecdc8e9c7423f0b98ead090109ccd786a574e52777569a7018570d5d1b973826e4607362a9c102e9f96eea5a2dbc68ac24fda58ce49fc39ae06b859fd175f6289bdf37f033b3e27215545a0b1c60756154471003e59ee4d6139a9bd506149d9e84163407b60f489d2b2927baa171c27525437d8a0960612c11dd56b0c8b50bd78dcbd1ac513f3c806304a1434b6659663d3d59fabd4f5395957261a4b63b03541288f04aa4dc1f05a39518b213bcf09dc801ba4a402fa3b5f168d09292a77aa78a4c3140580737c7e5f4442c5477987175acf6fd9c57834177f11e90a88d0536b13f31100f697710d1e8d731d352b73d5e75f3b35fd334ce927f9a3794a6c88d709d3824c51750a215f4c19529d89fe077ad9c6b01c2319ffff7d85f710272fc620c82090e1c697343389f71a6576beea4911cde87cf0411c8dbdb7db05252109b21e7fe5e402c07e5b02aa42e8a074ff3ea0506e927a633855cf3847d90c9b78ddd67d3e6a7184346dbd1c4ed25fc61a5d01e76f0e2edcac5d12ab1f912e4900511d7c7df8ef7730638318d25300018bbbbde83f3e5686282d7b7835e459bda0ce31569449a873a51dff65955942f1f3a270b7dac3238d0031851af179ef39bc140b4d715d6a5484f40af20c8feb2d5035f70f37524be26a10374f93870c405bcc696700ba1e509dbf0e24a840bc28c746596079bd8feeb67a4d933f9f4691e7c131d43f6f89ce0a799b1134b8201b4f3bf0969446926b525542d774b1616fc344455e78240a0bdd13576198d950a0e62d84fb0a488e34c90a7322bd9d6fc4f54d0526b238c0395811b21e2bd51ca6ee7dbba677406239d848c2664821b2d978d910f8e105ac780b9c126df7498eb4aad68b431fcb16a023a1b072b4367881de98c9592e100af419922b3197a34e8aa1487ee91c079c915751f9317904f52bc1ee827358a5c6d1c6090d63397ea1c3c49454d1c49e7d0f8ccea1dd319dedc8075a0b8ad0b094d14c925e9c778fd5601e180cfe6ab550f9362babfcf7f0d041038f6b1710fa4d0c8cce3eeac02246070b47e8ac1ad2606de8ae71c89a416affef37d087fe187d67b9538564b9524fa3df08018a88d9f46ecf1c5140066697c5841594f4702c93dd73ffc20eb824b8ee73461427c620d80716cf143f6d935f886ee7c8d4285eb0850bc546700906f9ad3ad4f6e48c1b66fa5ebd75a95a13c56b0838efb3ab1c59e42301bf10f673024e0533c4a1f99b560e15ebd9657a532860f8917dd8fb9a05f9030d0627014b26a6740494cb2fb90ffa5c53b104596d76107557e12fb8b310e74362e70c4c207b28e172bac9592b3cf8a9bf06f19e47ebb08e41bcbd1a1abcf931b78bf9c137289e1bc5bda8d3c316b713934ec9af620b63fa823289ceef2482c0d0e657b81bbb05afd4755d6f41a93a27ca1fae71c52bcd5c7a84770423204d918de498a78cccb07a129b3ae63ae5d49ebf3e934e084e9f84220f6859d679a98c3053ca81243bd2bf9f8b7b8639eaa8b94239374e0f65e40581bbbcf0ab29def2808900c12378add6ea1c3884dba3dc1a9abf94417f34b539129e8eb2629544771fa32d261676ccf605d389d46152681d30900d4bc1a2221e1509a789814cdbf823015de8e5ac05ae280f7d72085806e8067c9dacf7903fed4569efeef1250e8183ac9238fd8b0dfa7f74a0b462860c47f986a9af2bc57e8081f4af248fff773a91d3a39c2efb90824cbdc1d6898630b6e456d3ad03b258c78240713155e89f30b57d2cdf65ca9b07b04338b378eaedb594fa971aa6e34e4206184288e281ed9d6bfd96b97ce510ccdcc5c5eeebe4d004e1cc999cdc0a71405a0b868475b91978a88115b2df1487ddd25bedab60596e858e8bd1200e28b361c58b732b220e5594cc880d2fb16c8f64b80f68f8bba3f14343c2ec9064c64ac148da0259091446b7c520baa32f2ad9eaf57246225e6bd01a726b8413dce00245473c9f8f91f4db3cdd0cbdc643cadad1994fde266ecb8cb9d7c0a72efab8a6011d8c29b9f31fb8ed25d72a63e13ee7b2858707a6c8cb611b57ca79a217ecc52f2a996c54f959cd13dda00148525ece56d5c3f601cb64d8dbe4755a6b6b7811b4525960df0e4bddf59e8b5fb22c8a5f4d66cfd6b3d71a99927f2a6b394f11c08aecad3898859b2a000e8ab8b1d5541b2d1819c1f389d8b58cb14a848cfa17fc5304fc0041857048f9c683ed3a9656777b60d1171903d4e27b7c727c30b55c8c81b571b6998195642d968f78d1d299c23274ecb752241677c78cd2ec822f7f35912ac028db6f125bb8259a2b603626819a4bd1792cdfa31e099533bdf7456d8b73bcf06f38c2d35125433f66a5b6ccb51128b38079168bc6f90e506861bafe3c5bf9a33277d688ec9aecf4b04c59527f6be82d854eaba5d49b79368b435097168c25121f66638fa33228c484352adc69a07955cd29db03fdd5dcb99fbaa9ec9293c1040b1a933da8dd5161e1c165dd6d0b0082c3c077f076fd46991db5726b91f0d360e2d929e698e0d09d57aa83c412bd04db6b6fc3b772d0606f9b8e9b9bd90a1423db27def94d07fdfecf632cbde3cf2e9d3f080801a04e1ec111c4996e7e7c0fb39b03262388afd6f4192852987fa8c39a319680f1a2a059fd58d2a85c9191287d34eedde8ad7b32b4dfb2b17b1737f7085daaadb7d1227dea0c581acf07201aa02014b934fcddfd7834217537f2ab8adafe5b817fe994b49aa8692343cc7fed84e2ee2dc3fe9171ab6694eb65ee2c15e6a463e468e887570b90f0fb016157fb36a3e5c71a55cd46a09af7232129a2a61ad34673c580c3ae990e881337fea4f04c1096718af3d607c4c4923b0f95fb5f15d5df5b8de95871d708aaffe34ccb146d75561d4ba8507d3e5865316a17d84c036870f744d96151098dad673071a39ea8adf73a1793b617de4a65dac6e63f9d962c9e187ebc8d9772f39064198d6abcccfbde981077a7350d8dd82ec3136a8abaade9b8a36e43e96e12aaecf2f03d7be622170caa8359d69c1c2a71bd21b9b24da721cf0c3e7f695d1cab162ad57b48a3a7a01ffbe5723ffa3826d135bc27e05e57029066cfe8c19427fea48b65fc0c7215dbfdc72f1bcb52db4d1c5a01af1384bea939d9855c39b15b504671290d20ed1fd9efa9c879ccd5dd4d8c4d9ea180565318c77a3a6dfb0a16c14b382cfbb64df4590bd2a3b0674ae7f9418a8f28ab0bd3158ac16421bf144c8c894c64931625365dd006ef22c29b93d14c22babee0d1215538d04a4fae6b534d664e8e8326232d4a985ac1e1f49a717c08e04287d774f395ac12fe3c8c1a6eb766fe3ffc0641774d6ee0b8cf2b59c72e86621f2a790e06f0069b234a692211a357b8c22185cd70acc53856e27ce3bb54b83564cd613592aa74e1b647991a5b6e8e75a5f3571da05fd798abc6c130373fb0f0dbec756d02f827567f0d1d381d60538fd3153c66d56b012050782b1b6de7d6d216c33758a2f7d3780eff6d9e3e1a5adf598a54c9b3cb1f3d28f707766fb7276d1d2c39bb40423648ad239c1c5848d74669af5eea35e914993258f4d6aff95cc7f521eeb1d99b6bdae3cac8e786af29d445d078d19465b26e11e427f2deb7f138a8ab630d1d8fdab636c64b1e3241b0a587e8200530d7ef164c7f9674f24d410c2db6cf556e15029834a7f01aa4b563d2e91fe066ab1d89a373f313432f3663fea34caeb0009ab267d81d8bf003ebf727b552fdbe6ab882c8162e4a4cf589c2243fce3b59d6985621b3ca88d3c8aa7fc8e50c52e5e9c61ffc6a2c910d0deaa7a03f50d68652d0c5b0a4a0908637f93257791c2a872f72f37c27912307e53b5e8385c9ebc6ceda46db959ecb37e565a30b7c5352c87520ac6b2542ebb6ec39e5d0107fe2d833023cb8c9d7b1320ce7b15a41cfdb7bc499938b05178facf71e7c52a88a26e9e44af7674c388267c95dd2547cf34848954d73862d06985efa06c1bcc82e12e4f0ee3ad0481c7b32c77226ac6b5f025fe17dd47de3201d3b25b6526faecc51ef230f028de0df3246615056ea4ca0d901db7ed4e9402469785f7b3416ddd66fa747400929cabbe77d685f24c9c488cea6ce9b1d56c6c81d9396bc15d9d194b5dc37d22d852d20b19a74818f9a32c101d1fdf373ceedf33c99cf6ff5ad64d8c09d77d780c87c0bd20c672fc1e91e6d4d055130b4d42744c903f640db33a2f2f8397518269423175a251f51e810007eb7bb95a099d0364acb9c6f96acfdebf569d0c3d572a406e544702ccb9be27036b325cbd7dd75f08fb0ca2db5d8f65291f6d1dcd9dca4ccaf3de92789b2fb5eeac1a91f56b61fe075a81e6499a7cbef9c3e59ba91ed5fed565a80cc307805f1dfbadb5ebb0cf38ae656f3ac4cea27c2de36c88b31e9e2e7bab92af0fb6b8b04b1efba530781cce6e49deca95172e286ecf324cd1785c2a4d5439d9becdd276fd464e97df27554f6b7e508a35151afb06d5c8113920598cb72bbdd6cb48dd3ad6cab309091b84d4524a58c262b713f459228c424e0fc2340f2e6ea8f6de06186f9e6d1392b56eb35e5093475304c915f4b89d05bd05b23290f2ed3338e09725dee38e109eabcd92168db4d319df75b4ec0a4102a9a806a177bb4e8f1b25e841f4a9cc6621373e89c6595e5f51e7cf1b91cfa58c79679cd653782ea375abbd3223ac1b7b36a4450009883a009a2ba0f44920284026e7a2030882d1c62c4bd0d40643fc7717e708bd78b43b71a65af1ee58e973dee3f70dc32c0663e2636ce28f571beaae7c17699ac8ca802bb29ea2b63c5f26c487ca6487072cc0fecf84ebb7c5d088aa00a218d4548c0c519d47495187b0f062b83630218090c1a68a704118528a225e1d52ddb09ab074e2e1a85170175c03107266ec0fe4c0b6ef3dab705a21d96aa989bbee153b35fcd8d6dea8cf925d7f42f89233e11d72facf4017ecb423b2ecef55c74e109c5fe9a85387d58fb8c285c84f8daa6c9be94080799309b12e65a7b3f4ad911e3c281f0b54db5a579964ad742a248a90056e344e2053d5d919114d3e40378a8db5c8423e177b1ee429ebfca4946b013c79d6a743e5448f6b88a4708d399e5114a6e0660a5d7cf354cefd285c1aa9fcb8d25543f51e32b71656e4b249fe60cf248e98f72d1f661e80cfe54511e7fdcd00f46dd2ddb7b3f9aba026bcb68aea6821703b3dd3fb6b64507287fa36e29afa28a2e1c069ba4d21d1c067376c67fff08105d14204ee472076ba990c4f8652cecc1855b1145503e12e3b07b8db10d468c07fc9ea7fea0138f33d3d13e30e16801330caa88c23e961376390cd390975472a3281f12a59992fa356e8bf97e67f71d64ed2dda7df30d27eb507cb29570beb41d47231ff837669683c82bf0753e8bc9b7e8ac8abdde1cd794ffb838bedcf52e12b789c93deb35e4daa109e07c1306433f037f72d83656dce0ffe1672700812602e988162c9295ca31dc6ab8f0d493a918d4b5bcf7ceb95cebeb4edb295db614b327ab28608fb25f24bb144022a87e66ae43eff370eb302de6467dfcfbbb8329a7aea1676519dfe3114c1ea6668eefe085491325d825d4556daaeccf428e069ad24e5a8e113947d6d19ba72d82ea7fbfea3871c077057674e6a3cd04c467b3c32a8d40d212f975c7003ab81be8c2c827eb1c74756cff558dac3cc13f99017bb1604c6f38888d663fb3a7a96685c862f81b2434c84dd6ba083698d3f2dcb9a4a629bff2120c8cfb7e271844d8e57f5f4cacb7b1aa9394f9980b7775ee24487fa46ad100a021017fb222fcd7cdb4ddb80bdeaee7e64bd954d3822510c61bd38294b4dcd55e175ce231c86419a0ad44373870a795174b15cb6e1f6cceb4e63eebc5bdefea5fed59f253af69bea6e033247c1572c40b47e2792f8d34e34be8f7d90f340a8a7afbc1a3fbb555cb76303fc0527fb993df76334b3887fe613b9573ee12dffb1dd7ab6715eeca5f4f28ac9fc71f08d2cbf98c989e5d5bfaf44a0519c8b9925dd42dd2136e90f2278171bc037ef4c4a1121fd4c616aeabe0aaa02970debce08a97454b5c0bad33e91255d0ab7f44b71c9aafdb37b7365d294db5c6175ad7cdc3d396f65a1b76b3fd0388eea8b8c5e0eb8a1750edf4c16582395da5207b56225fb375d25fe21226647e6ddc0141f7a475bab6781a67065b73e4f6ca2469c20c4d0f3fa762a65d6d61f8bb5060666fa3aca71b0ca682853f259490bfa14520cfd136415888f3034bfb928af4ba16831c4420c25c73f6e51083f6d69e48633bde32b396994e51bac0e5395c00600282e6ceeabe622d315ba7d6f8cc5bbdb49e38ef4e6884ee74a2eb6e0b4688f87da223ff954c8b3ce05f858cb8ff5ce63c3450d8ec8583db7387be852975608e409248a9538980ab20ad8da5344ae3855be2188ef086c94861e3db46c2e65f84bf9f965c168c45f4acbd20beec8f0e2183c8a471a4f38b38348dab3900858e050a4f258148e6184610596334d10382d150cfb4ab54e98051509ae67e87ced0ca6b5eb1cff3c4e1866bd35fec02efa96cd688a59faee57ed1f8b95c21d5e6eca42cb2bb1871233529c4af1eabe79ccdbec8f41d7d0f18378e915ceaa8dec08a148c55edc2f0d6e169e83d36d5577d278b424a433fb2ce6fd3a2ddc9c60bd55c3fcf1e97abad7133c90e3578851a9ae898a6faff8b7788edb76df7c43afbe799a519fd864c46a8eb18ab9bef622969e8e82387e19fa551e7c9ec609c0bb248f796287591c8bd70423cef929028f060ab5c34d273be15408f4b474b85537bb4d27868324bfc52428b454e773d8111bb45bcded7fcde6d9acbe2facc6192fa483b2b2096b868a614382d331f756c08dfe70e2910b0f767778545ad5bbb79cac49b79cf990112f2386036fed9435c7972fafcda30418161eaa68a30f527f1300e3b3a1842aec219a015e8cc2a03b5fcfd2b9b3ba782be8834d91490c243b0e0b984276cac82406897338db70fccf15b42a58cab504cf941194c25b29f199adea59954cb41a3578d6bc23bc2beb5e142ddf587246f77f187c105a4176a8bf78a82b068441a2d51a17af44e7241dd313ec6516f8ff6fe3c6f606cfa917de6413fb4bfaefde58eec54469aff9b6fed5d8618ff19f29a827bbf576f05351df5611f8f3d4ed754b5acc13bd7bb1962ea7deadeb02423ca604f63b85132de332349336cf75d4c4652343dd14536707e3fb4d4fffd1393425662016adb4fdf2eb0a24dccf75b24a075d2b230028b08c29822a174edf14f9349d1b2b48e80b5643836f33b199ca535d1a0fceb8f63d0e8cb1281c134456224681789e271add11650763db2712f29f3a23ca1cc845549fd77f3503c7d7f1aaf1b8e5e8cfbda41847e34e27f80cda5625adb730e77c064ff22035bbeeef398af056839ec8198bbdd5e8b4540c07de52568d81d6f7939d7cdcecfee1242d9baf04b71c761cff6a4aa70c32245515134e4f41b999c58529f9746a9c784c1086a5b62d895d710740e1ce5a9cf3e7f39a9c588c9b5e94f0f2b945c55a1d76dfd2c7e723b48de32aa01ab05b45eae5b00c443af52d72ed86a34c9cbc997d7665ab78389428718352abb5fb7853ab0d238b94eea092a94790449abb88fd58efeb8fe047dca4b5dcb91ac8482a03619c407bb562cd6232c3843ebfb61187fefe890de2d81236076a218fd3a6571827831d8d4912c8c4fe00955b5e48a1e89ab946064431a3e0e4bd76ecb445a0866b245e641a3af747dca807da16c355a444ba5e7a663eec995bb347d246e5c70fb23e2017a13f798fb571ee0dfd98da8aaa6a33c4c2eb1b9eb211cbf88059097e89d8e7afc9f45f589ad1b554f12a979b22b1330aabe09396f57d786fc52718dd7afda8f9679d16d13c6e73b0499bacb411b96bc4e1fc61bf7b3add288241b2c2d08fead59c4d6a385f8bcab775827a3fb9848da3ee319cbc1bd615b0bc8f4747cefe72dbbc2264398bc62b4671a00624106c7ab45a9701e75ce03eea712fc2445d9bd01da87e3365d930ed5390732f26785e0801ba593e5f57ab06463e5d4460e240d62d02e3093fe23c87b5b4a4be59fbf391a94a2bccac00ad12a53c3d1ecdb21fa6dde784ab2474a8bf9ffba514d22bbb653cf62f3feb2ab624bce584628f321fd22b7343878f7b371823bea3550d84e1f91bf2b1e4aa6e87b076d1c4fbc8cac0bef6853c074d27a5b925478951db0c69ebb40d65a4411109d88789e745915acf057e2582c30ac8ace8a01f61b2687e8b71d4bedb241feeb3c0b1fe12ee808fe6f981804fc9c495c6c97cdf4c6202a7a021a2036dbde3b5f54d1271e10891485a8c7eca6a5c4d5c0d3b506527ad00107fca053d28f955f1db0d087ba7f4d954b02b8d169587aa7adfd6889573e1935ada68c88846b0c03b66a490167b78978a59ca9936226bf0d687bf7e3f5a89f5042c0711777ab684eeefdfee6747f9a5b788bdee9356fbc2f560f58611506878e0ec2abafa7fe06f8f3d8f8d4386d50fc050e18c74f09f7a36fcf7b110d2ae78cfcac824f029c252477c4aa944d14614990487df7a4ea79c310558eeeba46e608c351989bc22e36134a439f38de9f6cbe9014f23cd6851c6c08a18f983e75dd2c69187c0becf19df8ac969f87c7b44f8882c01521e0bc225b48bdaa3fc321f03babaaefd60ee0728c39b6d821f963145e335efaa0c1c6d4818bbdeacc339690e9fa6cb945a56f55edd0c67cee9a95f585523b37d3efac8abd5ae3a2f5fb71c0a399a6e780cf87159f405a70c61385d8344300bf535f56505e11d3d2aafff43d4e682eb02735f084a8496742f23593459f8a2984b683371d59096206fdc936f356091590b3ad809ffafb2b7f983050839555d3158e057de7733e4d39d5adbb37f0462c80e30e972dccde17b27aaf8237577676bfabf613772e92bbf9185d3b474d215f7279de634849fd6934334fc711857d9fe337cc7e85f1a24d66b649fac998b3792cf7c46161dfe0574b546dcc1a2ad3196511ab130607a1ac1e772b837573890b27702f9fec7c0545eb0df2129050045a21a11645b3a4b7ca18ae6d9c5b4cad0f7f441472413903ad3aef973b00e5ed88962599b51ab025de8fa1e79c251bcae5e15079b73fae17cb647848860e3a80434df4c9c5b99437258a81e869509e54ca037b4b92c6ed99954683ad3d469f4b22aee33eb37b79ad1ec365554da2bf4415e9247f2b74a9f4499e2c6be4db517ab23a0dbf6b6bc33549927d469513c242b03edd77a5d52e384550b56f749abbafe31760d76ad9edf497bb790a98791542efac0f64d5231ecae5ed00a3ea8d498951a1fce4b4b47218d9374f62d38453b1f3e7dc37d27942ee716ea00e7225f6f8fb3a0e378e491b291006962a133e8ecf61e42eccd003efaf873811c7d116b194fb10f8bf646bdff19b563128b2431d5bdc69881ef0f694305f0ff838e931172392acb88c49b7cb07531bf6f13d983cb8e2d5f50c08df71640635936d3213641d935c4f9ef3680f9db88a82a1677319f3e04aa9fe3742c67e5c3484379089a3188249bc1c5f9605b89661f6926c8bf99c11a78858f058e108be900d169ebc1a1e742aa08c7c462703d80c96298502ea7752e257652cc75f4508957b0c9394c4fa96a055b1d371621b3aca4d923d261d6de397280541946e00c6506022822d4738581196e28956c383099bbeaeab78bada79e7b826a81a7fafa6ed714d36c5b8144d0dcf70fa6198b8d2a3493b3dcc82190dd000582ffce3f7638f478b7a144fc15b7312986995433f701ebcc32bd4fbc8c35e84b69aa2a21738a7d7fac15e4cafddec0b9c0b4f09a23f19e13d3fc7903c67ba1f002ce9e22f49b09ed0a6a0106aa1b81471d6dbd046fba8ccf15174150e8f76d77d8ab9d1cf04c08b0ac8e125a001318927699cbe46df994f43320b77435c087de28235a316e4e8c34cd73c5e48775d98824b88b2112443285c32abb0b57cfee39d80f8b458baa7e43361c9202108e352c8d8c51a8ca0c9113b76707073064ba96844c414f3e5c37f1fe3dc8fc7efbb27b0998dba63d39a2ec82ce19b9a3c0b51e46d0018d06cd9c1b886ab49725fcfd65439b57ab1fe05f0b814eb1d1a819dcf64e6919ad4c9fa78bd1133e58076894eea3616c8846af2ebf926a44881580e617a733eeaf8b2ab5269428111f5b8e597fd0e2baf714099a04e73b94917a87bd4d192b1623c63c287a3cf372bea2cf56b916ced14860c14701ffa23ab2b1cba136c758e48dd4bbd263d87dcdc8e1b1480d349974f4eb5e76db2deff85ac0d48ddd02689406058565cf5f010d7493e7e15c204fdcb5d4dc52f7b11f0b43765a8da0485ffa6b75afe5b881a7353a787adf5ea69db7f9d9af48948d123ac70a7d95f0aed1a8a0bd937249602f5a959934f7208205592f73a8e9f1e2791bcc2c299933c1f1fb7b50db2e35d4b69381d6766f1d2519bb5397c690beaedcdd228e2d9f32578648aed03012c5ecb3c8f28b0b581e16cc9ba6be3e8e625beb0dea5985d96d9dcfeec69824a98dfbb76153fee0969d28c4c49bcefb55342fc2435e549ecc8986624513de76f060bf9bcfdf92d0b3248300ae2b4baca3c9ca7610df44f5f58ca4053d6a8aaf1d795aca713ae0002149e9ef9bb6f2f58b6dca8f10fa23595625c2571c18d0fbed47a92613464f192703112953052a27cb5e0ec40807626b5f4d911b928af6423355ecb74044269f3eb7745be427f33afe8cf7d8d6f55557ad09082a75902d5ef846ffd85a93ad806de9ca02eb4e36b557df019e5fd60b5b9ea26792372511dd33f8b5df6c86681d8c722257b9daf593401c67488ef27ffcb3eac186563657d00c82a3ff53938fdb7dbb5b51c4132d633d57c4519811b61e4fe1baf34f846f001e96c0c16a6edcfd6932b88c333aef51bd364f82986292b0c63fdfab6ab7412f67025fa63fe36caba70c95e4fced67d4f45797e1ed858c2fd32b29fcf51c61bbb0f800410f10123867150625fbbcf64a074cda092925110644ac549e1418b85125f1712f338abcb6c8a516b2a66188a7df577eecb474df0e869cce6d3f5e2a8e822da76f5eb12b763168cd9469e62b664db7ddfb867c3fa6bc0653f684cdc6bb0cecddf5c212362dead5c87987429f6b4aaa98415f7ba0a8ec58ae834359f459fa86e988bf214b26b3e8422e7129b3d0809551122be29b1586159549e0366bed0925875552415951ca71d98904c695313aaf631df87566d566c389a999bf0a5226bc1876c46b587aa66b5f26a534336bf740cdf5656b822a81e48b5068bfa345af1b74f7fbb6a2c59b54751fad370b6f2d77c66928fd0df11f1cee75110b132b5e4c9f7086b43fe828868d46e5edbcf834450e0146bfc0b535e102360bec39d420a1ac0d61d613dd7aade39759e6543e8e7de9a925a2d9c6f4ee89d897d98858306d9d0956df041861c4e18705f1a54bb83037c1d67a42d7c717dad762a3f209cba7b1595687613a0b173413f7e4e3605ba491481225c04c5319c1a4e8ddc79c8299d2f08da66e63ee56d2196f17287964c70593f80617d8a48d68014773d05bc81e8cddb65adb217804f19186b493dc9fdfbecc0fb6cd5a69c9d33801c4c1a31873d7b994bd095e1080181f2198648606798e175f0e05ce9a2e1b83c50d424ee2ff081401fd49c41dc6a8f374cee05291b5b08abbd673f0d66f85f30bb5bdd0dac505a90b4a0bc8f1417388c9b6a5d88634b742b648e8bb39ddd7834d00ef34c5d32c43ee3ba9fbe2c54e12833caddb6fba00b246c83cc28905b3cadc0f48558807738ba1fca33f012085663a6f9852c59a6f37bb9de622c062e6bd9a31c38f0dc1c424e66741a0db74dcecf8273fb66e22b3dae9d87b95b3dc9d9e65567cf7123f8e5681371bdf09debe56a4d274df7598ca5df84521383aee23ac8c1a9c1dc3f48f4772249e45a0dc4fd8145068728bfaeb2b477c07437cf49ecb0f6a05c741aef4df3d495b28a23b12cebb12bd6cec8d629556d55147d6ae3ce601b0247f19180fee1c0992224361b515e5358f874ae2770c29b7a92a4cfb481766835b6a6694048d31a64fd2f958d23273570663168382b70d86467df5093ac7e5837b1b9588a84aba349c0539a68b92e81d966737b506ccf9772b606998d6fa05150357f6dcf0d7c38098b2090dea40677420846ac0dfcab70714581ceb0136e876cf212dd73567b33c2d692dda7e1a59d1fa32d2d53534257e2ad02663cd72f87230d829acc172bcb2766bb596b0f35385c02b0761b236a2f8122329bc1e79d26d5a83eb4c6d39827890049f0a52d8b84c885d621de71bdd116b029b8ac561dac8b66136e362ec017ffdd82c1e6643da74f6fa8cd60f743ddeb3c19bb1daf0b0353a716286be8e99c29d91ddbe41227c606f31a48930005bf2d77bbd2ef82e0a439d4545ad4254f7795edd62837f22a1ccd90762cfde79e42f6441e6cff588c37cef73086415da708b848280d4c1dc9af5b44b51f95dfc156bebe7668c7434edad5b93c27bdf5f7928d00d04692ca61ad6cd07be336ba0326a76ac7faa1b2b6a5755ec6fdea96a22a2a4b2269459b40d8828c2166cbb00e61bd55053387b0392eb11e022455efcd5665b052445b715ccde9ace3ee107c021058df727b8532f806e3a9f11f2aa38513e2742d8f907cc412f65fe12bef6304a64693435dff47750a59cf77ad6485c1d7e2f8724d2d2fcf526b0c6fd0da3c6241ff08952812bab9903103cd617e5be020284c3693d45f757ae8e252ef06be91acd206ed9f5e030e1a6180d3519eb559e5c780073b25e4162da06c46cee20533f1247537084e897b5c7177fb7178736c5337afbf3fcb718023bbe3890f0ffeab56349481d18a7e1abb316d9815cd8bac6f55144e8882786e8bb9c6a06929bda7b00fbaed214a36eee1701c73a51b926c2a5b2b8f1a7eef407a97623aeeb4e74660ed5d44f98b67d9d11e9668788a73a477cdcb64e509b960b9f4fcec688bb9efa916fb43bc8b7a7e4c174de79c8b07603954ceac76cb97117f3460676f30a5fa988a2b436e37a814d04a9fe3641c4c21daf2057476e831fc5b9c72b571a2a0b845726062f78fa0f7bba897a7d82cea9f9dbf8489d33546042704dae1c5420491382b14dd5fe7c8b834216eb37128c458989e822f25ee14acd08b1d8c1024b61d7ae6a138f9a50a09b8833100ee60a83ea08f7bade4c6f8d86464b52698ddb89624a655ebd8501839f74d0804cd8697125d4b050cf401eb1002706e21ce8362cb774301343ad940d8bc5e6c6d4e41fa756194cb83b6e019bba349f4bf56d85d2c2c3202a7f1a488b0d7e2fc48170c5291e5b651714d2c8e4e3869498dd9f39e9e33b5cd938a81b6b27a391fd08e350f198d888eb60ddb788a29f99935e988e9145095a816fd4cedf6306102c7c135e6525fce80df748c9d2a81f64b5da870b2aed8388b96a5bae8e257cf117641e17515a8886a4b91b53d38b71b5f991af3bbbb27d0da7d5eb32318cf654a6f43e080c69294a8e59cffc9bfab71b3cb65c37837a38fc3057c8c9666384faaec63c1ba22d9e043798882d9eee8e171c1e030483b3b779e2317b6d90c47739b9f519f0e04fcfc01beb9b0a56f78862e8399cfda86ae38564e1b01d345fbbecb59589d4f867f756ef19fe215961e6069e027a92b881f648a2362cc5579144ec08e65ffe4a017a1f945089b5713dd643a168be98c313f08ae5dff83378fbad2467e8945910db64614e943cd9abf5d0c8e817ce36b3da1759cbe9ed53ffe16adef734316e0f7ecc0398d9bb25e2ff5e2815ff9d77797848481031afd65b07736e41def9c01919538c06007dcab83bfbf024555d6bbf2fb4f276890a27ae61f9302bcf0a04cb670c47dd896754711663acd8c469316df9a47f7a49d0438513e2eaf9ee796069e4531319c26f7bb7534cf2de0cf2f42d22d6171c65938a2fcb62ad69ba9bbc6aecc34f1a733f09876e949b9c2aa7b7ac52019c90663e184606d0b8959fb1ebcda9c17c086e9a249a0f58cb215b27884538dc45231e105965a63e513d883e3f3321d4807c4c3a9ed32e913808bffe015a2d007da21f1317c6fc5c9fad3537c298599a499937ba57495fe8e62746cd7c1f7efb6e1bb055e7f92eafcd8f0bde2437398eba921136f953a1d843075b1a9aca7ff3446ed63d8c1e7b59f48ecea3665bc4a009bf4e435d0bd6b447b9d9f3ebbdb78ce86e02b2f434c78e2f06b78f671d67da27ef622cf3673cb6e3cd174a304ecf0e6f05df6d111f2ec6cdf1f7d95eaed2061d36ed595a19138d58aa4ebab964898304ed053c092a6f8c183b84391a518c29b999666a1a0abb234b8cf7abe00bc2b1b188632338ab732e1257d0eccacfc72adff1d6474959671df167302ce999527b9677fd47077e272fddef5c2ea572ddc001ab0d9c1bef243982bfd6c4b04ac409518e4b702aa92a8527f8df95f7ce6b0743107db99941c3cfea6de5b08718e8a2e5ab2dafdaf8274e4ac365170130ee50b559d1aa96d9529c7c61be846171d024cbb3721b52faeb8e58ac866e1782f3aa815f4bed58df7930d963e65f2bf977a269d52b8a4b8c108ad1fbd2c85409c240688c473658ab008d08d8db8a018e916c90de0d1316a054872bff56d4b4acbc5b6b35e766fde27981ffb34833b505d3d0d87e29ffbe1cc67f5392608d0af23874f4754f8af995dab066a2df21914e0fcfd9c894e97479726e47b4cc506b8ad66346495a7ba8675cad3867690e21d526286b8a8bbdd0cce291d23e2934ed3e3a2590c39ed3814c951849bc06c8c071e82c75b04e539a31ccb9a9899c2f7bb12e6afaca175de4e88ffa964b8f889e824b65af248f2b79107d114a332b14141e549d0e6bfbc9c7f6813ee7ec7f4a6da42cfca749bce9a128fb7cbb2d8f4bee01106bcb181df75e1088909ec7b5f0b82deff5b559495ef9c03565b381552969a0bccaa0dd98136ecb89e547c0639953556c93604118ed5d8216cc19f3518c349e0814e794dcb24bbdc1156e6025c02a777c58d756dd691ea0ee2a66ae943ae58762b92ff02b583eb55efcbb6cf816abd8a0d5f566c94b8cfc0847cb37d930a6503b9b07af8ee135441d872aa63f3bc7fe934b352220bb62650c86b042e46033826eb425edc2feb60aa1b5d3a3c04294aa5648d98fbec0ae67c24ff9c629586a2cdd3954648fd241bdda48bbaa28cac7fbc30d6977b353472d94836bc724654c40e88e8e1e5e50eb536e352398de44f44e871dc166eb40528f0ed6138de6ebe175d2d400a0d44793c36a4fc9cdce74642baf33fbe610bcc61c74b2429a93488d127cd37d5af15664c36adf1557536a688976691160d740b813e97ece28a11d12b970775a92149ab3ffce8b8466a81d8583e04f80a1d7f726816e0add5287533b86209b7594e41f1c9eb61e39fa8f4164416f69589efbb87cdc6fd1167f6e4f9a1dcbe818afe39d0cadd24bc77861b4a66394d9253d06f17640533ce9893b222a53d4bdc7a88d215b3d15af7a64dc52b6b309f57fc79d3107d496bcad2738ff54d5a0a1ce16e82ef02a6c5172295b0ae2e6eda8a5ed86e0fd026fc77746937bfd4f93321fbb6d22dfee9345bb9c1b96ec71be000d5bd9fae793293db6cff5536b9285c2a0b4e091e3cd03da6de40569f594cc60bde75971ac2712c9ba3514c48470682c215f78a73713543d776fb7b01bf5c1a29d5c55cb79e34506980163a51bfe6d77dec5760933e9ae39522e5b30f151a0c731559ae0e70777b78715cec6b7ec3532019dd5365aa741fb35ad8ef1885f1446ff9c0a84d550a3447649ac94c824f90ff19da8d21ba62c77ebd13573c5d72c27bd33c8b496aebacd3e9e9f465c9bd2fc42570432ed71c3b375dafa0807e855d4047a467c48100e38375c4c2d3acb89140592186ccd78324601286f4edc002f9aa9eeeb9c85679cb30741baa33ba0c5052aea4c503200df8da59c1070f2515efed087c7959e8389f35499c2cb5973c3f85df1ff106cfcffa76fe13043447d158293693627b0f6fd8f1644176df961de64f92fcb2c1c9454b5cf9a19d35f3a597aa9f7a45699fe9e17481f451a91cb5b86c193bec42107e0201feed624a27f930ee045237d93187640e8841318b80679a45e3d0a99e8f30023e76420504520678e387d246dadea6ad8bda37468ad5de81ac43cdc1abd0d95e5665ecdfca0506d4b9167b72659b53f5485f82624c4385acbe4bc93f73d6d4be57f241214c3e5a1cdd4e97b48885ca017587d4ab443e95c8f8a3958aa93ebeeca7b4ebb29d168feb0c25f64b9fae418705bc138586ec17e094ed8bee2269925eb50ef307d939d0a0399a7bd7ab723ab63700ad69cf2e8d17917798a9ae94f865c12aaec6e911157b226fdb0da1aa8fb4787db305a319475fd77ce492ab77a3c472a0056884d53b28fdbf1a211b900bea5094f9be52ba3f507fd1a8428316e8b0ed7a81129264fc72ec029fc836bdd008aa1e1d0f4495f959dcbd001a371a858ec4d5a3b2f24b7a87d9e1bdac41161fc0d65259c7c67c4cec44b7af97fb7afb631334d08aa9a9f5fa05ce8448f41a32add145301292eabcca045c2c15a7f3d3cf7ad261475b78737e42fa4e59a6facba2a2c81e2eb123d6fc02f31967ca71779fdd7a4ca03b04c8944d54cf1bf89f33b40222476a4961e326f60c0014cd8253e8950e456858683811f885569cf361b651b7c62ee0edb36aa764d9a24a4ed5c1591d6c95ad1f2842405e1de0d927474bff647d875cd49c57636be78605c7b74ebf6ba8610933d6a23ee3e6f81f1bd99d7b9a3fc3d6f9a861ef1bb6a3b0766e4078f57cdf6626aefdae32b37dc1a78a0e4a4ecab84310baaadd6585e57d884efc9637e6bda0d4f0d3b021460a06613588bafd45ecc45d13dde939a7fdb4dd47f1809d6b558307161539e10ec7187d852cdb9d41ed6d58898019cb2f6201ca8ec99973e2172ffffa4055cb9f735033dbf67da130f7ecd1fdbf5938b8134a6eeaa2f8986f143db83e5b8bd851079606d5d57c7a6e132dcee394d79aef73bae8d925d1e12cf1e092b23d10ef0f5f13e78776529bdacb76f04e68f1658f1dfb8630395206eb291d17b9a83d58f9a891bf893375bb8b1583a87cbee6c5886c0dec5d1f546a9d5ba964ab0c8bd9458b76e895a075b0ee654e263f58570f70a5ad6d888c0d310e5ee22b6b4f496eb17e1dd5f7a31320693c6ec9d8f6cb77895f27708ddb12b057991013360450f9db1091151c7575a6f764d93583d779b1b6480cad94758be647d4cf8794e20c6b5718381e8fce46fed3820e20c4e4c82b8465794b6984adc52596c6827f01e6e9a99db61784e39d1ea23ccdf1b720210a1b26c8a8bff1509bf7f179bf485388286766cc3094176121983c35d01eef78e1c7c67cf7789eb3450b833db4c3526b74ecf5d15d56074d5e788fe8ee99c7e12f823cc10ab1171ecac2d49a2d4ff80dff1ad371a98bf6d37f60b627e16a7fd0b550a98088356cbde17d0cffa78c6375b6d9daa66e3c8d154a685f515e66667961fab09d412ac4c2ea2b2f0e6213e7f6ff2a717a9ebce30fec12d8de7f3cc31f4eb2bfe95031505a3d75a8b8fb42afa4fca8cccffccfe7b15bc6d02699c86d5c0593f4cedcb3d523bc4c97e9fa5f448d03f75f794528e2a792e67948154d80ad2733030323b6dc51220281e61e2159fd3011197b8035da6104369229f6897ddc15338f761e303c81fd4306c7150fa2c24bb64d805cfd84f41b7ea94c874ea5619cd09e4d8b89bacb71da01ec5e4da36718977876b4f9a9dd8c3c956bb76c3828f105456fad1a2df55e0e91baa5c96c4cb0e94f73a57a9f6ca9dfbecf6af0150db77918fab3c4a8afcbfa5cc3f82748955885b74bf31b1404f88fb08bbcbedbc171bfa546a1bc8a7a207e85605dbf36e73b992da2c38006b0db8b6d2a255a2b12e7bba361710ca620ef471ad4e7016759c12efcc6d4816a677834d4ef1b5246bd778d8de3092aafa52c352b478fb2dc7308e42d9c97edfcf838c9b755568dea4428b7b163fa078084e879d84ec0e5a778098761cab7ad1a1b0ca217adfb3be505d587ef8f018893969db88eb8b44dcf64ac529070b33a42fab1f756df6d87e11f4919578631e4e6a92238aad138c0e73e60f4e376c78a411e644c3434d0e82f60bec1d8feb5c3f594d5fe9d6f2083657aabde969dec3f22b6fad6e6b5db7f941232b108f581ef70ef75e769d6848368d874de979bfe25776f0763fffd4e80051cff954b8c103c6dedcc839c410b95f0065b92a8bc53284557ab82115a0eafef47dd022842b8e36403486f1d6d2d819a65ac183c700d204007aaeb484afd70e108a9db278f3ffd116b83a1c1705933c542c08d2ec4aab489c4c658d038fd7d81cccde7780c7f675c596d32c50a93a2a4f1ceb0681e034357b630bc23cabcaa765173d29a4930</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      å›´ç»•ä¸€äº›ä¸»é¢˜çš„çº¦ç¨¿
    
    </summary>
    
      <category term="å…‰å­" scheme="https://blog.l0v0.com/categories/%E5%85%89%E5%AD%90/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Python - Import æœºåˆ¶</title>
    <link href="https://blog.l0v0.com/posts/5e6e2bc7.html"/>
    <id>https://blog.l0v0.com/posts/5e6e2bc7.html</id>
    <published>2022-04-15T01:23:50.000Z</published>
    <updated>2022-07-30T07:31:57.835Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;ä½ æ˜¯å¦ä¹Ÿä¼šä¸º reload Python çš„æ¨¡å—å¹²åˆ°çƒ¦æ¼ã€‚<br>&emsp;&emsp;éœ€è¦åœ¨ä¸åŒçš„è„šæœ¬åŠ ä¸Š reload å¯¼å…¥çš„æ¨¡å—ç¡®ä¿å¯ä»¥çœ‹åˆ°ä»£ç çš„æ›´æ–°ã€‚<br>&emsp;&emsp;Python æ˜¯æ€ä¹ˆç¼“å­˜ import çš„æ¨¡å—çš„ã€‚</p></blockquote><p>TLDR;</p><blockquote><p>&emsp;&emsp;æˆ‘åæ¥äº†è§£äº† Python çš„åŠ è½½æœºåˆ¶ä¹‹åå¼„äº†ä¸€ä¸ªå‡½æ•°ï¼Œåªè¦å°†æˆ‘ä»¬å¼€å‘çš„åŒ…å‘½ååŠ ä¸Šï¼Œå°±å¯ä»¥å®ç°æ•´ä¸ªå¼€å‘åŒ… reload ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">module_cleanup</span>(<span class="params">module_name</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Cleanup module_name in sys.modules cache.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        module_name (str): Module Name</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> module_name <span class="keyword">in</span> sys.builtin_module_names:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    packages = [mod <span class="keyword">for</span> mod <span class="keyword">in</span> sys.modules <span class="keyword">if</span> mod.startswith(<span class="string">&quot;%s.&quot;</span> % module_name)]</span><br><span class="line">    <span class="keyword">for</span> package <span class="keyword">in</span> packages + [module_name]:</span><br><span class="line">        module = sys.modules.get(package)</span><br><span class="line">        <span class="keyword">if</span> module <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">del</span> sys.modules[package]  <span class="comment"># noqa:WPS420</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># NOTES(timmyliang): è¿™ä¸ªæ“ä½œç­‰åŒäºå¯¹ test_module ä¸‹æ‰€æœ‰çš„ module è¿›è¡Œ reload</span></span><br><span class="line">module_cleanup(<span class="string">&quot;test_module&quot;</span>)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¦‚æœæˆ‘ä»¬çš„ test_module ä¸‹æœ‰ä¼—å¤šè„šæœ¬å°±ä¸éœ€è¦é€ä¸ªå»æ·»åŠ  reload äº†ã€‚<br>&emsp;&emsp;ä¸‡ä¸€ä¸å°å¿ƒæŠŠ reload å‘å¸ƒå‡ºå»äº†ä¹Ÿä¼šç¨å¾®é™ä½è„šæœ¬è¿è¡Œçš„æ€§èƒ½ã€‚</p></blockquote><h2 id="Python-Import"><a href="#Python-Import" class="headerlink" title="Python Import"></a>Python Import</h2><p><a href="https://docs.python.org/3/reference/import.html">https://docs.python.org/3/reference/import.html</a></p><!-- https://docs.python.org/3/library/sys.html#sys.modules --><blockquote><p>&emsp;&emsp;ä¸Šé¢æ˜¯ Python çš„å®˜æ–¹æ–‡æ¡£è®²è¿° Pythonçš„ import çš„æ—¶å€™èƒŒåçš„è¿è¡Œæœºç†ï¼Œä¹Ÿå¯ä»¥åˆ‡æ¢æˆä¸­æ–‡è¿›è¡Œé˜…è¯»ã€‚<br>&emsp;&emsp;è¿™é‡Œæˆ‘å°†ä¸Šé¢çš„æ–‡ç« ç»“åˆè‡ªå·±çš„å®è·µæ€»ç»“ä¸€ç•ªã€‚</p></blockquote><blockquote><p>&emsp;&emsp;Python import æ¨¡å—å¯ä»¥ç”¨å…³é”®å­— <code>import</code> æˆ–è€… <code>importlib.import_module()</code><br>å¤‡æ³¨: å…³é”®å­—è°ƒç”¨æ— æ³•æ”¾åˆ° lambda å‡½æ•°é‡Œé¢ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ Python2 ä¸‹é»˜è®¤ <code>print</code> æ— æ³•æ”¾å…¥ lambda é‡Œé¢ï¼Œ python3 <code>print</code> ä¸å†æ˜¯å…³é”®å­—å¯ä»¥æ”¾å…¥ lambda<br>&emsp;&emsp;ä½¿ç”¨ <code>import</code> å…³é”®å­—å…¶å®åˆ«åæ‰§è¡Œçš„æ—¶ <code>__import__()</code> å†…ç½®æ–¹æ³•ã€‚<br>&emsp;&emsp;import è§¦å‘ä¹‹åä¼šä» <code>sys.modules</code> æŸ¥æ‰¾ç¼“å­˜ï¼Œæ‰¾ä¸åˆ°å°±ä» <code>sys.path</code> é‡Œé¢åŒ¹é…æ¨¡å— (è¿™ä¸ªè¿‡ç¨‹ä¹Ÿä¼šè§¦å‘ meta_path ç­‰è§¦å‘è‡ªå®šä¹‰çš„ import è¡Œä¸º)<br>&emsp;&emsp;æ‰¾åˆ°åŒ¹é…çš„æ¨¡å—å°±ä¼šåˆ›å»ºæ¨¡å— å¦åˆ™ <code>raise ModuleNotFoundError</code><br>&emsp;&emsp;ç”Ÿæˆçš„æ¨¡å—ä¼šæ”¾å…¥åˆ° <code>sys.modules</code> è¿›è¡Œç¼“å­˜ã€‚</p></blockquote><p>import æ‰§è¡Œæ“ä½œ(ä¸è€ƒè™‘è‡ªå®šä¹‰ import æƒ…å†µ)</p><ol><li>ä» <code>sys.modules</code> æŸ¥æ‰¾æ¨¡å—ç¼“å­˜</li><li>ä» <code>sys.path</code> åŒ¹é…è„šæœ¬ ç”Ÿæˆæ¨¡å— æ”¾å…¥  <code>sys.modules</code> ç¼“å­˜</li></ol><h3 id="sys-modules"><a href="#sys-modules" class="headerlink" title="sys.modules"></a>sys.modules</h3><blockquote><p>&emsp;&emsp;ç”±äº <code>sys.modules</code> çš„ç¼“å­˜æœºåˆ¶ï¼ŒPython ä¸‹æ¬¡å¯¼å…¥å°±ä»å·²ç»åŠ è½½çš„ç¼“å­˜ä¸­è·å–æ¨¡å—ï¼Œå¯¼è‡´æ¨¡å—ç”¨çš„è¿˜æ˜¯æ—§çš„ä»£ç é€»è¾‘ã€‚<br>&emsp;&emsp;ç›¸åº”çš„ä¹Ÿå¯ä»¥ä¿®æ”¹ sys.modules çš„å­—å…¸å®ç°éªšæ“ä½œ</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.modules[<span class="string">&#x27;a&#x27;</span>] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> a</span><br><span class="line"><span class="built_in">print</span>(a) <span class="comment"># æ‰“å° 1</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å½“ç„¶è¿™ç§éªšæ“ä½œä¸æ¨èä½¿ç”¨å°±æ˜¯äº†ã€‚<br>&emsp;&emsp;å¦å¤–è¿˜æœ‰ä¸€äº›å±é™©çš„æ“ä½œï¼Œæ¯”å¦‚ <code>del sys.modules[&quot;builtins&quot;]</code> ä¼šè®© Python å˜å¾—ä¸æ­£å¸¸<em>(:Ğ·ã€âˆ )</em></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">del</span> sys.modules[<span class="string">&quot;builtins&quot;</span>]  </span><br><span class="line"><span class="built_in">map</span></span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span></span><br><span class="line"><span class="comment"># RuntimeError: lost builtins module</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;åŸºäºè¿™ä¸ªåŸç†ï¼Œå¦‚æœå°†ç¼“å­˜æ¸…ç†äº†ï¼Œä¸‹æ¬¡ Python import å°±ä¼šé‡æ–°åŠ è½½è¿™ä¸ªæ¨¡å—ï¼Œå®ç° reload çš„æ•ˆæœã€‚<br>&emsp;&emsp;æˆ‘æœ€åˆä¹Ÿæ˜¯åœ¨ mGear çš„ä»£ç é‡Œé¢å­¦ä¹ å®ƒä»¬çš„ reload æ–¹æ³•å­¦ä¹ åˆ°çš„ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5e6e2bc7/f00532dcd9c19a47bf2caf9012f31df4.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;å®ƒèƒŒåå®ç°çš„ä»£ç å°±æ˜¯ <code>del sys.modules[&quot;mgear&quot;]</code> ç­‰ç›¸å…³çš„æ¨¡å—</p></blockquote><p><a href="https://docs.python.org/3/reference/import.html#the-module-cache">https://docs.python.org/3/reference/import.html#the-module-cache</a></p><blockquote><p>&emsp;&emsp;æ ¹æ®å®˜æ–¹æ–‡æ¡£çš„è¯´æ˜ï¼Œå¦‚æœä¸€ä¸ªå¤§æ¨¡å—ä¸‹æœ‰å¾ˆå¤šå­æ¨¡å—ï¼Œéƒ½æ˜¯å•ç‹¬é”®å€¼ç¼“å­˜çš„ã€‚<br>&emsp;&emsp;æ‰€ä»¥è¦ reload æ‰€æœ‰çš„å­æ¨¡å—éœ€è¦ç¼–è¯‘é”®å€¼å°†åŒ¹é…çš„éƒ½åˆ é™¤æ‰ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">module_cleanup</span>(<span class="params">module_name</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Cleanup module_name in sys.modules cache.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        module_name (str): Module Name</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> module_name <span class="keyword">in</span> sys.builtin_module_names:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    packages = [mod <span class="keyword">for</span> mod <span class="keyword">in</span> sys.modules <span class="keyword">if</span> mod.startswith(<span class="string">&quot;%s.&quot;</span> % module_name)]</span><br><span class="line">    <span class="keyword">for</span> package <span class="keyword">in</span> packages + [module_name]:</span><br><span class="line">        module = sys.modules.get(package)</span><br><span class="line">        <span class="keyword">if</span> module <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">del</span> sys.modules[package]  <span class="comment"># noqa:WPS420</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># NOTES(timmyliang): è¿™ä¸ªæ“ä½œç­‰åŒäºå¯¹ test_module ä¸‹æ‰€æœ‰çš„ module è¿›è¡Œ reload</span></span><br><span class="line">module_cleanup(<span class="string">&quot;test_module&quot;</span>)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è¿™ä¸ªå°±æ˜¯æˆ‘æ•´ç†çš„éå†æ‰€æœ‰åŒ¹é…çš„æ¨¡å—è¿›è¡Œç¼“å­˜åˆ é™¤çš„å‡½æ•°ï¼Œ<code>sys.builtin_module_names</code> é€šè¿‡è§„é¿å¯¹å†…ç½®æ¨¡å—çš„æ¸…ç†ã€‚<br>&emsp;&emsp;è¿™æ ·æºä»£ç ä¸éœ€è¦æ·»åŠ  reload ï¼Œæˆ‘ä»¬åªåœ¨å¼€å‘ç”¨çš„è°ƒè¯•è„šæœ¬æ·»åŠ è¿™ä¸ªå‡½æ•°æ‰§è¡Œ reload å³å¯ã€‚<br>&emsp;&emsp;å¦å¤–æœ‰ä¸€ä¸ªå°å°æ³¨æ„ç‚¹ï¼Œç”¨è¿™ä¸ªåˆ é™¤ç¼“å­˜çš„æ–¹å¼ reload ä¼šå°†ä¹‹å‰çš„ module åˆ é™¤ç”Ÿæˆæ–°çš„ module å¯¹è±¡ï¼Œä½†æ˜¯å¦‚æœç”¨ <code>reload</code> çš„è¯æ˜¯æ²¿ç”¨ä¹‹å‰çš„ module å¯¹è±¡ã€‚<br>&emsp;&emsp;ç›®å‰æˆ‘å®è·µä¸Šè¿˜æ²¡é‡åˆ°è¿‡å› ä¸ºè¿™ä¸ªå¯¼è‡´å‡ºç°é—®é¢˜çš„æƒ…å†µã€‚</p></blockquote><h2 id="packages-å‘½åç©ºé—´åŒ…"><a href="#packages-å‘½åç©ºé—´åŒ…" class="headerlink" title="packages å‘½åç©ºé—´åŒ…"></a>packages å‘½åç©ºé—´åŒ…</h2><p><a href="https://packaging.python.org/en/latest/guides/packaging-namespace-packages/">https://packaging.python.org/en/latest/guides/packaging-namespace-packages/</a></p><blockquote><p>&emsp;&emsp;æŒ‰ç…§ä¸Šé¢é“¾æ¥æä¾›çš„ç›®å½•ç»“æ„</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mynamespace-subpackage-a/</span><br><span class="line">    setup.py</span><br><span class="line">    mynamespace/</span><br><span class="line">        subpackage_a/</span><br><span class="line">            __init__.py</span><br><span class="line"></span><br><span class="line">mynamespace-subpackage-b/</span><br><span class="line">    setup.py</span><br><span class="line">    mynamespace/</span><br><span class="line">        subpackage_b/</span><br><span class="line">            __init__.py</span><br><span class="line">        module_b.py</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ç„¶åå°±å¯ä»¥ <code>from mynamespace import subpackage_b</code> <code>from mynamespace import subpackage_a</code><br>&emsp;&emsp;ç”¨åŒä¸€ä¸ª <code>mynamespace</code> åŒ…å¯¼å…¥ä¸¤ä¸ªä¸åŒè·¯å¾„çš„æ¨¡å—ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/5e6e2bc7/db4d5d1b1d1d7fe61a561b13a9c00e2d.jpeg" alt="image"></p><blockquote><p>&emsp;&emsp;ä½†æ˜¯ä¸Šé¢çš„é“¾æ¥ä¹Ÿæåˆ° å‘½åç©ºé—´åŒ…å¹¶ä¸é€‚ç”¨æ‰€æœ‰çš„æƒ…å†µï¼Œåè€Œæ˜¯ç”¨å‰ç¼€åŒ…ä¼šæ›´å¥½ã€‚</p></blockquote><h3 id="æ¨¡å—éå†æŸ¥æ‰¾"><a href="#æ¨¡å—éå†æŸ¥æ‰¾" class="headerlink" title="æ¨¡å—éå†æŸ¥æ‰¾"></a>æ¨¡å—éå†æŸ¥æ‰¾</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pkgutil</span><br><span class="line"><span class="keyword">import</span> xml</span><br><span class="line"><span class="keyword">for</span> finder,name,ispkg <span class="keyword">in</span> pkgutil.walk_packages(xml.__path__,xml.__name__+<span class="string">&#x27;.&#x27;</span>):</span><br><span class="line">    <span class="built_in">print</span>(finder,name,ispkg)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºå¦‚ä¸‹</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml&#x27;) xml.dom True</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\dom&#x27;) xml.dom.NodeFilter False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\dom&#x27;) xml.dom.domreg False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\dom&#x27;) xml.dom.expatbuilder False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\dom&#x27;) xml.dom.minicompat False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\dom&#x27;) xml.dom.minidom False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\dom&#x27;) xml.dom.pulldom False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\dom&#x27;) xml.dom.xmlbuilder False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml&#x27;) xml.etree True</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\etree&#x27;) xml.etree.ElementInclude False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\etree&#x27;) xml.etree.ElementPath False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\etree&#x27;) xml.etree.ElementTree False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\etree&#x27;) xml.etree.cElementTree False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml&#x27;) xml.parsers True</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\parsers&#x27;) xml.parsers.expat False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml&#x27;) xml.sax True</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\sax&#x27;) xml.sax._exceptions False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\sax&#x27;) xml.sax.expatreader False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\sax&#x27;) xml.sax.handler False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\sax&#x27;) xml.sax.saxutils False</span></span><br><span class="line"><span class="comment"># FileFinder(&#x27;C:\\tools\\Anaconda3\\lib\\xml\\sax&#x27;) xml.sax.xmlreader False</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡ <code>pkgutil.walk_packages</code> å¯ä»¥éå†ä¸€ä¸ªæ¨¡å—æ‰€æœ‰çš„å­æ¨¡å—ã€‚<br>&emsp;&emsp;<code>from setuptools import find_packages</code> ä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½<br>&emsp;&emsp;ä½†æ˜¯ <code>find_packages</code> é¢å¯¹å‘½åç©ºé—´æ¨¡å—ä¸å¥½ä½¿ï¼Œä½†æ˜¯ <code>walk_packages</code> å¥½ä½¿ã€‚(åŸå› æ˜¯ <code>find_packages</code> é€šè¿‡ <code>os.walk</code> å»æŸ¥æ‰¾è·¯å¾„çš„)<br>&emsp;&emsp;ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹å¼å°†å¯¹åº”æ¨¡å—çš„ç¼“å­˜è¿›è¡Œåˆ é™¤~</p></blockquote><h3 id="åˆ¤æ–­æ¨¡å—æ˜¯å¦å­˜åœ¨"><a href="#åˆ¤æ–­æ¨¡å—æ˜¯å¦å­˜åœ¨" class="headerlink" title="åˆ¤æ–­æ¨¡å—æ˜¯å¦å­˜åœ¨"></a>åˆ¤æ–­æ¨¡å—æ˜¯å¦å­˜åœ¨</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">importable</span>(<span class="params">module_name</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="built_in">__import__</span>(module_name)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">except</span> ImportError:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è¿‡å»åˆ¤æ–­ä¸€æ¨¡å—æ˜¯å¦å¯ä»¥ import é€šå¸¸ä½¿ç”¨å¼‚å¸¸è¿›è¡Œå¤„ç†ã€‚<br>&emsp;&emsp;å…¶å® <code>pkgutil.find_loader</code> ä¹Ÿå¯ä»¥è¿”å›æ¨¡å—æ˜¯å¦å¯ä»¥ import</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pkgutil</span><br><span class="line">loader = pkgutil.find_loader(<span class="string">&quot;os&quot;</span>)</span><br><span class="line">maya = loader.load_module(<span class="string">&quot;os&quot;</span>) <span class="keyword">if</span> loader <span class="keyword">else</span> <span class="literal">None</span></span><br><span class="line"><span class="built_in">print</span>(maya)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¦‚æœæ¨¡å—å¯ä»¥å¯¼å…¥ä¼šè¿”å›å¯¹åº”çš„ <code>loader</code>ï¼Œä½¿ç”¨ <code>load_module</code> å¯ä»¥è¿›è¡ŒåŠ è½½ã€‚<br>æ³¨: py2 çš„ <code>load_module</code> å¿…é¡»è¦ä¼ å‚ã€‚</p></blockquote><h2 id="è‡ªå®šä¹‰-import-è¡Œä¸º"><a href="#è‡ªå®šä¹‰-import-è¡Œä¸º" class="headerlink" title="è‡ªå®šä¹‰ import è¡Œä¸º"></a>è‡ªå®šä¹‰ import è¡Œä¸º</h2><blockquote><p>&emsp;&emsp;é™¤äº† <code>sys.path</code> é€šè¿‡ç³»ç»Ÿè·¯å¾„æŸ¥æ‰¾ python åŒ…è¿›è¡ŒåŠ è½½ä¹‹å¤–ã€‚<br>&emsp;&emsp;Python è¿˜æœ‰ <code>sys.meta_path</code> å­˜å‚¨ä¸€ç³»åˆ— Finder ç±» (Py3è¿˜éœ€è¦ <code>Loader</code> ç±») æ¥è‡ªå®šä¹‰ import é€»è¾‘ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> types</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CustomFinder</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.submodule_search_locations = []</span><br><span class="line">        self.has_location = <span class="literal">False</span></span><br><span class="line">        self.origin = <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_module</span>(<span class="params">self, spec</span>):</span><br><span class="line">        <span class="keyword">return</span> self.load_module(spec.name)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">exec_module</span>(<span class="params">self, module</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;Execute the given module in its own namespace</span></span><br><span class="line"><span class="string">        This method is required to be present by importlib.abc.Loader,</span></span><br><span class="line"><span class="string">        but since we know our module object is already fully-formed,</span></span><br><span class="line"><span class="string">        this method merely no-ops.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">find_spec</span>(<span class="params">self, fullname,*args</span>):</span><br><span class="line">        self.name = fullname</span><br><span class="line">        self.loader = self</span><br><span class="line">        <span class="keyword">return</span> self.find_module()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># NOTES(timmyliang): compat with Python2</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">find_module</span>(<span class="params">self,*args</span>):</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">load_module</span>(<span class="params">self, fullname</span>):</span><br><span class="line">        module = sys.modules.get(fullname)</span><br><span class="line">        <span class="keyword">if</span> module:</span><br><span class="line">            <span class="keyword">return</span> module</span><br><span class="line">        </span><br><span class="line">        new_module = types.ModuleType(fullname)</span><br><span class="line">        sys.modules[fullname] = new_module</span><br><span class="line">        new_module.__name__ = fullname</span><br><span class="line">        new_module.__loader__ = self</span><br><span class="line">        <span class="keyword">return</span> new_module</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    sys.meta_path.append(CustomFinder())</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">import</span> myapp</span><br><span class="line">    <span class="built_in">print</span>(myapp)  </span><br><span class="line">    <span class="comment"># Py3: &lt;module &#x27;myapp&#x27; (&lt;__main__.CustomFinder object at 0x000002A2A2904808&gt;)&gt;</span></span><br><span class="line">    <span class="comment"># Py2: &lt;module &#x27;myapp&#x27; (built-in)&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¸Šé¢çš„ä»£ç å®ç°äº† py2 py3 çš„ Finder å…¼å®¹ã€‚<br>&emsp;&emsp;å¯ä»¥å®ç°åŠ è½½ä»»æ„åç§°çš„æ¨¡å—éƒ½èƒ½æˆåŠŸè¿”å›è€Œä¸ä¼šå¼•å‘ ImportError<br>&emsp;&emsp;å½“ç„¶è¿™ç§æ“ä½œå¦‚æœç”¨åˆ°é¡¹ç›®é‡Œé¢ï¼Œè‚¯å®šä¼šè¢«äººæ‰“æ­» ğŸ˜„</p></blockquote><blockquote><p>&emsp;&emsp;åœ¨ Py2 ç¯å¢ƒä¸‹ Finder éœ€è¦å®ç° <code>find_module</code> å’Œ <code>load_module</code> æ–¹æ³•<br>&emsp;&emsp;Py3 ç¯å¢ƒå¯ä»¥å‚è€ƒä¸‹é¢çš„é“¾æ¥ã€‚</p></blockquote><p><a href="https://stackoverflow.com/a/58275573/13452951">https://stackoverflow.com/a/58275573/13452951</a></p><blockquote><p>&emsp;&emsp;éœ€è¦æœ‰ Finder éœ€è¦å®ç° <code>find_spec</code> è¿”å› <code>ModuleSpec</code> ç±»ï¼Œè¿™ä¸ªç±»éœ€è¦æœ‰ <code>Loader</code> è¿›è¡ŒåŠ è½½é€»è¾‘</p></blockquote><blockquote><p>&emsp;&emsp;å®˜æ–¹æä¾›çš„ <code>zipimport.zipimporter</code> åœ¨ Py2 ä¸‹æ˜¯ Finder ï¼Œåœ¨ Py3 ä¸‹æ˜¯ Loaderã€‚<br>&emsp;&emsp;å¯ä»¥ä»ä¸‹é¢å®˜æ–¹æ–‡æ¡£çš„ç±»æ–¹æ³•ä¸­çœ‹å‡ºæ¥ã€‚</p></blockquote><p><a href="https://docs.python.org/2.7/library/zipimport.html?highlight=zip#module-zipimport">https://docs.python.org/2.7/library/zipimport.html?highlight=zip#module-zipimport</a><br><a href="https://docs.python.org/3.10/library/zipimport.html?highlight=zip#module-zipimport">https://docs.python.org/3.10/library/zipimport.html?highlight=zip#module-zipimport</a></p><blockquote><p>&emsp;&emsp;é€šè¿‡éœ€æ”¹ import æœºåˆ¶ï¼Œå¯ä»¥å®ç°å¾ˆå¤šé»‘ç§‘æŠ€ï¼Œä½†æ˜¯æ¨èä½¿ç”¨ä¾µå…¥æ€§è¾ƒå°çš„ä½¿ç”¨æ–¹å¼ã€‚<br>&emsp;&emsp;è¿™ä¸ªæœºåˆ¶å¯ä»¥è®©ï¼ŒæŸä¸ªæ¨¡å—å¯ä»¥è™šç©ºå¯¼å…¥ä¸æŠ¥é”™ï¼Œè¿™ä¸ç¬¦åˆæ­£å¸¸ä½¿ç”¨ Python çš„é€»è¾‘ï¼Œå¯èƒ½ä¼šè®©å›¢é˜Ÿå…¶ä»–äººå¾ˆæ‡µé€¼çš„ã€‚<br>&emsp;&emsp;å¦‚æœæŸä¸ª BUG æ˜¯å› ä¸ºè¿™ä¸ªæœºåˆ¶å¯¼è‡´çš„ï¼Œå…¶ä»–äººåˆä¸ç†Ÿæ‚‰è¿™å—çš„è¯ï¼Œé‚£è¿™é—®é¢˜æŸ¥åŠå¤©ä¹Ÿä¸ä¸€å®šæœ‰ç»“æœ ğŸ˜¢</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;æœ¬æ¬¡æ·±å…¥æµ…å‡ºåœ°å­¦ä¹ äº† Python Import çš„å„ç§åº•å±‚é€»è¾‘ã€‚<br>&emsp;&emsp;ä»¥åæœ‰æœºä¼šçš„è¯ä¹Ÿæƒ³å¥½å¥½å­¦ä¹ ä¸€ä¸‹ CPython çš„åº•å±‚å®ç°ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      è‡ªåŠ¨ unload æ¨¡å— &amp; meta import å­¦ä¹ 
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
      <category term="å·¥å…·å¼€å‘" scheme="https://blog.l0v0.com/categories/Python/%E5%B7%A5%E5%85%B7%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Python doit åº“</title>
    <link href="https://blog.l0v0.com/posts/b552c0c3.html"/>
    <id>https://blog.l0v0.com/posts/b552c0c3.html</id>
    <published>2022-03-28T07:50:36.000Z</published>
    <updated>2022-07-30T07:31:57.893Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;ä»£ç å¼€å‘çš„è¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°ä¸€äº›æƒ…å†µæƒ³è¦é€šè¿‡ ä»£ç  æ¥è‡ªåŠ¨æ‰§è¡Œå‘½ä»¤è¡Œç”Ÿæˆä¸€äº›ä¸œè¥¿çš„æƒ…å†µã€‚<br>&emsp;&emsp;å¦‚æœä¸ä½¿ç”¨æ¡†æ¶è¿›è¡Œç®¡ç†ï¼Œè¿™äº›ä»£ç è„šæœ¬å°±å¾ˆé›¶ç¢åœ°æ•£è½åœ¨å„ä¸ªåœ°æ–¹ã€‚<br>&emsp;&emsp;å› æ­¤å°±æ‰¾åˆ°è¿™ä¸ªæ¡†æ¶å¯ä»¥å¾ˆæ–¹ä¾¿ç®¡ç†å¤šä¸ªä»»åŠ¡ï¼Œå®ç°</p></blockquote><p><a href="https://github.com/pydoit/doit">Github åœ°å€</a><br><a href="https://pydoit.org/">å®˜æ–¹è¯´æ˜æ–‡æ¡£</a></p><h2 id="doit-çš„åŸºæœ¬ç”¨æ³•"><a href="#doit-çš„åŸºæœ¬ç”¨æ³•" class="headerlink" title="doit çš„åŸºæœ¬ç”¨æ³•"></a>doit çš„åŸºæœ¬ç”¨æ³•</h2><blockquote><p>&emsp;&emsp;åœ¨ doit æ‰§è¡Œå‘½ä»¤çš„åœ°æ–¹æ·»åŠ ä¸€ä¸ª <code>dodo.py</code> çš„è„šæœ¬<br>&emsp;&emsp;doit ä¼šå»è¯»å– <code>dodo.py</code> é‡Œé¢å‘½åå¼€å¤´ä¸º <code>task_</code> çš„æ–¹æ³•ä½œä¸ºæ‰§è¡Œçš„å‘½ä»¤ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">task_hello</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;hello&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">python_hello</span>(<span class="params">targets</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(targets[<span class="number">0</span>], <span class="string">&quot;a&quot;</span>) <span class="keyword">as</span> output:</span><br><span class="line">            output.write(<span class="string">&quot;Python says Hello World!!!\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&#x27;actions&#x27;</span>: [python_hello],</span><br><span class="line">        <span class="string">&#x27;targets&#x27;</span>: [<span class="string">&quot;hello.txt&quot;</span>],</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ¯”å¦‚æ·»åŠ ä¸Šé¢çš„æ–¹æ³•åˆ° <code>dodo.py</code> é‡Œé¢<br>&emsp;&emsp;æ‰§è¡Œ <code>doit list</code> å¯ä»¥ç½—åˆ—å‡ºå½“å‰çš„å¯æ‰§è¡Œçš„å‘½ä»¤</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">F:\thm_git\adam_pose_editor&gt;doit list</span><br><span class="line">hello   hello</span><br><span class="line">F:\thm_git\adam_pose_editor&gt;doit hello</span><br><span class="line">.  hello</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ‰§è¡Œ <code>doit hello</code> å°±ä¼šåœ¨ <code>dodo.py</code> ç¼©åœ¨ç›®å½•ä¸‹è¾“å‡ºä¸€ä¸ª hello.txt çš„æ–‡ä»¶ã€‚<br>&emsp;&emsp;è¿™ä¸ªå°±æ˜¯ doit çš„åŸºæœ¬ç”¨æ³•ã€‚</p></blockquote><h3 id="dodo-py-é…ç½®"><a href="#dodo-py-é…ç½®" class="headerlink" title="dodo.py é…ç½®"></a>dodo.py é…ç½®</h3><p><a href="https://pydoit.org/configuration.html">https://pydoit.org/configuration.html</a></p><blockquote><p>&emsp;&emsp;å¯ä»¥ä½¿ç”¨ <code>doit -f xxx/dodo.py</code> é…ç½® <code>dodo.py</code> çš„è·¯å¾„<br>&emsp;&emsp;ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>pyproject.toml</code> è¿›è¡Œé…ç½®</p></blockquote><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[tool.doit]</span></span><br><span class="line"><span class="attr">dodoFile</span> = <span class="string">&quot;scripts/dodo.py&quot;</span></span><br></pre></td></tr></table></figure><h3 id="task-é…ç½®"><a href="#task-é…ç½®" class="headerlink" title="task é…ç½®"></a>task é…ç½®</h3><blockquote><p>&emsp;&emsp;<code>dodo.py</code> çš„ task æ”¯æŒå¯¼å…¥<br>&emsp;&emsp;åªè¦æ˜¯ <code>task_</code> å‰ç¼€çš„æ–¹æ³•å°±ä¼šè‡ªåŠ¨è¯†åˆ«ã€‚<br>&emsp;&emsp;ä¹Ÿå¯ä»¥ç»™å‡½æ•°æ·»åŠ  <code>create_doit_tasks</code> å±æ€§ï¼Œè¿™æ ·å°±å¯ä»¥è‡ªåŠ¨ç”Ÿæˆäº†ã€‚ <a href="https://pydoit.org/task-creation.html#custom-task-definition">æ–‡æ¡£é“¾æ¥</a></p></blockquote><blockquote><p>&emsp;&emsp;åˆ©ç”¨è¿™äº›æœºåˆ¶ï¼Œæˆ‘æäº†ä¸€ä¸ªè£…é¥°å™¨å¯ä»¥ç»™ task æ·»åŠ ä¸€ä¸ªçŸ­åçš„æ–¹æ¡ˆã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add_short_name</span>(<span class="params">short_name</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Doit for short decorator.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        short_name (str): short alias name.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        callable: decoartor function.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decorator</span>(<span class="params">func</span>):</span><br><span class="line">        <span class="built_in">globals</span>()[<span class="string">&quot;task_&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(short_name)] = func  <span class="comment"># noqa: WPS421</span></span><br><span class="line">        <span class="keyword">return</span> func</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line"></span><br><span class="line"><span class="meta">@add_short_name(<span class="params"><span class="string">&quot;pf&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_preflight</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Run pre commit for all files.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        dict: doit config.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    command = [<span class="string">&quot;poetry&quot;</span>, <span class="string">&quot;run&quot;</span>, <span class="string">&quot;pre-commit&quot;</span>, <span class="string">&quot;run&quot;</span>, <span class="string">&quot;-a&quot;</span>]</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;actions&quot;</span>: [command], <span class="string">&quot;verbosity&quot;</span>: <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è¿™æ ·è¿è¡Œ doit ä¼šè¯†åˆ«åˆ°ä¸¤ä¸ª task ï¼Œå¯ä»¥åˆ†åˆ«é€šè¿‡ <code>doit pf</code> æˆ–è€… <code>doit preflight</code> è§¦å‘æŒ‡ä»¤</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;doit list </span><br><span class="line">pf          Run pre commit <span class="keyword">for</span> all files.</span><br><span class="line">preflight   Run pre commit <span class="keyword">for</span> all files.</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä½†æ˜¯é»˜è®¤æ’åºæ˜¯æŒ‰å‘½åæ¥çš„ï¼Œå¦‚æœå‘½ä»¤å¾ˆå¤šå°±ä¼šæ··åœ¨ä¸€èµ·</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt;doit list </span><br><span class="line">b             Run black format all python files.</span><br><span class="line">black         Run black format all python files.</span><br><span class="line">d             Run mkdocs serve.</span><br><span class="line"><span class="built_in">dd</span>            Run mike to deploy docs.</span><br><span class="line">docs          Run mkdocs serve.</span><br><span class="line">docs_deploy   Run mike to deploy docs.</span><br><span class="line">f             Run `black` `isort`.</span><br><span class="line">format        Run `black` `isort`.</span><br><span class="line">i             Run isort format all python files.</span><br><span class="line">isort         Run isort format all python files.</span><br><span class="line">l             Run flakehell lint <span class="keyword">for</span> all python files.</span><br><span class="line">lint          Run flakehell lint <span class="keyword">for</span> all python files.</span><br><span class="line">m             Run mike serve.</span><br><span class="line">mike          Run mike serve.</span><br><span class="line">pf            Run pre commit <span class="keyword">for</span> all files.</span><br><span class="line">preflight     Run pre commit <span class="keyword">for</span> all files.</span><br><span class="line">pt            Run pytest.</span><br><span class="line">pytest        Run pytest.</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¯ä»¥ä½¿ç”¨ doit list â€“sort=definition çš„æ–¹å¼è®©æ’åºå˜æˆåˆ›å»ºé¡ºåºã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt;doit list --<span class="built_in">sort</span>=definition</span><br><span class="line">f             Run `black` `isort`.</span><br><span class="line">format        Run `black` `isort`.</span><br><span class="line">pf            Run pre commit <span class="keyword">for</span> all files.</span><br><span class="line">preflight     Run pre commit <span class="keyword">for</span> all files.</span><br><span class="line">b             Run black format all python files.</span><br><span class="line">black         Run black format all python files.</span><br><span class="line">i             Run isort format all python files.</span><br><span class="line">isort         Run isort format all python files.</span><br><span class="line">l             Run flakehell lint <span class="keyword">for</span> all python files.</span><br><span class="line">lint          Run flakehell lint <span class="keyword">for</span> all python files.</span><br><span class="line">pt            Run pytest.</span><br><span class="line">pytest        Run pytest.</span><br><span class="line">d             Run mkdocs serve.</span><br><span class="line">docs          Run mkdocs serve.</span><br><span class="line">m             Run mike serve.</span><br><span class="line">mike          Run mike serve.</span><br><span class="line"><span class="built_in">dd</span>            Run mike to deploy docs.</span><br><span class="line">docs_deploy   Run mike to deploy docs.</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä½†æ˜¯æ¯æ¬¡ä½¿ç”¨éƒ½è¦åŠ ä¸€ä¸ªå‚æ•°é…ç½®ï¼Œé‚£æ˜¯ç›¸å½“çš„éº»çƒ¦ã€‚<br>&emsp;&emsp;æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>DOIT_CONFIG</code> è¿›è¡Œé…ç½® <a href="https://pydoit.org/configuration.html#configuration-at-dodo-py">æ–‡æ¡£é“¾æ¥</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DOIT_CONFIG = &#123;</span><br><span class="line">    <span class="string">&quot;sort&quot;</span>: <span class="string">&quot;definition&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="task-group"><a href="#task-group" class="headerlink" title="task group"></a>task group</h3><blockquote><p>&emsp;&emsp;å¯ä»¥ä½¿ç”¨ <code>task_dep</code> çš„æ–¹å¼æ‰§è¡Œå¤šä¸ªå®šä¹‰å¥½çš„ task <a href="https://pydoit.org/task-creation.html#custom-task-definition">æ–‡æ¡£é“¾æ¥</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> glob</span><br><span class="line">DIR = os.path.dirname(__file__)</span><br><span class="line">PY_FILES = glob.glob(os.path.join(DIR, <span class="string">&quot;**/*.py&quot;</span>), recursive=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">@add_short_name(<span class="params"><span class="string">&quot;f&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_format</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Run `black` `isort`.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        dict: doit config.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;actions&quot;</span>: <span class="literal">None</span>, <span class="string">&quot;task_dep&quot;</span>: [<span class="string">&quot;black&quot;</span>, <span class="string">&quot;isort&quot;</span>]&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@add_short_name(<span class="params"><span class="string">&quot;b&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_black</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Run black format all python files.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        dict: doit config.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    command = [<span class="string">&quot;poetry&quot;</span>, <span class="string">&quot;run&quot;</span>, <span class="string">&quot;black&quot;</span>] + PY_FILES</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;actions&quot;</span>: [command], <span class="string">&quot;verbosity&quot;</span>: <span class="number">2</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@add_short_name(<span class="params"><span class="string">&quot;i&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_isort</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Run isort format all python files.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        dict: doit config.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    command = [<span class="string">&quot;poetry&quot;</span>, <span class="string">&quot;run&quot;</span>, <span class="string">&quot;isort&quot;</span>] + PY_FILES</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;actions&quot;</span>: [command], <span class="string">&quot;verbosity&quot;</span>: <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡ä¸Šé¢çš„é…ç½®å°±å¯ä»¥å¿«é€Ÿç»™æ‰€æœ‰çš„ python è„šæœ¬è¿è¡Œ black å’Œ isort </p></blockquote><h3 id="task-ä¼ å‚"><a href="#task-ä¼ å‚" class="headerlink" title="task ä¼ å‚"></a>task ä¼ å‚</h3><p><a href="https://pydoit.org/task-args.html#task-action-parameters">æ–‡æ¡£é“¾æ¥</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">gen_api</span>(<span class="params">api</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Generate API docs.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        api (bool): flag to generate docs</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        str: running command</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># NOTES(timmyliang): remove reference api</span></span><br><span class="line">    rmtree(os.path.join(DIR, <span class="string">&quot;docs&quot;</span>, <span class="string">&quot;reference&quot;</span>), ignore_errors=<span class="literal">True</span>)</span><br><span class="line">    script_path = os.path.join(DIR, <span class="string">&quot;docs&quot;</span>, <span class="string">&quot;gen_api_nav.py&quot;</span>)</span><br><span class="line">    api_command = <span class="string">&quot; &quot;</span>.join([<span class="string">&quot;poetry&quot;</span>, <span class="string">&quot;run&quot;</span>, <span class="string">&quot;python&quot;</span>, script_path])</span><br><span class="line">    serve_command = <span class="string">&quot; &quot;</span>.join([<span class="string">&quot;poetry&quot;</span>, <span class="string">&quot;run&quot;</span>, <span class="string">&quot;mkdocs&quot;</span>, <span class="string">&quot;serve&quot;</span>])</span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;api_command&#125;</span> &amp; <span class="subst">&#123;serve_command&#125;</span>&quot;</span> <span class="keyword">if</span> api <span class="keyword">else</span> serve_command</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@add_short_name(<span class="params"><span class="string">&quot;d&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_docs</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Run mkdocs serve.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        dict: doit config.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&quot;actions&quot;</span>: [CmdAction(gen_api)],</span><br><span class="line">        <span class="string">&quot;params&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;name&quot;</span>: <span class="string">&quot;api&quot;</span>,</span><br><span class="line">                <span class="string">&quot;short&quot;</span>: <span class="string">&quot;a&quot;</span>,</span><br><span class="line">                <span class="string">&quot;type&quot;</span>: <span class="built_in">bool</span>,</span><br><span class="line">                <span class="string">&quot;default&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">                <span class="string">&quot;inverse&quot;</span>: <span class="string">&quot;flagoff&quot;</span>,</span><br><span class="line">                <span class="string">&quot;help&quot;</span>: <span class="string">&quot;generate api docs&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;verbosity&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡ <code>params</code> å®šä¹‰ä¼ å…¥çš„å‚æ•°ï¼Œå°±å¯ä»¥æ§åˆ¶ mkdocs æ˜¯å¦è‡ªåŠ¨ç”Ÿæˆ api çš„ markdown è„šæœ¬ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;ç›®å‰æˆ‘ä½¿ç”¨ä¸Šé¢çš„å†™æ³•å·²ç»å¾ˆå¤Ÿç”¨äº†ï¼Œå…¶å®å®ƒè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„é…ç½®å¯ä»¥ç”¨æ¥åš C ç¼–è¯‘ã€‚<br>&emsp;&emsp;è¿˜å¯ä»¥å®šä¹‰ task ä¾èµ– å’Œ æ–‡ä»¶ä¾èµ–ï¼Œç¡®ä¿ task çš„æ‰§è¡Œé¡ºåºã€‚<br>&emsp;&emsp;æ•´ä½“è€Œè¨€ï¼Œdoit æ˜¯ä¸ªéå¸¸ç®€å•è€Œæ˜¯ç”¨çš„æ¡†æ¶ï¼Œé…ç½® tox ç­‰å·¥å…·å¯è°“æ˜¯é”¦ä¸Šæ·»èŠ±ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      Python ä»»åŠ¡ç®¡ç†å‘½ä»¤è¡Œ
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Python dependencies åº“</title>
    <link href="https://blog.l0v0.com/posts/7aa50252.html"/>
    <id>https://blog.l0v0.com/posts/7aa50252.html</id>
    <published>2022-03-28T01:50:26.000Z</published>
    <updated>2022-07-30T07:31:57.892Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;åœ¨ Java Spring Boot ç­‰ç­‰çš„åç«¯é¢†åŸŸï¼Œä¼šå¤§é‡ä½¿ç”¨ä¾èµ–æ³¨å…¥çš„æ–¹å¼æ¥ç®€åŒ–å¤æ‚çš„è®¾è®¡æ¨¡å¼ã€‚<br>&emsp;&emsp;å®ç°å‚æ•°çš„è‡ªåŠ¨åŒ–æ³¨å…¥ã€‚<br>&emsp;&emsp;è¿™äº›è®¾è®¡æ–¹å¼åœ¨ Python çš„ä¸–ç•Œé‡Œä½¿ç”¨ä¸å¤šï¼Œå› ä¸º Python è¯­è¨€è¶³å¤Ÿçµæ´»ã€‚<br>&emsp;&emsp;å€˜è‹¥éœ€è¦å¼€å‘å¤æ‚çš„æ¡†æ¶ï¼Œä½¿ç”¨ ä¾èµ–æ³¨å…¥ æ¡†æ¶å¯ä»¥ç®€åŒ–å¾ˆå¤šä»£ç ã€‚</p></blockquote><p><a href="https://github.com/proofit404/dependencies">Github åœ°å€</a><br><a href="https://proofit404.github.io/dependencies/">å®˜æ–¹è¯´æ˜æ–‡æ¡£</a></p><h2 id="ä¾èµ–æ³¨å…¥è§£å†³çš„é—®é¢˜"><a href="#ä¾èµ–æ³¨å…¥è§£å†³çš„é—®é¢˜" class="headerlink" title="ä¾èµ–æ³¨å…¥è§£å†³çš„é—®é¢˜"></a>ä¾èµ–æ³¨å…¥è§£å†³çš„é—®é¢˜</h2><p><a href="https://sobolevn.me/2020/02/typed-functional-dependency-injection">å‚è€ƒæ–‡ç« </a></p><blockquote><p>&emsp;&emsp;åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬çš„æ–¹æ³•è°ƒç”¨å¯èƒ½ä¼šè¶Šæ¥è¶Šæ·±ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot</span>(<span class="params">robot_name</span>):</span><br><span class="line">    create_robot_hand()</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot_hand</span>():</span><br><span class="line">    create_robot_finger()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot_finger</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;create_robot_finger&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¸Šé¢æ˜¯ä¸€ä¸ªç®€å•çš„æœºå™¨äººåˆ›å»ºè°ƒç”¨å‡½æ•°ã€‚<br>&emsp;&emsp;è°ƒç”¨æ–¹å¼ä¼šä¼´éšåˆ™ç³»ç»Ÿçš„å¤æ‚ç¨‹åº¦é€å±‚æ·±å…¥ã€‚<br>&emsp;&emsp;åˆ°äº† <code>create_robot_finger</code> æ·±åº¦çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šéœ€è¦åœ¨ä¸Šå±‚ä¼ å…¥å‚æ•°æ§åˆ¶ finger çš„æ•°é‡</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot</span>(<span class="params">robot_name,finger_num=<span class="number">10</span></span>):</span><br><span class="line">    create_robot_hand(finger_num=finger_num)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot_hand</span>(<span class="params">finger_num=<span class="number">10</span></span>):</span><br><span class="line">    create_robot_finger(finger_num=finger_num)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot_finger</span>(<span class="params">finger_num=<span class="number">10</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;create_robot_finger finder_number:&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(finger_num))</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è¿™éœ€è¦å°†å‚æ•°è¡¥å……åˆ° è°ƒç”¨é“¾æ¡ çš„æ¯ä¸€ä¸ªå‡½æ•°å½“ä¸­ã€‚<br>&emsp;&emsp;å¦‚æœåªæ˜¯ä¸Šé¢çš„ ä¸‰å±‚ è°ƒç”¨æ·±åº¦ï¼Œé‚£å¯èƒ½æ‰‹åŠ¨ä¿®æ”¹ç»´æŠ¤è¿˜ä¸æ˜¯ä»€ä¹ˆé—®é¢˜ã€‚<br>&emsp;&emsp;ä½†å€˜è‹¥è°ƒç”¨æ·±åº¦å¾ˆæ·±ï¼Œé‚£è¿™ä¸ªä»£ç ä¿®æ”¹é‡å°±ä¼šéå¸¸åºå¤§ã€‚<br>&emsp;&emsp;ä¸åˆ©äºä»£ç çš„æ‰©å±•å’Œç»´æŠ¤ã€‚</p></blockquote><hr><blockquote><p>&emsp;&emsp;åœ¨ Python çš„ä¸–ç•Œé‡Œï¼Œè§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æœ‰å¾ˆå¤šã€‚</p><ol><li>å¯¼å…¥ é…ç½® æ¨¡å—ï¼Œå¤–éƒ¨è·å–å‚æ•°é…ç½®</li><li>é¢å‘å¯¹è±¡ æ³¨å…¥ä¾èµ–ï¼Œä»å®ä¾‹åŒ–ä¸­è·å–å‚æ•°é…ç½®</li></ol></blockquote><h3 id="æ–¹æ¡ˆä¸€-å¯¼å…¥æ¨¡å—"><a href="#æ–¹æ¡ˆä¸€-å¯¼å…¥æ¨¡å—" class="headerlink" title="æ–¹æ¡ˆä¸€ å¯¼å…¥æ¨¡å—"></a>æ–¹æ¡ˆä¸€ å¯¼å…¥æ¨¡å—</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;settings.py&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> absolute_import</span><br><span class="line"></span><br><span class="line">ROBOT_FINGER_NUM = <span class="number">10</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> settings</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot</span>(<span class="params">robot_name</span>):</span><br><span class="line">    create_robot_hand()</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot_hand</span>():</span><br><span class="line">    create_robot_finger()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_robot_finger</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;create_robot_finger finder_number:&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(settings.ROBOT_FINGER_NUM))</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡æ¨¡å—çš„æ–¹å¼å°†å‚æ•°è½¬ç§»åˆ°å¤–éƒ¨ï¼Œè¿›è¡Œé…ç½®ã€‚<br>&emsp;&emsp;è¿™ä¸ªåšæ³•å¯ä»¥è§£å†³å‚æ•°ä¼ é€’çš„é—®é¢˜ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ç¼ºç‚¹å°±æ˜¯å‚æ•°ç®¡ç†ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œé€šå¸¸æ˜¯å°†å…¨å±€é…ç½®çš„å‚æ•°éƒ½æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶æ–¹ä¾¿é›†ä¸­ç®¡ç†ã€‚<br>&emsp;&emsp;ä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´ä¸åŒçš„é€»è¾‘è°ƒç”¨çš„å‚æ•°éƒ½ä¼šå¡åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œå¹¶ä¸æ˜¯ååˆ†æ•´æ´ã€‚</p></blockquote><h3 id="æ–¹æ¡ˆäºŒ-æ³¨å…¥ä¾èµ–"><a href="#æ–¹æ¡ˆäºŒ-æ³¨å…¥ä¾èµ–" class="headerlink" title="æ–¹æ¡ˆäºŒ æ³¨å…¥ä¾èµ–"></a>æ–¹æ¡ˆäºŒ æ³¨å…¥ä¾èµ–</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dependencies <span class="keyword">import</span> Injector</span><br><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Robot</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    finger_num = attr.ib(default=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_robot</span>(<span class="params">self,robot_name</span>):</span><br><span class="line">        self.create_robot_hand()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_robot_hand</span>(<span class="params">self</span>):</span><br><span class="line">        self.create_robot_finger()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_robot_finger</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;create_robot_finger finder_number:&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(self.finger_num))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Container</span>(<span class="title class_ inherited__">Injector</span>):</span><br><span class="line">    finger_num = <span class="number">10</span></span><br><span class="line">    robot = Robot</span><br><span class="line">Container.robot.create_robot(<span class="string">&quot;robot name&quot;</span>)</span><br><span class="line"><span class="comment"># æ‰“å° create_robot_finger finder_number:10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># `dependencies` çš„å®ç°ç­‰ä»·äºä¸‹é¢çš„ä»£ç </span></span><br><span class="line">robot = Robot(finger_num=<span class="number">10</span>)</span><br><span class="line">robot.create_robot(<span class="string">&quot;robot name&quot;</span>)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä½¿ç”¨ <code>dependencies</code> åº“å®ç°ä¾èµ–æ³¨å…¥ï¼Œè‡ªåŠ¨å°†å®¹å™¨å†…çš„æ•°æ®å¡«å……åˆ° ç±»çš„å®ä¾‹åŒ–è¿‡ç¨‹ä¸­ã€‚<br>&emsp;&emsp;é€šè¿‡ç±»çš„å±æ€§å®ç°å‚æ•°ä¼ é€’ã€‚</p></blockquote><h2 id="dependencies-ä»‹ç»"><a href="#dependencies-ä»‹ç»" class="headerlink" title="dependencies ä»‹ç»"></a>dependencies ä»‹ç»</h2><blockquote><p>&emsp;&emsp;é€šè¿‡ä¸Šé¢çš„æ¡ˆä¾‹å¯ä»¥çœ‹åˆ°ã€‚<br>&emsp;&emsp;<code>dependencies</code> å¯ä»¥è‡ªåŠ¨å®ä¾‹åŒ–ç±»ï¼Œå¡«å……ç±»åˆå§‹åŒ–éœ€è¦çš„å‚æ•°ã€‚<br>&emsp;&emsp;ä½†å®ƒçš„åŠŸèƒ½è¿˜è¿œä¸æ­¢è¿™ä¹ˆç®€å•ã€‚<br>&emsp;&emsp;å®ƒè¿˜å¯ä»¥å®ç°å¤šä¸ªç±»å®ä¾‹åŒ–çš„è‡ªåŠ¨å¡«å……ï¼Œåªè¦å‚æ•°å˜é‡åå‘½åé…ç½®å¥½å³å¯ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dependencies <span class="keyword">import</span> Injector</span><br><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Robot</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    servo = attr.ib()</span><br><span class="line">    controller = attr.ib()</span><br><span class="line">    settings = attr.ib()</span><br><span class="line">    di_environment = attr.ib()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;controller di_environment&quot;</span>,self.controller.di_environment)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;self di_environment&quot;</span>,self.di_environment)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;settings threshold&quot;</span>,self.settings.threshold)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;servo threshold&quot;</span>,self.servo.threshold)</span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Servo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    threshold = attr.ib()</span><br><span class="line">    </span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Controller</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    di_environment = attr.ib()</span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Settings</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    threshold = attr.ib()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Container</span>(<span class="title class_ inherited__">Injector</span>):</span><br><span class="line">    threshold = <span class="number">1</span></span><br><span class="line">    di_environment = <span class="string">&quot;production&quot;</span></span><br><span class="line">    </span><br><span class="line">    robot = Robot</span><br><span class="line">    servo = Servo</span><br><span class="line">    settings = Settings</span><br><span class="line">    controller = Controller</span><br><span class="line"></span><br><span class="line">Container.robot.run()</span><br><span class="line"><span class="comment"># æ‰“å°: </span></span><br><span class="line"><span class="comment"># controller di_environment production</span></span><br><span class="line"><span class="comment"># self di_environment production</span></span><br><span class="line"><span class="comment"># settings threshold 1</span></span><br><span class="line"><span class="comment"># servo threshold 1</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡ <code>dependencies</code> å¯ä»¥æ ¹æ®å±æ€§å‘½åè‡ªåŠ¨å¡«å……å¤šä¸ªç±»çš„å‚æ•°æ•°æ®ã€‚<br>&emsp;&emsp;container çš„é€»è¾‘ç­‰ä»·äºä¸‹é¢çš„ä»£ç </p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">threshold = <span class="number">1</span></span><br><span class="line">di_environment = <span class="string">&quot;production&quot;</span></span><br><span class="line">servo = Servo(threshold)</span><br><span class="line">settings = Settings(threshold)</span><br><span class="line">controller = Controller(di_environment)</span><br><span class="line">robot = Robot(servo,controller,settings,di_environment)</span><br><span class="line">robot.run()</span><br><span class="line"><span class="comment"># æ‰“å°: </span></span><br><span class="line"><span class="comment"># controller di_environment production</span></span><br><span class="line"><span class="comment"># self di_environment production</span></span><br><span class="line"><span class="comment"># settings threshold 1</span></span><br><span class="line"><span class="comment"># servo threshold 1</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä½†æ˜¯ <code>dependencies</code> åº“æ ¹æ®å‚æ•°çš„å‘½åè‡ªåŠ¨å®ä¾‹åŒ–å¯¹è±¡ï¼Œå‚æ•°çš„è°ƒæ•´å˜å¾—ç®€å•å¯æ§ã€‚</p></blockquote><h2 id="dependencies-å®ç°-caller-æ–¹æ³•"><a href="#dependencies-å®ç°-caller-æ–¹æ³•" class="headerlink" title="dependencies å®ç° caller æ–¹æ³•"></a>dependencies å®ç° caller æ–¹æ³•</h2><p><a href="https://sobolevn.me/2019/03/enforcing-srp">å‚è€ƒæ–‡ç« </a></p><blockquote><p>&emsp;&emsp;åˆ©ç”¨ ä¾èµ–æ³¨å…¥ å¯ä»¥åˆ†ç¦» ä¾èµ– å’Œ ä¸šåŠ¡ é€»è¾‘</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"><span class="keyword">from</span> dependencies <span class="keyword">import</span> Injector</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Editor</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">install_language</span>(<span class="params">self,lang</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;install language:&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(lang))</span><br><span class="line"></span><br><span class="line">editor = Editor()</span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s(<span class="params">frozen=<span class="literal">True</span>, slots=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ChangeLanguage</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    editor = attr.ib()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self,lang</span>):</span><br><span class="line">        self.editor.install_language(lang)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Container</span>(<span class="title class_ inherited__">Injector</span>):</span><br><span class="line">    editor = editor</span><br><span class="line">    change_language = ChangeLanguage</span><br><span class="line"></span><br><span class="line">Container.change_language(<span class="string">&quot;en_US&quot;</span>)</span><br><span class="line"><span class="comment"># æ‰“å°: install language:en_US</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;åˆ©ç”¨ dependencies å¯ä»¥æ„å»ºå‡º caller å¯¹è±¡ã€‚<br>&emsp;&emsp;caller è™½ç„¶ç”¨ç±»æ„å»ºï¼Œä½†æ˜¯è°ƒç”¨æ–¹å¼å’Œæ–¹æ³•ä¸€è‡´ï¼Œå¯ä»¥æ–¹æ³•éœ€è¦ç”¨åˆ°çš„ä¾èµ–ç”¨ç±»å®ä¾‹åŒ–çš„æ–¹å¼è¿›è¡Œæ³¨å…¥ã€‚<br>&emsp;&emsp;å®ç°ä¾èµ–å’Œä¼ å‚çš„åˆ†ç¦»ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;ä¾èµ–æ³¨å…¥å¯ä»¥å¾ˆå¥½è§£å†³å‡½æ•°è°ƒç”¨è¿‡æ·±çš„é—®é¢˜ï¼Œè®©ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      Python ä¾èµ–æ³¨å…¥å®ç°
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Python blinker åº“</title>
    <link href="https://blog.l0v0.com/posts/9ad5ab39.html"/>
    <id>https://blog.l0v0.com/posts/9ad5ab39.html</id>
    <published>2022-02-28T12:47:25.000Z</published>
    <updated>2022-07-30T07:31:57.885Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;Qt å†…ç½®äº†éå¸¸æ£’çš„ ä¿¡å·æ§½çš„å‡½æ•°ã€‚<br>&emsp;&emsp;å¯ä»¥è®© UI è¿›è¡Œå¼‚æ­¥è°ƒç”¨ã€‚<br>&emsp;&emsp;ä½†æ˜¯æœ‰äº›æ—¶å€™ï¼Œå¹¶ä¸æƒ³ä¾èµ– Qt æ¡†æ¶åŒæ—¶åˆèƒ½å®ç°ä¿¡å·æ§½çš„åŠŸèƒ½ã€‚<br>&emsp;&emsp;è¿™é‡Œå¯ä»¥ä½¿ç”¨ <code>blinker</code> åº“æ¥å®Œæˆã€‚</p></blockquote><p><a href="https://pythonhosted.org/blinker/">Github åœ°å€</a><br><a href="https://github.com/jek/blinker">å®˜æ–¹è¯´æ˜æ–‡æ¡£</a></p><h2 id="blinker-åŸºæœ¬ç”¨æ³•"><a href="#blinker-åŸºæœ¬ç”¨æ³•" class="headerlink" title="blinker åŸºæœ¬ç”¨æ³•"></a>blinker åŸºæœ¬ç”¨æ³•</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> blinker <span class="keyword">import</span> signal,Signal</span><br><span class="line"></span><br><span class="line">initialized = signal(<span class="string">&#x27;initialized&#x27;</span>)</span><br><span class="line">initialized <span class="keyword">is</span> signal(<span class="string">&#x27;initialized&#x27;</span>)</span><br><span class="line">sig = Signal()</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¯ä»¥ä½¿ç”¨åŒ¿åä¿¡å·æ§½ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¸¦åç§°çš„ä¿¡å·æ§½ã€‚</p></blockquote><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> blinker <span class="keyword">import</span> signal</span><br><span class="line">send_data = signal(<span class="string">&#x27;send-data&#x27;</span>)</span><br><span class="line"><span class="meta">@send_data.connect</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">receive_data</span>(<span class="params">sender, **kw</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Caught signal from %r, data %r&quot;</span> % (sender, kw))</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;received!&#x27;</span></span><br><span class="line">result = send_data.send(<span class="string">&#x27;anonymous&#x27;</span>, abc=<span class="number">123</span>)</span><br><span class="line"><span class="built_in">print</span>(result)  <span class="comment"># æ‰“å° [(&lt;function receive_data at 0x000002A3328D4DC8&gt;, &#x27;received!&#x27;)]</span></span><br><span class="line"><span class="comment"># æ‰“å° Caught signal from &#x27;anonymous&#x27;, data &#123;&#x27;abc&#x27;: 123&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¯ä»¥ç”¨è£…é¥°å™¨çš„æ–¹å¼è¿æ¥ä¿¡å·æ§½<br>&emsp;&emsp;è§¦å‘ä¿¡å·æ§½ä½¿ç”¨ send æ–¹æ³•<br>&emsp;&emsp;å¹¶ä¸”ä¿¡å·æ§½æ‰§è¡Œå®Œå¯ä»¥æ‹¿åˆ°å‡½æ•°è§¦å‘çš„è¿”å›å€¼ã€‚</p></blockquote><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> blinker <span class="keyword">import</span> signal</span><br><span class="line"></span><br><span class="line">dice_roll = signal(<span class="string">&#x27;dice_roll&#x27;</span>)</span><br><span class="line"><span class="meta">@dice_roll.connect_via(<span class="params"><span class="number">1</span></span>)</span></span><br><span class="line"><span class="meta">@dice_roll.connect_via(<span class="params"><span class="number">3</span></span>)</span></span><br><span class="line"><span class="meta">@dice_roll.connect_via(<span class="params"><span class="number">5</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">odd_subscriber</span>(<span class="params">sender</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Observed dice roll %r.&quot;</span> % sender)</span><br><span class="line">result = dice_roll.send(<span class="number">3</span>)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¦å¤–ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯å¯ä»¥æ ¹æ®è§¦å‘çš„å‚æ•°å»è§¦å‘ç›¸åº”æ³¨å†Œçš„å‡½æ•°ã€‚<br>&emsp;&emsp;Qt å› ä¸ºè¦ä½¿ç”¨ C++ï¼Œè¿™ç§æ³¨å†Œæ–¹å¼ä¼šéå¸¸éº»çƒ¦ã€‚</p></blockquote><hr><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> blinker <span class="keyword">import</span> signal</span><br><span class="line"></span><br><span class="line">initialized = signal(<span class="string">&quot;initialized&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@initialized.connect</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize_call1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;initialize_call1&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@initialized.connect</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize_call2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;initialize_call2&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@initialized.connect</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize_call3</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;initialize_call3&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> key, weakref <span class="keyword">in</span> initialized.receivers.items():</span><br><span class="line">    func = weakref()</span><br><span class="line">    func()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å°: </span></span><br><span class="line"><span class="comment"># initialize_call1</span></span><br><span class="line"><span class="comment"># initialize_call2</span></span><br><span class="line"><span class="comment"># initialize_call3</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡ä¿¡å·æ§½çš„ <code>receivers</code> æ–¹æ³•å¯ä»¥è·å–åˆ°æ³¨å†Œåˆ°ä¿¡å·æ§½çš„æ‰€æœ‰å‡½æ•°ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;è¿™ä¸ªåº“å¯ä»¥æ‘†è„± Qt çš„ä¾èµ–å®ç°å‡½æ•°çš„å¼‚æ­¥è°ƒç”¨ã€‚<br>&emsp;&emsp;å¦‚æœæ˜¯ Qt çš„ç¯å¢ƒå»ºè®®è¿˜æ˜¯ä½¿ç”¨ Qt å†…ç½®çš„ ä¿¡å·æ§½ï¼Œè¿™æ ·å¯ä»¥æ”¯æŒ Qt çš„å¤šçº¿ç¨‹ç­‰å¤„ç†ã€‚<br>&emsp;&emsp;ä½†å¦‚æœæ˜¯ Python ç¯å¢ƒä¸‹æƒ³è¦æ‘†è„± Qt çš„ä¾èµ–ï¼Œåˆ™æ¨è blinker æ¥å®Œæˆä¿¡å·è§¦å‘ã€‚<br>&emsp;&emsp;blinker è¿˜æœ‰ä¸ªå¥½å¤„æ˜¯å¯ä»¥è·å–åˆ°æ³¨å†Œçš„å‡½æ•°åˆ—è¡¨ï¼Œè€Œ Qt åŸºäº C++ çš„å¹¶æ²¡æœ‰æä¾›è¿™ä¸ªåŠŸèƒ½ï¼Œåªèƒ½é€šè¿‡ Meta å¯¹è±¡æ¥åˆ¤æ–­è¿™ä¸ªä¿¡å·æ§½æ˜¯å¦æœ‰å‡½æ•°è¿æ¥ã€‚ <a href="https://github.com/PyQt5/PyQt/blob/0c8e7d33d7a1da7a53a6b6d15869095f1626faf0/Demo/IsSignalConnected.py">å‚è€ƒå®ç°</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      çº¯ Python ä¿¡å·æ§½åº“
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Python marshmallow åº“</title>
    <link href="https://blog.l0v0.com/posts/2c8022e3.html"/>
    <id>https://blog.l0v0.com/posts/2c8022e3.html</id>
    <published>2022-02-28T07:37:44.000Z</published>
    <updated>2022-07-30T07:31:57.875Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;ä½¿ç”¨ Python ç»å¸¸éœ€è¦å°†ä¸€äº›æ•°æ®åºåˆ—åŒ–å­˜å‚¨åˆ°æœ¬åœ°<br>&emsp;&emsp;åŒæ—¶åˆæƒ³è¦ååºåˆ—åŒ–å°†æœ¬åœ°çš„ json æ•°æ®è½¬æ¢ä¸ºå¯¹è±¡ã€‚<br>&emsp;&emsp;é€šå¸¸çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨æ•°æ®åº“çš„ orm æ–¹æ¡ˆï¼Œç”¨ orm å¯¹è±¡æ¥åŒæ­¥æ•°æ®åº“ã€‚<br>&emsp;&emsp;æ•°æ®å…¨éƒ¨é™„ç€åœ¨ orm ä¸Šï¼Œå½“ orm ä¸Šçš„æ•°æ®æ”¹å˜æ—¶ç›´æ¥ä¿®æ”¹åˆ°æ•°æ®åº“ä¸Šã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ä½†æ˜¯åœ¨æˆ‘çš„å·¥ä½œä½¿ç”¨åœºæ™¯ä¸­ï¼ŒData Centric çš„æµç¨‹æ›´ä¸ºæ¨å´‡ï¼Œå› æ­¤è¾“å‡ºä¸€ä¸ª json æ–‡ä»¶ä¼šæ›´å¥½ä¸€ç‚¹ã€‚<br>&emsp;&emsp;é‚£ä¹ˆ marshmallow åº“å°±æ˜¯ä¸€ä¸ªå¾ˆä¸é”™çš„é€‰é¡¹ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;å¦å¤–è¿™ä¸ªåº“å¯ä»¥å’Œ ä¹‹å‰æåˆ°çš„ attrs åº“å¯ä»¥ç»“åˆä½¿ç”¨ã€‚ <a href="./1f4cc7d1.html">æ–‡ç« </a></p></blockquote><p><a href="https://github.com/marshmallow-code/marshmallow">Github åœ°å€</a><br><a href="https://marshmallow.readthedocs.io/en/stable/">å®˜æ–¹è¯´æ˜æ–‡æ¡£</a></p><h2 id="ä»€ä¹ˆæ˜¯åºåˆ—åŒ–-ä»€ä¹ˆæ˜¯-orm"><a href="#ä»€ä¹ˆæ˜¯åºåˆ—åŒ–-ä»€ä¹ˆæ˜¯-orm" class="headerlink" title="ä»€ä¹ˆæ˜¯åºåˆ—åŒ– ä»€ä¹ˆæ˜¯ orm"></a>ä»€ä¹ˆæ˜¯åºåˆ—åŒ– ä»€ä¹ˆæ˜¯ orm</h2><blockquote><p>&emsp;&emsp;åºåˆ—åŒ–å°±æ˜¯å°†ä»£ç å¯¹è±¡è½¬æ¢ä¸ºçº¯æ•°æ®è¿›è¡Œå­˜å‚¨<br>&emsp;&emsp;ååºåˆ—åŒ–å°±æ˜¯å°†çº¯æ•°æ®é‡æ–°è½¬æ¢ä¸º ä»£ç å¯¹è±¡<br>&emsp;&emsp;ä»£ç å¯¹è±¡å¯ä»¥æ‹¥æœ‰ç‰¹å®šçš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥è§¦å‘å¯¹æ•°æ®çš„å¤„ç†ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;orm å…¨ç§°æ˜¯ Object-relational Mappers<br>&emsp;&emsp;é€šå¸¸æ˜¯ä¸€ä¸ªå®šä¹‰äº†å¯¹è±¡å®ä¾‹åŒ–è§„åˆ™çš„ç±»ã€‚<br>&emsp;&emsp;é€šè¿‡æ“ä½œè¿™ä¸ªç±»çš„å®ä¾‹å°±å¯ä»¥ç”¨ä»£ç çš„æ–¹å¼å°†æ•°æ®è¿›è¡Œäº’ç›¸è½¬æ¢ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/2c8022e3/01.png" alt="alt"></p><blockquote><p>&emsp;&emsp;ä¸Šé¢çš„å›¾ç‰‡å°±æ˜¯ä¼ ç»Ÿ orm å®ç°çš„æ•ˆæœï¼Œå¯ä»¥ç”¨ orm å¯¹è±¡æ¥æ‰§è¡Œ sql è¯­å¥ä»è€Œç®€åŒ–æ•°æ®åº“åŒæ­¥çš„æ“ä½œï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†ä»£ç çš„å®‰å…¨æ€§ã€‚<br>&emsp;&emsp;è¿™ä¸ªæ“ä½œå®ç°äº†å†…å­˜åˆ°ç¡¬ç›˜æ¡¥æ¢ï¼Œç®¡ç†æ›´åŠ æ¸…æ™°æ–¹ä¾¿ã€‚</p></blockquote><h2 id="marshmallow-ä»‹ç»"><a href="#marshmallow-ä»‹ç»" class="headerlink" title="marshmallow ä»‹ç»"></a>marshmallow ä»‹ç»</h2><h3 id="marshmallow-åŸºæœ¬ç”¨æ³•"><a href="#marshmallow-åŸºæœ¬ç”¨æ³•" class="headerlink" title="marshmallow åŸºæœ¬ç”¨æ³•"></a>marshmallow åŸºæœ¬ç”¨æ³•</h3><blockquote><p>&emsp;&emsp;å’Œå…¶ä»– orm åº“ä¸€æ ·ï¼Œmarshmallow éœ€è¦å®šä¹‰ Schema ç±»ä½œä¸ºæ•°æ®çº¦æŸã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Album</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    title = attr.ib()</span><br><span class="line">    artist = attr.ib()</span><br><span class="line">    </span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Artist</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    name = attr.ib()</span><br><span class="line"></span><br><span class="line"><span class="comment"># NOTE ç”Ÿæˆ Python å¯¹è±¡</span></span><br><span class="line">bowie = Artist(name=<span class="string">&quot;David Bowie&quot;</span>)</span><br><span class="line">album = Album(artist=bowie, title=<span class="string">&quot;Hunky Dory&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> marshmallow <span class="keyword">import</span> Schema, fields</span><br><span class="line"></span><br><span class="line"><span class="comment"># NOTE å®šä¹‰ Schema æ¥çº¦æŸæ•°æ®è½¬æ¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ArtistSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    name = fields.Str()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AlbumSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    title = fields.Str()</span><br><span class="line">    artist = fields.Nested(ArtistSchema())</span><br><span class="line"></span><br><span class="line"><span class="comment"># NOTE é€šè¿‡ Schema å°†å¯¹è±¡è½¬æ¢ä¸ºå­—å…¸</span></span><br><span class="line">schema = AlbumSchema()</span><br><span class="line">result = schema.dump(album)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(result))  <span class="comment"># &lt;class &#x27;dict&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(result)  <span class="comment"># &#123;&#x27;artist&#x27;: &#123;&#x27;name&#x27;: &#x27;David Bowie&#x27;&#125;, &#x27;title&#x27;: &#x27;Hunky Dory&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line">result = schema.dumps(album)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(result))  <span class="comment"># &lt;class &#x27;str&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(result)   <span class="comment"># &#x27;&#123;&quot;artist&quot;: &#123;&quot;name&quot;: &quot;David Bowie&quot;&#125;, &quot;title&quot;: &quot;Hunky Dory&quot;&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">album = schema.loads(result)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(album))  <span class="comment"># &lt;class &#x27;dict&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(album)  <span class="comment"># &#123;&#x27;artist&#x27;: &#123;&#x27;name&#x27;: &#x27;David Bowie&#x27;&#125;, &#x27;title&#x27;: &#x27;Hunky Dory&#x27;&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡ Schema å®šä¹‰å¥½æ•°æ®å¯¹è±¡çš„è½¬æ¢æ–¹å¼ã€‚<br>&emsp;&emsp;<code>dump</code> å¯ä»¥å°†å¯¹è±¡æ•°æ®è½¬æ¢ä¸ºå­—å…¸ï¼Œ<code>dumps</code> åˆ™æ˜¯è½¬æ¢ä¸º å­—ç¬¦ä¸²<br>&emsp;&emsp;<code>load</code> å¯ä»¥å°†å­—å…¸è½¬æ¢ä¸ºå¯¹è±¡(é»˜è®¤æ˜¯å­—å…¸ï¼Œéœ€è¦é¢å¤–çš„å¤„ç†æ‰å¯ä»¥)ï¼Œ<code>loads</code> å¯ä»¥å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹è±¡ã€‚</p></blockquote><h3 id="ååºåˆ—åŒ–ä¸ºå¯¹è±¡"><a href="#ååºåˆ—åŒ–ä¸ºå¯¹è±¡" class="headerlink" title="ååºåˆ—åŒ–ä¸ºå¯¹è±¡"></a>ååºåˆ—åŒ–ä¸ºå¯¹è±¡</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"><span class="keyword">from</span> marshmallow <span class="keyword">import</span> Schema, fields, post_load</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Album</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    title = attr.ib()</span><br><span class="line">    artist = attr.ib()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Artist</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    name = attr.ib()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ArtistSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    name = fields.Str()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ArtistSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    name = fields.Str()</span><br><span class="line"></span><br><span class="line"><span class="meta">    @post_load</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">make_artist</span>(<span class="params">self, data, **kwargs</span>):</span><br><span class="line">        <span class="keyword">return</span> Artist(**data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AlbumSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    title = fields.Str()</span><br><span class="line">    artist = fields.Nested(ArtistSchema())</span><br><span class="line"></span><br><span class="line"><span class="meta">    @post_load</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">make_album</span>(<span class="params">self, data, **kwargs</span>):</span><br><span class="line">        <span class="keyword">return</span> Album(**data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">bowie = Artist(name=<span class="string">&quot;David Bowie&quot;</span>)</span><br><span class="line">album = Album(artist=bowie, title=<span class="string">&quot;Hunky Dory&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># NOTE é€šè¿‡ Schema å°†å¯¹è±¡è½¬æ¢ä¸ºå­—å…¸</span></span><br><span class="line">schema = AlbumSchema()</span><br><span class="line">result = schema.dumps(album)</span><br><span class="line">album = schema.loads(result)</span><br><span class="line"><span class="built_in">print</span>(album)  <span class="comment"># Album(title=&#x27;Hunky Dory&#x27;, artist=Artist(name=&#x27;David Bowie&#x27;))</span></span><br><span class="line"><span class="built_in">print</span>(album.title)  <span class="comment"># Hunky Dory</span></span><br><span class="line"><span class="built_in">print</span>(album.artist)  <span class="comment"># Artist(name=&#x27;David Bowie&#x27;)</span></span><br><span class="line"><span class="built_in">print</span>(album.artist.name)  <span class="comment"># David Bowie</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é€šè¿‡åŠ å…¥ <code>post_load</code> è£…é¥°å™¨å¯ä»¥å°†å­—å…¸æ•°æ®åšè¿›ä¸€æ­¥çš„è½¬æ¢ã€‚<br>&emsp;&emsp;ä½¿ç”¨ attrs åº“å°±ä¸éœ€è¦åœ¨ <code>__init__</code> å‡½æ•°ä¸­å†™å…¥å¤§é‡ä¼ å‚å’Œåˆå§‹åŒ–æ•°æ®çš„ä¿¡æ¯äº†ã€‚</p></blockquote><h3 id="åµŒå¥—-Schema"><a href="#åµŒå¥—-Schema" class="headerlink" title="åµŒå¥— Schema"></a>åµŒå¥— Schema</h3><p><a href="https://marshmallow.readthedocs.io/en/stable/nesting.html">å®˜æ–¹æ–‡æ¡£</a></p><blockquote><p>&emsp;&emsp;é€šè¿‡ <code>fields.Nested</code> çš„æ–¹æ³•å®šä¹‰åµŒå¥—çš„å¯¹è±¡ï¼Œä»è€Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–å¯ä»¥å¤ç”¨ Schemaã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"><span class="keyword">from</span> marshmallow <span class="keyword">import</span> Schema, fields</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>(<span class="title class_ inherited__">Dict</span>):</span><br><span class="line">    title = attr.ib()</span><br><span class="line">    author = attr.ib()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Author</span>(<span class="title class_ inherited__">Dict</span>):</span><br><span class="line">    name = attr.ib()</span><br><span class="line">    books = attr.ib()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">potter = Book(<span class="string">&quot;potter&quot;</span>, <span class="string">&quot;JK&quot;</span>)</span><br><span class="line">JK = Author(<span class="string">&quot;JK&quot;</span>, [potter])</span><br><span class="line">potter.author = JK</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BookSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    title = fields.Str()</span><br><span class="line">    author = fields.Nested(<span class="string">&quot;AuthorSchema&quot;</span>, only=(<span class="string">&quot;name&quot;</span>,))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AuthorSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    name = fields.Str()</span><br><span class="line">    books = fields.<span class="type">List</span>(fields.Nested(<span class="string">&quot;BookSchema&quot;</span>, exclude=(<span class="string">&quot;author&quot;</span>,)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">schema = BookSchema()</span><br><span class="line">res = schema.dump(potter)</span><br><span class="line"><span class="built_in">print</span>(res)  <span class="comment"># &#123;&#x27;title&#x27;: &#x27;potter&#x27;, &#x27;author&#x27;: &#123;&#x27;name&#x27;: &#x27;JK&#x27;&#125;&#125;</span></span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰-Field"><a href="#è‡ªå®šä¹‰-Field" class="headerlink" title="è‡ªå®šä¹‰ Field"></a>è‡ªå®šä¹‰ Field</h3><p><a href="https://marshmallow.readthedocs.io/en/stable/custom_fields.html">å®˜æ–¹æ–‡æ¡£</a></p><blockquote><p>&emsp;&emsp;é»˜è®¤æä¾›çš„ field å¯èƒ½ä¸èƒ½æ»¡è¶³éœ€æ±‚ã€‚<br>&emsp;&emsp;æœ‰äº›åº“çš„ field éœ€è¦è‡ªå®šä¹‰å¤æ‚çš„ åºåˆ—åŒ– å’Œ ååºåˆ—åŒ–æ“ä½œã€‚<br>&emsp;&emsp;è¿™ä¸ªæ—¶å€™å°±å¯ä»¥å®šä¹‰è‡ªå·±çš„ field æ¥è§£å†³é—®é¢˜ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ç®€å•çš„æƒ…å†µå¯ä»¥ä½¿ç”¨ <code>Method</code> å’Œ <code>Function</code> æ¥è§£å†³é—®é¢˜</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    name = fields.String()</span><br><span class="line">    email = fields.String()</span><br><span class="line">    created_at = fields.DateTime()</span><br><span class="line">    since_created = fields.Method(<span class="string">&quot;get_days_since_created&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_days_since_created</span>(<span class="params">self, obj</span>):</span><br><span class="line">        <span class="keyword">return</span> dt.datetime.now().day - obj.created_at.day</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    name = fields.String()</span><br><span class="line">    email = fields.String()</span><br><span class="line">    created_at = fields.DateTime()</span><br><span class="line">    uppername = fields.Function(<span class="keyword">lambda</span> obj: obj.name.upper())</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;é»˜è®¤æƒ…å†µä¸‹æ˜¯ serialize å‡½æ•°ï¼Œå¦‚æœè¦è‡ªå®šä¹‰ deserialize å¯ä»¥ä½¿ç”¨  <code>Method</code> å’Œ <code>Function</code> ä¼ å…¥ deserialize å‚æ•°è¿›è¡ŒæŒ‡å®šã€‚</p></blockquote><blockquote><p>&emsp;&emsp;å¤æ‚çš„æƒ…å†µå°±éœ€è¦ <code>fields.Field</code> ç±»ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> marshmallow <span class="keyword">import</span> fields, ValidationError</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PinCode</span>(fields.Field):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Field that serializes to a string of numbers and deserializes</span></span><br><span class="line"><span class="string">    to a list of numbers.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_serialize</span>(<span class="params">self, value, attr, obj, **kwargs</span>):</span><br><span class="line">        <span class="keyword">if</span> value <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>.join(<span class="built_in">str</span>(d) <span class="keyword">for</span> d <span class="keyword">in</span> value)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_deserialize</span>(<span class="params">self, value, attr, data, **kwargs</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">return</span> [<span class="built_in">int</span>(c) <span class="keyword">for</span> c <span class="keyword">in</span> value]</span><br><span class="line">        <span class="keyword">except</span> ValueError <span class="keyword">as</span> error:</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(<span class="string">&quot;Pin codes must contain only digits.&quot;</span>) <span class="keyword">from</span> error</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    name = fields.String()</span><br><span class="line">    email = fields.String()</span><br><span class="line">    created_at = fields.DateTime()</span><br><span class="line">    pin_code = PinCode()</span><br></pre></td></tr></table></figure><h2 id="è¸©è¿‡çš„å‘"><a href="#è¸©è¿‡çš„å‘" class="headerlink" title="è¸©è¿‡çš„å‘"></a>è¸©è¿‡çš„å‘</h2><h3 id="åŒå‘åµŒå¥—æ•°æ®"><a href="#åŒå‘åµŒå¥—æ•°æ®" class="headerlink" title="åŒå‘åµŒå¥—æ•°æ®"></a>åŒå‘åµŒå¥—æ•°æ®</h3><blockquote><p>&emsp;&emsp;å¦‚æœæ•°æ®å­˜åœ¨ç›¸äº’åµŒå¥—å¼•ç”¨çš„å…³ç³»ï¼Œæ˜¯æ— æ³•é€šè¿‡åŸç”Ÿçš„ json å†…ç½®åº“è¿›è¡Œåºåˆ—åŒ–çš„ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> addict <span class="keyword">import</span> <span class="type">Dict</span></span><br><span class="line"><span class="keyword">from</span> marshmallow <span class="keyword">import</span> Schema, fields</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>(<span class="title class_ inherited__">Dict</span>):</span><br><span class="line">    title = attr.ib()</span><br><span class="line">    author = attr.ib()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Author</span>(<span class="title class_ inherited__">Dict</span>):</span><br><span class="line">    name = attr.ib()</span><br><span class="line">    books = attr.ib()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">potter = Book(<span class="string">&quot;potter&quot;</span>, <span class="string">&quot;JK&quot;</span>)</span><br><span class="line">JK = Author(<span class="string">&quot;JK&quot;</span>, [potter])</span><br><span class="line">potter.author = JK</span><br><span class="line"><span class="built_in">print</span>(json.dumps(potter))</span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#   File &quot;f:/repo/_blog/source/_posts/Python/pacakge/02_marshmallow.py&quot;, line 22, in &lt;module&gt;</span></span><br><span class="line"><span class="comment">#     print(json.dumps(potter))</span></span><br><span class="line"><span class="comment">#   File &quot;C:\tools\Anaconda3\lib\json\__init__.py&quot;, line 231, in dumps</span></span><br><span class="line"><span class="comment">#     return _default_encoder.encode(obj)</span></span><br><span class="line"><span class="comment">#   File &quot;C:\tools\Anaconda3\lib\json\encoder.py&quot;, line 199, in encode</span></span><br><span class="line"><span class="comment">#     chunks = self.iterencode(o, _one_shot=True)</span></span><br><span class="line"><span class="comment">#   File &quot;C:\tools\Anaconda3\lib\json\encoder.py&quot;, line 257, in iterencode</span></span><br><span class="line"><span class="comment">#     return _iterencode(o, 0)</span></span><br><span class="line"><span class="comment"># ValueError: Circular reference detected</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;marshmallow åˆ™éœ€è¦é€šè¿‡ Schema çš„å®šä¹‰è¿‡æ»¤æ‰ç‰¹å®šçš„åµŒå¥—é”®å€¼æ‰å¯ç”¨ã€‚<br>&emsp;&emsp;å¹¶ä¸”åŠ è½½æ•°æ®çš„æ—¶å€™å¹¶ä¸èƒ½è¿˜åŸå®ƒä»¬åŸæœ‰çš„å…³è”å…³ç³»ã€‚<br>&emsp;&emsp;éœ€è¦è‡ªå·±çš„æ‰‹åŠ¨å»å®šä¹‰ååºåˆ—åŒ–ä¹‹åçš„æ“ä½œã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> addict <span class="keyword">import</span> <span class="type">Dict</span></span><br><span class="line"><span class="keyword">from</span> marshmallow <span class="keyword">import</span> Schema, fields,post_load</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>(<span class="title class_ inherited__">Dict</span>):</span><br><span class="line">    title = attr.ib()</span><br><span class="line">    author = attr.ib(default=<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Author</span>(<span class="title class_ inherited__">Dict</span>):</span><br><span class="line">    name = attr.ib()</span><br><span class="line">    books = attr.ib(factory=<span class="built_in">list</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">potter = Book(<span class="string">&quot;potter&quot;</span>, <span class="string">&quot;JK&quot;</span>)</span><br><span class="line">JK = Author(<span class="string">&quot;JK&quot;</span>, [potter])</span><br><span class="line">potter.author = JK</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BookSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    title = fields.Str()</span><br><span class="line">    author = fields.Nested(<span class="string">&quot;AuthorSchema&quot;</span>, only=(<span class="string">&quot;name&quot;</span>,))</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @post_load</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">make_object</span>(<span class="params">self, data, **kwargs</span>):</span><br><span class="line">        book = Book(**data)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;author&#x27;</span> <span class="keyword">in</span> data:</span><br><span class="line">            books = book.author.books</span><br><span class="line">            <span class="keyword">if</span> book <span class="keyword">not</span> <span class="keyword">in</span> books:</span><br><span class="line">                books.append(book)</span><br><span class="line">        <span class="keyword">return</span> book</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AuthorSchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    name = fields.Str()</span><br><span class="line">    books = fields.<span class="type">List</span>(fields.Nested(<span class="string">&quot;BookSchema&quot;</span>, exclude=(<span class="string">&quot;author&quot;</span>,)))</span><br><span class="line"></span><br><span class="line"><span class="meta">    @post_load</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">make_object</span>(<span class="params">self, data, **kwargs</span>):</span><br><span class="line">        author = Author(**data)</span><br><span class="line">        <span class="keyword">for</span> book <span class="keyword">in</span> author.books:</span><br><span class="line">            book.author = author</span><br><span class="line">        <span class="keyword">return</span> author</span><br><span class="line"></span><br><span class="line">schema = BookSchema()</span><br><span class="line">res = schema.dumps(potter).data</span><br><span class="line"></span><br><span class="line">new_potter = schema.loads(res).data</span><br><span class="line"><span class="built_in">print</span>(potter)  <span class="comment"># Book(title=&#x27;potter&#x27;, author=Author(name=&#x27;JK&#x27;, books=[...]))</span></span><br><span class="line"><span class="built_in">print</span>(new_potter)  <span class="comment"># Book(title=&#x27;potter&#x27;, author=Author(name=&#x27;JK&#x27;, books=[...]))</span></span><br><span class="line"></span><br><span class="line">schema = AuthorSchema()</span><br><span class="line">res = schema.dumps(JK).data</span><br><span class="line">new_JK = schema.loads(res).data</span><br><span class="line"><span class="built_in">print</span>(JK)  <span class="comment"># Author(name=&#x27;JK&#x27;, books=[Book(title=&#x27;potter&#x27;, author=...)])</span></span><br><span class="line"><span class="built_in">print</span>(new_JK)  <span class="comment"># Author(name=&#x27;JK&#x27;, books=[Book(title=&#x27;potter&#x27;, author=...)])</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å…³ç³»é‡å»ºéœ€è¦æ‰‹åŠ¨å¤„ç†ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;ä½¿ç”¨ marshmallow å¯ä»¥å¾ˆæ–¹ä¾¿å®ç°æ•°æ®åºåˆ—åŒ–ã€‚<br>&emsp;&emsp;ä½¿ç”¨çš„æ—¶å€™å¯ä»¥é…åˆ <code>addict</code> ä»¥åŠä¸‹ä¸€ç¯‡æ–‡ç« è¦ä»‹ç»çš„ <code>cerberus</code> ç»“åˆä½¿ç”¨ã€‚<br>&emsp;&emsp;å¯ä»¥è®©ä½¿ç”¨ä½“éªŒæ›´ä¸Šä¸€å±‚æ¥¼ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      åºåˆ—åŒ– orm å·¥å…·
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Python cerberus åº“</title>
    <link href="https://blog.l0v0.com/posts/8a7956b2.html"/>
    <id>https://blog.l0v0.com/posts/8a7956b2.html</id>
    <published>2022-02-28T07:37:38.000Z</published>
    <updated>2022-07-30T07:31:57.876Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;cerberus ç¿»è¯‘ä¸ºåœ°ç‹±çŠ¬ï¼Œæ˜¯åœ°ç‹±çš„çœ‹é—¨ç‹—ï¼Œæ¯”å–»åšæ•°æ®çš„æ ¡éªŒè€…ã€‚<br>&emsp;&emsp;è¿™ä¸ªåº“æ˜¯ä¸“é—¨ç”¨æ¥æ ¡éªŒåšæ•°æ®æ ¡éªŒã€‚<br>&emsp;&emsp;å¯ä»¥é€šè¿‡å®šä¹‰ä¸€ä¸ª schema æ–‡ä»¶æ¥å¿«é€Ÿæ ¡éªŒæ•°æ®æ˜¯å¦å¤åˆ schemaã€‚</p></blockquote><p><a href="https://github.com/pyeve/cerberus">Github åœ°å€</a><br><a href="https://docs.python-cerberus.org/en/stable/index.html">å®˜æ–¹è¯´æ˜æ–‡æ¡£</a></p><h2 id="cerberus-ä»‹ç»"><a href="#cerberus-ä»‹ç»" class="headerlink" title="cerberus ä»‹ç»"></a>cerberus ä»‹ç»</h2><h3 id="cerberus-åŸºæœ¬ç”¨æ³•"><a href="#cerberus-åŸºæœ¬ç”¨æ³•" class="headerlink" title="cerberus åŸºæœ¬ç”¨æ³•"></a>cerberus åŸºæœ¬ç”¨æ³•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> cerberus <span class="keyword">import</span> Validator</span><br><span class="line"></span><br><span class="line">schema = &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>&#125;,</span><br><span class="line">    <span class="string">&quot;member&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;dict&quot;</span>,</span><br><span class="line">        <span class="string">&quot;require_all&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&quot;schema&quot;</span>: &#123;<span class="string">&quot;address&quot;</span>: &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>&#125;&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">v = Validator(schema)</span><br><span class="line">document = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;john doe&quot;</span>, <span class="string">&quot;member&quot;</span>: &#123;&#125;&#125;</span><br><span class="line">result = v.validate(document)</span><br><span class="line"><span class="built_in">print</span>(result)  <span class="comment"># æ‰“å° False</span></span><br><span class="line"><span class="built_in">print</span>(v.errors)  <span class="comment"># æ‰“å° &#123;&#x27;member&#x27;: [&#123;&#x27;address&#x27;: [&#x27;required field&#x27;]&#125;]&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¸»è¦ç”¨æ³•å°±æ˜¯å®šä¹‰ä¸€ä¸ªè§„èŒƒã€‚<br>&emsp;&emsp;cerberus ä¼šæ ¹æ®è¿™ä¸ªè§„èŒƒå¯¹æ•°æ®è¿›è¡Œæ ¡éªŒã€‚<br>&emsp;&emsp;è¿™å…¶ä¸­çš„è§„åˆ™æ—¢å¯ä»¥æ ¹æ®å®˜æ–¹æ–‡æ¡£æ·»åŠ ï¼Œä¹Ÿå¯ä»¥ç»§æ‰¿ Validator å®ç°è‡ªå®šä¹‰çš„è§„åˆ™ã€‚</p></blockquote><h3 id="cerberus-åµŒå¥—æ£€æŸ¥"><a href="#cerberus-åµŒå¥—æ£€æŸ¥" class="headerlink" title="cerberus åµŒå¥—æ£€æŸ¥"></a>cerberus åµŒå¥—æ£€æŸ¥</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> cerberus <span class="keyword">import</span> schema_registry</span><br><span class="line"></span><br><span class="line">schema_registry.add(<span class="string">&quot;non-system user&quot;</span>, &#123;<span class="string">&quot;uid&quot;</span>: &#123;<span class="string">&quot;min&quot;</span>: <span class="number">1000</span>, <span class="string">&quot;max&quot;</span>: <span class="number">0xFFFF</span>&#125;&#125;)</span><br><span class="line">schema = &#123;</span><br><span class="line">    <span class="string">&quot;sender&quot;</span>: &#123;<span class="string">&quot;schema&quot;</span>: <span class="string">&quot;non-system user&quot;</span>, <span class="string">&quot;allow_unknown&quot;</span>: <span class="literal">True</span>&#125;,</span><br><span class="line">    <span class="string">&quot;receiver&quot;</span>: &#123;<span class="string">&quot;schema&quot;</span>: <span class="string">&quot;non-system user&quot;</span>, <span class="string">&quot;allow_unknown&quot;</span>: <span class="literal">True</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¯¼å…¥ schema_registry æ·»åŠ åˆ°é‡Œé¢çš„ schema å¯ä»¥è¢«åˆ«çš„åœ°æ–¹å¤ç”¨ã€‚<br>&emsp;&emsp;åˆ«çš„ schema åªè¦è¾“å…¥ç›¸åº”çš„å­—ç¬¦ä¸²å°±å¯ä»¥å¤ç”¨ schema<br>&emsp;&emsp;æˆ–è€…ä¹Ÿå¯ä»¥é€šè¿‡æ¥å…¥å­—å…¸å˜é‡çš„æ–¹å¼æ¥å¤ç”¨ schema </p></blockquote><h3 id="cerberus-è‡ªå®šä¹‰æ£€æŸ¥åŠŸèƒ½"><a href="#cerberus-è‡ªå®šä¹‰æ£€æŸ¥åŠŸèƒ½" class="headerlink" title="cerberus è‡ªå®šä¹‰æ£€æŸ¥åŠŸèƒ½"></a>cerberus è‡ªå®šä¹‰æ£€æŸ¥åŠŸèƒ½</h3><blockquote><p>&emsp;&emsp;æ‰©å±•æ£€æŸ¥è§„åˆ™å¯ä»¥é€šè¿‡ç»§æ‰¿ <code>Validator</code> æ¥å®ç°ï¼Œéå¸¸ç®€å•æ–¹ä¾¿ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> cerberus <span class="keyword">import</span> Validator</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyValidator</span>(<span class="title class_ inherited__">Validator</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_validate_is_odd</span>(<span class="params">self, constraint, field, value</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; Test the oddity of a value.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        The rule&#x27;s arguments are validated against this schema:</span></span><br><span class="line"><span class="string">        &#123;&#x27;type&#x27;: &#x27;boolean&#x27;&#125;</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> constraint <span class="keyword">is</span> <span class="literal">True</span> <span class="keyword">and</span> <span class="keyword">not</span> <span class="built_in">bool</span>(value &amp; <span class="number">1</span>):</span><br><span class="line">            self._error(field, <span class="string">&quot;Must be an odd number&quot;</span>)</span><br><span class="line"></span><br><span class="line">schema = &#123;<span class="string">&#x27;amount&#x27;</span>: &#123;<span class="string">&#x27;is odd&#x27;</span>: <span class="literal">True</span>, <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;integer&#x27;</span>&#125;&#125;</span><br><span class="line">v = MyValidator(schema)</span><br><span class="line">v.validate(&#123;<span class="string">&#x27;amount&#x27;</span>: <span class="number">10</span>&#125;)  <span class="comment"># æ‰“å° False</span></span><br></pre></td></tr></table></figure><h2 id="ç»“åˆ-marshmallow-ä½¿ç”¨"><a href="#ç»“åˆ-marshmallow-ä½¿ç”¨" class="headerlink" title="ç»“åˆ marshmallow ä½¿ç”¨"></a>ç»“åˆ marshmallow ä½¿ç”¨</h2><blockquote><p>&emsp;&emsp;ä½¿ç”¨ cerberus çš„ schema å¯ä»¥è®©æ ¡éªŒè§„åˆ™ç»Ÿä¸€åˆ°ä¸€ä¸ªåœ°æ–¹è¿›è¡Œé…ç½®ã€‚<br>&emsp;&emsp;é…ç½®æ›´åŠ æ¸…æ™°ï¼ŒæŸ¥æ‰¾ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ã€‚<br>&emsp;&emsp;ç›¸è¾ƒäºä½¿ç”¨ <code>attrs</code> æˆ–è€… <code>marshmallow</code> æä¾›æ ¡éªŒåŠŸèƒ½ã€‚<br>&emsp;&emsp;cerberus å¯ä»¥æ›´åŠ æ¸…æ™°åœ°é…ç½®å’Œä¿®æ”¹ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« ä»‹ç»äº†ä½¿ç”¨ <code>marshmallow</code> å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯¹æ•°æ®è¿›è¡Œåºåˆ—åŒ–ã€‚<br>&emsp;&emsp;åŒæ—¶å®ƒä¹Ÿå¯ä»¥å¯¹æ¯ä¸€ä¸ª field ç¼–å†™å‡½æ•°è¿›è¡Œæ•°æ®æ ¡éªŒï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨ åµŒå¥— Schema çš„è¯<br>&emsp;&emsp;è¿™äº›æ ¡éªŒæ–¹æ³•ä¸œä¸€å—è¥¿ä¸€å—ï¼Œé…ç½®å’Œä¿®æ”¹éƒ½éå¸¸ç¹çã€‚<br>&emsp;&emsp;è¿™ä¸ªä½¿ç”¨å¯ä»¥ç»“åˆ <code>marshmallow</code> çš„ <code>validates_schema</code> è£…é¥°å™¨é€šè¿‡å‡½æ•°è°ƒç”¨ cerberus è¿›è¡Œæ•°æ®æ ¡éªŒã€‚ <a href="https://marshmallow.readthedocs.io/en/stable/upgrading.html?highlight=validate_schema#schema-validators">marshmallow æ–‡æ¡£</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> marshmallow <span class="keyword">import</span> Schema, fields, validates_schema, ValidationError</span><br><span class="line"><span class="keyword">from</span> cerberus <span class="keyword">import</span> Validator</span><br><span class="line"></span><br><span class="line">schema = &#123;</span><br><span class="line">    <span class="string">&quot;field_a&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;required&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;integer&quot;</span>,</span><br><span class="line">        <span class="string">&quot;min&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;max&quot;</span>: <span class="number">5</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">validator = Validator(schema)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MySchema</span>(<span class="title class_ inherited__">Schema</span>):</span><br><span class="line">    field_a = fields.Int(required=<span class="literal">True</span>)</span><br><span class="line">    field_b = fields.Int(required=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @validates_schema(<span class="params">pass_original=<span class="literal">True</span></span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">validate_schema</span>(<span class="params">self, data, original_data</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> validator.validate(original_data):</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(validator.errors)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">schema = MySchema()</span><br><span class="line">document = &#123;</span><br><span class="line">    <span class="string">&quot;field_a&quot;</span>: -<span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;field_b&quot;</span>: -<span class="number">1</span>,</span><br><span class="line">&#125;</span><br><span class="line">res, err = schema.load(document)</span><br><span class="line"><span class="built_in">print</span>(err)  <span class="comment"># æ‰“å° &#123;&#x27;_schema&#x27;: [&#123;&#x27;field_a&#x27;: [&#x27;min value is 0&#x27;], &#x27;field_b&#x27;: [&#x27;unknown field&#x27;]&#125;]&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è¿™æ ·å°±å¯ä»¥å®ç°ååºåˆ—åŒ–æ•°æ®çš„åŒæ—¶è¿›è¡Œæ•°æ®æ ¡éªŒã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;cerberus å…¶å®ä¹Ÿå¯ä»¥åšæ•°æ®çš„ coerce ï¼Œå®ç°ä¸€å®šç¨‹åº¦çš„åºåˆ—åŒ–åŠŸèƒ½ã€‚<br>&emsp;&emsp;ä¸è¿‡å¦‚æœéœ€è¦åµŒå¥—çš„è¯ï¼Œè¿˜æ˜¯ç”¨ marshmallow è¿›è¡Œå¤„ç†æ¯”è¾ƒæ–¹ä¾¿ã€‚<br>&emsp;&emsp;è€Œä¸” marshmallow åµŒå¥—è°ƒç”¨ä¹Ÿå¯ä»¥é…åˆç€ cerberus é¡ºä¾¿è¿›è¡Œæ•°æ®æ ¡éªŒã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      åŸºäº schema å­—å…¸æ•°æ®æ ¡éªŒåº“
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Python decorator &amp; wrapt åº“</title>
    <link href="https://blog.l0v0.com/posts/b9593ce4.html"/>
    <id>https://blog.l0v0.com/posts/b9593ce4.html</id>
    <published>2022-02-28T03:13:26.000Z</published>
    <updated>2022-07-30T07:31:57.886Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;Python çš„è£…é¥°å™¨æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œè‡ªä»åŠ å…¥äº†è¯­æ³•ç³– <code>@</code> ä¹‹åã€‚<br>&emsp;&emsp;è£…é¥°å™¨æ–¹æ³•å¯ä»¥å®ç°å¾ˆå¤šåŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸ä¼šæŠŠä»£ç ç»™å¼„ä¹±ã€‚<br>&emsp;&emsp;è¿™é‡Œä¼šå‰–æä½•ä¸ºè£…é¥°å™¨ï¼Œå¹¶ä¸”æ¨èä¸¤ä¸ªç®€åŒ–è£…é¥°å™¨çš„åº“</p></blockquote><h2 id="ä»€ä¹ˆæ˜¯è£…é¥°å™¨"><a href="#ä»€ä¹ˆæ˜¯è£…é¥°å™¨" class="headerlink" title="ä»€ä¹ˆæ˜¯è£…é¥°å™¨"></a>ä»€ä¹ˆæ˜¯è£…é¥°å™¨</h2><blockquote><p>&emsp;&emsp;è£…é¥°å™¨å¯ä»¥åœ¨å‡½æ•°è£¹ä¸Šä¸€å±‚å£³ï¼Œåœ¨å‡½æ•°è°ƒåº¦å‰å’Œè°ƒåº¦åè§¦å‘æ–°çš„é€»è¾‘ã€‚<br>&emsp;&emsp;è¿™æ ·å¯ä»¥åœ¨åŸæœ‰çš„é€»è¾‘ä¸åŠ¨çš„æƒ…å†µä¸‹ï¼Œæ·»åŠ æ–°çš„é€»è¾‘ã€‚<br>&emsp;&emsp;æ¯”å¦‚ä¿®æ”¹å‡½æ•°çš„ä¼ å‚ï¼Œä¿®æ”¹å‡½æ•°çš„è¿”å›å€¼ã€‚<br>&emsp;&emsp;ä¹Ÿå¯ä»¥é€šè¿‡è£…é¥°å™¨ç»™åŸæ¥ç®€å•çš„å‡½æ•°æ·»åŠ æ–°çš„åŠŸèƒ½ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">deco_func</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decorator</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;before call&quot;</span>)</span><br><span class="line">        res = func(*args, **kwargs)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;after call&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@deco_func</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">call_func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;on running&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">call_func()</span><br><span class="line"><span class="comment"># æ‰“å°å¦‚ä¸‹</span></span><br><span class="line"><span class="comment"># before call</span></span><br><span class="line"><span class="comment"># on running</span></span><br><span class="line"><span class="comment"># after call</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è£…é¥°å™¨çš„æœ¬è´¨å…¶å®ä¸‹é¢è¿™ç§å†™æ³•çš„è¯­æ³•ç³–ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">call_func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;on running&quot;</span>)</span><br><span class="line"></span><br><span class="line">call_func = deco_func(call_func)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¸¤è€…çš„æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ç”¨è¯­æ³•ç³–å¯ä»¥æ›´åŠ æ¸…æ™°çœ‹åˆ°è¿™ä¸ªå‡½æ•°è¢«ä»€ä¹ˆæ‰€åŒ…è£¹ã€‚<br>&emsp;&emsp;å¦å¤–å®ç°è£…é¥°å™¨çš„æ–¹æ³•è¿˜å¯ä»¥ç”¨ç±»æ¥å®ç°ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DecoratorClass</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,func</span>):</span><br><span class="line">        self.func = func</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self,*args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;before call&quot;</span>)</span><br><span class="line">        result=  self.func(*args, **kwargs)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;after call&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><hr><blockquote><p>&emsp;&emsp;ä¸Šé¢å®ç°çš„è£…é¥°å™¨ä¸èƒ½æºå¸¦å‚æ•°ï¼Œå¦‚æœéœ€è¦ä¼ å…¥å‚æ•°éœ€è¦è¿”å›ä¸€ä¸ªè£…é¥°å™¨</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">deco_func</span>(<span class="params">arg1=<span class="number">1</span>,arg2=<span class="number">2</span></span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decorator</span>(<span class="params">func</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">            <span class="built_in">print</span>(arg1,arg2)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;before call&quot;</span>)</span><br><span class="line">            res = func(*args, **kwargs)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;after call&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line"></span><br><span class="line"><span class="meta">@deco_func(<span class="params">arg1=<span class="number">3</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">call_func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;on running&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">call_func()</span><br><span class="line"><span class="comment"># 3 2</span></span><br><span class="line"><span class="comment"># before call</span></span><br><span class="line"><span class="comment"># on running</span></span><br><span class="line"><span class="comment"># after call</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è¿™é‡Œéœ€è¦ä¸‰é‡å‡½æ•°åµŒå¥—ä¼šè®©è£…é¥°å™¨ç¹çä¸”å¤æ‚ã€‚<br>&emsp;&emsp;è€Œä¸”ç”±äºè£…é¥°å™¨è¿”å›çš„å‡½æ•°å’Œæºå‡½æ•°æ˜¯ä¸ä¸€è‡´çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹æ— æ³•ç»§æ‰¿ <code>__doc__</code> ç­‰å‡½æ•°å±æ€§ã€‚<br>&emsp;&emsp;è§£å†³è¿™ä¸ªé—®é¢˜éœ€è¦ç»™åµŒå¥—é‡Œé¢çš„å‡½æ•°åŠ ä¸Š <a href="mailto:`@functools.wraps">`@functools.wraps</a>(func)` çš„è£…é¥°å™¨æ¥åŒæ­¥æ‰è¡Œã€‚ </p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">deco_func</span>(<span class="params">func</span>):</span><br><span class="line"><span class="meta">  @functools.wraps(<span class="params">func</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decorator</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br></pre></td></tr></table></figure><h2 id="decorator-åº“ä»‹ç»"><a href="#decorator-åº“ä»‹ç»" class="headerlink" title="decorator åº“ä»‹ç»"></a>decorator åº“ä»‹ç»</h2><blockquote><p>&emsp;&emsp;æƒ³è¦è§£å†³è¿™ä¸ªé—®é¢˜æœ‰ä¸¤ä¸ªåº“å¯ä»¥æ¨è <code>decorator</code> &amp; <code>wrapt</code></p></blockquote><table><thead><tr><th>Python åº“</th><th>wrapt</th><th>decorator</th></tr></thead><tbody><tr><td>ç±»è£…é¥°</td><td>âœ”</td><td>âŒ</td></tr><tr><td>å—æ¬¢è¿ç¨‹åº¦</td><td>âœ”</td><td>âŒ</td></tr><tr><td>ç®€æ´</td><td>âŒ</td><td>âœ”</td></tr><tr><td>æ€§èƒ½</td><td>âŒ</td><td>âœ”</td></tr></tbody></table><blockquote><p>&emsp;&emsp;wrapt è§£å†³çš„é—®é¢˜æ›´å¤šï¼Œæ¯” decorator æ›´åŠ æµè¡Œã€‚<br>&emsp;&emsp;decorator åˆ™ä½¿ç”¨ç®€å•ä¸”æ–¹ä¾¿ï¼Œè€Œä¸”æ€§èƒ½æ¯” wrapt è¦å¥½ã€‚<br>&emsp;&emsp;å¯ä»¥æ ¹æ®å®é™…çš„ä½¿ç”¨æƒ…å†µæ¥é€‰æ‹©ã€‚</p></blockquote><h3 id="è£…é¥°æ¡ˆä¾‹"><a href="#è£…é¥°æ¡ˆä¾‹" class="headerlink" title="è£…é¥°æ¡ˆä¾‹"></a>è£…é¥°æ¡ˆä¾‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> timeit</span><br><span class="line"><span class="keyword">from</span> decorator <span class="keyword">import</span> decorator</span><br><span class="line"></span><br><span class="line"><span class="meta">@decorator</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">warn_slow</span>(<span class="params">func, timelimit=<span class="number">60</span>, *args, **kw</span>):</span><br><span class="line">    t0 = time.time()</span><br><span class="line">    result = func(*args, **kw)</span><br><span class="line">    dt = time.time() - t0</span><br><span class="line">    <span class="keyword">if</span> dt &gt; timelimit:</span><br><span class="line">        logging.warn(<span class="string">&#x27;%s took %d seconds&#x27;</span>, func.__name__, dt)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        logging.info(<span class="string">&#x27;%s took %d seconds&#x27;</span>, func.__name__, dt)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="meta">@warn_slow  </span><span class="comment"># warn if it takes more than 1 minute</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">preprocess_input_files</span>(<span class="params">inputdir, tempdir</span>):</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line"><span class="meta">@warn_slow(<span class="params">timelimit=<span class="number">600</span></span>)  </span><span class="comment"># warn if it takes more than 10 minutes</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run_calculation</span>(<span class="params">tempdir, outdir</span>):</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> decorator <span class="keyword">import</span> decorator</span><br><span class="line"><span class="meta">@decorator</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">with_arguments</span>(<span class="params">func, myarg1=<span class="number">2</span>, myarg2=<span class="number">3</span>, *args, **kwargs</span>):</span><br><span class="line">    <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line"></span><br><span class="line"><span class="meta">@with_arguments(<span class="params">myarg1=<span class="number">1</span>,myarg2=<span class="number">2</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">function</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;<code>decorator</code> åº“åªéœ€è¦ä¸€ä¸ªè£…é¥°å™¨å°±å¯ä»¥è®©å‡½æ•°åŒæ—¶æ”¯æŒå¸¦å‚æ•°å’Œä¸å¸¦å‚æ•°ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wrapt</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">with_arguments</span>(<span class="params">myarg1, myarg2</span>):</span><br><span class="line"><span class="meta">    @wrapt.decorator</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">wrapped, instance, args, kwargs</span>):</span><br><span class="line">        <span class="keyword">return</span> wrapped(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@with_arguments(<span class="params"><span class="number">1</span>, <span class="number">2</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">function</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;<code>wrapt</code> åº“åˆ™è¿˜æ˜¯éœ€è¦ä½¿ç”¨åµŒå¥—å‡½æ•°æ‰èƒ½å®ç°ï¼Œä½†æ˜¯å¯ä»¥ç®€åŒ–ä¸€ä¸ªå‡½æ•°åµŒå¥—ã€‚</p></blockquote><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> decorator <span class="keyword">import</span> decorator</span><br><span class="line"></span><br><span class="line"><span class="meta">@decorator</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pass_through</span>(<span class="params">func, timelimit=<span class="number">60</span>, *args, **kw</span>):</span><br><span class="line">    <span class="keyword">return</span> func(*args, **kw)</span><br><span class="line"></span><br><span class="line"><span class="meta">@pass_through</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Class</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">function_im</span>(<span class="params">cls, *args</span>):</span><br><span class="line">        <span class="built_in">print</span>(cls)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#   File &quot;&lt;stdin&gt;&quot;, line 2, in &lt;module&gt;</span></span><br><span class="line"><span class="comment">#   File &quot;&lt;decorator-gen-1&gt;&quot;, line 3, in pass_through</span></span><br><span class="line"><span class="comment">#   File &quot;c:\_thm\rez_local_cache\ext\decorator\4.4.2\site-packages\decorator.py&quot;, line 252, in decorate        </span></span><br><span class="line"><span class="comment">#     evaldict, __wrapped__=func)</span></span><br><span class="line"><span class="comment">#   File &quot;c:\_thm\rez_local_cache\ext\decorator\4.4.2\site-packages\decorator.py&quot;, line 213, in create</span></span><br><span class="line"><span class="comment">#     self = cls(func, name, signature, defaults, doc, module)</span></span><br><span class="line"><span class="comment">#   File &quot;c:\_thm\rez_local_cache\ext\decorator\4.4.2\site-packages\decorator.py&quot;, line 143, in __init__        </span></span><br><span class="line"><span class="comment">#     raise TypeError(&#x27;You are decorating a non function: %s&#x27; % func)</span></span><br><span class="line"><span class="comment"># TypeError: You are decorating a non function: &lt;class &#x27;__main__.Class&#x27;&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;decorator ä¸èƒ½è£…é¥°ç±»ï¼Œä½†æ˜¯ <code>wrapt</code> å¯ä»¥åšåˆ°</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wrapt</span><br><span class="line"></span><br><span class="line"><span class="meta">@wrapt.decorator</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pass_through</span>(<span class="params">wrapped, instance, args, kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(wrapped,instance)</span><br><span class="line">    res = wrapped(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;call Base&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@pass_through</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Class</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(Class.__wrapped__, self).__init__()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">function_im</span>(<span class="params">self, *args</span>):</span><br><span class="line">        <span class="built_in">print</span>(self)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(Class))  <span class="comment"># &lt;class &#x27;FunctionWrapper&#x27;&gt;</span></span><br><span class="line">a = Class()</span><br><span class="line">a.function_im(<span class="number">1</span>)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;wrapt å¯ä»¥è£…é¥°ç±»ï¼Œä½†æ˜¯è£…é¥°è¿”å›ä¸€ä¸ª <code>FunctionWrapper</code> ç±»å‹<br>&emsp;&emsp;ä¼šå½±å“åˆ° super ä¼ å‚è°ƒç”¨ï¼Œéœ€è¦è°ƒç”¨ <code>wrapped</code> æ‰æ­£å¸¸ã€‚<br>&emsp;&emsp;å¦‚æœæ˜¯ Python3 åˆ™ç›´æ¥ä½¿ç”¨ <code>super()</code> å¯ä»¥ç”Ÿæ•ˆ</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;<code>wrapt</code> åº“æ›´åŠ é€šç”¨ï¼Œä½†æ˜¯å¦‚æœä¸æ˜¯å¤æ‚çš„æƒ…å†µï¼Œ <code>decorator</code> åº“å°±å·²ç»å¤Ÿç”¨äº†ã€‚<br>&emsp;&emsp;<code>wrapt</code> å¯ä»¥è§£å†³è£…é¥°ç±»çš„æ—¶å€™ï¼Œç±»ä¿¡æ¯çš„åŒæ­¥ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      è£…é¥°å™¨ä¼˜åŒ–åº“
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Python pluggy åº“</title>
    <link href="https://blog.l0v0.com/posts/7beafa88.html"/>
    <id>https://blog.l0v0.com/posts/7beafa88.html</id>
    <published>2022-02-28T03:13:26.000Z</published>
    <updated>2022-07-30T07:31:57.890Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;</p></blockquote><h2 id="ä»€ä¹ˆæ˜¯-pluggy"><a href="#ä»€ä¹ˆæ˜¯-pluggy" class="headerlink" title="ä»€ä¹ˆæ˜¯ pluggy"></a>ä»€ä¹ˆæ˜¯ pluggy</h2><blockquote><p>&emsp;&emsp;pluggy æ˜¯ pytest å›¢é˜Ÿå¼€å‘çš„åº“ï¼Œ<br>&emsp;&emsp;ç”¨æ¥è§£å†³ç»™ pytest å†™æ‰©å±•æ’ä»¶çš„ã€‚<br>&emsp;&emsp;pluggy æä¾›äº†æ–¹ä¾¿çš„ API å¯ä»¥å¾ˆè½»æ¾çš„æ‰©å±•æ¡†æ¶çš„é€»è¾‘ã€‚</p></blockquote><p><a href="https://github.com/pytest-dev/pluggy">Githubä»“åº“</a><br><a href="https://pluggy.readthedocs.io/en/latest/">æ–‡æ¡£åœ°å€</a></p><h2 id="pluggy-çš„è°ƒåº¦æ–¹å¼"><a href="#pluggy-çš„è°ƒåº¦æ–¹å¼" class="headerlink" title="pluggy çš„è°ƒåº¦æ–¹å¼"></a>pluggy çš„è°ƒåº¦æ–¹å¼</h2><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/2c8022e3/a27504a12b44751e025e75587f27b489.jpeg" alt="image"></p><p><a href="https://viewer.diagrams.net/?tags=%7B%7D&amp;highlight=0000ff&amp;edit=_blank&amp;layers=1&amp;nav=1&amp;title=pluggy.drawio#R7VxLc%2BI4EP41qto5bMqW30cbyGZqkp3U5rDHlAIK9sRYlC1Ckl%2B%2Falk2GBlCIASY9Qm5LQk9vu7%2B1JKMrN7k5a%2BcTOMbNqIpwsboBVl9hLHpWrb4AcmrkpguLiXjPBkp2UJwl7xRJTSUdJaMaNHIyBlLeTJtCocsy%2BiQN2Qkz9m8me2Rpc1%2FnZIx1QR3Q5Lq0n%2BTEY9LqY%2B9hfyKJuOY1%2F0LyjcPZPg0ztksU%2F%2BHsHVpXoaDQfl6Qqq6VEeLmIzYfElkDZDVyxnjZWry0qMpDG41bJfR3P3xdGUUf9vhaGgX7Oou%2FrOs7PIjReoe5jTjn1y1o%2FrGX6vxpCMxvOqR5TxmY5aRdLCQRsNZ%2FkyhVkM8yAGUT6Z4Kp4oH8bq1aL0NWNTleMX5fxVoYjMOBOimE9S9faRZbzHUpbLtlhm33IcD%2BrlOXuiS29sx4uCPpRI0nRJHvr9sN8T8rJf0JkVmLwziCpfwWb5kG7Ip9SGk3xMN9Zn1lAROkjZhPL8VRTMaUp48txsHVG6MK7z1UVvWSLajQ2luLX6KbW1XLdZRdkwVWoBC5FYasZCJMHyAeCo7j%2BTdKa6cMXYUzGlwxuSP9EcYTcVwxI9QGoMqT9ileGb%2Fg4NHBQOUBCigY2iAPmBDss0FRYF4DePE07vpkROz1xYtSaECPwHzMhj8gK4XEIogDIlDzSNatVvg04DxJ%2BNyGeac%2FqyAyZ1CKla7BUkVM%2FzhTU0K7TEDUtorEddAy8fBYfVWZUdrYqzpVXBwZ5WZb%2F5dbv5Pez8WtZR59fr5vfA82scc36dVuedTKbpRucNGdY4b99BkSeddx8FVuXOB2jgIX%2BAIkPHU%2BfO17hzbDsNf%2B4e3Z2bLdPXmYNtzIG7pTk4qjd3NWtwm87GSXZDMrF2bjMG08m3TqG3VmjPxBdNlT4Bio47CrejTgfbUnR8TKUONKWeTi7AiXeKu4fiOtg6tuKafqe4uymuWUWn39Nc95iKa%2BqaS0aje9C9oo17u0C8o5KEhyg0ZMKXlNuoPbiQBsgXXLwHCTELIW5F0TXo8IrWp8k4E%2BmhmARRlRWBniVDkobqxSQZjSTIclokb%2BRB1gdgmkLsUQ6PEyGnvwEra0xHxjK6Sb3VjoL6S1QH6t9HjL9R740L0whwQ%2FHVP%2B4atK2ysMfHgh4kHos7jn5os%2BDsaRZk0TDPyetSBqUk6%2BP8fjO6a2JnBT5ljZ8LJrMD04HBtO%2BKbycwWUYTTI73BWCqhmTJoYW336VPkp4q8NDAR6GJQp3ZFPNkkhLpBQADFQABRsM4SUfX5JXNYJgLLrxH9RTFLE%2FeRH5SAUi8zrmCl1j5NPGh3Myi0B1UVgEZnBq9rfBhrohuyEsj4zUpeNVAlqZkWiSld4KCEwGKJIsY52yi6ckGCq0auCd7PhRLxtbq%2FlMLR7bbOLJhH4pDYQ1ySXGfZPeFYDFUQ5kYEK4NnRr0FqBUjCilj7yFD3EwalEhllFJNr6Wefr2QvKPGgAQMVH2MZVnCmLBomgmEcEJX8uigNb1DLEqEXwK98SzuXiWFGsqzGuPZaIvJJGTSgUi5xRQ%2Bflg2wNSazClMFRFJ96DEHYPhSBLQ1BBU0E279nDL1gFdxg6dQw5%2BNgY0s9IDHNKOL0XM5ONiphMO1t0%2Bjjy%2FCPjCOve7Ornzx8dg%2FpdGJS7ssZzvRYGpaj6FzEorPs%2FFT%2B%2B6JjUSVmvddsMG5hUG5QOZ710L1ghqWNU54WlNkb1tVjSD65UWOqY1fnhqY1ZfSmerG4vbcc4J1Yjd9p7aVUrl%2BzFLOFpcTF97YjyGRJlBzeJMm45RtO2NKsMzecDTN%2Bs7ejxabmgNVu9pxJorILnXaDxbDF09ECj1XJbqqMx29AYC58DjbF1G5HTcVJwdbTHRf4lCrA8fh%2BhqP1k5%2F%2FkaI%2B1ZmO9PtpjeL7bJBHl0%2Bke7alAujT9i2VuR2V%2FDyprWlty2crbfL4X0UO%2BXVDlBNmI9fGA75eyEdvu2MiOnxQ4iwPKVSuX7ETKxp0fOk8%2F5K%2FsPW7rhg639WjrdKeLqZyUB7JP%2FPCW3R3eOncMHT2mYutbjR0bPj8cHf3wlu1pOGoJ2JSJ0IFXoQFnugYefA3Jt%2BGIVyTva0GiBwUh4cirXPK7C6JUy7UwH0XiLwx1MKy89yUSUSiLh7KeAPkmVAWSAQpDUZpMAHPZQwE%2F198vf6LylJmoyR9UtVZffIBmOnCtLApbmrBSWVuOdvU5UIQKVgZFSSLNDyjpAc4bbiZkePXSqem3GEOvLTRwqDuntr6PWl4lXr5XuARYgEQfsBw4cBERMOih0JWvBH5Mifee%2FNyXvKnoWwqVZZ76GyK%2BqFzWAwkZ6Ax6kIZLjxacdoQ8bvPf9WCorhwBvAp82TAB%2FLKUBZAuKwSdEMV95NeaJPslkA%2FfNKn7JS9eij9tvZa5kgc0%2B1Kqnaw5DCslsmQeW17dLM2AtTjO2VJKNx513%2FWmOjBuYqg75dtpNeSZ%2BnKo%2FiDLnqonHhffjixjxYsvdFqD%2FwA%3D">draw.ioé“¾æ¥</a></p><p><strong>pluggy æœ‰ä¸‰å¤§è¦ç´ </strong></p><p><code>HookspecMarker</code>(hookspec) å®šä¹‰<br><code>HookimplMarker</code>(hookimpl) å®ç°<br><code>PluginManager</code>(pm) æ’ä»¶ç®¡ç†å™¨</p><blockquote><p>&emsp;&emsp;spec å®šä¹‰äº†å¯ä»¥æš´éœ²çš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ pm.hook å»è°ƒç”¨å¯¹åº”çš„æ–¹æ³•<br>&emsp;&emsp;è°ƒç”¨çš„æ—¶å€™ä¼šé€ä¸ªæ‰§è¡Œ impl æ³¨å†Œçš„æ’ä»¶ï¼ŒæŒ‰ LIFO åè¿›å…ˆå‡ºçš„æ–¹å¼è¿›è¡Œã€‚</p></blockquote><h2 id="pluggy-æ¡ˆä¾‹ä»£ç "><a href="#pluggy-æ¡ˆä¾‹ä»£ç " class="headerlink" title="pluggy æ¡ˆä¾‹ä»£ç "></a>pluggy æ¡ˆä¾‹ä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pluggy</span><br><span class="line"></span><br><span class="line">hookspec = pluggy.HookspecMarker(<span class="string">&quot;myproject&quot;</span>)</span><br><span class="line">hookimpl = pluggy.HookimplMarker(<span class="string">&quot;myproject&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MySpec</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;A hook specification namespace.&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @hookspec</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">myhook</span>(<span class="params">self, arg1, arg2</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;My special little hook that you can customize.&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Plugin_1</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;A hook implementation namespace.&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @hookimpl</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">myhook</span>(<span class="params">self, arg1, arg2</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;inside Plugin_1.myhook()&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> arg1 + arg2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Plugin_2</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;A 2nd hook implementation namespace.&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @hookimpl</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">myhook</span>(<span class="params">self, arg1, arg2</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;inside Plugin_2.myhook()&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> arg1 - arg2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># create a manager and add the spec</span></span><br><span class="line">pm = pluggy.PluginManager(<span class="string">&quot;myproject&quot;</span>)</span><br><span class="line">pm.add_hookspecs(MySpec)</span><br><span class="line"><span class="comment"># register plugins</span></span><br><span class="line">pm.register(Plugin_1())</span><br><span class="line">pm.register(Plugin_2())</span><br><span class="line"><span class="comment"># call our `myhook` hook</span></span><br><span class="line">results = pm.hook.myhook(arg1=<span class="number">1</span>, arg2=<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(results)</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä»£ç æ¥è‡ªå®˜æ–¹æ–‡æ¡£<br>&emsp;&emsp;æ‰§è¡Œä¼šå…ˆè§¦å‘ <code>Plugin_2</code> å†è§¦å‘ <code>Plugin_1</code></p></blockquote><blockquote><p>&emsp;&emsp;ä¸Šè¿°æ˜¯ pluggy æœ€ç®€å•çš„ç”¨æ³•<br>&emsp;&emsp;è¿˜æœ‰ <code>firstresult</code> <code>hookwrapper</code> ç­‰ç”¨æ³•<br>&emsp;&emsp;å¯ä»¥å‚ç…§æ–‡æ¡£è¯´æ˜å­¦ä¹ ï¼Œç”¨æ³•éå¸¸çµæ´»ã€‚</p></blockquote><hr><blockquote><p>&emsp;&emsp;<code>pm.hook.myhook</code> å°±æ˜¯åœ¨æºä»£ç ä¸­çš„ ä»£ç æ¡©ã€‚<br>&emsp;&emsp;ä¹‹å‰æ³¨å†Œçš„æ’ä»¶éƒ½ä¼šåœ¨è¿™ä¸ªä»£ç æ¡©ä¸­é€ä¸€è§¦å‘ã€‚<br>&emsp;&emsp;pluggy æ˜¯å¯é…ç½®çš„ï¼Œå¯ä»¥ç”¨ä»£ç åŠ¨æ€åœ°ä¿®æ”¹æ³¨å†Œåœ°æ’ä»¶ï¼Œå®æ—¶æ”¹å˜è¿è¡Œçš„é€»è¾‘ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;ä½¿ç”¨ pluggy å¯ä»¥å°†åŠŸèƒ½æ‹†åˆ†æˆå°æ–‡ä»¶</p></blockquote><ol><li>æ›´å¥½é€‚é…ä»£ç è§„èŒƒ</li><li>é€»è¾‘æ›´åŠ ç®€æ´æ¸…æ™°ï¼ŒæŸ¥æ‰¾æ–¹ä¾¿</li><li>åŠŸèƒ½æ‰©å±•ç®€å•</li><li>å¯ç”¨ç¦ç”¨åŠŸèƒ½å¾ˆæ–¹ä¾¿</li></ol>]]></content>
    
    <summary type="html">
    
      pytest å›¢é˜Ÿå‡ºå“ | è®©ä»£ç å˜å¾—å¯æ‰©å±•
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Python addict åº“</title>
    <link href="https://blog.l0v0.com/posts/531dbb5a.html"/>
    <id>https://blog.l0v0.com/posts/531dbb5a.html</id>
    <published>2022-02-28T03:13:26.000Z</published>
    <updated>2022-07-30T07:31:57.891Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;</p></blockquote><h2 id="attrs-ä»‹ç»"><a href="#attrs-ä»‹ç»" class="headerlink" title="attrs ä»‹ç»"></a>attrs ä»‹ç»</h2><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;</p></blockquote>]]></content>
    
    <summary type="html">
    
      åƒ JavaScript ä¸€æ ·ä½¿ç”¨å­—å…¸
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>Python attrs åº“</title>
    <link href="https://blog.l0v0.com/posts/1f4cc7d1.html"/>
    <id>https://blog.l0v0.com/posts/1f4cc7d1.html</id>
    <published>2022-02-28T02:13:51.000Z</published>
    <updated>2022-07-30T07:31:57.861Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;ä½œä¸º TA å·¥å…·äººï¼Œå·²ç»ç”¨ Python å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œå¾ˆå¤šå†…ç½®åº“éƒ½ä½¿ç”¨å¾—å¾—å¿ƒåº”æ‰‹äº†ã€‚<br>&emsp;&emsp;æœ€è¿‘å¼€å§‹å°è¯•äº†è§£ä¸€äº›ç¬¬ä¸‰æ–¹åº“ï¼Œä»è€Œèƒ½å¤Ÿæ›´å¥½è§£å†³ä¸€äº›å®é™…è¿ç”¨é‡åˆ°çš„é—®é¢˜ã€‚<br>&emsp;&emsp;attrs è¿™ä¸ªåº“æ˜¯ä¸€ä¸ªéå¸¸ä¸é”™çš„ä»£ç ä¼˜åŒ–æ–¹æ¡ˆã€‚<br>&emsp;&emsp;å¯ä»¥ç®€ç•¥äº†å¾ˆå¤šç±»æè¿°çš„æ–¹æ³•ã€‚</p></blockquote><p><a href="https://github.com/python-attrs/attrs">Github åœ°å€</a><br><a href="https://www.attrs.org/en/stable/">å®˜æ–¹è¯´æ˜æ–‡æ¡£</a></p><h2 id="attrs-è§£å†³çš„é—®é¢˜"><a href="#attrs-è§£å†³çš„é—®é¢˜" class="headerlink" title="attrs è§£å†³çš„é—®é¢˜"></a>attrs è§£å†³çš„é—®é¢˜</h2><blockquote><p>&emsp;&emsp;attrs ç»Ÿä¸€äº†ç±»å±æ€§æè¿°ï¼Œè®©ä»£ç æ›´åŠ ç®€æ´å¯è¯»ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ArtisanalClass</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, a, b</span>):</span><br><span class="line">        self.a = a</span><br><span class="line">        self.b = b</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ArtisanalClass(a=&#123;&#125;, b=&#123;&#125;)&quot;</span>.<span class="built_in">format</span>(self.a, self.b)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__eq__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">if</span> other.__class__ <span class="keyword">is</span> self.__class__:</span><br><span class="line">            <span class="keyword">return</span> (self.a, self.b) == (other.a, other.b)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NotImplemented</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__ne__</span>(<span class="params">self, other</span>):</span><br><span class="line">        result = self.__eq__(other)</span><br><span class="line">        <span class="keyword">if</span> result <span class="keyword">is</span> <span class="literal">NotImplemented</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NotImplemented</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">not</span> result</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__lt__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">if</span> other.__class__ <span class="keyword">is</span> self.__class__:</span><br><span class="line">            <span class="keyword">return</span> (self.a, self.b) &lt; (other.a, other.b)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NotImplemented</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__le__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">if</span> other.__class__ <span class="keyword">is</span> self.__class__:</span><br><span class="line">            <span class="keyword">return</span> (self.a, self.b) &lt;= (other.a, other.b)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NotImplemented</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__gt__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">if</span> other.__class__ <span class="keyword">is</span> self.__class__:</span><br><span class="line">            <span class="keyword">return</span> (self.a, self.b) &gt; (other.a, other.b)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NotImplemented</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__ge__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">if</span> other.__class__ <span class="keyword">is</span> self.__class__:</span><br><span class="line">            <span class="keyword">return</span> (self.a, self.b) &gt;= (other.a, other.b)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NotImplemented</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__hash__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">hash</span>((self.__class__, self.a, self.b))</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å¦‚æœè¦å†™ä¸€ä¸ªå®Œæ•´çš„ç±»éœ€è¦åŠ ä¸Šå¾ˆå¤šå†…ç½®æ–¹æ³•çš„å®ç°ã€‚<br>&emsp;&emsp;è¿™ä¼šå¯¼è‡´å¤§é‡çš„é‡å¤å·¥ä½œï¼Œè€Œä¸”ä»£ç ä¼šéå¸¸å†—é•¿ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SmartClass</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">   a = attr.ib()</span><br><span class="line">   b = attr.ib()</span><br></pre></td></tr></table></figure><p>ä»£ç ä¾‹å­æ¥æºäº <a href="https://www.attrs.org/en/20.3.0/why.html#hand-written-classes">æ–‡æ¡£</a></p><blockquote><p>&emsp;&emsp;attrs åªéœ€è¦ç®€å•çš„æè¿°å°±å¯ä»¥å¸®ä½ å®Œæˆä¸Šé¢ä¸€å¤§å †çš„åŠŸèƒ½ï¼Œéå¸¸æœ‰ç”¨ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SM_Controller</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,polyName,col,row,conPre,size,shape,color,shape</span>):</span><br><span class="line">        self.start = start</span><br><span class="line">        self.polyName = polyName</span><br><span class="line">        self.col = col</span><br><span class="line">        self.row = row</span><br><span class="line">        self.conPre = conPre</span><br><span class="line">        self.size = size</span><br><span class="line">        self.shape = shape</span><br><span class="line">        self.color = color</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SM_Controller</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    polyName = attr.ib()</span><br><span class="line">    col = attr.ib()</span><br><span class="line">    row = attr.ib()</span><br><span class="line">    conPre = attr.ib()</span><br><span class="line">    size = attr.ib()</span><br><span class="line">    shape = attr.ib()</span><br><span class="line">    color = attr.ib()</span><br><span class="line">    shape = attr.ib()</span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¸Šé¢å°±æ˜¯å®æˆ˜ä¸­çš„ä¾‹å­</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/1f4cc7d1/01.png" alt="alt"></p><blockquote><p>&emsp;&emsp;æ‰“å°å¯¹è±¡çš„æ—¶å€™ä½¿ç”¨ attrs ä¹Ÿä¼šå˜å¾—æ¸…æ™°ã€‚</p></blockquote><h2 id="attrs-ä»‹ç»"><a href="#attrs-ä»‹ç»" class="headerlink" title="attrs ä»‹ç»"></a>attrs ä»‹ç»</h2><h3 id="ä¸å¯å˜ç±»æ„å»º"><a href="#ä¸å¯å˜ç±»æ„å»º" class="headerlink" title="ä¸å¯å˜ç±»æ„å»º"></a>ä¸å¯å˜ç±»æ„å»º</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"><span class="meta">@attr.s(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SmartClass</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">   a = attr.ib()</span><br><span class="line">   b = attr.ib()</span><br><span class="line"></span><br><span class="line">smart = SmartClass(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">smart.a = <span class="number">3</span></span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span></span><br><span class="line"><span class="comment">#   File &quot;c:\_thm\rez_local_cache\ext\attrs\21.4.0\site-packages\attr\_make.py&quot;, line 642, in _frozen_setattrs</span></span><br><span class="line"><span class="comment">#     raise FrozenInstanceError()</span></span><br><span class="line"><span class="comment"># attr.exceptions.FrozenInstanceError</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;åŠ å…¥ frozen å‚æ•°å¯ä»¥è®©ç±»åˆå§‹åŒ–ä¹‹åä¸å¯æ”¹å˜ã€‚</p></blockquote><h3 id="éªŒè¯æ•°æ®"><a href="#éªŒè¯æ•°æ®" class="headerlink" title="éªŒè¯æ•°æ®"></a>éªŒè¯æ•°æ®</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SmartClass</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">   a = attr.ib()</span><br><span class="line">   b = attr.ib()</span><br><span class="line"><span class="meta">   @a.validator</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">must_be_str</span>(<span class="params">self,attribute,value</span>):</span><br><span class="line">       <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(value,<span class="built_in">str</span>):</span><br><span class="line">           <span class="keyword">raise</span> ValueError(<span class="string">&quot;must be a string type&quot;</span>)</span><br><span class="line"></span><br><span class="line">smart = SmartClass(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span></span><br><span class="line"><span class="comment">#   File &quot;&lt;attrs generated init __main__.SmartClass-2&gt;&quot;, line 5, in __init__</span></span><br><span class="line"><span class="comment">#   File &quot;&lt;stdin&gt;&quot;, line 8, in must_be_str</span></span><br><span class="line"><span class="comment"># ValueError: must be a string type</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ”¯æŒå¯¹åˆå§‹åŒ–çš„æ•°æ®è¿›è¡Œæ ¡éªŒã€‚</p></blockquote><h3 id="å‚æ•°é»˜è®¤å€¼"><a href="#å‚æ•°é»˜è®¤å€¼" class="headerlink" title="å‚æ•°é»˜è®¤å€¼"></a>å‚æ•°é»˜è®¤å€¼</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SmartClass</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">   a = attr.ib(default=<span class="number">1</span>)</span><br><span class="line">   b = attr.ib(factory=<span class="built_in">list</span>)</span><br><span class="line">smart = SmartClass()</span><br><span class="line"><span class="built_in">print</span>(smart)  <span class="comment"># SmartClass(a=1, b=[])</span></span><br><span class="line">smart = SmartClass(b=<span class="number">2</span>,a=<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(smart)  <span class="comment"># SmartClass(a=&#x27;a&#x27;, b=2)</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;å‚æ•°æ·»åŠ é»˜è®¤å€¼ä¹‹åå¯ä»¥ä¸è¿›è¡Œä¼ å‚ï¼Œä¹Ÿå¯ä»¥ç”¨é”®å€¼è¿›è¡Œä¼ å‚ã€‚<br>&emsp;&emsp;ä½¿ç”¨ attrs æ„å»ºç±»å°±å˜å¾—æ›´åŠ çµæ´»ã€‚</p></blockquote><h2 id="è¸©è¿‡çš„å‘"><a href="#è¸©è¿‡çš„å‘" class="headerlink" title="è¸©è¿‡çš„å‘"></a>è¸©è¿‡çš„å‘</h2><h3 id="mutable-å®¹å™¨"><a href="#mutable-å®¹å™¨" class="headerlink" title="mutable å®¹å™¨"></a>mutable å®¹å™¨</h3><blockquote><p>&emsp;&emsp;æ„å»º mutable å®¹å™¨çš„æ—¶å€™ï¼Œéœ€è¦ç”¨ factory å‚æ•°æˆ–è€… <code>attr.ib(default=attr.factory(list))</code><br>&emsp;&emsp;å‚æ•°é»˜è®¤å€¼ä½¿ç”¨æ•°ç»„å’Œå­—å…¸è¿™ç±» mutable å®¹å™¨ä¼šå¯¼è‡´å¾ˆå¤šé—®é¢˜</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">return_list</span>(<span class="params">a=[]</span>):</span><br><span class="line">    a.append(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line">a = return_list()</span><br><span class="line"><span class="built_in">print</span>(a)  <span class="comment"># [1]</span></span><br><span class="line">a = return_list()</span><br><span class="line"><span class="built_in">print</span>(a)  <span class="comment"># [1, 1] è¿™é‡Œçš„ç»“æœé¢„æœŸæ˜¯ [1] æ‰å¯¹</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;è™½ç„¶æˆ‘ä»¬æƒ³è¦è¿›å…¥å‡½æ•°çš„æ—¶å€™ a çš„é»˜è®¤å€¼éƒ½æ˜¯è¿™ä¸ªæ•°ç»„ã€‚<br>&emsp;&emsp;ç„¶è€Œå®é™…è¿è¡Œçš„æ—¶å€™èµ‹å€¼åªå‘ç”Ÿäº†ä¸€æ¬¡ï¼Œå¹¶ä¸ä¼šæ¯æ¬¡å‡½æ•°è¿è¡Œéƒ½é‡ç½®é»˜è®¤å€¼çš„ã€‚<br>&emsp;&emsp;æ‰€ä»¥å‚æ•°ä¸èƒ½ä½¿ç”¨ [] {} è¿™äº›å®¹å™¨ï¼Œè€Œæ˜¯æ¨èä½¿ç”¨ Noneï¼Œç„¶åå†å‡½æ•°ä¸­åˆå§‹åŒ–</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">return_list</span>(<span class="params">a=<span class="literal">None</span></span>):</span><br><span class="line">    a = a <span class="keyword">if</span> a <span class="keyword">else</span> []</span><br><span class="line">    a.append(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">a = return_list()</span><br><span class="line"><span class="built_in">print</span>(a)  <span class="comment"># [1]</span></span><br><span class="line">a = return_list()</span><br><span class="line"><span class="built_in">print</span>(a)  <span class="comment"># [1]</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;æ‰€ä»¥å¦‚æœé»˜è®¤å€¼æƒ³è¦ä¸º æ•°ç»„ ä¹‹ç±»çš„ï¼Œéœ€è¦ç”¨ attrs æä¾›çš„ factory æ–¹æ³•ã€‚</p></blockquote><h3 id="hash-å€¼"><a href="#hash-å€¼" class="headerlink" title="hash å€¼"></a>hash å€¼</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SmartClass</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    a = attr.ib(default=<span class="number">1</span>)</span><br><span class="line">    b = attr.ib(factory=<span class="built_in">list</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">smart = SmartClass()</span><br><span class="line">a = &#123;smart: <span class="number">1</span>&#125;</span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#   File &quot;f:/repo/_blog/source/_posts/Python/pacakge/01_attrs.py&quot;, line 11, in &lt;module&gt;</span></span><br><span class="line"><span class="comment">#     a = &#123;smart: 1&#125;</span></span><br><span class="line"><span class="comment"># TypeError: unhashable type: &#x27;SmartClass&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;attrs é»˜è®¤å¤„ç† <code>__hash__</code> æ–¹æ³•ï¼Œæ‰€ä»¥æ— æ³•æŠŠå®ƒå½“æˆé”®å€¼ä½¿ç”¨ã€‚<br>&emsp;&emsp;ç„¶è€Œä¸ä½¿ç”¨ attrs è£…é¥°çš„è¯æ˜¯å¯ä»¥çš„ã€‚<br>&emsp;&emsp;è§£å†³æ–¹æ³•å°±æ˜¯åŠ ä¸Š <a href="mailto:`@attr.s">`@attr.s</a>(hash=False)` å°±å¯ä»¥äº†ã€‚</p></blockquote><p><a href="https://www.attrs.org/en/20.3.0/hashing.html">å‚è€ƒæ–‡æ¡£ Hashing çš„éƒ¨åˆ†</a></p><h3 id="init-åˆå§‹åŒ–"><a href="#init-åˆå§‹åŒ–" class="headerlink" title="init åˆå§‹åŒ–"></a>init åˆå§‹åŒ–</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SmartClass</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    a = attr.ib(default=<span class="number">1</span>)</span><br><span class="line">    b = attr.ib(factory=<span class="built_in">list</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,*args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">super</span>(SmartClass,self).__init__(*args, **kwargs)</span><br><span class="line">        <span class="built_in">print</span>(<span class="number">123</span>)</span><br><span class="line">        </span><br><span class="line">smart = SmartClass()  <span class="comment"># å­ç±»å¹¶æ²¡æœ‰æ‰“å°æ•°æ®è¾“å‡º</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>&emsp;&emsp;ä¾ç…§æ–‡æ¡£ attrs çš„è£…é¥°å™¨ä¼šè¦†ç›–æ‰åŸæœ‰çš„ <code>__init__</code><br>&emsp;&emsp;ä½†æ˜¯å¦‚æœæˆ‘ä»¬ç¡®å®è¦åœ¨ <code>__init__</code> è¿›è¡Œæ•°æ®å¤„ç†ï¼Œéœ€è¦ä½¿ç”¨ <code>__attrs_post_init__</code> æ–¹æ³•<br>&emsp;&emsp;æˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼è°ƒç”¨ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SmartClass</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    a = attr.ib(default=<span class="number">1</span>)</span><br><span class="line">    b = attr.ib(factory=<span class="built_in">list</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__attrs_post_init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="number">123</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SuperClass</span>(<span class="title class_ inherited__">SmartClass</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">super</span>(SuperClass, self).__init__(*args, **kwargs)</span><br><span class="line">        <span class="built_in">print</span>(<span class="number">456</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">smart = SmartClass()  <span class="comment"># æ‰“å° 123</span></span><br><span class="line">sup = SuperClass()  <span class="comment"># æ‰“å° 123 456</span></span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;Python3.7 åŠ å…¥äº† dataclass å†…ç½®æ¨¡å—ï¼ŒåŸºæœ¬ä¸Šæ¶µç›– attrs å¤§å¤šæ•°åŠŸèƒ½ã€‚<br>&emsp;&emsp;attrs çš„å¥½å¤„åœ¨äºè€ç‰ˆæœ¬å®Œç¾å…¼å®¹ Python2 å¯ä»¥åœ¨ Maya ç­‰ DCC é‡Œé¢ä½¿ç”¨ã€‚<br>&emsp;&emsp;è®©ä»£ç ç¼–å†™æ›´åŠ ç´§å‡‘å’Œç®€æ´ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      ç®€åŒ–ç±»æè¿°ç¥åº“
    
    </summary>
    
      <category term="Python" scheme="https://blog.l0v0.com/categories/Python/"/>
    
    
      <category term="à •Python" scheme="https://blog.l0v0.com/tags/%E0%A0%95Python/"/>
    
  </entry>
  
  <entry>
    <title>2021 å¹´åº¦æ€»ç»“</title>
    <link href="https://blog.l0v0.com/posts/2dac7475.html"/>
    <id>https://blog.l0v0.com/posts/2dac7475.html</id>
    <published>2022-01-09T13:45:52.000Z</published>
    <updated>2022-07-30T07:31:57.584Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;æœ€è¿‘å¥½é•¿ä¸€æ®µæ—¶é—´æ²¡æœ‰æ›´æ–°åšå®¢äº†<br>&emsp;&emsp;è¿™ä¸ªå¹´åº¦ç»ˆç»“ä¹Ÿå¤§éƒ¨åˆ†éƒ½æ˜¯ 1æœˆ1æ—¥å°±æ›´æ–°äº†ï¼Œæˆ‘ç¡¬æ˜¯æ‹–åˆ°äº†1æœˆä¸­æ—¬<em>(:Ğ·ã€âˆ )</em><br>&emsp;&emsp;æœ€è¿‘å‘ç”Ÿäº†å¾ˆå¤šäº‹ï¼Œæœ‰å¾ˆå¤šä¸œè¥¿å¯ä»¥è®°å½•ï¼Œä½†åˆä¸çŸ¥é“ä»å“ªé‡Œä¸‹ç¬”çš„è¿·ä¹‹æ„Ÿè§‰ã€‚</p></blockquote><h2 id="å¹´åº¦å¤§äº‹æ±‡æ€»"><a href="#å¹´åº¦å¤§äº‹æ±‡æ€»" class="headerlink" title="å¹´åº¦å¤§äº‹æ±‡æ€»"></a>å¹´åº¦å¤§äº‹æ±‡æ€»</h2><ol><li>æ´»æ°´å»å…‰å­å·¥ä½œå®¤</li><li>æ­å»º Unreal-PyToolkit æ¡†æ¶ï¼Œåšå®¢å¤§é‡æ›´æ–°è‡ªå·±çš„è¸©å‘ç»å†</li><li>æŠ˜è…¾ PKM çš„å†ç¨‹ å…·ä½“å¯ä»¥çœ‹ <a href="https://blog.l0v0.com/posts/afa065b7.html">PKMæ–‡ç« æ€»ç»“</a></li><li>åŸºé‡‘ç†è´¢ (åå¤å…¨çƒä¼˜é€‰æ´¾)</li><li>äº¤åˆ°ç¬¬ä¸€ä¸ªå¥³æœ‹å‹â¤</li></ol><h2 id="å·¥ä½œ-amp-å­¦ä¹ "><a href="#å·¥ä½œ-amp-å­¦ä¹ " class="headerlink" title="å·¥ä½œ &amp; å­¦ä¹ "></a>å·¥ä½œ &amp; å­¦ä¹ </h2><blockquote><p>&emsp;&emsp;ä¸€æ™ƒçœ¼é—´ï¼Œæˆ‘å·²ç»æ¯•ä¸šä¸€å¹´æœ‰ä½™äº†ï¼Œæˆ‘æ˜¯ 2020 å¹´æ¯•ä¸šçš„ï¼Œä¸è¿‡æˆ‘ä» 2019 å¹´å¹´åº•å°±è¿‡æ¥åœ¨é­”æ–¹å·¥ä½œå®¤å®ä¹ ã€‚<br>&emsp;&emsp;åˆ°2021å¹´10æœˆä»½æ´»æ°´åˆ°å…‰å­ï¼Œåœ¨é­”æ–¹ä¹Ÿæœ‰å¿«ä¸¤å¹´äº†ã€‚<br>&emsp;&emsp;è¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬ TA å›¢é˜Ÿäººå‘˜æµå¤±ä¸¥é‡ï¼Œåœ¨æˆ‘æ´»æ°´åŒæ—¶è¿˜æœ‰å…¶ä»–äººä¹Ÿé€‰æ‹©äº†æ´»æ°´ï¼Œä»…ä»…2021å¹´å°±åŸºæœ¬èµ°äº†ä¸€åŠçš„äºº<em>(:Ğ·ã€âˆ )</em><br>&emsp;&emsp;åªèƒ½è¯´è¿™è¾¹æ ¹æœ¬ç•™ä¸ä½äººï¼Œä¸€æ–¹é¢ TA æ¯”è¾ƒæŠ¢æ‰‹ï¼Œè¿™è¾¹çš„é’±ä¸å¤Ÿï¼Œå¦ä¸€æ–¹é¢æ˜¯è¿™è¾¹çš„å›¢é˜Ÿå»ºè®¾çœŸçš„ä¸å¤ªè¡Œ</p></blockquote><blockquote><p>&emsp;&emsp;å…³äºè¿™è¾¹çš„é—®é¢˜ï¼Œå…¶å®æˆ‘æœ‰å¾ˆå¤šè¯æƒ³è¦åæ§½ï¼Œä½†æ€»å½’æ˜¯åœ¨è¿™é‡Œå¿«ä¸¤å¹´äº†ï¼Œè™½æœ‰ä¸æ„‰å¿«ï¼Œä¹Ÿé€¼ç€è‡ªå·±æˆé•¿äº†ä¸å°‘ï¼Œæˆ‘è¿˜æ˜¯æ„Ÿè°¢çš„ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;æˆ‘æ¥åˆ°é­”æ–¹åŠå¹´ï¼Œè¿˜æ²¡æœ‰åˆ°æ¯•ä¸šè½¬æ­£ï¼Œæˆ‘å¯¼å¸ˆå°±è·‘å»å…‰å­äº†ã€‚è€Œä¸”åˆšæ¥ä¸¤ä¸ªæ˜ŸæœŸå°±è¢«åˆ†æ´¾åˆ°é¡¹ç›®ç»„é‡Œé¢ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯é è‡ªå·±è‡ªåŠ›æ›´ç”Ÿè§£å†³é—®é¢˜ä¸ºä¸»ã€‚<br>&emsp;&emsp;æ‰€ä»¥é‚£ä¼šæŒºç„¦è™‘çš„ï¼Œè€Œä¸”ä½œä¸º TA ä¸€ç›´åœ¨å¹² TD çš„æ´»ï¼Œä¹Ÿæœ‰ç‚¹åä¸å‰¯å®<em>(:Ğ·ã€âˆ )</em></p></blockquote><blockquote><p>&emsp;&emsp;ä¸è¿‡æˆ‘çš„é­é‡å·²ç»ç®—å¥½äº†ï¼Œé¡¹ç›®ç»„é‡Œæœ‰ä¸ªæ ¡æ‹›çš„è§’è‰²ç¾æœ¯æ›´æƒ¨ï¼Œå½“æ—¶è§’è‰²æ¨¡å‹ç»„å°±ä¸¤ä¸ªæ­£ç¼–ï¼Œå¹´åéƒ½è·‘è·¯äº†ã€<br>&emsp;&emsp;åˆšè¿‡æ¥å¯¼å¸ˆæ²¡äº†ï¼Œç»„é‡Œå°±ä»–ä¸€ä¸ªäºº<em>(:Ğ·ã€âˆ )</em>ï¼Œæ‰€ä»¥è¿™æ˜¯ä»€ä¹ˆç¥ä»™å¼€å±€, ç„¶åé¡¹ç›®ç»„ä¹‹åè°ƒæ´¾å¦ä¸€ä¸ªå·¥ä½œå®¤çš„ 6 çº§ç¾æœ¯è¿‡æ¥å¸®å¿™ã€‚<br>&emsp;&emsp;å› ä¸ºè¿™ä¸ªç¾æœ¯ä¹‹å‰å®ä¹ çš„æ—¶å€™åœ¨è¿™ä¸ªé¡¹ç›®ç»„å¾…è¿‡ã€‚<br>&emsp;&emsp;æ‰€ä»¥ç´§é ä¸¤ä¸ªäººæ–°äººæ ¹æœ¬å°±æ²¡æ³•æŠŠæ•ˆæœåšå¥½ï¼Œå¯¹æ¥å¥½å¤–åŒ…ï¼ŒæŠŠæ¨¡å‹æ¨åˆ°ä¸‹æ¸¸æµç¨‹å·²ç»å°½åŠ›äº†<em>(:Ğ·ã€âˆ )</em><br>&emsp;&emsp;è€Œä¸”ç”±äºé¡¹ç›®æ˜¯æ‰‹ç»˜é£æ ¼ï¼Œè¿˜ä¸€ç›´æ‹›ä¸åˆ°åˆé€‚çš„äººè¿‡æ¥ï¼Œæœ€åå¥½ä¸å®¹æ˜“æ‹›åˆ°äº†ï¼Œæ•´ä¸ªç»„ä¹Ÿå°±ä¸¤äººã€‚<br>&emsp;&emsp;è€ƒæ ¸çš„æ—¶å€™ç”±äºæ¨¡å‹æ•ˆæœæ²¡æœ‰æå‡ï¼Œç»„å†…å¿…é¡»æœ‰ä¸€ä¸ªäººèƒŒæ˜Ÿï¼Œé‚£ä½æ ¡æ‹›ç”Ÿä¹Ÿåªèƒ½é»˜é»˜æ‰¿æ‹…ã€‚<br>&emsp;&emsp;Îµ=(Â´Î¿ï½€*)))ï¼Œä»–çš„ 2021 å¹´å¼€å¹´æ˜¯ 2 æ˜Ÿè¯„ä»·ï¼Œå¹´ç»ˆå¤§ç ã€‚æˆ‘å¥½æ­¹è¿˜æ˜¯æ‹¿äº† 4 æ˜Ÿï¼Œæ‰€ä»¥æœ‰æ—¶å€™äººæ¯”äººæ¯”æ­»äººã€‚</p></blockquote><blockquote><p>&emsp;&emsp;é‚£ä¸ºä»€ä¹ˆæˆ‘èƒ½æ‹¿åˆ° 4 æ˜Ÿå‘¢ï¼Ÿ<br>&emsp;&emsp;ä¸»è¦è¿˜æ˜¯å› ä¸ºï¼Œ2020å¹´å¹´ä¸­çš„æ—¶å€™ä» Weta æ¥äº†ä¸€ä¸ª TD è½¬ TA çš„å¤§ä½¬ï¼Œleader å°†ä»–å®šä½æˆæˆ‘ä»¬ç»„çš„ç»„é•¿ã€‚<br>&emsp;&emsp;æˆ‘å½“æ—¶è½¬åˆ°ä¸­å°åšå·¥å…·ï¼Œæ”¯æ´å¤šä¸ªé¡¹ç›®ï¼Œå°±åœ¨ä»–èº«è¾¹å­¦ä¹ äº†å¾ˆå¤šçŸ¥è¯†ã€‚<br>&emsp;&emsp;è™½ç„¶å¾ˆå¤šéƒ½æ˜¯é çœ‹ä»–å†™çš„ä»£ç å­¦ä¹ çš„ï¼Œå¹¶æ²¡æœ‰æ€ä¹ˆè¯·æ•™ä»–ï¼Œæ”¯æ´çš„é¡¹ç›®ä¹Ÿä¸ä¸€æ ·ï¼Œä½†è¿˜æ˜¯å¾ˆæ„Ÿæ¿€ã€‚<br>&emsp;&emsp;ä»–ä¹Ÿèƒ½å¤Ÿç†è§£æˆ‘çš„å·¥ä½œï¼Œæ‰€ä»¥èƒ½å¤Ÿç»™æˆ‘æ¯”è¾ƒå®¢è§‚çš„è¯„ä»·ã€‚(å› ä¸ºç»„é‡Œçš„ leader æ˜¯ä¸ªä¸»ç¾ï¼Œå¿™é¡¹ç›®ç»„çš„äº‹æƒ…å°±å¤Ÿå‘›äº†ï¼ŒåŸºæœ¬ä¸å¤ªäº†è§£æˆ‘ä»¬çš„æƒ…å†µ)<br>&emsp;&emsp;ç„¶è€Œ 2021 å¹´å¼€å¹´ç»ˆç©¶è¿˜æ˜¯è¦ TA ç»„ç»™åé¢èƒŒé”…ï¼Œä¹Ÿå¯¼è‡´åé¢å¹´ä¸­çš„æ—¶å€™æœ‰äººå› æ­¤æµå¤±äº†ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;2021 å¹´æ˜¥èŠ‚ç»“æŸä¹‹åï¼Œé¦–å…ˆæ˜¯æœ‰ä¸¤ä¸ª TA æ™‹çº§çš„ï¼Œæ™‹çº§å®Œæˆå°±æ´»æ°´å»å…‰å­äº†ã€‚<br>&emsp;&emsp;åˆ°äº† 5 æœˆä»½çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„ç»„é•¿ä¹Ÿæµå¤±äº†ï¼Œæ¯•ç«Ÿè¿™è¾¹çš„æµç¨‹å¾ˆæ··ä¹±ï¼Œæœ‰å¾ˆå¤šæµç¨‹æ ¹æœ¬æ¨ä¸åŠ¨ï¼Œä¹Ÿçœ‹ä¸åˆ°å¤´ã€‚<br>&emsp;&emsp;å¹´ä¸­çš„æ—¶å€™é‚£ä½èƒŒé”…çš„ TA ä¹Ÿæ‰¾åˆ°ä¸‹å®¶ï¼Œç›´æ¥ç¦»èŒäº†ï¼Œè€Œä¸”ä»–å®¶åœ¨ä¸Šæµ·ï¼Œæœ¬æ¥ä¹Ÿä¸ç”¨è¿‡æ¥æ·±åœ³ï¼Œç»“æœè¿‡æ¥è¿˜èƒŒé”…ï¼Œä»–ä¹Ÿç®—æ˜¯ä»è‡³ä¹‰å°½äº†ã€‚<br>&emsp;&emsp;è‡ªä»ç»„é•¿èµ°äº†ä¹‹åï¼Œç»„å†…å°±æ²¡äº†ä¸»å¿ƒéª¨ï¼Œæˆ‘ä¹Ÿè§‰å¾—å­¦ä¸åˆ°ä¸œè¥¿ï¼Œä¸€ç›´åœ¨å¹²æ‚æ´»ï¼ŒæŒºç„¦è™‘çš„ã€‚<br>&emsp;&emsp;åŠ ä¸Šé‚£ä¸ªæ—¶å€™å¼€å§‹å¸®é¡¹ç›®ç»„çš„ä¸€ä¸ªç¾æœ¯æ­å»ºç¾æœ¯å·¥å…·ï¼Œç»“æœæˆ‘ä»¬éƒ½æŠŠæ–¹æ¡ˆå®šå¥½äº†ï¼Œå‡†å¤‡æ¨è¡Œçš„æ—¶å€™ï¼Œç¨‹åºleader è§‰å¾—æ–¹æ¡ˆä¸å¯è¡Œï¼Œæ¥å›æŠ˜è…¾ã€‚<br>&emsp;&emsp;æ‰€ä»¥ 5 æœˆä»½éå¸¸éš¾é¡¶ï¼Œå½“æ—¶æœ‰ç»éªŒæ¨åŠ¨ç¾æœ¯æµç¨‹çš„æ˜¯ä»å¤©ç¾è¿‡æ¥çš„ç¾æœ¯ï¼Œæˆ‘è¿™ä¸ªæ— èƒ½ TA åªèƒ½å¬ä»–çš„å»ºè®®æ¥åˆ¶å®šç¾æœ¯è§„èŒƒã€‚<br>&emsp;&emsp;å¯èƒ½æœ‰æ›´å¥½åœ°åšæ³•ï¼Œä½†æ˜¯æˆ‘ä¹Ÿæ²¡æœ‰è¶³å¤Ÿçš„ç»éªŒï¼Œè‡³å°‘ä»–æçš„æ–¹æ¡ˆçš„ç¡®æ¯”èµ·å½“å‰æ··ä¹±çš„è§„èŒƒè¦å¥½ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿå°±æ¥å—äº†ã€‚<br>&emsp;&emsp;å½“ç„¶ä¸ºäº†åšä»–çš„å·¥å…·åœ¨ Unreal é‡Œé¢è°ƒç”¨ Qt è¸©äº†éå¸¸å¤šçš„å‘ï¼Œ21å¹´æ›´æ–°çš„å¾ˆå¤šåšå®¢éƒ½æ˜¯å’Œ Unreal Python Qt å¼€å‘ç›¸å…³çš„ã€‚<br>&emsp;&emsp;æˆ‘ä¹Ÿé¡ºæ‰‹æ¨å‡ºäº† <a href="https://github.com/FXTD-ODYSSEY/Unreal-PyToolkit">Unreal-PyToolkit</a> å¼€æºæ¡†æ¶<br>&emsp;&emsp;å°†æˆ‘åšå®¢é‡Œé¢å¥½ä¸€äº›çš„æµç¨‹éƒ½æ•´åˆåˆ°é‡Œé¢å»äº†ï¼Œåªæ˜¯ç”±äºç¦»å¼€é­”æ–¹çš„åŸå› ï¼Œè¿™ä¸ªä»“åº“ç›®å‰å°±åœæ›´äº†ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;åŸºäºä¸Šé¢çš„ç§ç§æƒ…å†µï¼ŒåŠ ä¸Šæˆ‘ä¹Ÿå¿«æ»¡ä¸€å¹´å¯ä»¥æ´»æ°´äº†ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿéå¸¸æƒ³é€ƒç¦»<em>(:Ğ·ã€âˆ )</em><br>&emsp;&emsp;æ²¡æƒ³åˆ°æœ‰ç›¸åŒæƒ³æ³•å¯ä¸æ­¢æˆ‘ä¸€ä¸ªï¼Œæˆ‘èµ°äº†ä¹‹åè¿˜æœ‰ä¸¤ä¸ª TA ä¹Ÿè·Ÿç€æ´»æ°´ï¼Œé­”æ–¹çœŸçš„å¤ªéš¾äº†ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;æœ€å¼€å§‹æˆ‘è”ç³»æˆ‘äº†å‰å¯¼å¸ˆï¼Œæƒ³è¦ä»–å¸®å¿™å¼•èä¸€ä¸‹ï¼Œä¸è¿‡ä»–å·²ç»æŒ–äº†è¿™è¾¹å¾ˆå¤šäººäº†ã€‚<br>&emsp;&emsp;è€Œä¸”æˆ‘è¿™ä¸ªè¿‡å»ä»–é‚£è¾¹å¤ªæ˜æ˜¾äº†ï¼Œå¯èƒ½ä¸å¤ªå¥½ï¼ŒåŠ ä¸Šå½“æ—¶å…‰å­æ‰©æ‹›ï¼Œä»–çš„å°ç»„ç¼–åˆ¶çˆ†äº†ï¼Œæˆ‘è¿‡ä¸å»ã€‚<br>&emsp;&emsp;æ‰€ä»¥æœ€åæ˜¯<a href="https://www.zhihu.com/people/shi-qi-xing-29">æ˜Ÿå“¥</a>ä¸»åŠ¨æ‰¾æˆ‘èŠï¼Œåç»­ä¹Ÿå°±é¡ºç†å»äº†æ˜Ÿå“¥çš„ç»„ä¸‹ã€‚</p></blockquote><hr><blockquote><p>&emsp;&emsp;æ›¾ç»æœ‰ä¸€ä»½æ Houdini çš„æœºä¼šæ‘†åœ¨æˆ‘é¢å‰ï¼Œæˆ‘æ²¡æœ‰çæƒœï¼Œæ¯…ç„¶å†³ç„¶é€‰æ‹©äº†å…‰å­ï¼Œå¯èƒ½ä¹Ÿæ˜¯äººç”Ÿå²”è·¯çš„ä¸€ç§é—æ†¾å§~<br>&emsp;&emsp;å½“æ—¶è™½ç„¶å’Œæ˜Ÿå“¥è°ˆå¦¥äº†ï¼Œä½†æ˜¯é­”æ–¹ä¸­å°çš„ Falcon ç»„ç»„é•¿è¿˜æ˜¯æƒ³äº‰å–ä¸€ä¸‹ï¼Œè®©æˆ‘è¿‡å»ä»–ä»¬ç»„ã€‚<br>&emsp;&emsp;é‚£ä¸ªæ—¶å€™æˆ‘å·²ç»æ‹¿åˆ°äº† å…‰å­ é‚£è¾¹çš„æ´»æ°´é‚®ä»¶äº†ï¼Œå¦‚æœç‚¹ç¡®è®¤å°±æ²¡æœ‰å›å¤´ç®­äº†ã€‚<br>&emsp;&emsp;æƒ³åˆ°æ˜Ÿå“¥ç»™æˆ‘äº‰å–è¿™ä¸ªæœºä¼šä¹Ÿæ˜¯æŒºä¸å®¹æ˜“çš„(åæ¥æˆ‘æ‰å¾—çŸ¥ï¼Œä»–ä»¬ç»„é‡Œæœ‰äººæ´»æ°´äº†ï¼Œæˆ‘æ‰æœ‰è¿™ä¸ªæœºä¼šè¿‡å»)<br>&emsp;&emsp;åŠ ä¸Šå…‰å­æ¯”è¾ƒå›½é™…åŒ–ä»€ä¹ˆçš„ï¼Œæ‰€ä»¥æœ€åå°±æ”¾å¼ƒäº†å»é­”æ–¹ä¸­å°ï¼Œä¸»è¦è¿˜æ˜¯é­”æ–¹å¤ªè®©æˆ‘å¤±æœ›äº†<em>(:Ğ·ã€âˆ )</em><br>&emsp;&emsp;å¯èƒ½å½“æ—¶é€‰æ‹©å»é‚£è¾¹ï¼Œæˆ‘çš„äººç”Ÿä¹Ÿä¼šä¸ä¸€æ ·å§ï¼Œç»ˆç©¶è¿˜æ˜¯æ”¾ä¸ä¸‹ Houdini ï¼Œç„¶è€Œä¼¼ä¹å’Œå®ƒæ²¡æœ‰ä»€ä¹ˆç¼˜åˆ†ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;æ‰€ä»¥é‚£æ®µæ—¶é—´å‡†å¤‡è·‘è·¯äº†ï¼Œå°±è…¾äº†ä¸€äº›æ—¶é—´æ¥æŠ˜è…¾ PKM çš„äº‹æƒ…ï¼Œæ‰æœ‰åé¢çš„ <a href="https://blog.l0v0.com/posts/afa065b7.html">PKMæ–‡ç« æ€»ç»“</a></p></blockquote><hr><blockquote><p>&emsp;&emsp;åæ¥ç»è¿‡ä¸€äº›æ³¢æŠ˜ï¼Œæˆ‘åœ¨ 9 æœˆåº•çš„æ—¶å€™å°±æ¬åˆ°äº†æ–°çš„åŠå…¬åœ°ç‚¹ï¼Œå»åˆ°å…‰å­ä¸‹å·¥ä½œäº†ã€‚<br>&emsp;&emsp;åŸæœ¬æˆ‘è¿‡æ¥æ˜¯è´Ÿè´£ Unreal å¼•æ“å·¥å…·å¼€å‘çš„ï¼Œæˆ‘æ‰“ç®—æŠ±ç´§å¤§ä½¬çš„å¤§è…¿ï¼Œé¡ºä¾¿æ·±å…¥å­¦ä¹ ä¸€ä¸‹ å¼•æ“ å·¥å…·å¼€å‘ç›¸å…³çš„çŸ¥è¯†ã€‚<br>&emsp;&emsp;æ²¡æƒ³åˆ°æˆ‘è¿‡å»ä¹‹åï¼Œç»„é•¿æ”¹äº†æ–¹å‘ï¼Œæ‰“ç®—è¿›å†› Maya ç»‘å®šã€‚<br>&emsp;&emsp;æ°å¥½æˆ‘ä¹Ÿç®—æ˜¯åœ¨åå¼ºçš„æ—¶å€™ç§¯ç´¯äº†ä¸å°‘ç›¸å…³çš„çŸ¥è¯†ï¼Œå¯ä»¥æ´¾ä¸Šç”¨åœºï¼Œåªæ˜¯è®©æˆ‘ä¸‡ä¸‡æ²¡æœ‰æƒ³åˆ°çš„æ˜¯ã€‚<br>&emsp;&emsp;è¿™è¾¹å¾ˆå¤šäººéƒ½æ˜¯åš shader å‡ºèº«çš„ï¼Œä»–ä»¬å¯¹ Maya çš„äº†è§£å¹¶ä¸å¤šï¼Œæˆ‘åè€Œæˆäº†ä»–ä»¬çš„å¤§è…¿ã€‚<br>&emsp;&emsp;è¿™ä¸ªè½¬å˜æœ‰ç‚¹è®©æˆ‘ä¸çŸ¥é“å“­è¿˜æ˜¯ç¬‘<em>(:Ğ·ã€âˆ )</em></p></blockquote><blockquote><p>&emsp;&emsp;å…¶å®å’Œæˆ‘åŒæœŸæ´»æ°´çš„ï¼Œè¿˜æœ‰é¡¹ç›®ç»„çš„ä¸€ä¸ªç¨‹åºï¼Œå½“æ—¶ä»–ä¹Ÿå¯¹é­”æ–¹çš„ç®¡ç†æ„Ÿåˆ°å¤±æœ›ï¼ŒåŠ ä¸Šé’±ç»™çš„ä¸å¤šï¼Œæ‰€ä»¥å°±å»å¤©ç¾äº†ã€‚<br>&emsp;&emsp;æœ¬æ¥ä»–é‚£è¾¹çš„ç»„é•¿ç»™ä»–å¹å˜˜ä¸€å †æŠ€æœ¯ï¼Œè®©ä»–ä»¥ä¸ºå¾ˆé è°±ï¼Œå…¶å®è¿‡å»ä¹‹åä¹Ÿå°±é‚£æ ·ï¼Œè€Œä¸”è¿‡å»ä¹‹åå°±å˜è¾¹ç¼˜äººäº†ï¼Œæœ‰å¾ˆå¤šä¸œè¥¿ä¸èƒ½ä¸»å¯¼ã€‚<br>&emsp;&emsp;æˆ‘è¿™è¾¹çš„è¯å¯ä»¥ä¸»å¯¼å¾ˆå¤šä¸œè¥¿ï¼Œä½†æˆ‘è¿˜æ˜¯å¾ˆæ‹…å¿ƒè‡ªå·±çš„ç»éªŒä¸è¶³ä¼šæŠŠå¤§å®¶å¸¦åˆ°æ²Ÿé‡Œå»<em>(:Ğ·ã€âˆ )</em></p></blockquote><blockquote><p>&emsp;&emsp;æ°å¥½é‚£ä¸ªæ—¶å€™æˆ‘ä»å‚é•¿é‚£é‡Œæ‹¿åˆ°äº† RBF Retarget ç®—æ³•ç­‰ç­‰çš„ä¸€äº›æºç ï¼Œäºæ˜¯ç»è¿‡æˆ‘è‡ªå·±æ‘¸ç´¢å°è¯•æå‡ºäº†é€šè¿‡ RBF retarget æ¨¡å‹çš„æ–¹æ¡ˆã€‚<br>&emsp;&emsp;ä½¿ç”¨è¿™ä¸ªæ–¹æ¡ˆå¯ä»¥å°†ä¸åŒè„¸çš„æ¨¡å‹ç²¾å‡† retarget è¿‡å»ï¼Œå¯¹äº BS å¤ç”¨æœ‰éå¸¸å¥½çš„æ•ˆæœã€‚<br>&emsp;&emsp;æ²¡æƒ³åˆ°ï¼Œæˆ‘è¯¯æ‰“è¯¯æ’ç ”ç©¶å‡ºçš„æ–¹æ¡ˆï¼Œå‘ç°æ­£æ˜¯ç›®å‰ä¸šç•Œæ¯”è¾ƒå‰æ²¿çš„ç”¨æ³•ï¼Œä¹Ÿç®—æ˜¯è¿™å¥—æ–¹æ¡ˆçš„è½åœ°è®©æˆ‘å®Œæˆç¬¬ä¸€ç‰ˆçš„ demo<br>&emsp;&emsp;ä½†æ˜¯åˆ¶å®šç»‘å®šæ¡†æ¶ï¼Œæ•´ä¸ªæµç¨‹æ˜¯éå¸¸åºå¤§è€Œé•¿æœŸçš„äº‹æƒ…ï¼Œç›®å‰ç»„å†…åŠ ä¸Šæˆ‘ä¹Ÿå°± 4 ä¸ªäººï¼Œæˆ‘æ€»æ„Ÿè§‰ä¸€çœ¼æœ›ä¸åˆ°å¤´<em>(:Ğ·ã€âˆ )</em><br>&emsp;&emsp;å¹´åº•çš„æ—¶å€™åˆå› ä¸ºä¹˜ä¸Šäº† <code>å…ƒå®‡å®™</code> çš„ä¸œé£ï¼Œå‘ç°å…¬å¸å†…å¾ˆå¤šå›¢é˜Ÿéƒ½æƒ³åšç±»ä¼¼çš„ä¸œè¥¿ï¼Œç€å®è®©æˆ‘å‹åŠ›å±±å¤§ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ç”±äºåˆå›åˆ°äº† Maya ï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯æœªèƒ½å¦‚æ„¿ä»¥å¿åœ°ç”¨ä¸Š Houdini çš„æŠ€æœ¯ç‰¹æ€§ã€‚çœ‹æ¥è¿˜æ˜¯å¾—ç§ä¸‹å†æŠ½æ—¶é—´å»å­¦ä¹ å’Œç ”ç©¶äº†ã€‚<br>&emsp;&emsp;RBF ç­‰ç­‰ç®—æ³•ç”±äºè‡ªå·±çš„æ•°å­¦å¤ªèœäº†ï¼Œè¿˜æ²¡æœ‰æå¾—å¾ˆæ˜ç™½ï¼Œè¿˜éœ€è¦å†èŠ±æ—¶é—´æ¶è¡¥ä¸€ä¸‹è‡ªå·±çš„æ•°å­¦åŸºç¡€ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ä¸è¿‡å»äº†å…‰å­ä¹‹åï¼Œå€’æ˜¯è®¤è¯†äº† é¾™æµ©ï¼Œåœ¨ä»–é‚£è¾¹å­¦ä¹ åˆ°äº†å¾ˆå¤šä»£ç è§„èŒƒï¼Œci å·¥å…·æ„å»ºç­‰ç­‰çš„æµç¨‹çŸ¥è¯†ã€‚<br>&emsp;&emsp;æ€»ç®—æ˜¯ä½“ä¼šåˆ°å¤§å‚çš„è§„èŒƒåŒ–å¼€å‘çš„æ„Ÿè§‰ï¼Œä¹‹å‰åœ¨é¡¹ç›®ç»„çš„æ•æ·å¼€å‘å°±éå¸¸ç¦»è°±ï¼Œæ²¡æœ‰å•å…ƒæµ‹è¯•ï¼Œç”šè‡³æ²¡æœ‰ä»£ç å®¡æŸ¥ã€‚<br>&emsp;&emsp;åˆæœŸè¿˜èƒ½æ¥å—ï¼Œéšç€é¡¹ç›®è¶Šåšè¶Šå¤æ‚ï¼Œæˆ‘æ„Ÿè§‰å¾ˆå¤šæ—¶é—´éƒ½æµªè´¹åœ¨æ— ä¼‘æ­¢åœ°è°ƒè¯• BUG é‡Œé¢ï¼Œæµªè´¹æ—¶é—´ã€‚<br>&emsp;&emsp;åœ¨è¿™è¾¹æ¥è§¦äº†ä¸€æ•´å¥—ä»£ç è§„èŒƒå’Œå¼€å‘å·¥å…·ï¼Œè¿˜æœ‰ Git ä»£ç  Review ç­‰ç­‰çš„çŸ¥è¯†ï¼Œå­¦ä¹ åˆ°äº†å¾ˆå¤šçŸ¥è¯†ã€‚<br>&emsp;&emsp;æ‰€ä»¥è¿™æ®µæ—¶é—´å‘¨æœ«ä¼šå»æŠ½æ—¶é—´æŠŠç›¸åº”çš„çŸ¥è¯†è¡¥å…¨ï¼Œå¯¼è‡´åšå®¢è‡ªæ­¤åœæ›´äº†å¾ˆé•¿ä¸€æ®µæ—¶é—´ã€‚<br>&emsp;&emsp;å…¶å®ä¹Ÿæœ‰å¾ˆå¤§åŸå› æ˜¯æˆ‘è‡ªå·±æœ‰ç‚¹ç„¦è™‘ï¼Œä¹Ÿä¸çŸ¥é“ä»ä½•å¤„è½ç¬”æ¯”è¾ƒå¥½ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ä½†æ˜¯è¿™æ®µæ—¶é—´ä¸ä»…ä»…æ²¡æœ‰å¥½å¥½å†™åšå®¢ï¼Œä¹‹å‰ç«‹çš„ Flag è¦æŠŠ Anki å’Œ Tiddlywiki ç»™ç”¨èµ·æ¥ã€‚<br>&emsp;&emsp;ä¹Ÿå› ä¸ºå„ç§åŸå› æç½®äº†<em>(:Ğ·ã€âˆ )</em><br>&emsp;&emsp;çŸ¥é“æœ€è¿‘æ‰é€æ¸å¼€å§‹é‡æ–°å°† Tiddlywiki ç»™æ¡èµ·æ¥ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;ç›®å‰å·²ç»è¿‡æ¸¡åˆ° 2022 å¹´äº†ï¼Œç›®å‰çš„å·¥ä½œè¿›åº¦ç®—æ˜¯ç¨³å®šäº†ä¸€ç‚¹ã€‚</p></blockquote><h2 id="ç†è´¢"><a href="#ç†è´¢" class="headerlink" title="ç†è´¢"></a>ç†è´¢</h2><blockquote><p>&emsp;&emsp;2021å¹´æˆ‘å¼€å§‹å°†è‡ªå·±çš„å·¥èµ„æŠ•å…¥åˆ°ç†è´¢é‡Œé¢ã€‚<br>&emsp;&emsp;å¯æ˜¯æ²¡æƒ³åˆ° 2021 å¹´å¼€å¹´å°±æ˜¯é«˜å³°ï¼Œç„¶åå°±ä¸€è·¯ä½è¿·èµ°ä½ã€‚<br>&emsp;&emsp;å¥½åœ¨æˆ‘çš„é’±å¤§å¤´éƒ½åœ¨ ç™¾ä¿¡é“¶è¡Œ å­˜ç€(ç™¾ä¿¡é“¶è¡Œæœ‰ 3.2% çš„å›æŠ¥ï¼Œæ¯”å¾®ä¿¡å’Œæ”¯ä»˜å®è¦é«˜ä¸€ç‚¹ï¼Œä¹Ÿå¯ä»¥çµæ´»æ”¯å–)</p></blockquote><blockquote><p>&emsp;&emsp;å¼€å¹´çš„æ—¶å€™æˆ‘å¬æˆ‘å“¥çš„è¯´æ³•ï¼ŒæŠ•äº†è…¾è®¯çš„ä¸€èµ·æŠ• <code>åå¤å…¨çƒä¼˜é€‰æ´¾</code> å…¨çƒæŠ•èµ„ç»„åˆã€‚<br>&emsp;&emsp;è¿™æ˜¯ä¸€ä¸ªéå¸¸é«˜é£é™©çš„ç»„åˆï¼Œè¿‘ä¸€å¹´ä¸‹æ¥å·²ç»è·Œåˆ° è´Ÿæ•°<em>(:Ğ·ã€âˆ )</em><br>&emsp;&emsp;æ‰€ä»¥æ˜¯æ²¡èµšåè€Œäºäº†ã€‚<br>&emsp;&emsp;ä¸»è¦æ˜¯æ¸¯è‚¡å¹´åˆåŸæœ¬é¢„è®¡æ˜¯ä½æ´¼åœ°ï¼Œæ²¡æƒ³åˆ°ä¼šå› ä¸ºå„ç§å› ç´ ä¸€è·Œå†è·Œï¼Œå¯¼è‡´æš´é›·ã€‚<br>&emsp;&emsp;å†åŠ ä¸Šä»Šå¹´å‘ç”Ÿäº†å¥½ä¸€äº›çš„äº‹ä»¶ï¼Œä¸­æ¦‚è‚¡æ‰“å‹ã€æ•™è‚²è¡Œä¸šæ”¿ç­–ã€å›½å®¶åå„æ–­ç­‰ç­‰æ”¿ç­–éƒ½å¯¹äº’è”ç½‘è¡Œä¸šæ‰“å‡»æå¤§ã€‚<br>&emsp;&emsp;ä»¥è‡³äºåˆ°äº†å¹´åº•éƒ½è¯´ç°åœ¨æ˜¯äº’è”ç½‘å¯’å†¬ï¼Œå¸‚åœºä¸æ™¯æ°”ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;æˆ‘è¿™ä¸€å¹´2/3çš„é’±æ”¾åˆ°ç™¾ä¿¡é“¶è¡Œä¿æœ¬ï¼Œ1/3 æŠ•åˆ°äº†ä¸€èµ·æŠ•ã€‚<br>&emsp;&emsp;å¯ä»¥è¯´æ˜¯æŠ•èµ„ä¸å¤ªæˆåŠŸçš„æ ·å­<em>(:Ğ·ã€âˆ )</em><br>&emsp;&emsp;åç»­æ‰“ç®—å®šæŠ• ä¸­è¯500 æ²ªæ·±300 ä¹‹ç±»çš„æŒ‡æ•°åŸºé‡‘ï¼Œåªè¦å›½å®¶çš„ç»æµæ²¡æœ‰å‡ºç°å¤§é—®é¢˜ï¼Œè¿™ç±»åŸºé‡‘é•¿çº¿æŠ•èµ„åŸºæœ¬éƒ½æ˜¯èµšçš„ã€‚<br>&emsp;&emsp;åªæ˜¯ç›®å‰çš„æœ¬é’±æ¯”è¾ƒå°‘ï¼Œè¿˜éœ€è¦æ…¢æ…¢ç§¯ç´¯ï¼Œ<code>åå¤å…¨çƒä¼˜é€‰æ´¾</code> ç›®å‰è¿™ä¸ªå·²ç»æ²¡æœ‰ç»§ç»­å®šæŠ•äº†ã€‚<br>&emsp;&emsp;æŠ•è¿™ä¸ªåŸºé‡‘ä¹‹åˆä¹Ÿæ˜¯è¯´æŠ•å…¥ä¸‰å¹´å†å–ï¼Œæ‰€ä»¥å…ˆæ”¾åœ¨ä¸€è¾¹ï¼Œç­‰å®ƒçš„ä¸šç»©æ…¢æ…¢æ¢å¤å¥½äº†ã€‚</p></blockquote><hr><details><br><summary>çˆ±æƒ…</summary><br><br>2021 å¹´åœ£è¯æˆ‘é¼“èµ·å‹‡æ°”å‘Šç™½ï¼ŒæˆåŠŸäº¤åˆ°äº†æˆ‘ç¬¬ä¸€ä¸ªå¥³æœ‹å‹ã€‚<br>è¿™ç®—æ˜¯æˆ‘ 2021 å¹´æœ€å®Œç¾çš„æ”¶å®˜å’Œç‚¹ç›ä¹‹ç¬”äº†â¤ã€‚<br><br></details><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;2021 å¹´ç»å†äº†å¾ˆå¤šäº‹æƒ…ï¼Œè¿™æ˜¯æˆ‘æ¯•ä¸šæ­¥å…¥ç¤¾ä¼šçš„ç¬¬ä¸€ä¸ªå¹´å¤´ï¼Œåœ¨è¿™é‡Œæˆ‘åªæƒ³æ„Ÿå¹æ—¶å…‰é£é€ï¼Œå²æœˆå¦‚æ¢­ã€‚<br>&emsp;&emsp;å¤§å­¦çš„æ—¶å…‰ä»¿ä½›è¿˜åœ¨æ˜¨æ—¥ï¼Œä½†æˆ‘å·²ä¸å†æ˜¯è¿‡å»çš„æˆ‘äº†ã€‚</p></blockquote><iframe class="center_iframe" src="//player.bilibili.com/player.html?aid=764441478&bvid=BV1Mr4y1Q7oW&cid=450409272&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><blockquote><p>&emsp;&emsp;å¹´åº•çš„æ—¶å€™çœ‹åˆ°è¿™ä¸ªè§†é¢‘ï¼Œæ·±å—è§¦åŠ¨ã€‚<br>&emsp;&emsp;å½“æ—¶ Up ç»„çš„ 27 å²å¯¹è¯è§†é¢‘ï¼Œæˆ‘å½“æ—¶è¿˜åœ¨å¤§ä¸‰è¿·èŒ«çš„æ—¶å€™çœ‹è¿‡ï¼Œå¦‚ä»Šçœ‹è¿™ä¸ªå¯¹è¯è§†é¢‘ï¼Œæˆ‘ä»¿ä½›çœ‹åˆ°å½“æ—¶çš„æˆ‘è‡ªå·±ã€‚<br>&emsp;&emsp;éå¸¸çš„æœ‰æ„Ÿè§¦ï¼Œç‰©æ˜¯äººéï¼Œå‹¿å¿˜åˆå¿ƒã€‚<br>&emsp;&emsp;æ‰€ä»¥æˆ‘ä¹Ÿæƒ³ä»¥æ–‡ç« çš„å½¢å¼åšä¸€ä¸ªå°å¯¹è¯ï¼Œå¦‚æœä»¥åæœ‰æœºä¼šçš„è¯ï¼Œä¹Ÿæƒ³è¦å­¦ä¹  Up ä¸»ä¸€æ ·åšä¸ª vlog<br>&emsp;&emsp;è¿™é‡Œæˆ‘å°±ç»™è‡ªå·±å†™ä¸€ä»½ä¿¡ï¼Œå¸Œæœ›æ˜å¹´çš„è‡ªå·±å¯ä»¥é‡æ‹¾ç°åœ¨çš„å¿ƒå¢ƒï¼Œå‹¿å¿˜åˆå¿ƒã€‚ <a href="3cefe25e.html">é“¾æ¥</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      Goodbye 2021
    
    </summary>
    
      <category term="å¹´åº¦æ€»ç»“" scheme="https://blog.l0v0.com/categories/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="âœ’åšå®¢/äººç”Ÿ" scheme="https://blog.l0v0.com/tags/%E2%9C%92%E5%8D%9A%E5%AE%A2-%E4%BA%BA%E7%94%9F/"/>
    
      <category term="ğŸ§å›é¡¾" scheme="https://blog.l0v0.com/tags/%F0%9F%A7%90%E5%9B%9E%E9%A1%BE/"/>
    
  </entry>
  
  <entry>
    <title>Quicker ç¼–è¾‘å™¨å¿«æ·é”®</title>
    <link href="https://blog.l0v0.com/posts/190b1e59.html"/>
    <id>https://blog.l0v0.com/posts/190b1e59.html</id>
    <published>2021-09-25T06:24:00.000Z</published>
    <updated>2022-07-30T07:31:57.319Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>&emsp;&emsp;å·¥ä½œä¸€å¹´æœ‰ä½™äº†ï¼Œä¸€ç›´ä¸èˆå¾—åœ¨è¿™äº›è½¯ä»¶é¢†åŸŸä¸Šé¢èŠ±é’±ã€‚<br>&emsp;&emsp;æ„Ÿè§‰è‡ªå·±è¿˜æ˜¯å­¦ç”Ÿï¼ŒèŠ±é’±æ€»æ˜¯çœç€èŠ±ï¼Œåªä¹°ä¸€äº›åˆšéœ€çš„äº§å“ã€‚<br>&emsp;&emsp;çœä¸‹çš„é’±å…ˆæ”¾åˆ°å¤§éƒ¨åˆ†åˆ°æ”¾åˆ°äº†ç™¾ä¿¡é“¶è¡Œçš„é’±åŒ… plus é‡Œé¢äº† (åˆ©ç‡æ¯” é›¶é’±é€š æ”¯ä»˜å® è¦é«˜ä¸€ç‚¹ç‚¹)<br>&emsp;&emsp;å¦å¤–éƒ¨åˆ†è´­ä¹°äº†åŸºé‡‘ï¼Œåªæ˜¯ç›®å‰çš„å¸‚åœºè¡Œæƒ…ä¸å¤ªå¥½ï¼Œåªèƒ½è¯´æ”¾ç€ä¸ç®¡å§ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;<a href="https://getquicker.net/">Quicker</a> æˆ‘æ¯”è¾ƒæ—©å°±æ¥è§¦äº†ï¼Œå…·ä½“å¯ä»¥çœ‹æˆ‘ä»¥å‰çš„<a href="./fcc8e205.html">æ•ˆç‡æå‡æŒ‡å—</a>çš„æ¨èã€‚<br>&emsp;&emsp;å®ƒçš„å…è´¹åŠŸèƒ½å°±å·²ç»æ”¯æŒå¤šç«¯åŒæ­¥ï¼Œèƒ½å¤Ÿæ»¡è¶³å¤§éƒ¨åˆ†ä½¿ç”¨æƒ…æ™¯ï¼Œéå¸¸è‰¯å¿ƒã€‚<br>&emsp;&emsp;ä¹Ÿå› ä¸ºè¿™æ ·æˆ‘ä¸€ç›´ä¸èˆå¾—èŠ±é’±ä»˜è´¹ä½“éªŒï¼Œè€Œä¸”éƒ¨åˆ†ä»˜è´¹çš„åŠŸèƒ½æˆ‘ä¹Ÿæœ‰å…¶ä»–è½¯ä»¶ä½œä¸ºè¾…åŠ©æ›¿ä»£ã€‚<br>&emsp;&emsp;æ— è®ºå¦‚ä½•ï¼Œè¿™ä¸ªè½¯ä»¶ç›®å‰è¿˜åœ¨æä¿ƒé”€ï¼Œå¹´è´¹ç€å®ä¸è´µã€‚ <a href="https://getquicker.net/pricing">ä»˜è´¹é“¾æ¥</a><br>&emsp;&emsp;è¿™ä¹ˆè‰¯å¿ƒçš„è½¯ä»¶ï¼Œå¦‚æœæ²¡äººæ”¯æŒå€’äº†ï¼Œé‚£ç¡®å®å°±å¾ˆå¯æƒœï¼Œæ‰€ä»¥å°±å›½äº§ä¹‹å…‰è€Œè¨€ï¼Œä¹Ÿè¦æ”¯æŒä¸€æ³¢ã€‚<br>&emsp;&emsp;ä»˜è´¹ä¹‹åå¯ä»¥è®©æˆ‘å°†å¤šä¸ªè½¯ä»¶æ•´åˆæˆä¸€ä¸ªè½¯ä»¶ï¼Œä½¿ç”¨ä½“éªŒæå‡äº†ä¸å°‘ï¼Œè€Œä¸”å¤šç«¯åŒæ­¥éå¸¸æ–¹ä¾¿ï¼Œä¸ç”¨æ¯å°ç”µè„‘éƒ½è¿›è¡Œè½¯ä»¶é…ç½®ã€‚</p></blockquote><h2 id="æ›¿ä»£-WGesture"><a href="#æ›¿ä»£-WGesture" class="headerlink" title="æ›¿ä»£ WGesture"></a>æ›¿ä»£ WGesture</h2><blockquote><p>&emsp;&emsp;ä¹‹å‰æˆ‘çš„æ‰‹åŠ¿æ»‘åŠ¨æ–¹æ¡ˆæ˜¯ç”¨å…è´¹çš„ WGesture ï¼Œå…·ä½“å¯ä»¥å‚è€ƒæˆ‘è¿™ä¸€ç¯‡æ–‡ç«  <a href="./82cd243a.html">é“¾æ¥</a></p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/190b1e59/01.png" alt="Alt"></p><blockquote><p>&emsp;&emsp;Quicker çš„ä»˜è´¹åŠŸèƒ½ä¹Ÿæ”¯æŒé¼ æ ‡æ‰‹åŠ¿ï¼Œå› ä¸ºæˆ‘å·²ç»ç”¨æƒ¯äº† WGesture ï¼Œæ‰€ä»¥ç›´æ¥å°†æ‰‹åŠ¿åŠŸèƒ½è¿ç§»åˆ°äº† Quicker<br>&emsp;&emsp;ç›®å‰å¤§éƒ¨åˆ†åŠŸèƒ½éƒ½èƒ½å¾ˆå¥½æ”¯æŒï¼Œéƒ¨åˆ†æ‰‹åŠ¿æ¯”å¦‚æ»‘ç‰¹å®šæ‰‹åŠ¿åŠ æ»šè½®è°ƒèŠ‚éŸ³é‡ä¹‹ç±»å°±åšä¸åˆ°äº†ã€‚<br>&emsp;&emsp;ä¸è¿‡è¿™äº›å°é—®é¢˜å¹¶ä¸å½±å“ï¼Œquickerè‡ªå¸¦çš„å±å¹•ä¸Šæ–¹æ»šåŠ¨è°ƒèŠ‚éŸ³é‡ä¹Ÿéå¸¸æ–¹ä¾¿ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;å¦å¤–é€šè¿‡ quicker å¯ä»¥å¤šç«¯åŒæ­¥æˆ‘è‡ªå·±å®šä¹‰çš„æ‰‹åŠ¿ï¼Œè¿™æ¯” WGesture è¦æ–¹ä¾¿ä¸å°‘ã€‚<br>&emsp;&emsp;è™½ç„¶ WGesture ä¹Ÿå¯ä»¥å¯¼å‡ºé…ç½®æ–‡ä»¶ï¼Œç„¶åç”¨åšæœäº‘åŒæ­¥é…ç½®æ–‡ä»¶ï¼Œæ€»ç»“èµ·æ¥è¿˜æ˜¯ Quicker è‡ªåŠ¨åŒæ­¥æ–¹ä¾¿å¾—å¤šã€‚</p></blockquote><h2 id="æ ‡ç‚¹ç¬¦å·æ›¿æ¢"><a href="#æ ‡ç‚¹ç¬¦å·æ›¿æ¢" class="headerlink" title="æ ‡ç‚¹ç¬¦å·æ›¿æ¢"></a>æ ‡ç‚¹ç¬¦å·æ›¿æ¢</h2><blockquote><p>&emsp;&emsp;ä»¥å‰æˆ‘æ˜¯ç”¨ capslock+ åŸºäº <a href="https://www.autohotkey.com/">autohotkey</a> è®¾è®¡çš„ä¸€å¥— capslock é”®é”®ç›˜æ˜ å°„ã€‚<br>&emsp;&emsp;å¹¶ä¸”åˆ©ç”¨ authotkey çš„ <a href="https://www.autohotkey.com/docs/Hotstrings.htm">hotstring</a> åŠŸèƒ½æ¥è¾“å…¥ä¸­æ–‡æ ‡ç‚¹ï¼Œè¿™æ ·æˆ‘å¯ä»¥å°†è¾“å…¥æ³•çš„æ ‡ç‚¹ç¬¦å·è¾“å…¥æ”¹ä¸ºè‹±æ–‡ï¼Œé¿å…æˆ‘å†™ä»£ç çš„æ—¶å€™è¾“å…¥ä¸­æ–‡æ ‡ç‚¹å¯¼è‡´å‡ºé”™ã€‚<br>&emsp;&emsp;å…·ä½“çš„é…ç½®å†ç¨‹å¯ä»¥å‚ç…§æˆ‘é­”æ”¹çš„ capslock+ çš„ä»“åº“ <a href="https://github.com/FXTD-ODYSSEY/capslock-plus">é“¾æ¥</a><br>&emsp;&emsp;ä¸è¿‡å¦‚ä»Šå¯ä»¥åˆ©ç”¨ quicker çš„æ–‡æœ¬æŒ‡ä»¤æ¥å®ç°ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/190b1e59/02.png" alt="Alt"></p><blockquote><p>&emsp;&emsp;quicker æ— æ³•åšåˆ° autohotkey çš„è¾“å…¥ä¸¤ä¸ªæ ‡ç‚¹ç¬¦å·è‡ªåŠ¨è½¬æ¢ä¸ºä¸­æ–‡ç¬¦å·çš„æ•ˆæœï¼Œ</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/190b1e59/03.png" alt="Alt"></p><blockquote><p>&emsp;&emsp;è®¾ç½®é‡Œé¢åªèƒ½é€‰å®šæŒ‰ç‰¹å®šçš„æŒ‰é”®æ¥è§¦å‘æ›¿æ¢ï¼Œåªæ˜¯å¤šè¾“å…¥ä¸€ä¸ªç©ºæ ¼ï¼Œæˆ‘ä¸ªäººè§‰å¾—è¿˜æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚<br>&emsp;&emsp;ä½¿ç”¨äº†ä¸€æ®µæ—¶é—´ä¹‹åå°±æ˜¯è¾“å…¥æ ‡ç‚¹å¤ªå¿«çš„è¯ä¼šæœ‰ä¸€å®šå¯èƒ½å½±å“åˆ°åé¢è¾“å…¥çš„å†…å®¹ï¼Œé€šå¸¸ä¸ä¼šæœ‰è¿™ä¹ˆå¿«çš„æ‰‹é€Ÿã€‚</p></blockquote><h2 id="é”®ç›˜æ˜ å°„"><a href="#é”®ç›˜æ˜ å°„" class="headerlink" title="é”®ç›˜æ˜ å°„"></a>é”®ç›˜æ˜ å°„</h2><blockquote><p>&emsp;&emsp;æœ‰äº†ä¸Šé¢çš„ä½“éªŒä¹‹åï¼Œæˆ‘å°±æƒ³è¿›ä¸€æ­¥å–ä»£æ‰ capslock+ çš„åŠŸèƒ½ã€‚<br>&emsp;&emsp;æ°å·§å‰æ®µæ—¶é—´çœ‹ä¸Šäº†ä¸€æ¬¾å¾ˆç¥å¥‡çš„å¸¦è§¦æ§å°é”®ç›˜ <a href="https://www.bilibili.com/video/BV1aA411571Y">prestigio</a> å¿ƒåŠ¨ç›´æ¥å‰æ‰‹äº†ã€‚<br>&emsp;&emsp;ä¹°ä¹‹å‰æœ¬æ¥æƒ³ç”¨è§¦æ§å®Œå…¨å–ä»£é¼ æ ‡çš„ï¼Œä½†æ˜¯å®é™…ä¸Šä½¿ç”¨ Maya ä¹‹ç±»çš„è½¯ä»¶è¿˜æ˜¯ä¸å¯èƒ½ç¦»å¼€é¼ æ ‡ã€‚<br>&emsp;&emsp;æ‰€ä»¥ä¹°å›æ¥ä¹‹åå…¶å®å¾ˆå°‘ç”¨åˆ°è§¦æ§åŠŸèƒ½ï¼Œæ¯•ç«Ÿå·²ç»ç”¨æƒ¯é¼ æ ‡äº†ï¼Œä¸è¿‡å®ƒçš„å°å·§è½»ä¾¿ä¾æ—§æˆä¸ºæˆ‘åŠå…¬çš„æ—¥å¸¸åˆ©å™¨ã€‚<br>&emsp;&emsp;åªæ˜¯å°é”®ç›˜çš„ä¸€å¤§é—®é¢˜å°±æ˜¯ æ–¹å‘é”® ç¼©åœ¨å³ä¸‹è§’çš„è§’è½é‡Œï¼Œä½¿ç”¨èµ·æ¥éå¸¸ä¸æ–¹ä¾¿ã€‚<br>&emsp;&emsp;äºæ˜¯æˆ‘æƒ³åˆ°äº† capslock+ çš„é”®ç›˜æ˜ å°„åŠŸèƒ½ã€‚ <a href="https://capslox.com/capslock-plus/">é“¾æ¥</a><br>&emsp;&emsp;capslock+ å°†æ–¹å‘é”®æ˜ å°„ä¸º ESDF å››ä¸ªé”®(é…åˆ capslock é”®ä¸€èµ·æŒ‰)<br>&emsp;&emsp;ç»è¿‡æˆ‘è‡ªå·±ä¸€ç•ªæŠ˜è…¾ä½“éªŒä¹‹åï¼Œè¿˜æ˜¯è§‰å¾—æ¸¸æˆé‡Œé¢çš„ WASD é”®æ¯”è¾ƒé¡ºæ‰‹ï¼Œæ‰€ä»¥æˆ‘åœ¨ Quicker é‡Œé¢å¤ç°äº†è¿™ä¸€æ•´å¥—é…ç½®ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/190b1e59/04.png" alt="Alt"></p><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/190b1e59/05.png" alt="Alt"></p><blockquote><p>&emsp;&emsp;æˆ‘ä¹Ÿå°†é”®ç›˜é å³çš„æŒ‰é”®ï¼Œæ¯”å¦‚å›è½¦é”® delé”® backspaceé”® æ˜ å°„åˆ°å·¦è¾¹æ¥ï¼Œè¿™æ ·æˆ‘å°±ä¸ç”¨æ¾å¼€é¼ æ ‡çš„å³æ‰‹äº†ã€‚<br>&emsp;&emsp;ç»è¿‡äº†ä¸€ä¸ªæœˆçš„ç†Ÿæ‚‰ä¹‹åï¼Œæˆ‘è§‰å¾—è¿™å¥—é”®ç›˜æ˜ å°„éå¸¸é¦™ï¼Œç¼ºç‚¹å°±æ˜¯åœ¨åˆ«äººçš„ç”µè„‘ä¸Šä¼šä¸‹æ„è¯†ç”¨ capslock+WASD å»æ•²æ–¹å‘é”®ï¼Œç»“æœä¸èµ·ä½œç”¨ï¼Œç€å®è®©æˆ‘å¾ˆæŠ“ç‹‚ã€‚</p></blockquote><table><thead><tr><th>æºæŒ‰é”®</th><th>æ˜ å°„æŒ‰é”®(é…åˆ capslock ä¸€èµ·æŒ‰)</th></tr></thead><tbody><tr><td>â†‘</td><td>W</td></tr><tr><td>â†</td><td>A</td></tr><tr><td>â†“</td><td>S</td></tr><tr><td>â†’</td><td>D</td></tr><tr><td>Backspace</td><td>Q</td></tr><tr><td>Del</td><td>R</td></tr><tr><td>Home</td><td>1</td></tr><tr><td>End</td><td>3</td></tr></tbody></table><blockquote><p>&emsp;&emsp;åŸºæœ¬çš„æ˜ å°„å¦‚å›¾æ‰€ç¤ºï¼Œé…åˆ ctrl shift çš„æŒ‰é”®éƒ½éœ€è¦å•ç‹¬é…ç½®ï¼Œæ‰€ä»¥èŠ±äº†æˆ‘ä¸å°‘æ—¶é—´ã€‚<br>&emsp;&emsp;å¦å¤–æˆ‘ä¹°çš„é”®ç›˜å¹¶ä¸æ˜¯å…¨é”®æ— å†²çªçš„ï¼Œè¿™å¯¼è‡´æœ‰äº›å¿«æ·é”®æ— æ³•è§¦å‘ï¼Œæ¯”å¦‚æˆ‘çš„ prestigio é”®ç›˜çš„ <code>capslock+shift+S</code> å°±æ˜¯æ— æ³•ä¸èµ·ä½œç”¨ï¼Œ<br>&emsp;&emsp;æˆ‘å½“åˆè¿˜ä»¥ä¸ºæ˜¯ quicker çš„ BUG ï¼Œè¿˜ç‰¹æ„å» github ç»™ä»–æäº† issue ï¼Œç„¶åæ‰å‘ç°æ˜¯é”®ç›˜çš„é—®é¢˜ï¼Œå› ä¸ºæ¢äº†ä¸€ä¸ªé”®ç›˜å°±å¯ä»¥è§¦å‘äº†ã€‚<br>&emsp;&emsp;ä¸è¿‡å…¨é”®æ— å†²çªçš„é”®ç›˜ä¹Ÿæ˜¯è´µæ­»ï¼Œè€Œä¸”å¿…è¦æ€§å¾ˆå°ï¼Œæ‰€ä»¥æŸäº›é—®é¢˜å¯ä»¥å¿è€ä¸€ä¸‹ï¼Œæ¯”å¦‚è¯´ç”¨å…¶ä»–çš„æŒ‰é”®æ˜ å°„æ¥è§£å†³é—®é¢˜ã€‚</p></blockquote><h2 id="ç¼–è¾‘å™¨åŠŸèƒ½é”®"><a href="#ç¼–è¾‘å™¨åŠŸèƒ½é”®" class="headerlink" title="ç¼–è¾‘å™¨åŠŸèƒ½é”®"></a>ç¼–è¾‘å™¨åŠŸèƒ½é”®</h2><blockquote><p>&emsp;&emsp;æœ‰äº†ä¸Šé¢çš„é”®ç›˜æ˜ å°„ä¹‹åï¼Œæˆ‘æœ‰æƒ³åˆ°å¯ä»¥å°† VScode çš„éƒ¨åˆ†ç¼–è¾‘å™¨ç‰¹æœ‰çš„åŠŸèƒ½é›†æˆåˆ°æŒ‰é”®é‡Œé¢ã€‚<br>&emsp;&emsp;æ¯•ç«ŸæŒ‰é”®è§¦å‘æ˜¯å¯ä»¥è°ƒç”¨ Quicker åŠ¨ä½œçš„ï¼Œæˆ‘å¯ä»¥æ¨¡æ‹Ÿéƒ¨åˆ† VScode çš„è¾“å…¥åŠŸèƒ½ï¼Œæå‡åœ¨å¤–éƒ¨è¾“å…¥çš„ä½“éªŒã€‚<br>&emsp;&emsp;æ‰€ä»¥æˆ‘è‡ªå·±åšäº†ä¸€ä¸ªåŠ¨ä½œï¼Œè¾“å…¥å‚æ•°å®ç°ä¸€è¿ä¸²çš„è¾“å…¥ï¼Œæ¯”å¦‚è‡ªåŠ¨æ¢è¡Œåˆ°ä¸‹ä¸€è¡Œæˆ–è€…ä¸Šä¸€è¡Œï¼Œå¤åˆ¶ä¸€è¡Œï¼Œç²˜è´´ä¸€è¡Œ ç­‰ç­‰<br>&emsp;&emsp;ç¼–è¾‘å™¨è¿˜æœ‰ä¸ªéå¸¸å®ç”¨çš„æ‰©é€‰åŠŸèƒ½ï¼Œæˆ‘ä¹Ÿæƒ³é€šè¿‡ quicker åŠ¨ä½œå®ç°ï¼Œåªæ˜¯æ¯ä¸€æ¬¡å®ç°éƒ½è¦è·å–ä¸€ä¸‹å½“å‰å…‰æ ‡ä¸‹çš„æ–‡æœ¬ï¼Œç„¶åæ‰èƒ½è§£ææ‰©é€‰ï¼Œæ•ˆç‡æœ‰ç‚¹ä½ã€‚<br>&emsp;&emsp;ç›®å‰è¿˜æ²¡æœ‰å°†ç›¸åº”çš„åŠŸèƒ½ç”¨ quicker åŠ¨ä½œåšå¥½ï¼Œä»¥ååšå¥½äº†å¯ä»¥æŠ½æ—¶é—´åˆ†äº«ä¸€ä¸‹ã€‚</p></blockquote><h2 id="é”®ç›˜æ§åˆ¶é¼ æ ‡"><a href="#é”®ç›˜æ§åˆ¶é¼ æ ‡" class="headerlink" title="é”®ç›˜æ§åˆ¶é¼ æ ‡"></a>é”®ç›˜æ§åˆ¶é¼ æ ‡</h2><blockquote><p>&emsp;&emsp;ç»è¿‡ä¸Šé¢çš„æ‘¸ç´¢ä¹‹åï¼Œæˆ‘è¿˜å‘ç°é”®ç›˜æ˜ å°„æ˜¯æœ‰ç”¨æˆ·å…±äº«çš„ <a href="https://getquicker.net/share/powerkeys">é“¾æ¥</a><br>&emsp;&emsp;åº”ä¸ºè¿™ä¸ªæ˜¯ä»˜è´¹åŠŸèƒ½ï¼Œå…±äº«çš„ç”¨æˆ·å¹¶ä¸å¤šï¼Œçœ‹äº†ä¸€ä¸‹å…±äº«çš„åŠŸèƒ½ï¼Œå‘ç°è¿˜æœ‰äººç”¨é”®ç›˜æ¥æ§åˆ¶é¼ æ ‡çš„ã€‚<br>&emsp;&emsp;äºæ˜¯æˆ‘ä¹ŸåŸºäºåˆ«äººçš„ä¸€äº›å†™æ³•ï¼Œåšäº†ç‹¬å±äºè‡ªå·±çš„ä¸€å¥—é”®ç›˜æ§åˆ¶é¼ æ ‡çš„é€»è¾‘ã€‚</p></blockquote><p><a href="https://getquicker.net/Share/PowerKeys/Package?id=46ba49bd-cbbd-4e8c-71d5-08d96b96059c">é¼ æ ‡æ§åˆ¶å…±äº«</a></p><blockquote><p>&emsp;&emsp;ä¸Šé¢æ˜¯æˆ‘åšçš„é”®ç›˜æ˜ å°„å…±äº«ã€‚</p></blockquote><table><thead><tr><th>ç»„åˆé”®(æŒ‰ä½ Tab é”®)</th><th>æ ‡é¢˜</th><th>æ“ä½œç±»å‹</th></tr></thead><tbody><tr><td>3</td><td>é¼ æ ‡å³é”®</td><td>PlayKeyMouseData</td></tr><tr><td>â†</td><td>å‘å·¦ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>â†‘</td><td>å‘ä¸Šç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>â†’</td><td>å‘å³ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>â†“</td><td>å‘ä¸‹ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>1</td><td>é¼ æ ‡å·¦é”®</td><td>PlayKeyMouseData</td></tr><tr><td>2</td><td>é¼ æ ‡ä¸­é”®</td><td>PlayKeyMouseData</td></tr><tr><td>4</td><td>X1é”®</td><td>PlayKeyMouseData</td></tr><tr><td>5</td><td>X2é”®</td><td>PlayKeyMouseData</td></tr><tr><td>A</td><td>å‘å·¦ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>D</td><td>å‘å³ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>E</td><td>å‘åæ»šåŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>Q</td><td>å‘å‰æ»šåŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>S</td><td>å‘ä¸‹ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>W</td><td>å‘ä¸Šç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>Space + â†</td><td>å¿«é€Ÿå‘å·¦ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>Space + â†‘</td><td>å¿«é€Ÿå‘ä¸Šç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>Space + â†’</td><td>å¿«é€Ÿå‘å³ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>Space + â†“</td><td>å¿«é€Ÿå‘ä¸‹ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>Space + A</td><td>å¿«é€Ÿå‘å·¦ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>Space + D</td><td>å¿«é€Ÿå‘å³ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>Space + E</td><td>å¿«é€Ÿå‘åæ»šåŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>Space + Q</td><td>å¿«é€Ÿå‘å‰æ»šåŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>Space + S</td><td>å¿«é€Ÿå‘ä¸‹ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>Space + W</td><td>å¿«é€Ÿå‘ä¸Šç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>Space + F1</td><td>æŒ‰ä¸‹é¼ æ ‡å·¦é”®</td><td>PlayKeyMouseData</td></tr><tr><td>Space + F2</td><td>æŒ‰ä¸‹é¼ æ ‡ä¸­é”®</td><td>PlayKeyMouseData</td></tr><tr><td>Space + F3</td><td>æŒ‰ä¸‹é¼ æ ‡å³é”®</td><td>PlayKeyMouseData</td></tr><tr><td>LeftAlt + â†</td><td>è½»å¾®å‘å·¦ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>LeftAlt + â†‘</td><td>è½»å¾®å‘ä¸Šç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>LeftAlt + â†’</td><td>è½»å¾®å‘å³ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>LeftAlt + â†“</td><td>è½»å¾®å‘ä¸‹ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>LeftAlt + A</td><td>è½»å¾®å‘å·¦ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>LeftAlt + D</td><td>è½»å¾®å‘å³ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>LeftAlt + E</td><td>è½»å¾®å‘åæ»šåŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>LeftAlt + Q</td><td>è½»å¾®å‘å‰æ»šåŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>LeftAlt + S</td><td>è½»å¾®å‘ä¸‹ç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>LeftAlt + W</td><td>è½»å¾®å‘ä¸Šç§»åŠ¨</td><td>PlayKeyMouseData</td></tr><tr><td>LeftAlt + F1</td><td>æ¾å¼€é¼ æ ‡å·¦é”®</td><td>PlayKeyMouseData</td></tr><tr><td>LeftAlt + F2</td><td>æ¾å¼€é¼ æ ‡ä¸­é”®</td><td>PlayKeyMouseData</td></tr><tr><td>LeftAlt + F3</td><td>æ¾å¼€é¼ æ ‡å³é”®</td><td>PlayKeyMouseData</td></tr></tbody></table><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/190b1e59/07.png" alt="Alt"></p><blockquote><p>&emsp;&emsp;åŸºæœ¬ä¸Šæ€æƒ³ä¹Ÿæ˜¯ WASD ç§»åŠ¨é¼ æ ‡ï¼Œ12345 è¡¨ç¤ºé¼ æ ‡å·¦ä¸­å³é”® + X1 X2 é”®ï¼ŒQ E é”®åšé¼ æ ‡æ»šè½®<br>&emsp;&emsp;æŒ‰ä½ç©ºæ ¼é”®æ˜¯åŠ é€Ÿç§»åŠ¨ï¼ŒæŒ‰ä½ alt é”®æ˜¯ç•¥å¾®ç§»åŠ¨ã€‚<br>&emsp;&emsp;æˆ‘è¿˜åŠ äº† F1 F2 F3 ç”¨æ¥æ¨¡æ‹ŸæŒ‰ä½é¼ æ ‡æŒ‰é”®çš„æ•ˆæœï¼Œåªæ˜¯ç”¨èµ·æ¥å¾ˆä¸æ–¹ä¾¿ï¼Œå¾ˆå°‘ä¼šç”¨åˆ°ï¼Œå¹¶ä¸”æˆ‘çš„ prestigio é”®ç›˜æœ‰å®ä½“çš„é¼ æ ‡æŒ‰é”®ï¼ŒæŒ‰é‚£ä¸ªæ›´æ–¹ä¾¿ä¸€ç‚¹ã€‚</p></blockquote><h2 id="ç²˜è´´æ¿"><a href="#ç²˜è´´æ¿" class="headerlink" title="ç²˜è´´æ¿"></a>ç²˜è´´æ¿</h2><blockquote><p>&emsp;&emsp;ä»¥å‰çš„ç²˜è´´æ¿æˆ‘æ˜¯ç½‘ä¸Šæ¨èçš„ Ditto è¿›è¡Œè®°å½•çš„ã€‚<br>&emsp;&emsp;ç°åœ¨å¯ä»¥ç»“åˆ Quicker çš„ä¸€ä¸ªåŠ¨ä½œ <a href="https://getquicker.net/Sharedaction?code=9ec53d43-5539-4571-6886-08d8c752bfcb">ç²˜è´´æ¿</a> æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œä»˜è´¹ä¹‹åå°±å¯ä»¥ç”¨ å¿«æ·é”® è§¦å‘åŠ¨ä½œï¼Œä½¿ç”¨ä¸Šæ›´åŠ æ–¹ä¾¿ã€‚</p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/190b1e59/06.png" alt="Alt"></p><blockquote><p>&emsp;&emsp;æ—¥å¸¸ä½“éªŒå·²ç»å®Œå…¨å¯ä»¥æ›¿ä»£ ditto ã€‚<br>&emsp;&emsp;ditto è¿˜æœ‰åˆ†ç»„ä¹‹ç±»çš„åŠŸèƒ½ï¼Œå…¶å®ä½¿ç”¨å¹¶ä¸å¤šã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>&emsp;&emsp;quicker ä»·æ ¼ä¾¿å®œï¼Œè´­ä¹°ä¹‹åä¾¿åˆ©æå‡äº†ä¸å°‘ï¼Œå¼ºçƒˆæ¨èã€‚<br>&emsp;&emsp;æ— è®ºä½œè€…è¿˜æ˜¯ç¤¾åŒºéƒ½åœ¨æœç€ <code>all in one</code> çš„é“è·¯è¿ˆè¿›<br>&emsp;&emsp;æˆ‘å·²ç»æ‰¾åˆ°äº†å’Œ listary ç›¸ä¼¼çš„å¯åŠ¨å™¨åŠ¨ä½œ <a href="https://getquicker.net/Sharedaction?code=152618d3-6c3c-49e8-afef-08d8f6743496">æ™ºæœ</a><br>&emsp;&emsp;å¯æƒœè¿™ä¸ªåŠ¨ä½œçš„å…¨ç›˜æœç´¢æ˜¯åŸºäº everything çš„ï¼Œä¹Ÿä¸çŸ¥é“å¦‚ä½•è®¾å®šåˆ°å½“å‰ç›®å½•ä¸‹è¿›è¡Œæœç´¢ï¼Œæˆ‘ä½“éªŒäº†ä¸€æ®µæ—¶é—´è¿˜æ˜¯æ¢å›äº† listaryã€‚<br>&emsp;&emsp;listary å¦ä¸€ä¸ªåˆ‡æ¢ç›®å½•çš„åŠŸèƒ½ ä¹Ÿæœ‰ åŠ¨ä½œæ¨¡æ‹Ÿ <a href="https://getquicker.net/Sharedaction?code=415d9d0f-bc9c-4710-c434-08d7e719849b">å¿«é€Ÿåˆ‡æ¢</a><br>&emsp;&emsp;ä½“éªŒä¸Šè™½ç„¶æ¯” Quicker è¦æ…¢ä¸€ç‚¹ï¼Œä½†èƒ½å¤Ÿæ»¡è¶³æˆ‘çš„éœ€æ±‚å°±å·²ç»è°¢å¤©è°¢åœ°äº†ã€‚</p></blockquote><blockquote><p>&emsp;&emsp;æœ€åæˆªå›¾ä¸Šï¼Œä¹Ÿæœ‰ <a href="https://getquicker.net/Sharedaction?code=57738e7e-9b34-4add-efd8-08d71d5bdffe">Everæˆªå›¾</a> ç¥å™¨<br>&emsp;&emsp;å¯ä»¥ä½¿ç”¨ quicker æä¾›çš„æˆªå›¾åŠŸèƒ½ï¼Œquicker çš„å¿«é€Ÿæˆªå›¾åšå¾—å¾ˆæƒ³ snipaste ï¼Œç›®å‰å·²ç»å¯ä»¥é’‰å›¾äº†ï¼Œåªæ˜¯è¿˜ç¼ºå°‘å›¾ç”»åŠŸèƒ½ï¼Œå› æ­¤è¿˜å°šæœªèƒ½å–ä»£ snipaste<br>&emsp;&emsp;Everæˆªå›¾çš„å¼ºå¤§åœ¨äºæ”¯æŒç¬¬ä¸‰æ–¹æˆªå›¾åŠŸèƒ½ï¼Œè·å–ç²˜è´´æ¿çš„å›¾ç‰‡å¯ä»¥åšåç»­çš„è¯¸å¤šæ“ä½œï¼Œæ¯”å¦‚è¯†åˆ«æˆ–è€…æœç´¢</p></blockquote><blockquote><p>&emsp;&emsp;ç›®å‰æˆ‘çš„æ—¥å¸¸ä½¿ç”¨å·²ç»ç¦»ä¸å¼€ quicker ï¼Œå¸Œæœ› quicker èƒ½å¤Ÿå†æ¥å†å‰ï¼Œæä¾›æ›´å¥½çš„ä½“éªŒ~</p></blockquote>]]></content>
    
    <summary type="html">
    
      ç»“åˆ Quicker ä»˜è´¹åŠŸèƒ½ | æ˜ å°„é”®ç›˜é”®ä½
    
    </summary>
    
      <category term="æ•ˆç‡æå‡æŒ‡å—" scheme="https://blog.l0v0.com/categories/%E6%95%88%E7%8E%87%E6%8F%90%E5%8D%87%E6%8C%87%E5%8D%97/"/>
    
    
      <category term="à °Windows" scheme="https://blog.l0v0.com/tags/%E0%A0%B0Windows/"/>
    
      <category term="ğŸš€æ•ˆç‡" scheme="https://blog.l0v0.com/tags/%F0%9F%9A%80%E6%95%88%E7%8E%87/"/>
    
      <category term="ğŸ’¾è½¯ä»¶" scheme="https://blog.l0v0.com/tags/%F0%9F%92%BE%E8%BD%AF%E4%BB%B6/"/>
    
  </entry>
  
</feed>
