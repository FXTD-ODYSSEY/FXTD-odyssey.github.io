<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Arnold é£æ ¼åŒ–æ¸²æŸ“ç ”ç©¶ | æ™ºä¼¤å¸çš„ä¸ªäººåšå®¢</title><meta name="keywords" content="ğŸ‡¨ğŸ‡¬CG/Arnold,ğŸ‡¨ğŸ‡¬CG/OSL"><meta name="author" content="æ™ºä¼¤å¸"><meta name="copyright" content="æ™ºä¼¤å¸"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="Arnold shader å¼€å‘">
<meta property="og:type" content="article">
<meta property="og:title" content="Arnold é£æ ¼åŒ–æ¸²æŸ“ç ”ç©¶">
<meta property="og:url" content="https://blog.l0v0.com/posts/84ce2047.html">
<meta property="og:site_name" content="æ™ºä¼¤å¸çš„ä¸ªäººåšå®¢">
<meta property="og:description" content="Arnold shader å¼€å‘">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/84ce2047/01.png">
<meta property="article:published_time" content="2020-04-08T01:20:11.000Z">
<meta property="article:modified_time" content="2022-07-21T06:37:45.420Z">
<meta property="article:author" content="æ™ºä¼¤å¸">
<meta property="article:tag" content="ğŸ‡¨ğŸ‡¬CG&#x2F;Arnold">
<meta property="article:tag" content="ğŸ‡¨ğŸ‡¬CG&#x2F;OSL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/84ce2047/01.png"><link rel="shortcut icon" href="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/img/favicon.png"><link rel="canonical" href="https://blog.l0v0.com/posts/84ce2047.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="preconnect" href="//zz.bdstatic.com"/><meta name="google-site-verification" content="google15d1ccb0af66991a"/><meta name="msvalidate.01" content="D306EED72EF12BF89A2A951583FF91C7"/><meta name="baidu-site-verification" content="A3TUx6EZdy"/><meta name="360-site-verification" content="48ce68b0e3754c994b6e79677b842d48"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?cda99107ced8e9ef4d02339065438d4f";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '4.2.1',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2022-07-21 14:37:45'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {
  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }

  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }
})()</script><link rel="stylesheet" href="/css/iconfont.css"><link rel="stylesheet" href="/css/extra.css"><meta name="generator" content="Hexo 4.2.1"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">åŠ è½½ä¸­...</div></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" data-lazy-src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/img/avatar.png" onerror="onerror=null;src='//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">292</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">60</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">67</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´çº¿</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹æƒ…é“¾æ¥</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> ç³»åˆ—æ€»ç»“</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/%E6%95%88%E7%8E%87%E6%8F%90%E5%8D%87%E6%8C%87%E5%8D%97/"><span> æ•ˆç‡æå‡æŒ‡å—</span></a></li><li><a class="site-page" href="/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unreal/Python"><span> Unreal Python</span></a></li><li><a class="site-page" href="/categories/Python/Python-%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83/"><span> Python ç¼–ç¨‹è§„èŒƒ</span></a></li><li><a class="site-page" href="/categories/CG/Qt/Python%E7%BB%93%E5%90%88Qt%E7%B3%BB%E5%88%97%E5%BC%80%E5%8F%91%E6%95%99%E7%A8%8B/"><span> Python Qt å¼€å‘æ•™ç¨‹</span></a></li><li><a class="site-page" href="/tags/VScode/"><span> VScode å…¨é¢ä½¿ç”¨æ”»ç•¥</span></a></li><li><a class="site-page" href="/categories/Wiki/TiddlyWiki-%E9%A3%9F%E7%94%A8%E6%8C%87%E5%8D%97"><span> TiddlyWiki ä½¿ç”¨æŒ‡å—</span></a></li><li><a class="site-page" href="/categories/%E5%89%8D%E7%AB%AF/hexo/"><span> Hexoåšå®¢æ­å»ºå†ç¨‹</span></a></li><li><a class="site-page" href="/categories/Photogrammetry/"><span> Photogrammetry</span></a></li><li><a class="site-page" href="/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unity/Shader%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF/"><span> Shaderå­¦ä¹ ä¹‹è·¯</span></a></li><li><a class="site-page" href="/categories/CG/Maya/Maya%20%E7%A0%94%E7%A9%B6%E8%AE%B0%E5%BD%95"><span> Maya ç ”ç©¶è®°å½•</span></a></li><li><a class="site-page" href="/categories/%E5%89%8D%E7%AB%AF/Vue/Vue%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF/"><span> Vueå­¦ä¹ ä¹‹è·¯</span></a></li><li><a class="site-page" href="/categories/%E5%9B%9E%E5%BF%86%E5%BD%95/"><span> å›å¿†å½•</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-user"></i><span> å…³äºæˆ‘</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> åšå®¢åˆå¿ƒ</span></a></li><li><a class="site-page" href="/about/log.html"><i class="fa-fw fa fa-gift"></i><span> åšå®¢æ—¥å¿—</span></a></li><li><a class="site-page" href="https://wiki.l0v0.com/" target="_blank" rel="noopener"><i class="fa-fw fa fa-book"></i><span> wiki æ–‡æ¡£</span></a></li><li><a class="site-page" href="http://hou.l0v0.com" target="_blank" rel="noopener"><i class="fa-fw fa fa-futbol"></i><span> Houdini Wiki</span></a></li><li><a class="site-page" href="/about/todo.html"><i class="fa-fw fa fa-check"></i><span> æ›´æ–°è®¡åˆ’</span></a></li><li><a class="site-page" href="/about/plan.html"><i class="fa-fw fa fa-lightbulb"></i><span> æ•™ç¨‹è®¡åˆ’</span></a></li><li><a class="site-page" href="/about/focus.html"><i class="fa-fw fa fa-bullseye"></i><span> å…³æ³¨åˆ—è¡¨</span></a></li><li><a class="site-page" href="/about/note/note.html"><i class="fa-fw fa fa-sticky-note"></i><span> æˆ‘çš„ç¬”è®°</span></a></li><li><a class="site-page" href="/about/my_work.html"><i class="fa-fw fa fa-briefcase"></i><span> æˆ‘çš„ä½œå“</span></a></li><li><a class="site-page" href="/about/contact.html"><i class="fa-fw fa fa-id-badge"></i><span> è”ç³»æˆ‘</span></a></li></ul></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å‰è¨€"><span class="toc-number">1.</span> <span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç´ æç ”ç©¶å‡†å¤‡"><span class="toc-number">2.</span> <span class="toc-text">ç´ æç ”ç©¶å‡†å¤‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Arnold-C-å¼€å‘"><span class="toc-number">3.</span> <span class="toc-text">Arnold C++ å¼€å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ç®€å•çš„æ’ä»¶å¼€å‘æ–¹æ³•"><span class="toc-number">3.1.</span> <span class="toc-text">ç®€å•çš„æ’ä»¶å¼€å‘æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Arnold-æ’ä»¶å¼€å‘è§„èŒƒ"><span class="toc-number">3.2.</span> <span class="toc-text">Arnold æ’ä»¶å¼€å‘è§„èŒƒ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é£æ ¼åŒ–æ¸²æŸ“ç ”ç©¶"><span class="toc-number">4.</span> <span class="toc-text">é£æ ¼åŒ–æ¸²æŸ“ç ”ç©¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#æ¸²æŸ“åœºæ™¯æ¢³ç†"><span class="toc-number">4.1.</span> <span class="toc-text">æ¸²æŸ“åœºæ™¯æ¢³ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Houdini-ç‚¹äº‘ç”Ÿæˆ"><span class="toc-number">4.2.</span> <span class="toc-text">Houdini ç‚¹äº‘ç”Ÿæˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Maya-èŠ‚ç‚¹æ­å»º"><span class="toc-number">4.3.</span> <span class="toc-text">Maya èŠ‚ç‚¹æ­å»º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aiQuantize"><span class="toc-number">4.4.</span> <span class="toc-text">aiQuantize</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aiQuantizeCutEdge"><span class="toc-number">4.5.</span> <span class="toc-text">aiQuantizeCutEdge</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#align-uvcoords-to-vec-osl-å¤„ç†"><span class="toc-number">4.6.</span> <span class="toc-text">align_uvcoords_to_vec osl å¤„ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#facingratio-cam"><span class="toc-number">4.7.</span> <span class="toc-text">facingratio_cam</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è¾“å‡º"><span class="toc-number">4.8.</span> <span class="toc-text">è¾“å‡º</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€»ç»“"><span class="toc-number">5.</span> <span class="toc-text">æ€»ç»“</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/84ce2047/01.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">æ™ºä¼¤å¸çš„ä¸ªäººåšå®¢</a></span><span id="menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´çº¿</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹æƒ…é“¾æ¥</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> ç³»åˆ—æ€»ç»“</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/%E6%95%88%E7%8E%87%E6%8F%90%E5%8D%87%E6%8C%87%E5%8D%97/"><span> æ•ˆç‡æå‡æŒ‡å—</span></a></li><li><a class="site-page" href="/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unreal/Python"><span> Unreal Python</span></a></li><li><a class="site-page" href="/categories/Python/Python-%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83/"><span> Python ç¼–ç¨‹è§„èŒƒ</span></a></li><li><a class="site-page" href="/categories/CG/Qt/Python%E7%BB%93%E5%90%88Qt%E7%B3%BB%E5%88%97%E5%BC%80%E5%8F%91%E6%95%99%E7%A8%8B/"><span> Python Qt å¼€å‘æ•™ç¨‹</span></a></li><li><a class="site-page" href="/tags/VScode/"><span> VScode å…¨é¢ä½¿ç”¨æ”»ç•¥</span></a></li><li><a class="site-page" href="/categories/Wiki/TiddlyWiki-%E9%A3%9F%E7%94%A8%E6%8C%87%E5%8D%97"><span> TiddlyWiki ä½¿ç”¨æŒ‡å—</span></a></li><li><a class="site-page" href="/categories/%E5%89%8D%E7%AB%AF/hexo/"><span> Hexoåšå®¢æ­å»ºå†ç¨‹</span></a></li><li><a class="site-page" href="/categories/Photogrammetry/"><span> Photogrammetry</span></a></li><li><a class="site-page" href="/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unity/Shader%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF/"><span> Shaderå­¦ä¹ ä¹‹è·¯</span></a></li><li><a class="site-page" href="/categories/CG/Maya/Maya%20%E7%A0%94%E7%A9%B6%E8%AE%B0%E5%BD%95"><span> Maya ç ”ç©¶è®°å½•</span></a></li><li><a class="site-page" href="/categories/%E5%89%8D%E7%AB%AF/Vue/Vue%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF/"><span> Vueå­¦ä¹ ä¹‹è·¯</span></a></li><li><a class="site-page" href="/categories/%E5%9B%9E%E5%BF%86%E5%BD%95/"><span> å›å¿†å½•</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-user"></i><span> å…³äºæˆ‘</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> åšå®¢åˆå¿ƒ</span></a></li><li><a class="site-page" href="/about/log.html"><i class="fa-fw fa fa-gift"></i><span> åšå®¢æ—¥å¿—</span></a></li><li><a class="site-page" href="https://wiki.l0v0.com/" target="_blank" rel="noopener"><i class="fa-fw fa fa-book"></i><span> wiki æ–‡æ¡£</span></a></li><li><a class="site-page" href="http://hou.l0v0.com" target="_blank" rel="noopener"><i class="fa-fw fa fa-futbol"></i><span> Houdini Wiki</span></a></li><li><a class="site-page" href="/about/todo.html"><i class="fa-fw fa fa-check"></i><span> æ›´æ–°è®¡åˆ’</span></a></li><li><a class="site-page" href="/about/plan.html"><i class="fa-fw fa fa-lightbulb"></i><span> æ•™ç¨‹è®¡åˆ’</span></a></li><li><a class="site-page" href="/about/focus.html"><i class="fa-fw fa fa-bullseye"></i><span> å…³æ³¨åˆ—è¡¨</span></a></li><li><a class="site-page" href="/about/note/note.html"><i class="fa-fw fa fa-sticky-note"></i><span> æˆ‘çš„ç¬”è®°</span></a></li><li><a class="site-page" href="/about/my_work.html"><i class="fa-fw fa fa-briefcase"></i><span> æˆ‘çš„ä½œå“</span></a></li><li><a class="site-page" href="/about/contact.html"><i class="fa-fw fa fa-id-badge"></i><span> è”ç³»æˆ‘</span></a></li></ul></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Arnold é£æ ¼åŒ–æ¸²æŸ“ç ”ç©¶</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2020-04-08T01:20:11.000Z" title="å‘è¡¨äº 2020-04-08 09:20:11">2020-04-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2022-07-21T06:37:45.420Z" title="æ›´æ–°äº 2022-07-21 14:37:45">2022-07-21</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/CG/">CG</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/CG/Arnold/">Arnold</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">4.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>17åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><a id="more"></a>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote>
<p>&emsp;&emsp;æœ€è¿‘æˆ‘çš„ä¸Šçº§æœ‰ä¸ªå…³äº Arnold é£æ ¼åŒ–æ¸²æŸ“çš„ç ”ç©¶æ–¹å‘ï¼Œåˆšå¥½æ²¡æœ‰äººæï¼Œæ‰€ä»¥æˆ‘å°±æ¥æè¿™ä¸ªä¸œè¥¿çš„ç ”ç©¶äº†ã€‚<br>&emsp;&emsp;å½“æ—¶ä»–å°±é’ˆå¯¹ osl ç›¸å…³çš„é—®é¢˜å’¨è¯¢äº†æˆ‘ã€‚<br>&emsp;&emsp;è™½ç„¶æˆ‘å¬è¯´è¿‡ osl ï¼Œä¸è¿‡å¯¹äºä»–çš„ç†è§£å’Œç ”ç©¶ä¹Ÿåªæ˜¯æµ®äºè¡¨é¢è€Œå·²ã€‚<br>&emsp;&emsp;è®°å¾—å»å¹´å¿«è¿‡å¹´çš„æ—¶å€™ï¼Œä¸Šå®¶å…¬å¸çš„ä¸»ç®¡ä¹Ÿæ‰¾äº†æˆ‘è®©æˆ‘å»ç ”ç©¶ osl å¼€å‘ å’Œ Alembic API<br>&emsp;&emsp;å¯æƒœè¿‡å¹´å›æ¥ä¹‹åå°±æ˜¯å„ç§ publish æµç¨‹å¼€å‘æ‰€ä»¥ä¸€ç›´æ²¡æœ‰æ—¶é—´å’Œç²¾åŠ›å»å¼„è¿™ä¸ªã€‚</p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;åæ¥å¯¹äº osl çš„åŠŸèƒ½ä¹Ÿæ˜¯é€šè¿‡ä¸€æ¬¡ TD äº¤æµä¼šé‡Œé¢å­¦åˆ°çš„ã€‚<br>&emsp;&emsp;å½“æ—¶æ¸²æŸ“å¤§ä½¬æœ‰è®²åˆ°ä»–ä»¬ä½¿ç”¨ osl æ¥å¤„ç†è´´å›¾çš„æ–¹æ¡ˆã€‚</p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;å½“æ—¶å°±æåˆ° TriplanerProjection ç«‹ä½“æŠ•å°„çš„æ¦‚å¿µï¼Œè®©æˆ‘æƒ³èµ·äº†ä¹‹å‰çœ‹ unreal æ•™ç¨‹å¤„ç†è´´å›¾ã€‚ <a href="./11d100be.html#æ— ç¼æŠ•å°„è´´å›¾æè´¨">æ•™ç¨‹æ–‡ç« </a><br>&emsp;&emsp;é€šè¿‡è¿™ä¸ªæ–¹æ³•å¯ä»¥åšå‡ºæ— ç¼è¡”æ¥æ— çº¿çº¹ç†çš„è´´å›¾æ•ˆæœã€‚<br>&emsp;&emsp;oslä½œä¸º shader è¯­è¨€è‡ªç„¶ä¹Ÿæ˜¯å¯ä»¥ç±»ä¼¼ unreal çš„ hlsl ä¸€æ ·å®ç°çš„ã€‚</p>
</blockquote>
<hr>
<blockquote>
<p>&emsp;&emsp;ä¸è¿‡è¿™ä¸€æ¬¡ä¸Šçº§ç»™äº†æˆ‘ä¸€ä¸ªæ›´ç¥å¥‡çš„é£æ ¼åŒ–æ•ˆæœã€‚<a href="http://www.zenopelgrims.com/project-arnold-brushstroke-shader-quantize.html" target="_blank" rel="noopener">é“¾æ¥</a><br>&emsp;&emsp;å›½å¤–çš„å¤§ä½¬å·²ç»åšå¥½äº†ï¼ŒåŸç†ä¹Ÿå·²ç»å†™åœ¨äº†ä¸Šé¢ï¼Œå…·ä½“æ€ä¹ˆå®ç°çš„è¿˜æ˜¯éœ€è¦èŠ±æ—¶é—´å»ç ”ç©¶å‡ºæ¥ã€‚</p>
</blockquote>
<h2 id="ç´ æç ”ç©¶å‡†å¤‡"><a href="#ç´ æç ”ç©¶å‡†å¤‡" class="headerlink" title="ç´ æç ”ç©¶å‡†å¤‡"></a>ç´ æç ”ç©¶å‡†å¤‡</h2><blockquote>
<p>&emsp;&emsp;ä¸Šé¢çš„é“¾æ¥å·²ç»æä¾›äº†å…è´¹ä¸”å®Œæ•´çš„ç´ æèµ„æºï¼Œä½†æ˜¯å¦‚æœè¦ C++ æºç å°±éœ€è¦èŠ± 60 æ¬§å…ƒè´­ä¹°äº†ã€‚<br>&emsp;&emsp;å…¶å®æˆ‘è¿˜æ˜¯å¾ˆç–‘æƒ‘çš„ï¼Œæˆ‘è®¤ä¸ºæ—¢ç„¶æœ‰ osl ä¸ºå•¥è¿˜éœ€è¦ C++ ç”Ÿæˆ dllï¼Œè«éè¿™ä¸ª dll ä¹Ÿæ˜¯ osl ç”Ÿæˆçš„ã€‚</p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;äºæ˜¯æˆ‘åˆå»åˆ°äº† osl çš„ github ä»“åº“æœç½—äº†ä¸€åœˆï¼Œå‘ç° osl éœ€è¦ C++ ç¼–è¯‘æˆå·¥å…·ï¼Œç„¶åé€šè¿‡å·¥å…·ç¼–è¯‘ osl æºç æ‰èƒ½è¿è¡Œèµ·æ¥ã€‚<br>&emsp;&emsp;äºæ˜¯æˆ‘åˆå¼€å§‹ç ”ç©¶æ€ä¹ˆç¼–è¯‘å‡º oslçš„ç¼–è¯‘å·¥å…·ï¼Œæ ¹æ® github ä¸Šæä¾›çš„ <a href="https://github.com/imageworks/OpenShadingLanguage/blob/master/INSTALL.md" target="_blank" rel="noopener">buildæŒ‡å¼•</a>ï¼Œå¼€å§‹å‡†å¤‡å¾ˆå¤š C++ åº“_(:Ğ·ã€âˆ )__<br>&emsp;&emsp;ä¸è¿‡ä¹Ÿåœ¨è¿™é‡Œé‡æ–°è®¤è¯†äº†ä¸€é LLVM ç¥å™¨ï¼Œä»¥åŠå®Œç¾çš„ CLang ç¼–è¯‘å·¥å…·ï¼Œ æ€»ç®—æ˜¯çŸ¥é“æ€ä¹ˆåœ¨ windows ä¸‹ç¼–è¯‘ C++ è€Œä¸éœ€è¦é€šè¿‡å®‰è£… VS è¿™ç§åºç„¶å¤§ç‰©äº†ã€‚<br>&emsp;&emsp;ä»¥å‰çœ‹æ•™ç¨‹çœ‹åˆ° Mac å†…ç½®äº† gcc å°±è§‰å¾—ç‰¹åˆ«æ–¹ä¾¿ï¼Œä¸è¿‡ç½‘ä¸Šçš„æ‰€æœ‰èµ„æ–™éƒ½æŒ‡å‡ºåœ¨ windows ä¸‹è¿˜æ˜¯æ¨è VS å…¨å®¶æ¡¶æ¥ç¼–è¯‘ï¼Œæˆ‘ä¹‹å‰æ Maya C++ å¼€å‘å°±å·²ç»è£…äº†æ‰€ä»¥æˆ‘å°±ä¸éœ€è¦å¤šåšå…¶ä»–çš„æ“ä½œã€‚</p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;ç„¶åå°±æ˜¯ç»§ç»­ä¸‹è½½å„ç§ç¥å¥‡çš„ C++ åº“ï¼Œè¶ç€æœ‰æ—¶é—´ï¼Œåˆå»å­¦ä¹ ç¿» Arnold çš„æ–‡æ¡£çœ‹ osl ä»¥åŠå» youtube æ‰¾ osl ç›¸å…³çš„æ•™ç¨‹ã€‚<a href="https://www.youtube.com/watch?v=vBZ0WaOl_B8&amp;t=717s" target="_blank" rel="noopener">æ•™ç¨‹é“¾æ¥</a><br>&emsp;&emsp;äºæ˜¯æˆ‘å°±å‘ç°ï¼ŒArnold è²Œä¼¼å·²ç»å†…ç½®äº† osl çš„ç¼–è¯‘å·¥å…·äº†ï¼Œåœ¨ youtube ä¸Šæ‰¾åˆ°æ•™ç¨‹ï¼Œå¯ä»¥çœ‹åˆ° Maya2019 çš„ç‰ˆæœ¬å·²ç»æä¾›äº† osl èŠ‚ç‚¹å®æ—¶ç¼–è¯‘ osl ç”Ÿæˆæ•ˆæœäº†ã€‚<br>&emsp;&emsp;æ‰€ä»¥æˆ‘æåˆ°è¿™é‡Œå°±æ­¤æ‰“ä½äº†ï¼Œåº”è¯¥ arnold å·²ç»é…å¥—å¥½ osl çš„ç¼–è¯‘å·¥å…·äº†ï¼Œæˆ‘ä¸éœ€è¦æŠŠè¿™ä¸€æ­¥ç¼–è¯‘æ“ä½œä¹Ÿåšäº†ã€‚</p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;äºæ˜¯æˆ‘è¿›ä¸€æ­¥ç ”ç©¶ Arnold çš„å®˜æ–¹æ–‡æ¡£ï¼ŒæŠ˜è…¾äº†ä¸€åœˆæ‰çŸ¥é“ï¼Œè¿™ä¸ª dll æ˜¯ Arnold çš„ C++ shader å¼€å‘åšçš„ï¼Œ osl å­˜åœ¨ä¸€äº›ä¸èƒ½å®ç°çš„æ•ˆæœ <a href="https://blender.stackexchange.com/questions/2719/osl-and-raytracing/2754" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a><br>&emsp;&emsp;oslæ˜¯ç”¨æ¥å®šä¹‰ shader æ˜¾ç¤ºçš„æ•ˆæœï¼Œæ²¡æœ‰åŠæ³•æ§åˆ¶æ¸²æŸ“å™¨é‡‡æ ·ï¼Œå› æ­¤å…³äº raytracing ç›¸å…³çš„ä¸œè¥¿éœ€è¦ç”¨ Arnold çš„ C++ shader æ¥é…åˆã€‚</p>
</blockquote>
<h2 id="Arnold-C-å¼€å‘"><a href="#Arnold-C-å¼€å‘" class="headerlink" title="Arnold C++ å¼€å‘"></a>Arnold C++ å¼€å‘</h2><h3 id="ç®€å•çš„æ’ä»¶å¼€å‘æ–¹æ³•"><a href="#ç®€å•çš„æ’ä»¶å¼€å‘æ–¹æ³•" class="headerlink" title="ç®€å•çš„æ’ä»¶å¼€å‘æ–¹æ³•"></a>ç®€å•çš„æ’ä»¶å¼€å‘æ–¹æ³•</h3><blockquote>
<p>&emsp;&emsp;åŸºäºä¸Šé¢çš„ä¿¡æ¯ï¼Œå¯ä»¥å» Arnold çš„æ–‡æ¡£ç ”ç©¶æ€ä¹ˆé€šè¿‡ C++ ç¼–è¯‘å™¨ç”Ÿæˆä¸€ä¸ª Arnold å¯ç”¨çš„ dll æ–‡ä»¶ã€‚<br>&emsp;&emsp;å®˜æ–¹çš„æ–‡æ¡£å°±æœ‰æ€ä¹ˆå®ç°ä¸€ä¸ªç®€å•çš„æ’ä»¶ï¼Œæ“ä½œåªéœ€è¦è·Ÿç€å®˜æ–¹åšä¸€éå°±å¤§è‡´äº†è§£äº†ã€‚<a href="https://docs.arnoldrenderer.com/display/A5ARP/Creating+a+Simple+Plugin" target="_blank" rel="noopener">æ–‡æ¡£</a></p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;ç›´æ¥å°†å®˜æ–¹æä¾›çš„ assæ–‡ä»¶ å’Œ cppæ–‡ä»¶ å¼„æˆæœ¬åœ°çš„æ–‡ä»¶ã€‚ <a href="https://github.com/FXTD-ODYSSEY/arnold_dev_learning/tree/master/arnold_plugin/official/0_Creating%20a%20Simple%20Plugin" target="_blank" rel="noopener">githubå‚è€ƒ</a><br>&emsp;&emsp;ç„¶åå°±æ˜¯ä¸‹è½½ Arnold SDK è°ƒç”¨ clang-cl æ¥ç¼–è¯‘äº†ã€‚<br>&emsp;&emsp;Arnold SDK å¯ä»¥åœ¨è¿™ä¸ª<a href="https://www.arnoldrenderer.com/arnold/download/archive/" target="_blank" rel="noopener">é“¾æ¥</a>ä¸‹è½½ã€‚<br>&emsp;&emsp;éœ€è¦æ³¨æ„è‡ªå·±ä½¿ç”¨è½¯ä»¶çš„ Arnold ç‰ˆæœ¬ï¼Œå­˜åœ¨ç‰ˆæœ¬ä¸å…¼å®¹çš„æƒ…å†µã€‚</p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;ä¸Šé¢åšå‡†å¤‡ç ”ç©¶çš„æ—¶å€™å°±å·²ç»è£…ä¸Šäº† LLVM ï¼Œå› æ­¤å°±å¯ä»¥ä½¿ç”¨ clang-cl æ¥ç¼–è¯‘ C++ äº†ã€‚<br>&emsp;&emsp;æˆ‘ä¸ªäººè§‰å¾— VS å¤ªè¿‡å¤æ‚äº†ï¼Œåè€Œæä¸æ¸…æ¥šè¿™äº›ç¼–è¯‘æ“ä½œçš„åŸæœ¬é¢è²Œï¼Œä¸å¤ªå‹å¥½ã€‚<br>&emsp;&emsp;arnold å®˜æ–¹ç»™çš„ç¼–è¯‘å‘½ä»¤ä¹Ÿæ˜¯ å‘½ä»¤è¡Œä»£ç ï¼Œåªéœ€è¦å¤åˆ¶åˆ°å‘½ä»¤è¡Œï¼Œå°† cl æ”¹ä¸º clang-cl å°± OK äº†ã€‚</p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;æˆ‘è‡ªå·±æµ‹è¯•çš„æ—¶å€™ï¼Œ Arnold çš„ SDK ç¯å¢ƒå˜é‡è²Œä¼¼ä¸å¤ªå¥æ•ˆï¼Œå› æ­¤æˆ‘è¿˜æ˜¯ç”¨äº†ç»å¯¹è·¯å¾„ã€‚<br>&emsp;&emsp;åé¢æˆ‘å°±å¹²è„†å†™æˆäº†ä¸€ä¸ª <a href="https://github.com/FXTD-ODYSSEY/arnold_dev_learning/blob/master/arnold_plugin/arnold_pluigin_compile.py" target="_blank" rel="noopener">python æ–‡ä»¶</a>ï¼Œç›´æ¥éå†æ–‡ä»¶ç›®å½•ä¸‹æ‰€æœ‰çš„ cpp æ–‡ä»¶è‡ªåŠ¨ç¼–è¯‘è¾“å‡ºã€‚</p>
</blockquote>
<hr>
<blockquote>
<p>&emsp;&emsp;ç¼–è¯‘çš„æ—¶å€™ä¼šæœ‰ä¸€ä¸ªè­¦å‘Šï¼Œåªéœ€è¦å°† strcpy å†…ç½®å‡½æ•°æ”¹ä¸º strcpy_s å°±ä¸ä¼šæœ‰è­¦å‘Šäº†ã€‚<br>&emsp;&emsp;ç¼–è¯‘æˆåŠŸä¹‹åå°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„ dll æ–‡ä»¶ï¼Œ pythonä»£ç ä¹Ÿå°†ä¸€äº›ä¸ç›¸å¹²çš„æ–‡ä»¶ç»Ÿç»Ÿåˆ é™¤äº†ã€‚<br>&emsp;&emsp;æœ€åå°±æ˜¯å°† dll æ–‡ä»¶æ”¾åˆ° arnold çš„ plugins ç›®å½•ä¸‹å³å¯è¯»å–ã€‚<br>&emsp;&emsp;ä»¥ Maya çš„ Arnold ä¸ºä¾‹ï¼Œåªéœ€è¦å°† dll æ”¾åˆ° <code>C:\solidangle\mtoadeploy\$maya_version\plugins</code>  è¿™ä¸ªè·¯å¾„å³å¯ã€‚ ($maya_version æŒ‡ Mayaçš„ç‰ˆæœ¬æ¯”å¦‚ 2017ã€2018)</p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;æœ€åä¸€æ­¥å°±æ˜¯å°† ass æ–‡ä»¶æ‹–åˆ° Maya é‡Œé¢ï¼Œç‚¹å‡» Arnold æ¸²æŸ“ã€‚<br>&emsp;&emsp;å°±å¯ä»¥çœ‹åˆ°å’Œå®˜æ–¹æ–‡æ¡£å®Œå…¨ä¸€è‡´çš„ çº¢è‰²çƒä½“ äº†ã€‚</p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;å½“ç„¶å¦‚æœç¼–è¯‘çš„ç‰ˆæœ¬å¯¹ä¸ä¸Šæˆ–è€…å“ªé‡Œæ“ä½œä¸å¯¹å°±æ˜¯ ç´«è‰² çš„ã€‚</p>
</blockquote>
<h3 id="Arnold-æ’ä»¶å¼€å‘è§„èŒƒ"><a href="#Arnold-æ’ä»¶å¼€å‘è§„èŒƒ" class="headerlink" title="Arnold æ’ä»¶å¼€å‘è§„èŒƒ"></a>Arnold æ’ä»¶å¼€å‘è§„èŒƒ</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// https://docs.arnoldrenderer.com/display/A5ARP/Creating+a+Simple+Plugin</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ai.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line">AI_SHADER_NODE_EXPORT_METHODS(SimpleMethods);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">enum</span> SimpleParams &#123; p_color &#125;;</span><br><span class="line"> </span><br><span class="line">node_parameters</span><br><span class="line">&#123;</span><br><span class="line">   AiParameterRGB(<span class="string">"color"</span>, <span class="number">0.7f</span>, <span class="number">0.7f</span>, <span class="number">0.7f</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">node_initialize&#123;&#125;</span><br><span class="line">node_update&#123;&#125;</span><br><span class="line">node_finish&#123;&#125;</span><br><span class="line"> </span><br><span class="line">shader_evaluate</span><br><span class="line">&#123;</span><br><span class="line">   <span class="comment">// sg æ˜¯æŒ‡ AtShaderGlobals ç±»å‹</span></span><br><span class="line">   sg-&gt;out.RGB() = AiShaderEvalParamRGB(p_color);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">node_loader</span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">if</span> (i &gt; <span class="number">0</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">   node-&gt;methods     = SimpleMethods;</span><br><span class="line">   node-&gt;output_type = AI_TYPE_RGB;</span><br><span class="line">   node-&gt;name        = <span class="string">"simple"</span>;</span><br><span class="line">   node-&gt;node_type   = AI_NODE_SHADER;</span><br><span class="line">   strcpy_s(node-&gt;version, AI_VERSION);</span><br><span class="line">   <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>&emsp;&emsp;ä¸€ä¸ª Arnold cpp æ–‡ä»¶å¿…é¡»è¦åŒ…å«æœ‰ä¸Šé¢è¿™ç§ç»“æ„<br>&emsp;&emsp;æ ¹æ®åå­—å°±å¯ä»¥åˆ¤æ–­å‡ºè¿™ä¸ªèŠ‚ç‚¹çš„ ç”Ÿå‘½å‘¨æœŸ ï¼Œ å­¦è¿‡ threejs å°±å¾ˆå¥½ç†è§£äº†ã€‚<br>&emsp;&emsp;node å¯¹åº”çš„æ˜¯ èŠ‚ç‚¹å±‚ çš„æ“ä½œ è€Œ shader_evaluate å°±æ˜¯æè´¨å±‚çš„æ“ä½œäº†ã€‚</p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;è¿™é‡Œé¢ç”¨åˆ°äº† sg å¯¹è±¡è®©æˆ‘éå¸¸å›°æƒ‘ï¼Œè€Œä¸”è¿™ä¸ªä¸œè¥¿åœ¨ æ–‡æ¡£ æœç´¢ä¹Ÿæ‰¾ä¸å‡ºæ‰€ä»¥ç„¶ã€‚<br>&emsp;&emsp;åæ¥åœ¨çœ‹å…¶ä»–çš„ä»£ç ä¸­å‘ç° sg åŸæ¥æ˜¯ AtShaderGlobals ç±»å‹ï¼Œå†æŸ¥ä¸€ä¸‹è¿™ä¸ªç±»å‹çš„<a href="https://docs.arnoldrenderer.com/api/arnold-6.0.2.1/structAtShaderGlobals.html" target="_blank" rel="noopener">æ–‡æ¡£</a>å°±æ¸…æ¥šäº†</p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;è‡³äº enum ç±»å‹ç±»éœ€è¦ç½—åˆ—å‡ºå¯ä»¥æ¥å…¥çš„å±æ€§åç§°ï¼Œéœ€è¦åŠ å…¥ <code>p_</code> å‰ç¼€ï¼Œè¿™ä¸ªä¸ºå•¥æ²¡æœ‰æ‰¾åˆ°ä½è¯ï¼Œæœ€å¥½è¿˜æ˜¯æŒ‰ç…§å®˜æ–¹çš„å†™æ³•åŠ ä¸Š <code>p_</code> å¼€å¤´çš„å‰ç¼€å’Œä¸‹é¢ <code>AiParameterRGB</code> ä»¥åŠ <code>AiShaderEvalParamRGB</code> è°ƒç”¨å¯¹åº”ã€‚</p>
</blockquote>
<h2 id="é£æ ¼åŒ–æ¸²æŸ“ç ”ç©¶"><a href="#é£æ ¼åŒ–æ¸²æŸ“ç ”ç©¶" class="headerlink" title="é£æ ¼åŒ–æ¸²æŸ“ç ”ç©¶"></a>é£æ ¼åŒ–æ¸²æŸ“ç ”ç©¶</h2><blockquote>
<p>&emsp;&emsp;ç»è¿‡ä¸Šé¢çš„ä¸€ç•ªæŠ˜è…¾ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€æ­¥å›åˆ°æœ€å¼€å§‹è¦ç ”ç©¶çš„æ•ˆæœäº† <a href="http://www.zenopelgrims.com/project-arnold-brushstroke-shader-quantize.html" target="_blank" rel="noopener">é“¾æ¥</a></p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;æˆ‘ç ”ç©¶çš„è¿‡ç¨‹æ˜¯éå¸¸åå·çš„ï¼Œä½†æ˜¯ç°åœ¨ç ”ç©¶é€äº†ï¼Œå¯ä»¥é‡å¤´æ¢³ç†ä¸€éï¼Œä¸å®¹æ˜“äº§ç”Ÿæ··ä¹±ã€‚<br>&emsp;&emsp;é¦–å…ˆè¿™ä¸ª Demo é‡Œé¢æä¾›çš„æ–‡ä»¶ï¼Œæˆ‘æ¢³ç†ä¹‹åæ•´ä¸ªæµç¨‹åŒ…æ‹¬äº†å‡ ä¸ªæ­¥éª¤</p>
<ul>
<li>æ¸²æŸ“åœºæ™¯çš„æ­å»º</li>
<li>Houdini è·å–æ¨¡å‹çš„ç‚¹äº‘ä¿¡æ¯</li>
<li>Maya æ­å»ºæ¸²æŸ“å¤„ç†èŠ‚ç‚¹</li>
<li>é€šè¿‡ Arnold çš„ C++ shader å’Œ osl shader å¯¹æ¸²æŸ“æ•ˆæœè¿›è¡Œé£æ ¼åŒ–å¤„ç†</li>
</ul>
</blockquote>
<p><a href="https://gumroad.com/l/WIFvn" target="_blank" rel="noopener">Demo æ–‡ä»¶ä¸‹è½½åœ°å€</a></p>
<h3 id="æ¸²æŸ“åœºæ™¯æ¢³ç†"><a href="#æ¸²æŸ“åœºæ™¯æ¢³ç†" class="headerlink" title="æ¸²æŸ“åœºæ™¯æ¢³ç†"></a>æ¸²æŸ“åœºæ™¯æ¢³ç†</h3><blockquote>
<p>&emsp;&emsp;ä¸‹è½½ Demo æ–‡ä»¶ä¹‹åæ‰“å¼€ Maya æ–‡ä»¶å¤¹é‡Œé¢çš„ maya åœºæ™¯å°±æœ‰ä¸‹é¢æ‰€ç¤ºçš„æ•ˆæœã€‚<br>&emsp;&emsp;æ‰“å¼€ä¹‹å‰éœ€è¦å…ˆå°†ç›¸åº”çš„ dll å’Œ osl æŒªåˆ° Arnold çš„æ’ä»¶ç›®å½• <code>C:\solidangle\mtoadeploy\$maya_version\plugins</code><br>&emsp;&emsp;dll åªæœ‰ä¸¤ä¸ª Arnold çš„ç¼–è¯‘ç‰ˆæœ¬ï¼Œæ¯”å¦‚æˆ‘ä½¿ç”¨çš„ 2019 å°±æ²¡æœ‰å¯¹åº”çš„ç‰ˆæœ¬ï¼Œéœ€è¦å»ä¸‹è½½ Arnold SDK æ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬é‡æ–°ç¼–è¯‘æºç ã€‚</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/84ce2047/01.png" alt="alt"></p>
<blockquote>
<p>&emsp;&emsp;æ¡ˆä¾‹æä¾›çš„åœºæ™¯æºæ–‡ä»¶åŒ…æ‹¬æ¨¡å‹æ–‡ä»¶ã€ç¯å…‰ç»„ã€ä¸‰å±‚ç‚¹äº‘å±‚<br>&emsp;&emsp;arnold çš„ ass é»˜è®¤æƒ…å†µä¸‹æ˜¯ä»¥ boundingbox æ˜¾ç¤ºï¼Œå¯ä»¥åœ¨å±æ€§ç¼–è¾‘å™¨é‡Œé¢åˆ‡æ¢ä¸º ç‚¹äº‘ æ–¹ä¾¿é¢„è§ˆã€‚<br>&emsp;&emsp;å¦å¤–æ¨¡å‹å¹¶æ²¡æœ‰ä½¿ç”¨è´´å›¾ï¼Œè€Œæ˜¯ä½¿ç”¨äº†é¡¶ç‚¹é¢œè‰²ã€‚<br>&emsp;&emsp;é»˜è®¤æƒ…å†µä¸‹ Maya çš„è§†çª—æ˜¯æ— æ³•é¢„è§ˆåˆ° æ¨¡å‹çš„é¡¶ç‚¹é¢œè‰²çš„ã€‚<br>&emsp;&emsp;æœ€åæˆ‘æ˜¯å‚è€ƒäº† Arnold çš„ä¸€ä¸ªæ•™ç¨‹è§£å†³é—®é¢˜ <a href="https://www.bilibili.com/video/BV1jx411x7Vb?p=30" target="_blank" rel="noopener">é“¾æ¥</a></p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;æ˜¾ç„¶ä¸‰ä¸ª ass æ–‡ä»¶éƒ½æ˜¯ houdini å¯¼å‡ºçš„ç‚¹äº‘ä¿¡æ¯çš„æ–‡ä»¶<br>&emsp;&emsp;å¦‚æœå»æ‰ä¸‰ä¸ª ass ç‚¹æ¸²æŸ“å°±æ˜¯çº¯ç²¹çš„æ²¡æœ‰ä»»ä½•é£æ ¼åŒ–çš„æ¸²æŸ“æ•ˆæœäº†ã€‚</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/84ce2047/origin.png" alt="alt"></p>
<blockquote>
<p>&emsp;&emsp;å› æ­¤åœ¨ç ”ç©¶ Arnold æ¸²æŸ“ä¹‹å‰é¦–å…ˆéœ€è¦ææ¸…æ¥šè¿™äº›ç‚¹äº‘ä¿¡æ¯æ˜¯å¦‚ä½•é€šè¿‡ Houdini ç”Ÿæˆçš„ã€‚<br>&emsp;&emsp;ä½œè€…çš„ Demo ç½‘é¡µä¹Ÿæä¾›äº†ç›¸å…³çš„ä¿¡æ¯ã€‚<br>&emsp;&emsp;æˆ‘ä»¬å¯ä»¥æ‰“å¼€ Houdini æ–‡ä»¶æŸ¥çœ‹ä¸€ä¸‹ï¼Œç”±äºè¿™é‡Œåˆ©ç”¨äº† Arnold æ’ä»¶å¯¼å‡º ass å¦‚æœæ²¡æœ‰å®‰è£… Houdini çš„ Arnold æ’ä»¶æ˜¯ä¼šæœ‰è­¦å‘Šçš„ã€‚</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/84ce2047/02.png" alt="alt"></p>
<blockquote>
<p>&emsp;&emsp;è¿™ä¸ªä¸å½±å“ç ”ç©¶ ç‚¹äº‘ ç”Ÿæˆ</p>
</blockquote>
<h3 id="Houdini-ç‚¹äº‘ç”Ÿæˆ"><a href="#Houdini-ç‚¹äº‘ç”Ÿæˆ" class="headerlink" title="Houdini ç‚¹äº‘ç”Ÿæˆ"></a>Houdini ç‚¹äº‘ç”Ÿæˆ</h3><p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/84ce2047/03.png" alt="alt"></p>
<blockquote>
<p>&emsp;&emsp;Houdini æ‰“å¼€åŒ…å«æœ‰ä¸¤ä¸ªæ¨¡å‹æ–‡ä»¶ã€ä¸‰å±‚ç”Ÿæˆç‚¹äº‘çš„ç»„è¿˜æœ‰ä¸€ä¸ª abc ç›¸æœºæ–‡ä»¶ã€‚<br>&emsp;&emsp;abcç›¸æœºæ–‡ä»¶ç”¨äº†ç»å¯¹è·¯å¾„ï¼Œéœ€è¦é‡æ–°æŒ‡å®šä¸€ä¸‹è·¯å¾„ï¼Œå¦åˆ™è·¯å¾„å°±åœ¨åŸç‚¹äº†ã€‚</p>
</blockquote>
<hr>
<blockquote>
<p>&emsp;&emsp;base_geo ç»„ç”Ÿæˆäº†æ¨¡å‹çš„æ³•çº¿ã€‚<br>&emsp;&emsp;è€Œ foxhead åˆ™é€šè¿‡ç»˜åˆ¶ density çš„æ–¹å¼ç”¨æ¥å•ç‹¬è°ƒæ•´é¼»å­å‘¨å›´çš„ scatter æ“ä½œã€‚ </p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/84ce2047/04.png" alt="alt"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/84ce2047/05.png" alt="alt"></p>
<blockquote>
<p>&emsp;&emsp;scatter èŠ‚ç‚¹è¿˜è¦è¾“å‡º UV çš„ä¿¡æ¯ç»™åé¢çš„ wrangle èŠ‚ç‚¹ä½¿ç”¨</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/84ce2047/06.png" alt="alt"></p>
<blockquote>
<p>&emsp;&emsp;åé¢å°±æ˜¯ä¸»è¦çš„ wrangle èŠ‚ç‚¹è¿›è¡Œçš„æ“ä½œäº†</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/84ce2047/07.png" alt="alt"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">v@p_orig &#x3D; @P;</span><br><span class="line">&#x2F;&#x2F; æ ¹æ® UV ç©ºé—´è·å–æ¨¡å‹çš„æ³•çº¿ä¿¡æ¯ | è¾“å‡ºçš„ä¸¤ä¸ªå±æ€§æ˜¯ä» scatter èŠ‚ç‚¹ç”Ÿæˆçš„</span><br><span class="line">@N &#x3D; primuv(1, &quot;N&quot;, i@sourceprim, v@sourceprimuv);</span><br><span class="line">&#x2F;&#x2F; æ²¿ç€æ³•çº¿æ–¹å‘ è¿›è¡Œéšæœºåç§»</span><br><span class="line">@P +&#x3D; @N * rand(@ptnum) * ch(&quot;distance&quot;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; rand è·å–çš„æ•°å€¼ 0 - 1 ä¹‹é—´é‡æ–°æ˜ å°„åˆ° 1.5 - 3.0 ä¹‹é—´</span><br><span class="line">&#x2F;&#x2F; è®¾ç½®ç‚¹äº‘æ¯ä¸ªç‚¹çš„åŠå¾„ | åé¢ç‚¹äº‘è½¬å¡ç‰‡é€šè¿‡è¿™ä¸ªå±æ€§å®šä¹‰å¡ç‰‡çš„å¤§å°</span><br><span class="line">@ar_radius &#x3D; fit(rand(@ptnum+1), 0.0, 1.0, 1.5, 3.0);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; è®¾ç½®ä¸¤ä¸ªç”¨æ¥å¯¼å‡ºåˆ° ass çš„å±æ€§</span><br><span class="line">v@worldPosition &#x3D; v@P;</span><br><span class="line">v@worldVelocity &#x3D; v@N;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>&emsp;&emsp;æœ€åå°±æ˜¯åˆ é™¤æ‰ä¸ç›¸å¹²çš„ä¿¡æ¯è¿›è¡Œ ass å¯¼å‡ºå³å¯ã€‚</p>
</blockquote>
<hr>
<blockquote>
<p>&emsp;&emsp;ä¸Šé¢å°±æ˜¯ç¬¬ä¸€å±‚ç‚¹äº‘ç”Ÿæˆçš„æ–¹æ¡ˆï¼Œç¬¬äºŒå±‚å’Œç¬¬ä¸‰å±‚çš„ç‚¹äº‘ç”Ÿæˆæ–¹æ¡ˆå…¶å®ä¹Ÿ å¤§å·®ä¸å·® ã€‚<br>&emsp;&emsp;ä¸»è¦æ˜¯æ·»åŠ äº†æ²¿ç€æ‘„åƒæœºåç§»çš„æ“ä½œã€‚</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/84ce2047/08.png" alt="alt"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; è·å– abcæ‘„åƒæœºçš„ transform</span><br><span class="line">matrix m &#x3D; optransform(&#39;&#x2F;obj&#x2F;rendercam_moving_001&#x2F;group2&#x2F;rendercam&#39;);</span><br><span class="line">&#x2F;&#x2F; https:&#x2F;&#x2F;www.sidefx.com&#x2F;docs&#x2F;houdini&#x2F;vex&#x2F;functions&#x2F;cracktransform.html </span><br><span class="line">vector cam_pos &#x3D; cracktransform(0, 0, 0, set(0, 0, 0), m);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æ²¿ç€æ‘„åƒæœºçš„æ–¹å‘åç§»ç‚¹äº‘</span><br><span class="line">@P +&#x3D; normalize(cam_pos - @P) * chf(&quot;dist&quot;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>&emsp;&emsp;æœ€åˆæˆ‘ä¹Ÿä¸å¤ªç†è§£ cam_pos çš„æ“ä½œæ˜¯ä»€ä¹ˆæ„æ€ã€‚ç½‘ä¸Šæ‰¾åˆ°äº†ä¸€ç¯‡æ–‡ç« è®²è§£ <a href="http://andy.moonbase.net/archives/1397" target="_blank" rel="noopener">é“¾æ¥</a></p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/84ce2047/09.gif" alt="alt"></p>
<blockquote>
<p>&emsp;&emsp;è¿™æ ·åšçš„å¥½å¤„æ˜¯æ‘„åƒæœºè§‚å¯Ÿçš„ç‚¹äº‘ä¸ä¼šæœ‰ä»»ä½•å˜åŒ–ï¼Œä½†æ˜¯ç‚¹äº‘ç›¸å¯¹æ‘„åƒæœºçš„ä½ç½®æ›´è¿‘äº†ï¼Œè¿™æ ·å°±æœ‰äº†ä¸åŒå±‚çš„å åŠ æ•ˆæœã€‚<br>&emsp;&emsp;åé¢ç‚¹äº‘åœ¨ Arnold æ¸²æŸ“æˆé¢ç‰‡ï¼Œç”±äºæ›´åŠ é è¿‘çš„ç¼˜æ•…ï¼Œå› æ­¤æ¸²æŸ“çš„é¢ç‰‡ä¼šæ›´å¤§ã€‚</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/84ce2047/10.gif" alt="alt"></p>
<blockquote>
<p>&emsp;&emsp;åœ¨ Houdini é˜¶æ®µå¯èƒ½è¿˜ä¸å¤ªèƒ½ç†è§£ä¸Šé¢åŠ¨å›¾çš„å«ä¹‰ï¼Œè¿˜æ²¡æœ‰å…³ç³»<br>&emsp;&emsp;åç»­å¯¼å‡ºéœ€è¦æ³¨æ„çš„éƒ¨åˆ†ï¼Œå·²ç»åœ¨ç½‘é¡µä¸Šå†™å¾—å¾ˆæ¸…æ¥šäº†ã€‚</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://blog-image-1257068932.cos.ap-guangzhou.myqcloud.com/CG/Arnold/paintBrush/brushstroke-shader/points_quads.png" alt="points_quads"></p>
<blockquote>
<p>&emsp;&emsp;ç‚¹äº‘çš„ç±»å‹éœ€è¦é€‰æ‹© quad ï¼Œè¿™æ · Arnold æ¸²æŸ“çš„æ—¶å€™å°±ä¼šå°†ç‚¹äº‘å½“æˆæœå‘æ‘„åƒæœºçš„é¢ç‰‡è¿›è¡Œæ¸²æŸ“ã€‚</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://blog-image-1257068932.cos.ap-guangzhou.myqcloud.com/CG/Arnold/paintBrush/brushstroke-shader/points_visibility.png" alt="points_visibility"></p>
<blockquote>
<p>&emsp;&emsp;æœ€åå¯¼å‡ºçš„æ—¶å€™éœ€è¦å°† ç‚¹äº‘ è®¾ç½®åˆ° points çš„ trace_set ã€‚<br>&emsp;&emsp;åé¢ç”¨ C++ shader è¿›è¡Œé‡‡ç”¨çš„æ—¶å€™å¯ä»¥è‡ªåŠ¨è¿‡æ»¤æ‰ã€‚</p>
</blockquote>
<h3 id="Maya-èŠ‚ç‚¹æ­å»º"><a href="#Maya-èŠ‚ç‚¹æ­å»º" class="headerlink" title="Maya èŠ‚ç‚¹æ­å»º"></a>Maya èŠ‚ç‚¹æ­å»º</h3><blockquote>
<p>&emsp;&emsp;ç»ˆäºåˆ°äº†å™©æ¢¦çš„å¼€å§‹äº†ã€‚</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://blog-image-1257068932.cos.ap-guangzhou.myqcloud.com/CG/Arnold/paintBrush/brushstroke-shader/node_network_shading_annotated.png" alt="node_network_shading_annotated"></p>
<blockquote>
<p>&emsp;&emsp;Maya é‡Œé¢æ­å»ºå‡ºä¸Šè¿°çš„èŠ‚ç‚¹è¿›è¡Œå¤„ç†ã€‚<br>&emsp;&emsp;Houdini å¯¼å‡º ass å·²ç»åŒ…å«äº†ç›¸å…³çš„ å±æ€§<br>&emsp;&emsp;å› æ­¤åœ¨ Maya é‡Œé¢å¯ä»¥é€šè¿‡ userdata è¯»å–åˆ°æ¸²æŸ“å™¨ä¸­ã€‚</p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;ä¸­é—´ ç»¿è‰²æ¡†çš„ aiQuantizeCutEdge  å’Œ ç²‰è‰² aiQuantize å°±æ˜¯ C++ ç¼–å†™çš„ shader èŠ‚ç‚¹ã€‚ <a href="https://github.com/FXTD-ODYSSEY/arnold_dev_learning/blob/master/examples/brushstrokes" target="_blank" rel="noopener">æºç </a></p>
</blockquote>
<h3 id="aiQuantize"><a href="#aiQuantize" class="headerlink" title="aiQuantize"></a>aiQuantize</h3><blockquote>
<p>&emsp;&emsp;aiQuantize èŠ‚ç‚¹çš„ä½œç”¨å°±æ˜¯ç»™ç‚¹äº‘é¢ç‰‡ä¸Šè‰²ã€‚</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://blog-image-1257068932.cos.ap-guangzhou.myqcloud.com/CG/Arnold/paintBrush/render/layer_1_second_hit.png" alt="alt"></p>
<blockquote>
<p>&emsp;&emsp;ä¸Šé¢çš„æ•ˆæœå°±æ˜¯ layer_1 è¾“å‡ºæ¸²æŸ“é€æ˜åº¦ä¸º 1 çš„æ•ˆæœã€‚</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">ShaderData* data = (ShaderData*)AiNodeGetLocalData(node);</span><br><span class="line"></span><br><span class="line">  AtVector pos = AiShaderEvalParamVec(p_pos);</span><br><span class="line">  <span class="comment">// NOTE æ³•çº¿çš„ç›¸åæ–¹å‘</span></span><br><span class="line">  AtVector dir = - AiShaderEvalParamVec(p_dir);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (data-&gt;trace_set.length()) &#123;</span><br><span class="line">    AiShaderGlobalsSetTraceSet(sg, data-&gt;trace_set, <span class="literal">false</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  AtRay ray_intersect_along_normal = AiMakeRay(AI_RAY_SUBSURFACE, pos, &amp;dir, AI_BIG, sg);</span><br><span class="line">  AtScrSample hit = AtScrSample();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(AiTrace(ray_intersect_along_normal, AI_RGB_WHITE, hit))&#123;</span><br><span class="line">    <span class="comment">// NOTE è·å–ç‚¹äº‘ç¢°æ’åˆ°æ¨¡å‹ç‚¹çš„é¢œè‰²</span></span><br><span class="line">    AtVector hitpoint = hit.<span class="built_in">point</span>;</span><br><span class="line">    <span class="comment">// NOTE è·å–æ‘„åƒæœºåˆ°ç¢°æ’ç‚¹çš„æ–¹å‘</span></span><br><span class="line">    AtVector dir_cam_hit = AiV3Normalize(hitpoint - data-&gt;cam_pos);</span><br><span class="line"></span><br><span class="line">    AtRay ray_intersect_camera = AiMakeRay(AI_RAY_SUBSURFACE, data-&gt;cam_pos, &amp;dir_cam_hit, AI_BIG, sg);</span><br><span class="line">    AtScrSample hit2 = AtScrSample();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// NOTE å¦‚æœæ‘„åƒæœºä¹Ÿèƒ½ç¢°åˆ°çš„ç‚¹æ‰èµ‹å€¼é¢œè‰²</span></span><br><span class="line">    <span class="keyword">if</span>(AiTrace(ray_intersect_camera, AI_RGB_WHITE, hit2))&#123;</span><br><span class="line">      sg-&gt;out.RGB() = hit2.color;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  AiShaderGlobalsUnsetTraceSet(sg);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>&emsp;&emsp;C++çš„ä»£ç é‡Œé¢æ˜¯ è·å–äº†ç‚¹äº‘ç‚¹çš„ä½ç½®å’Œæ³•çº¿ä¿¡æ¯ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªæ–°çš„é‡‡æ ·å…‰çº¿ï¼Œä»ç‚¹äº‘çš„ç‚¹å‡ºå‘æœæ³•çº¿çš„åæ–¹å‘ å‘ æ¨¡å‹å°„å»ã€‚ (AiMakeRay åˆ›å»ºå…‰çº¿)<br>&emsp;&emsp;ç„¶åå¯ä»¥è·å–åˆ°ç¢°æ’åˆ°æ¨¡å‹çš„ç‚¹ (AiTrace è·å–åˆ° AtScrSample æ•°æ®)</p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;ç„¶åå†ç®— ç¢°æ’åˆ°æ¨¡å‹çš„ç‚¹åˆ°æ‘„åƒæœºçš„æ–¹å‘ï¼Œå†ä»æ‘„åƒæœºå‘å°„å…‰çº¿å»ç¢°æ’æ¨¡å‹è·å–æ­£å¯¹æ‘„åƒæœºçš„é¢œè‰²è‰²å—ã€‚<br>&emsp;&emsp;è·å–åˆ°çš„é¢œè‰²èµ‹äºˆç»™ç‚¹äº‘çš„ç‚¹ä¸Šï¼Œç”±äºç‚¹äº‘æ˜¯ä»¥é¢ç‰‡çš„å½¢å¼æ¸²æŸ“ï¼Œå› æ­¤å°±æ¸²æŸ“æˆäº†ä¸€å¤§å—é¢œè‰²ã€‚</p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;å¯èƒ½ä¸Šé¢çš„é¢œè‰²ä¸€å¤§å¨ä¸å¤ªå¥½åŒºåˆ†ï¼Œæˆ‘å•ç‹¬å°† Fox é¼»å­åŒºåŸŸçš„ç‚¹äº‘æ¸²æŸ“å‡ºæ¥å°±æ¯”è¾ƒæ¸…æ™°äº†ã€‚</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://blog-image-1257068932.cos.ap-guangzhou.myqcloud.com/CG/Arnold/paintBrush/render/layer_3_quantize.png" alt="alt"></p>
<blockquote>
<p>&emsp;&emsp;å› æ­¤è¿™ä¸€æ­¥çš„å¤„ç†ä¹‹åæ˜¯ä¸€å¤§å †è‰²å—å †å åœ¨ä¸€èµ·çš„æ•ˆæœã€‚<br>&emsp;&emsp;è¿™ä¸ªå°±æ˜¯é£æ ¼åŒ–å¤„ç†çš„åº•è‰²ï¼Œåé¢å°±æ˜¯é®ç½©çš„å¤„ç†ä»è€Œè¿‡æ»¤å‡ºæ›´å¥½çš„é£æ ¼åŒ–æ•ˆæœã€‚</p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;è¿™é‡Œä¹Ÿå¯ä»¥å›è¿‡å¤´æ¥çœ‹çœ‹ä¸Šé¢æåˆ°çš„ Houdini æ²¿æ‘„åƒæœºåç§»çš„ä½œç”¨ã€‚<br>&emsp;&emsp;ç”±äºç‚¹äº‘æ›´åŠ é è¿‘æ‘„åƒæœºï¼Œå› æ­¤ç”Ÿæˆçš„é¢ç‰‡èŒƒå›´æ˜¾å¾—æ›´å¤§äº†ã€‚</p>
</blockquote>
<h3 id="aiQuantizeCutEdge"><a href="#aiQuantizeCutEdge" class="headerlink" title="aiQuantizeCutEdge"></a>aiQuantizeCutEdge</h3><blockquote>
<p>&emsp;&emsp;é€šè¿‡ä¸Šé¢çš„åº•è‰²æ•ˆæœå¯ä»¥çŸ¥é“ï¼Œç”±äºé¢ç‰‡çš„å¤§å°ä¼šå¯¼è‡´é¢œè‰²çš„æº¢å‡ºï¼Œéœ€è¦æœ‰åŒºåˆ†è¾¹ç•Œçš„æ–¹æ³•æ¥è¿‡æ»¤ã€‚<br>&emsp;&emsp;è¿™ä¸ªèŠ‚ç‚¹å°±æ˜¯ç”Ÿæˆè¿™æ ·ä¸€å¼ è¿‡æ»¤è´´å›¾ã€‚</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://blog-image-1257068932.cos.ap-guangzhou.myqcloud.com/CG/Arnold/paintBrush/render/layer_2_opacity1.0_emission_edge.png" alt="alt"></p>
<blockquote>
<p>&emsp;&emsp;å¤„ç†æ–¹æ³•å…¶å®å’Œ aiQuantize å¤§åŒå°å¼‚</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">ShaderData* data = (ShaderData*)AiNodeGetLocalData(node);</span><br><span class="line"></span><br><span class="line">AtVector pos = AiShaderEvalParamVec(p_pos);</span><br><span class="line">AtVector dir = - AiShaderEvalParamVec(p_dir);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (data-&gt;trace_set.length()) &#123;</span><br><span class="line">  AiShaderGlobalsSetTraceSet(sg, data-&gt;trace_set, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">AtVector p_orig = sg-&gt;P;</span><br><span class="line"></span><br><span class="line">AtRay ray_intersect_along_normal = AiMakeRay(AI_RAY_CAMERA, pos, &amp;dir, AI_BIG, sg);</span><br><span class="line">AtScrSample hit = AtScrSample();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(AiTrace(ray_intersect_along_normal, AI_RGB_WHITE, hit))&#123;</span><br><span class="line">  AtVector dir_cam_hit = AiV3Normalize(p_orig - data-&gt;cam_pos);</span><br><span class="line"></span><br><span class="line">  AtRay ray_intersect_camera = AiMakeRay(AI_RAY_CAMERA, data-&gt;cam_pos, &amp;dir_cam_hit, AI_BIG, sg);</span><br><span class="line">  AtScrSample hit2 = AtScrSample();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (AiTrace(ray_intersect_camera, AI_RGB_WHITE, hit2))&#123;</span><br><span class="line">      <span class="comment">// NOTE åˆ¤æ–­æ˜¯å¦ç¢°æ’ç‚¹æ‰€è·å–çš„ç‰©ä½“æ˜¯å¦ä¸€è‡´</span></span><br><span class="line">      <span class="keyword">if</span> (hit2.obj != hit.obj)&#123;</span><br><span class="line">          sg-&gt;out.RGB() = AI_RGB_BLACK;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          sg-&gt;out.RGB() = AI_RGB_WHITE;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">AiShaderGlobalsUnsetTraceSet(sg);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>&emsp;&emsp;ä¸»è¦çš„åŒºåˆ«åœ¨äºç¬¬ä¸€æ¬¡ç¢°æ’ä¹‹åï¼Œç¬¬äºŒæ¬¡å‘å°„å…‰çº¿æ˜¯å°„å‘ç‚¹äº‘çš„ä½ç½®ã€‚<br>&emsp;&emsp;åœ¨æ¨¡å‹è¾¹ç¼˜çš„ç‚¹æ¯”è¾ƒç¨€ç–ï¼Œä¼šç¨å¾®æº¢å‡ºæ¨¡å‹çš„ï¼Œå› æ­¤ç¬¬äºŒæ¬¡ç¢°æ’æ˜¯ç¢°ä¸åˆ°æ¨¡å‹çš„ã€‚<br>&emsp;&emsp;å› æ­¤å¤„äºè¾¹ç¼˜çš„ç‚¹äº‘å°±å…¨éƒ¨è¿‡æ»¤å‡ºæ¥æ¸²æŸ“å˜æˆäº†é»‘è‰²ã€‚</p>
</blockquote>
<blockquote>
<p>&emsp;&emsp;è¿™ä¸ªèŠ‚ç‚¹ä¸»è¦ç”¨æ¥è¿‡æ»¤å‡ºç¬¬ä¸€å±‚é£æ ¼åŒ–çš„æ•ˆæœã€‚</p>
</blockquote>
<h3 id="align-uvcoords-to-vec-osl-å¤„ç†"><a href="#align-uvcoords-to-vec-osl-å¤„ç†" class="headerlink" title="align_uvcoords_to_vec osl å¤„ç†"></a>align_uvcoords_to_vec osl å¤„ç†</h3><p><img src= "/img/loading.gif" data-lazy-src="https://blog-image-1257068932.cos.ap-guangzhou.myqcloud.com/CG/Arnold/paintBrush/brushstroke-shader/node_network_shading_annotated.png" alt="node_network_shading_annotated"></p>
<blockquote>
<p>&emsp;&emsp;C++ çš„éƒ¨åˆ†å·²ç»è®²å®Œï¼Œä¸‹é¢å°±æ˜¯é’ˆå¯¹ osl çš„è¿‡æ»¤å¤„ç†ã€‚<br>&emsp;&emsp;align_uvcoords_to_vec çš„ä½œç”¨å¹¸å¥½ä½œè€…è¾“å‡ºäº†å°†é£æ ¼åŒ–ç¬”è§¦æ›¿æ¢ä¸ºç®­å¤´çš„æ¸²æŸ“å›¾ï¼Œå°±éå¸¸å¥½ç†è§£äº†ã€‚</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://blog-image-1257068932.cos.ap-guangzhou.myqcloud.com/CG/Arnold/paintBrush/brushstroke-shader/stroke_automatic_alignment.png" alt="stroke_automatic_alignment"></p>
<blockquote>
<p>&emsp;&emsp;æˆ‘ä¹Ÿæµ‹è¯•äº†ä¸€ä¸‹å¦‚æœå»æ‰ align çš„æ¸²æŸ“æ•ˆæœã€‚</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/84ce2047/11.gif" alt="alt"></p>
<blockquote>
<p>&emsp;&emsp;è™½ç„¶æ•´ä½“çœ‹èµ·æ¥ä¼¼ä¹ä¸çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œå¦‚æœæ˜¯ç®­å¤´çš„è¯æ²¡æœ‰alignè‚¯å®šéƒ½æ˜¯ä¸å¸¦åè½¬è§’åº¦æœä¸Šçš„ã€‚</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">float magnitude(vector v) &#123;</span><br><span class="line">    &#x2F;&#x2F; NOTE è®¡ç®—å‘é‡çš„é•¿åº¦</span><br><span class="line">    return sqrt(v[0] * v[0] + v[1] * v[1]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">shader align_uvcoords_to_vec(</span><br><span class="line">    point p &#x3D; point(0),</span><br><span class="line">    point vec &#x3D; point(0),</span><br><span class="line">    vector scale &#x3D; vector(1),</span><br><span class="line">    output vector uv &#x3D; vector(u,v,0)</span><br><span class="line">)&#123;</span><br><span class="line">    &#x2F;&#x2F; NOTE è·å–ç‚¹äº‘ å±å¹• åæ ‡</span><br><span class="line">    point p_ss &#x3D; transform(&quot;world&quot;, &quot;screen&quot;, p);</span><br><span class="line">    &#x2F;&#x2F; NOTE è·å–ç‚¹äº‘å±å¹•åæ ‡çš„æ³•çº¿æ–¹å‘</span><br><span class="line">    point p_v_ss &#x3D; transform(&quot;world&quot;, &quot;screen&quot;, p+vec);</span><br><span class="line">    &#x2F;&#x2F; NOTE è·å–ç‚¹äº‘å±å¹•åæ ‡çš„å‘ä¸Šæ–¹å‘</span><br><span class="line">    point p_up_ss &#x3D; transform(&quot;world&quot;, &quot;screen&quot;, p+point(0, 1, 0));</span><br><span class="line"></span><br><span class="line">    vector a &#x3D; normalize(p_ss - p_v_ss);</span><br><span class="line">    vector b &#x3D; normalize(p_ss - p_up_ss);</span><br><span class="line"></span><br><span class="line">    vector a2 &#x3D; a[0] &lt; 0.0 ? a : -a;</span><br><span class="line">    &#x2F;&#x2F; NOTE è®¡ç®—å‡ºå‘ä¸Šå‘é‡å’Œæ³•çº¿å‘é‡çš„è§’åº¦å·®</span><br><span class="line">    float angle &#x3D; acos(dot(a2, b) &#x2F; (magnitude(a2)*magnitude(b)));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; NOTE å±…ä¸­æ ¹æ®è§’åº¦å·®æ—‹è½¬</span><br><span class="line">    uv &#x3D; vector(u, v, 0);</span><br><span class="line">    uv -&#x3D; 0.5;</span><br><span class="line">    uv  &#x3D; rotate(uv, angle, point(0,0,0), vector(0,0,1));</span><br><span class="line">    uv &#x2F;&#x3D; scale;</span><br><span class="line">    uv +&#x3D; 0.5;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="facingratio-cam"><a href="#facingratio-cam" class="headerlink" title="facingratio_cam"></a>facingratio_cam</h3><blockquote>
<p>&emsp;&emsp;é€šè¿‡è¿™ä¸ª osl å’Œ æ³•çº¿ç®—å‡ºæ¨¡å‹çš„æœå‘æ‘„åƒæœºçš„åŒºåŸŸï¼Œè¶Šæœå‘æ‘„åƒæœºå°±è¶Šå‘ˆç°ç™½è‰²ã€‚</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://blog-image-1257068932.cos.ap-guangzhou.myqcloud.com/CG/Arnold/paintBrush/render/facingratio_cam.png" alt="alt"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">shader facingratio_cam(</span><br><span class="line">	point pos &#x3D; point(0),</span><br><span class="line">	point vec &#x3D; point(0),</span><br><span class="line">	output float result &#x3D; 0.0</span><br><span class="line">)&#123;</span><br><span class="line">	&#x2F;&#x2F; NOTE è·å–æ‘„åƒæœºçš„ä½ç½®</span><br><span class="line">	point camerapos &#x3D; point(&quot;camera&quot;, 0, 0, 0);</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F; NOTE æ‘„åƒæœºåˆ°ç‚¹äº‘çš„å‘é‡å’Œæ³•çº¿å‘é‡çš„ç‚¹ä¹˜ | å½“æ³•çº¿å’Œå°„å‘æ‘„åƒæœºçš„å‘é‡é‡åˆæ—¶ è§’åº¦å€¼ä¸º 0 coså€¼ä¸º 1</span><br><span class="line">	result &#x3D; dot(normalize(camerapos - pos), vec);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>&emsp;&emsp;è¿™ä¸ªè¿‡æ»¤ä¸»è¦æ˜¯ä¸ºäº†è¿‡æ»¤æœå‘æ‘„åƒæœºç›¸å…³å‘é‡çš„åè½¬ï¼Œå› ä¸ºç‚¹äº‘çš„æ³•çº¿è¶Šæ˜¯æœå‘æ‘„åƒæœºï¼Œæ³•çº¿å±å¹•å‘é‡å°±éå¸¸æ¥è¿‘åŸç‚¹ã€‚<br>&emsp;&emsp;åˆ°è¿™é‡Œçš„æ—¶å€™è®¡ç®—åè½¬è§’åº¦å°±æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰äº†ï¼Œå› æ­¤å¯ä»¥é€šè¿‡è¿™ä¸ªæ¥è¿‡æ»¤ï¼Œå½“ç„¶è¿™é‡Œè¿˜éœ€è¦ç¿»è½¬ä¸€ä¸‹é¢œè‰²</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://blog-image-1257068932.cos.ap-guangzhou.myqcloud.com/CG/Arnold/paintBrush/render/facingratio_cam_range.png" alt="alt"></p>
<blockquote>
<p>&emsp;&emsp;è¿™ä¹Ÿæ˜¯ä¸ºå•¥ç®­å¤´å›¾çš„æ³•çº¿æœå‘æ‘„åƒæœºçš„éƒ¨åˆ†é¢œè‰²ä¼šå˜æµ…ã€‚<br>&emsp;&emsp;å¹¶ä¸”ç¬¬äºŒå±‚çš„è¾¹ç¼˜æ•ˆæœå¤„ç†ä¹Ÿæ˜¯ç”¨äº†è¿™é‡Œçš„æ•ˆæœè¿›è¡Œå¤„ç†ï¼Œ</p>
</blockquote>
<h3 id="è¾“å‡º"><a href="#è¾“å‡º" class="headerlink" title="è¾“å‡º"></a>è¾“å‡º</h3><blockquote>
<p>&emsp;&emsp;æœ€åå°†ä¸Šé¢çš„å¤„ç†å…¨éƒ¨åˆå¹¶åˆ°ä¸€èµ·æ‰€çœ‹åˆ°çš„è´´å›¾å¦‚ä¸‹</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://blog-image-1257068932.cos.ap-guangzhou.myqcloud.com/CG/Arnold/paintBrush/render/layer_1_opacity_mask_emission_mask.png" alt="alt"></p>
<blockquote>
<p>&emsp;&emsp;ç¬¬ä¸€å±‚é€è´´</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://blog-image-1257068932.cos.ap-guangzhou.myqcloud.com/CG/Arnold/paintBrush/render/layer_2_opacity_mask_emission_mask.png" alt="alt"></p>
<blockquote>
<p>&emsp;&emsp;ç¬¬äºŒå±‚é€è´´</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/84ce2047/full.png" alt="alt"></p>
<blockquote>
<p>&emsp;&emsp;æœ€ç»ˆæ•ˆæœ</p>
</blockquote>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote>
<p>&emsp;&emsp;è¿™ä¸€æ¬¡åˆæŸ¥äº†å¾ˆå¤š Arnold çš„æ–‡æ¡£ï¼Œå­¦åˆ°äº†å¾ˆå¤šæ–°ä¸œè¥¿ã€‚<br>&emsp;&emsp;åé¢æˆ‘è¿˜åœ¨ github ä¸Šå‘ç°äº†ç”¨ Arnold å¤„ç† å¡é€š æ•ˆæœçš„åº“ï¼Œåé¢æœ‰ç©ºå¯è¿›ä¸€æ­¥ç ”ç©¶ <a href="https://github.com/iceprincefounder/sytoons/wiki/3.syToons%E6%9D%90%E8%B4%A8" target="_blank" rel="noopener">github</a></p>
</blockquote>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">æ™ºä¼¤å¸</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://blog.l0v0.com/posts/84ce2047.html">https://blog.l0v0.com/posts/84ce2047.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://blog.l0v0.com" target="_blank">æ™ºä¼¤å¸çš„ä¸ªäººåšå®¢</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%F0%9F%87%A8%F0%9F%87%ACCG-Arnold/">ğŸ‡¨ğŸ‡¬CG/Arnold</a><a class="post-meta__tags" href="/tags/%F0%9F%87%A8%F0%9F%87%ACCG-OSL/">ğŸ‡¨ğŸ‡¬CG/OSL</a></div><div class="post_share"><div class="addtoany"><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_wechat"></a><a class="a2a_button_sina_weibo"></a><a class="a2a_button_facebook_messenger"></a><a class="a2a_button_email"></a><a class="a2a_button_copy_link"></a><a class="a2a_dd" href="https://www.addtoany.com/share" target="_blank" rel="noopener"></a></div></div><script async="async" src="https://static.addtoany.com/menu/page.js"></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> æ‰“èµ<div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/img/wechatimg.jpg" target="_blank"><img class="post-qr-code-img" data-lazy-src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/img/wechatimg.jpg" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/img/alipayimg.jpg" target="_blank"><img class="post-qr-code-img" data-lazy-src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/img/alipayimg.jpg" alt="æ”¯ä»˜å®"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/946c38e7.html"><img class="prev-cover" data-lazy-src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/img/cover_03.jpg" onerror="onerror=null;src='//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/img/404.jpg'"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Maya Standalone æå–</div></div></a></div><div class="next-post pull-right"><a href="/posts/64ea31cc.html"><img class="next-cover" data-lazy-src="//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/img/cover_03.jpg" onerror="onerror=null;src='//cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/img/404.jpg'"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">Maya MGTools&amp;animBot åŠ¨ç”»æ’ä»¶ç ”ç©¶</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/posts/8bb6468c.html" title="Maya Arnold æ¸²æŸ“è®¾ç½®å´©æºƒ"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/8bb6468c/01.gif" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-11-04</div><div class="title">Maya Arnold æ¸²æŸ“è®¾ç½®å´©æºƒ</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div><div class="comment-switch"><span class="first-comment">Valine</span><label><input id="switch-comments-btn" type="checkbox"/><span class="slider"></span></label><span class="second-comment">Gitalk</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="gitalk-container"></div></div></div></div></article></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By æ™ºä¼¤å¸</div><div class="framework-info"><span>æ¡†æ¶ </span><a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener">Butterfly</a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>ç”±</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>æä¾›æ”¯æŒ</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.spacingElementById('content-inner')
  else {
    $.getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js', () => {
      pangu.spacingElementById('content-inner')
    })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguFn)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    let initData = {
      el: '#vcomment',
      appId: 'mrRioyNTSEAOvVLAsLgkhr4j-gzGzoHsz',
      appKey: 'wHDm1kxC2FUpOA7FNdgTOEnx',
      placeholder: 'Please leave your footprints',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
    }

    if (true) { 
      initData.requiredFields= ('nick,mail'.split(','))
    }
    
    if (false) {
      const otherData = false
      initData = Object.assign({}, initData, otherData)
    }
    
    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else $.getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(() => loadValine(), 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk({
      clientID: '355e44f722e24963b9dd',
      clientSecret: 'f8ec08d349714aa06152735a75b6d9ac9ef77016',
      repo: 'FXTD-odyssey.github.io',
      owner: 'FXTD-odyssey',
      admin: ['FXTD-odyssey'],
      id: '0014394b2d6b9e6a45b92a530e0249ff',
      language: 'zh-CN',
      perPage: 10,
      distractionFreeMode: false,
      pagerDirection: 'last',
      createIssueManually: false,
      updateCountCallback: commentCount
    })
    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    $.getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js', initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Valine' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="https://cdn.jsdelivr.net/gh/wilq32/jqueryrotate/jQueryRotate.js"></script><script src="/js/classify.js"></script><script src="/js/jsdelivr.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script>(function(){
  const bp = document.createElement('script');
  const curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https'){
  bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  bp.dataset.pjax = ''
  const s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})()</script></div></body></html>